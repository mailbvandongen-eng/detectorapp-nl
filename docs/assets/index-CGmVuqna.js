const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/amkOL-C-ZXLStU.js","assets/layerLoaderOL-D6TtEeTL.js","assets/romeinsOL-CHiWIkoi.js","assets/kastelenOL-CMuMGdHT.js","assets/iconStyles-BGtUAGof.js","assets/hunebeddenOL-BOufgyHU.js","assets/uikavArcheoPuntenOL-trWAMu2K.js","assets/uikavVlakkenOL-BRljmzKJ.js","assets/uikavBufferlaagOL-C1xPcP7t.js","assets/uikavExpertOL-DoZrpeB-.js","assets/uikavUiterwaardenOL-DrA1r5OL.js","assets/speeltuinenOL-BbXdeAWj.js","assets/museaOL-D95ssxWg.js","assets/strandjesOL-DaUkd77w.js","assets/parkenOL-BYquY6jB.js","assets/kringloopwinkelsOL-CjfZrKnd.js","assets/fossielenOL-Cx9eYLDK.js","assets/fossielUtils-BugQRnKx.js","assets/fossielenBelgieOL-Db0Gn6zD.js","assets/fossielenDuitslandOL-CAxKRiDT.js","assets/fossielenFrankrijkOL-GPEDVAr1.js","assets/bunkersOL-LxPnj9H3.js","assets/grafheuvelsOL-Bzv8G2f-.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function TI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var t2={exports:{}},vg={},n2={exports:{}},Gt={};var Z4;function VG(){if(Z4)return Gt;Z4=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;function g(Y){return Y===null||typeof Y!="object"?null:(Y=d&&Y[d]||Y["@@iterator"],typeof Y=="function"?Y:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function E(Y,O,te){this.props=Y,this.context=O,this.refs=y,this.updater=te||p}E.prototype.isReactComponent={},E.prototype.setState=function(Y,O){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,O,"setState")},E.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function T(){}T.prototype=E.prototype;function R(Y,O,te){this.props=Y,this.context=O,this.refs=y,this.updater=te||p}var M=R.prototype=new T;M.constructor=R,v(M,E.prototype),M.isPureReactComponent=!0;var k=Array.isArray,V=Object.prototype.hasOwnProperty,z={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function C(Y,O,te){var ne,ee={},me=null,Se=null;if(O!=null)for(ne in O.ref!==void 0&&(Se=O.ref),O.key!==void 0&&(me=""+O.key),O)V.call(O,ne)&&!P.hasOwnProperty(ne)&&(ee[ne]=O[ne]);var Ne=arguments.length-2;if(Ne===1)ee.children=te;else if(1<Ne){for(var se=Array(Ne),re=0;re<Ne;re++)se[re]=arguments[re+2];ee.children=se}if(Y&&Y.defaultProps)for(ne in Ne=Y.defaultProps,Ne)ee[ne]===void 0&&(ee[ne]=Ne[ne]);return{$$typeof:n,type:Y,key:me,ref:Se,props:ee,_owner:z.current}}function b(Y,O){return{$$typeof:n,type:Y.type,key:O,ref:Y.ref,props:Y.props,_owner:Y._owner}}function L(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===n}function F(Y){var O={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(te){return O[te]})}var U=/\/+/g;function j(Y,O){return typeof Y=="object"&&Y!==null&&Y.key!=null?F(""+Y.key):O.toString(36)}function Te(Y,O,te,ne,ee){var me=typeof Y;(me==="undefined"||me==="boolean")&&(Y=null);var Se=!1;if(Y===null)Se=!0;else switch(me){case"string":case"number":Se=!0;break;case"object":switch(Y.$$typeof){case n:case e:Se=!0}}if(Se)return Se=Y,ee=ee(Se),Y=ne===""?"."+j(Se,0):ne,k(ee)?(te="",Y!=null&&(te=Y.replace(U,"$&/")+"/"),Te(ee,O,te,"",function(re){return re})):ee!=null&&(L(ee)&&(ee=b(ee,te+(!ee.key||Se&&Se.key===ee.key?"":(""+ee.key).replace(U,"$&/")+"/")+Y)),O.push(ee)),1;if(Se=0,ne=ne===""?".":ne+":",k(Y))for(var Ne=0;Ne<Y.length;Ne++){me=Y[Ne];var se=ne+j(me,Ne);Se+=Te(me,O,te,se,ee)}else if(se=g(Y),typeof se=="function")for(Y=se.call(Y),Ne=0;!(me=Y.next()).done;)me=me.value,se=ne+j(me,Ne++),Se+=Te(me,O,te,se,ee);else if(me==="object")throw O=String(Y),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return Se}function Me(Y,O,te){if(Y==null)return Y;var ne=[],ee=0;return Te(Y,ne,"","",function(me){return O.call(te,me,ee++)}),ne}function Ue(Y){if(Y._status===-1){var O=Y._result;O=O(),O.then(function(te){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=te)},function(te){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=te)}),Y._status===-1&&(Y._status=0,Y._result=O)}if(Y._status===1)return Y._result.default;throw Y._result}var ke={current:null},le={transition:null},Ae={ReactCurrentDispatcher:ke,ReactCurrentBatchConfig:le,ReactCurrentOwner:z};function Ie(){throw Error("act(...) is not supported in production builds of React.")}return Gt.Children={map:Me,forEach:function(Y,O,te){Me(Y,function(){O.apply(this,arguments)},te)},count:function(Y){var O=0;return Me(Y,function(){O++}),O},toArray:function(Y){return Me(Y,function(O){return O})||[]},only:function(Y){if(!L(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},Gt.Component=E,Gt.Fragment=t,Gt.Profiler=i,Gt.PureComponent=R,Gt.StrictMode=r,Gt.Suspense=l,Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ae,Gt.act=Ie,Gt.cloneElement=function(Y,O,te){if(Y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Y+".");var ne=v({},Y.props),ee=Y.key,me=Y.ref,Se=Y._owner;if(O!=null){if(O.ref!==void 0&&(me=O.ref,Se=z.current),O.key!==void 0&&(ee=""+O.key),Y.type&&Y.type.defaultProps)var Ne=Y.type.defaultProps;for(se in O)V.call(O,se)&&!P.hasOwnProperty(se)&&(ne[se]=O[se]===void 0&&Ne!==void 0?Ne[se]:O[se])}var se=arguments.length-2;if(se===1)ne.children=te;else if(1<se){Ne=Array(se);for(var re=0;re<se;re++)Ne[re]=arguments[re+2];ne.children=Ne}return{$$typeof:n,type:Y.type,key:ee,ref:me,props:ne,_owner:Se}},Gt.createContext=function(Y){return Y={$$typeof:a,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Y.Provider={$$typeof:s,_context:Y},Y.Consumer=Y},Gt.createElement=C,Gt.createFactory=function(Y){var O=C.bind(null,Y);return O.type=Y,O},Gt.createRef=function(){return{current:null}},Gt.forwardRef=function(Y){return{$$typeof:o,render:Y}},Gt.isValidElement=L,Gt.lazy=function(Y){return{$$typeof:f,_payload:{_status:-1,_result:Y},_init:Ue}},Gt.memo=function(Y,O){return{$$typeof:u,type:Y,compare:O===void 0?null:O}},Gt.startTransition=function(Y){var O=le.transition;le.transition={};try{Y()}finally{le.transition=O}},Gt.unstable_act=Ie,Gt.useCallback=function(Y,O){return ke.current.useCallback(Y,O)},Gt.useContext=function(Y){return ke.current.useContext(Y)},Gt.useDebugValue=function(){},Gt.useDeferredValue=function(Y){return ke.current.useDeferredValue(Y)},Gt.useEffect=function(Y,O){return ke.current.useEffect(Y,O)},Gt.useId=function(){return ke.current.useId()},Gt.useImperativeHandle=function(Y,O,te){return ke.current.useImperativeHandle(Y,O,te)},Gt.useInsertionEffect=function(Y,O){return ke.current.useInsertionEffect(Y,O)},Gt.useLayoutEffect=function(Y,O){return ke.current.useLayoutEffect(Y,O)},Gt.useMemo=function(Y,O){return ke.current.useMemo(Y,O)},Gt.useReducer=function(Y,O,te){return ke.current.useReducer(Y,O,te)},Gt.useRef=function(Y){return ke.current.useRef(Y)},Gt.useState=function(Y){return ke.current.useState(Y)},Gt.useSyncExternalStore=function(Y,O,te){return ke.current.useSyncExternalStore(Y,O,te)},Gt.useTransition=function(){return ke.current.useTransition()},Gt.version="18.3.1",Gt}var Q4;function Ap(){return Q4||(Q4=1,n2.exports=VG()),n2.exports}var J4;function jG(){if(J4)return vg;J4=1;var n=Ap(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,u){var f,d={},g=null,p=null;u!==void 0&&(g=""+u),l.key!==void 0&&(g=""+l.key),l.ref!==void 0&&(p=l.ref);for(f in l)r.call(l,f)&&!s.hasOwnProperty(f)&&(d[f]=l[f]);if(o&&o.defaultProps)for(f in l=o.defaultProps,l)d[f]===void 0&&(d[f]=l[f]);return{$$typeof:e,type:o,key:g,ref:p,props:d,_owner:i.current}}return vg.Fragment=t,vg.jsx=a,vg.jsxs=a,vg}var eb;function GG(){return eb||(eb=1,t2.exports=jG()),t2.exports}var w=GG(),E1={},r2={exports:{}},Ji={},i2={exports:{}},s2={};var tb;function BG(){return tb||(tb=1,(function(n){function e(le,Ae){var Ie=le.length;le.push(Ae);e:for(;0<Ie;){var Y=Ie-1>>>1,O=le[Y];if(0<i(O,Ae))le[Y]=Ae,le[Ie]=O,Ie=Y;else break e}}function t(le){return le.length===0?null:le[0]}function r(le){if(le.length===0)return null;var Ae=le[0],Ie=le.pop();if(Ie!==Ae){le[0]=Ie;e:for(var Y=0,O=le.length,te=O>>>1;Y<te;){var ne=2*(Y+1)-1,ee=le[ne],me=ne+1,Se=le[me];if(0>i(ee,Ie))me<O&&0>i(Se,ee)?(le[Y]=Se,le[me]=Ie,Y=me):(le[Y]=ee,le[ne]=Ie,Y=ne);else if(me<O&&0>i(Se,Ie))le[Y]=Se,le[me]=Ie,Y=me;else break e}}return Ae}function i(le,Ae){var Ie=le.sortIndex-Ae.sortIndex;return Ie!==0?Ie:le.id-Ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],f=1,d=null,g=3,p=!1,v=!1,y=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(le){for(var Ae=t(u);Ae!==null;){if(Ae.callback===null)r(u);else if(Ae.startTime<=le)r(u),Ae.sortIndex=Ae.expirationTime,e(l,Ae);else break;Ae=t(u)}}function k(le){if(y=!1,M(le),!v)if(t(l)!==null)v=!0,Ue(V);else{var Ae=t(u);Ae!==null&&ke(k,Ae.startTime-le)}}function V(le,Ae){v=!1,y&&(y=!1,T(C),C=-1),p=!0;var Ie=g;try{for(M(Ae),d=t(l);d!==null&&(!(d.expirationTime>Ae)||le&&!F());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,g=d.priorityLevel;var O=Y(d.expirationTime<=Ae);Ae=n.unstable_now(),typeof O=="function"?d.callback=O:d===t(l)&&r(l),M(Ae)}else r(l);d=t(l)}if(d!==null)var te=!0;else{var ne=t(u);ne!==null&&ke(k,ne.startTime-Ae),te=!1}return te}finally{d=null,g=Ie,p=!1}}var z=!1,P=null,C=-1,b=5,L=-1;function F(){return!(n.unstable_now()-L<b)}function U(){if(P!==null){var le=n.unstable_now();L=le;var Ae=!0;try{Ae=P(!0,le)}finally{Ae?j():(z=!1,P=null)}}else z=!1}var j;if(typeof R=="function")j=function(){R(U)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,Me=Te.port2;Te.port1.onmessage=U,j=function(){Me.postMessage(null)}}else j=function(){E(U,0)};function Ue(le){P=le,z||(z=!0,j())}function ke(le,Ae){C=E(function(){le(n.unstable_now())},Ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(le){le.callback=null},n.unstable_continueExecution=function(){v||p||(v=!0,Ue(V))},n.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<le?Math.floor(1e3/le):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(le){switch(g){case 1:case 2:case 3:var Ae=3;break;default:Ae=g}var Ie=g;g=Ae;try{return le()}finally{g=Ie}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(le,Ae){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var Ie=g;g=le;try{return Ae()}finally{g=Ie}},n.unstable_scheduleCallback=function(le,Ae,Ie){var Y=n.unstable_now();switch(typeof Ie=="object"&&Ie!==null?(Ie=Ie.delay,Ie=typeof Ie=="number"&&0<Ie?Y+Ie:Y):Ie=Y,le){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Ie+O,le={id:f++,callback:Ae,priorityLevel:le,startTime:Ie,expirationTime:O,sortIndex:-1},Ie>Y?(le.sortIndex=Ie,e(u,le),t(l)===null&&le===t(u)&&(y?(T(C),C=-1):y=!0,ke(k,Ie-Y))):(le.sortIndex=O,e(l,le),v||p||(v=!0,Ue(V))),le},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(le){var Ae=g;return function(){var Ie=g;g=Ae;try{return le.apply(this,arguments)}finally{g=Ie}}}})(s2)),s2}var nb;function UG(){return nb||(nb=1,i2.exports=BG()),i2.exports}var rb;function zG(){if(rb)return Ji;rb=1;var n=Ap(),e=UG();function t(c){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+c,m=1;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(c,h){a(c,h),a(c+"Capture",h)}function a(c,h){for(i[c]=h,c=0;c<h.length;c++)r.add(h[c])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},d={};function g(c){return l.call(d,c)?!0:l.call(f,c)?!1:u.test(c)?d[c]=!0:(f[c]=!0,!1)}function p(c,h,m,x){if(m!==null&&m.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return x?!1:m!==null?!m.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function v(c,h,m,x){if(h===null||typeof h>"u"||p(c,h,m,x))return!0;if(x)return!1;if(m!==null)switch(m.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function y(c,h,m,x,S,I,G){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=x,this.attributeNamespace=S,this.mustUseProperty=m,this.propertyName=c,this.type=h,this.sanitizeURL=I,this.removeEmptyString=G}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){E[c]=new y(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var h=c[0];E[h]=new y(h,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){E[c]=new y(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){E[c]=new y(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){E[c]=new y(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){E[c]=new y(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){E[c]=new y(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){E[c]=new y(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){E[c]=new y(c,5,!1,c.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function R(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var h=c.replace(T,R);E[h]=new y(h,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var h=c.replace(T,R);E[h]=new y(h,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var h=c.replace(T,R);E[h]=new y(h,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){E[c]=new y(c,1,!1,c.toLowerCase(),null,!1,!1)}),E.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){E[c]=new y(c,1,!1,c.toLowerCase(),null,!0,!0)});function M(c,h,m,x){var S=E.hasOwnProperty(h)?E[h]:null;(S!==null?S.type!==0:x||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(v(h,m,S,x)&&(m=null),x||S===null?g(h)&&(m===null?c.removeAttribute(h):c.setAttribute(h,""+m)):S.mustUseProperty?c[S.propertyName]=m===null?S.type===3?!1:"":m:(h=S.attributeName,x=S.attributeNamespace,m===null?c.removeAttribute(h):(S=S.type,m=S===3||S===4&&m===!0?"":""+m,x?c.setAttributeNS(x,h,m):c.setAttribute(h,m))))}var k=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,V=Symbol.for("react.element"),z=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),F=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),Me=Symbol.for("react.memo"),Ue=Symbol.for("react.lazy"),ke=Symbol.for("react.offscreen"),le=Symbol.iterator;function Ae(c){return c===null||typeof c!="object"?null:(c=le&&c[le]||c["@@iterator"],typeof c=="function"?c:null)}var Ie=Object.assign,Y;function O(c){if(Y===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);Y=h&&h[1]||""}return`
`+Y+c}var te=!1;function ne(c,h){if(!c||te)return"";te=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Ee){var x=Ee}Reflect.construct(c,[],h)}else{try{h.call()}catch(Ee){x=Ee}c.call(h.prototype)}else{try{throw Error()}catch(Ee){x=Ee}c()}}catch(Ee){if(Ee&&x&&typeof Ee.stack=="string"){for(var S=Ee.stack.split(`
`),I=x.stack.split(`
`),G=S.length-1,J=I.length-1;1<=G&&0<=J&&S[G]!==I[J];)J--;for(;1<=G&&0<=J;G--,J--)if(S[G]!==I[J]){if(G!==1||J!==1)do if(G--,J--,0>J||S[G]!==I[J]){var ie=`
`+S[G].replace(" at new "," at ");return c.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",c.displayName)),ie}while(1<=G&&0<=J);break}}}finally{te=!1,Error.prepareStackTrace=m}return(c=c?c.displayName||c.name:"")?O(c):""}function ee(c){switch(c.tag){case 5:return O(c.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return c=ne(c.type,!1),c;case 11:return c=ne(c.type.render,!1),c;case 1:return c=ne(c.type,!0),c;default:return""}}function me(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case P:return"Fragment";case z:return"Portal";case b:return"Profiler";case C:return"StrictMode";case j:return"Suspense";case Te:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case F:return(c.displayName||"Context")+".Consumer";case L:return(c._context.displayName||"Context")+".Provider";case U:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Me:return h=c.displayName||null,h!==null?h:me(c.type)||"Memo";case Ue:h=c._payload,c=c._init;try{return me(c(h))}catch{}}return null}function Se(c){var h=c.type;switch(c.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=h.render,c=c.displayName||c.name||"",h.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(h);case 8:return h===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function Ne(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function se(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function re(c){var h=se(c)?"checked":"value",m=Object.getOwnPropertyDescriptor(c.constructor.prototype,h),x=""+c[h];if(!c.hasOwnProperty(h)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var S=m.get,I=m.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return S.call(this)},set:function(G){x=""+G,I.call(this,G)}}),Object.defineProperty(c,h,{enumerable:m.enumerable}),{getValue:function(){return x},setValue:function(G){x=""+G},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function D(c){c._valueTracker||(c._valueTracker=re(c))}function Ye(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var m=h.getValue(),x="";return c&&(x=se(c)?c.checked?"true":"false":c.value),c=x,c!==m?(h.setValue(c),!0):!1}function he(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function He(c,h){var m=h.checked;return Ie({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??c._wrapperState.initialChecked})}function ue(c,h){var m=h.defaultValue==null?"":h.defaultValue,x=h.checked!=null?h.checked:h.defaultChecked;m=Ne(h.value!=null?h.value:m),c._wrapperState={initialChecked:x,initialValue:m,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function W(c,h){h=h.checked,h!=null&&M(c,"checked",h,!1)}function ae(c,h){W(c,h);var m=Ne(h.value),x=h.type;if(m!=null)x==="number"?(m===0&&c.value===""||c.value!=m)&&(c.value=""+m):c.value!==""+m&&(c.value=""+m);else if(x==="submit"||x==="reset"){c.removeAttribute("value");return}h.hasOwnProperty("value")?ot(c,h.type,m):h.hasOwnProperty("defaultValue")&&ot(c,h.type,Ne(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(c.defaultChecked=!!h.defaultChecked)}function lt(c,h,m){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var x=h.type;if(!(x!=="submit"&&x!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+c._wrapperState.initialValue,m||h===c.value||(c.value=h),c.defaultValue=h}m=c.name,m!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,m!==""&&(c.name=m)}function ot(c,h,m){(h!=="number"||he(c.ownerDocument)!==c)&&(m==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+m&&(c.defaultValue=""+m))}var gt=Array.isArray;function Ot(c,h,m,x){if(c=c.options,h){h={};for(var S=0;S<m.length;S++)h["$"+m[S]]=!0;for(m=0;m<c.length;m++)S=h.hasOwnProperty("$"+c[m].value),c[m].selected!==S&&(c[m].selected=S),S&&x&&(c[m].defaultSelected=!0)}else{for(m=""+Ne(m),h=null,S=0;S<c.length;S++){if(c[S].value===m){c[S].selected=!0,x&&(c[S].defaultSelected=!0);return}h!==null||c[S].disabled||(h=c[S])}h!==null&&(h.selected=!0)}}function Rn(c,h){if(h.dangerouslySetInnerHTML!=null)throw Error(t(91));return Ie({},h,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function Yt(c,h){var m=h.value;if(m==null){if(m=h.children,h=h.defaultValue,m!=null){if(h!=null)throw Error(t(92));if(gt(m)){if(1<m.length)throw Error(t(93));m=m[0]}h=m}h==null&&(h=""),m=h}c._wrapperState={initialValue:Ne(m)}}function Ln(c,h){var m=Ne(h.value),x=Ne(h.defaultValue);m!=null&&(m=""+m,m!==c.value&&(c.value=m),h.defaultValue==null&&c.defaultValue!==m&&(c.defaultValue=m)),x!=null&&(c.defaultValue=""+x)}function gr(c){var h=c.textContent;h===c._wrapperState.initialValue&&h!==""&&h!==null&&(c.value=h)}function Wi(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mi(c,h){return c==null||c==="http://www.w3.org/1999/xhtml"?Wi(h):c==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var Fr,Wo=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,m,x,S){MSApp.execUnsafeLocalFunction(function(){return c(h,m,x,S)})}:c})(function(c,h){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=h;else{for(Fr=Fr||document.createElement("div"),Fr.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=Fr.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;h.firstChild;)c.appendChild(h.firstChild)}});function ms(c,h){if(h){var m=c.firstChild;if(m&&m===c.lastChild&&m.nodeType===3){m.nodeValue=h;return}}c.textContent=h}var ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ho=["Webkit","ms","Moz","O"];Object.keys(ki).forEach(function(c){Ho.forEach(function(h){h=h+c.charAt(0).toUpperCase()+c.substring(1),ki[h]=ki[c]})});function ps(c,h,m){return h==null||typeof h=="boolean"||h===""?"":m||typeof h!="number"||h===0||ki.hasOwnProperty(c)&&ki[c]?(""+h).trim():h+"px"}function Ks(c,h){c=c.style;for(var m in h)if(h.hasOwnProperty(m)){var x=m.indexOf("--")===0,S=ps(m,h[m],x);m==="float"&&(m="cssFloat"),x?c.setProperty(m,S):c[m]=S}}var xa=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zr(c,h){if(h){if(xa[c]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(t(137,c));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(t(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(t(61))}if(h.style!=null&&typeof h.style!="object")throw Error(t(62))}}function va(c,h){if(c.indexOf("-")===-1)return typeof h.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _s=null;function ys(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Vr=null,Qr=null,un=null;function xs(c){if(c=sg(c)){if(typeof Vr!="function")throw Error(t(280));var h=c.stateNode;h&&(h=D_(h),Vr(c.stateNode,c.type,h))}}function vs(c){Qr?un?un.push(c):un=[c]:Qr=c}function Wn(){if(Qr){var c=Qr,h=un;if(un=Qr=null,xs(c),h)for(c=0;c<h.length;c++)xs(h[c])}}function Hi(c,h){return c(h)}function Ir(){}var Hn=!1;function Ar(c,h,m){if(Hn)return c(h,m);Hn=!0;try{return Hi(c,h,m)}finally{Hn=!1,(Qr!==null||un!==null)&&(Ir(),Wn())}}function Rr(c,h){var m=c.stateNode;if(m===null)return null;var x=D_(m);if(x===null)return null;m=x[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(c=c.type,x=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!x;break e;default:c=!1}if(c)return null;if(m&&typeof m!="function")throw Error(t(231,h,typeof m));return m}var mr=!1;if(o)try{var Wt={};Object.defineProperty(Wt,"passive",{get:function(){mr=!0}}),window.addEventListener("test",Wt,Wt),window.removeEventListener("test",Wt,Wt)}catch{mr=!1}function Jn(c,h,m,x,S,I,G,J,ie){var Ee=Array.prototype.slice.call(arguments,3);try{h.apply(m,Ee)}catch(Ve){this.onError(Ve)}}var lr=!1,Ki=null,B=!1,q=null,K={onError:function(c){lr=!0,Ki=c}};function X(c,h,m,x,S,I,G,J,ie){lr=!1,Ki=null,Jn.apply(K,arguments)}function Z(c,h,m,x,S,I,G,J,ie){if(X.apply(this,arguments),lr){if(lr){var Ee=Ki;lr=!1,Ki=null}else throw Error(t(198));B||(B=!0,q=Ee)}}function Q(c){var h=c,m=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(m=h.return),c=h.return;while(c)}return h.tag===3?m:null}function _e(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function Ce(c){if(Q(c)!==c)throw Error(t(188))}function pe(c){var h=c.alternate;if(!h){if(h=Q(c),h===null)throw Error(t(188));return h!==c?null:c}for(var m=c,x=h;;){var S=m.return;if(S===null)break;var I=S.alternate;if(I===null){if(x=S.return,x!==null){m=x;continue}break}if(S.child===I.child){for(I=S.child;I;){if(I===m)return Ce(S),c;if(I===x)return Ce(S),h;I=I.sibling}throw Error(t(188))}if(m.return!==x.return)m=S,x=I;else{for(var G=!1,J=S.child;J;){if(J===m){G=!0,m=S,x=I;break}if(J===x){G=!0,x=S,m=I;break}J=J.sibling}if(!G){for(J=I.child;J;){if(J===m){G=!0,m=I,x=S;break}if(J===x){G=!0,x=I,m=S;break}J=J.sibling}if(!G)throw Error(t(189))}}if(m.alternate!==x)throw Error(t(190))}if(m.tag!==3)throw Error(t(188));return m.stateNode.current===m?c:h}function xe(c){return c=pe(c),c!==null?ve(c):null}function ve(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var h=ve(c);if(h!==null)return h;c=c.sibling}return null}var je=e.unstable_scheduleCallback,Xe=e.unstable_cancelCallback,it=e.unstable_shouldYield,Ge=e.unstable_requestPaint,Be=e.unstable_now,Rt=e.unstable_getCurrentPriorityLevel,hn=e.unstable_ImmediatePriority,_n=e.unstable_UserBlockingPriority,Bn=e.unstable_NormalPriority,Ea=e.unstable_LowPriority,Ys=e.unstable_IdlePriority,Es=null,cr=null;function Bl(c){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(Es,c,void 0,(c.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:xu,Qa=Math.log,Xs=Math.LN2;function xu(c){return c>>>=0,c===0?32:31-(Qa(c)/Xs|0)|0}var Ja=64,Ul=4194304;function sn(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Ko(c,h){var m=c.pendingLanes;if(m===0)return 0;var x=0,S=c.suspendedLanes,I=c.pingedLanes,G=m&268435455;if(G!==0){var J=G&~S;J!==0?x=sn(J):(I&=G,I!==0&&(x=sn(I)))}else G=m&~S,G!==0?x=sn(G):I!==0&&(x=sn(I));if(x===0)return 0;if(h!==0&&h!==x&&(h&S)===0&&(S=x&-x,I=h&-h,S>=I||S===16&&(I&4194240)!==0))return h;if((x&4)!==0&&(x|=m&16),h=c.entangledLanes,h!==0)for(c=c.entanglements,h&=x;0<h;)m=31-Kn(h),S=1<<m,x|=c[m],h&=~S;return x}function vu(c,h){switch(c){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Eu(c,h){for(var m=c.suspendedLanes,x=c.pingedLanes,S=c.expirationTimes,I=c.pendingLanes;0<I;){var G=31-Kn(I),J=1<<G,ie=S[G];ie===-1?((J&m)===0||(J&x)!==0)&&(S[G]=vu(J,h)):ie<=h&&(c.expiredLanes|=J),I&=~J}}function V0(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function j0(){var c=Ja;return Ja<<=1,(Ja&4194240)===0&&(Ja=64),c}function G0(c){for(var h=[],m=0;31>m;m++)h.push(c);return h}function wu(c,h,m){c.pendingLanes|=h,h!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,h=31-Kn(h),c[h]=m}function NE(c,h){var m=c.pendingLanes&~h;c.pendingLanes=h,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=h,c.mutableReadLanes&=h,c.entangledLanes&=h,h=c.entanglements;var x=c.eventTimes;for(c=c.expirationTimes;0<m;){var S=31-Kn(m),I=1<<S;h[S]=0,x[S]=-1,c[S]=-1,m&=~I}}function B0(c,h){var m=c.entangledLanes|=h;for(c=c.entanglements;m;){var x=31-Kn(m),S=1<<x;S&h|c[x]&h&&(c[x]|=h),m&=~S}}var Ht=0;function eo(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var U0,of,z0,$0,W0,to=!1,lf=[],no=null,ro=null,Jr=null,Su=new Map,Yo=new Map,ws=[],v_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zl(c,h){switch(c){case"focusin":case"focusout":no=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":Su.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yo.delete(h.pointerId)}}function wa(c,h,m,x,S,I){return c===null||c.nativeEvent!==I?(c={blockedOn:h,domEventName:m,eventSystemFlags:x,nativeEvent:I,targetContainers:[S]},h!==null&&(h=sg(h),h!==null&&of(h)),c):(c.eventSystemFlags|=x,h=c.targetContainers,S!==null&&h.indexOf(S)===-1&&h.push(S),c)}function E_(c,h,m,x,S){switch(h){case"focusin":return no=wa(no,c,h,m,x,S),!0;case"dragenter":return ro=wa(ro,c,h,m,x,S),!0;case"mouseover":return Jr=wa(Jr,c,h,m,x,S),!0;case"pointerover":var I=S.pointerId;return Su.set(I,wa(Su.get(I)||null,c,h,m,x,S)),!0;case"gotpointercapture":return I=S.pointerId,Yo.set(I,wa(Yo.get(I)||null,c,h,m,x,S)),!0}return!1}function cf(c){var h=Ru(c.target);if(h!==null){var m=Q(h);if(m!==null){if(h=m.tag,h===13){if(h=_e(m),h!==null){c.blockedOn=h,W0(c.priority,function(){z0(m)});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){c.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}c.blockedOn=null}function bn(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var m=uf(c.domEventName,c.eventSystemFlags,h[0],c.nativeEvent);if(m===null){m=c.nativeEvent;var x=new m.constructor(m.type,m);_s=x,m.target.dispatchEvent(x),_s=null}else return h=sg(m),h!==null&&of(h),c.blockedOn=m,!1;h.shift()}return!0}function w_(c,h,m){bn(c)&&m.delete(h)}function LE(){to=!1,no!==null&&bn(no)&&(no=null),ro!==null&&bn(ro)&&(ro=null),Jr!==null&&bn(Jr)&&(Jr=null),Su.forEach(w_),Yo.forEach(w_)}function $l(c,h){c.blockedOn===h&&(c.blockedOn=null,to||(to=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,LE)))}function Wl(c){function h(S){return $l(S,c)}if(0<lf.length){$l(lf[0],c);for(var m=1;m<lf.length;m++){var x=lf[m];x.blockedOn===c&&(x.blockedOn=null)}}for(no!==null&&$l(no,c),ro!==null&&$l(ro,c),Jr!==null&&$l(Jr,c),Su.forEach(h),Yo.forEach(h),m=0;m<ws.length;m++)x=ws[m],x.blockedOn===c&&(x.blockedOn=null);for(;0<ws.length&&(m=ws[0],m.blockedOn===null);)cf(m),m.blockedOn===null&&ws.shift()}var Xo=k.ReactCurrentBatchConfig,qo=!0;function io(c,h,m,x){var S=Ht,I=Xo.transition;Xo.transition=null;try{Ht=1,H0(c,h,m,x)}finally{Ht=S,Xo.transition=I}}function S_(c,h,m,x){var S=Ht,I=Xo.transition;Xo.transition=null;try{Ht=4,H0(c,h,m,x)}finally{Ht=S,Xo.transition=I}}function H0(c,h,m,x){if(qo){var S=uf(c,h,m,x);if(S===null)WE(c,h,x,so,m),zl(c,x);else if(E_(S,c,h,m,x))x.stopPropagation();else if(zl(c,x),h&4&&-1<v_.indexOf(c)){for(;S!==null;){var I=sg(S);if(I!==null&&U0(I),I=uf(c,h,m,x),I===null&&WE(c,h,x,so,m),I===S)break;S=I}S!==null&&x.stopPropagation()}else WE(c,h,x,null,m)}}var so=null;function uf(c,h,m,x){if(so=null,c=ys(x),c=Ru(c),c!==null)if(h=Q(c),h===null)c=null;else if(m=h.tag,m===13){if(c=_e(h),c!==null)return c;c=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null);return so=c,null}function hf(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rt()){case hn:return 1;case _n:return 4;case Bn:case Ea:return 16;case Ys:return 536870912;default:return 16}default:return 16}}var Ss=null,ff=null,Zo=null;function T_(){if(Zo)return Zo;var c,h=ff,m=h.length,x,S="value"in Ss?Ss.value:Ss.textContent,I=S.length;for(c=0;c<m&&h[c]===S[c];c++);var G=m-c;for(x=1;x<=G&&h[m-x]===S[I-x];x++);return Zo=S.slice(c,1<x?1-x:void 0)}function Tu(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function ao(){return!0}function K0(){return!1}function gi(c){function h(m,x,S,I,G){this._reactName=m,this._targetInst=S,this.type=x,this.nativeEvent=I,this.target=G,this.currentTarget=null;for(var J in c)c.hasOwnProperty(J)&&(m=c[J],this[J]=m?m(I):I[J]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?ao:K0,this.isPropagationStopped=K0,this}return Ie(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=ao)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=ao)},persist:function(){},isPersistent:ao}),h}var oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Iu=gi(oo),Hl=Ie({},oo,{view:0,detail:0}),df=gi(Hl),gf,mf,Ts,Au=Ie({},Hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lt,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Ts&&(Ts&&c.type==="mousemove"?(gf=c.screenX-Ts.screenX,mf=c.screenY-Ts.screenY):mf=gf=0,Ts=c),gf)},movementY:function(c){return"movementY"in c?c.movementY:mf}}),Y0=gi(Au),I_=Ie({},Au,{dataTransfer:0}),A_=gi(I_),pf=Ie({},Hl,{relatedTarget:0}),ei=gi(pf),R_=Ie({},oo,{animationName:0,elapsedTime:0,pseudoElement:0}),C_=gi(R_),Kl=Ie({},oo,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),_=gi(Kl),A=Ie({},oo,{data:0}),N=gi(A),H={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ge={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},we={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qe(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=we[c])?!!h[c]:!1}function Lt(){return Qe}var ur=Ie({},Hl,{key:function(c){if(c.key){var h=H[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=Tu(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?ge[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lt,charCode:function(c){return c.type==="keypress"?Tu(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Tu(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),yn=gi(ur),pr=Ie({},Au,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Is=gi(pr),Qo=Ie({},Hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lt}),lo=gi(Qo),co=Ie({},oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),_f=gi(co),X0=Ie({},Au,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),kj=gi(X0),Nj=[9,13,27,32],OE=o&&"CompositionEvent"in window,q0=null;o&&"documentMode"in document&&(q0=document.documentMode);var Lj=o&&"TextEvent"in window&&!q0,zC=o&&(!OE||q0&&8<q0&&11>=q0),$C=" ",WC=!1;function HC(c,h){switch(c){case"keyup":return Nj.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KC(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var yf=!1;function Oj(c,h){switch(c){case"compositionend":return KC(h);case"keypress":return h.which!==32?null:(WC=!0,$C);case"textInput":return c=h.data,c===$C&&WC?null:c;default:return null}}function Dj(c,h){if(yf)return c==="compositionend"||!OE&&HC(c,h)?(c=T_(),Zo=ff=Ss=null,yf=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return zC&&h.locale!=="ko"?null:h.data;default:return null}}var Fj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function YC(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!Fj[c.type]:h==="textarea"}function XC(c,h,m,x){vs(x),h=N_(h,"onChange"),0<h.length&&(m=new Iu("onChange","change",null,m,x),c.push({event:m,listeners:h}))}var Z0=null,Q0=null;function Vj(c){dP(c,0)}function P_(c){var h=Sf(c);if(Ye(h))return c}function jj(c,h){if(c==="change")return h}var qC=!1;if(o){var DE;if(o){var FE="oninput"in document;if(!FE){var ZC=document.createElement("div");ZC.setAttribute("oninput","return;"),FE=typeof ZC.oninput=="function"}DE=FE}else DE=!1;qC=DE&&(!document.documentMode||9<document.documentMode)}function QC(){Z0&&(Z0.detachEvent("onpropertychange",JC),Q0=Z0=null)}function JC(c){if(c.propertyName==="value"&&P_(Q0)){var h=[];XC(h,Q0,c,ys(c)),Ar(Vj,h)}}function Gj(c,h,m){c==="focusin"?(QC(),Z0=h,Q0=m,Z0.attachEvent("onpropertychange",JC)):c==="focusout"&&QC()}function Bj(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return P_(Q0)}function Uj(c,h){if(c==="click")return P_(h)}function zj(c,h){if(c==="input"||c==="change")return P_(h)}function $j(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var Sa=typeof Object.is=="function"?Object.is:$j;function J0(c,h){if(Sa(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var m=Object.keys(c),x=Object.keys(h);if(m.length!==x.length)return!1;for(x=0;x<m.length;x++){var S=m[x];if(!l.call(h,S)||!Sa(c[S],h[S]))return!1}return!0}function eP(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function tP(c,h){var m=eP(c);c=0;for(var x;m;){if(m.nodeType===3){if(x=c+m.textContent.length,c<=h&&x>=h)return{node:m,offset:h-c};c=x}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=eP(m)}}function nP(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?nP(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function rP(){for(var c=window,h=he();h instanceof c.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)c=h.contentWindow;else break;h=he(c.document)}return h}function VE(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}function Wj(c){var h=rP(),m=c.focusedElem,x=c.selectionRange;if(h!==m&&m&&m.ownerDocument&&nP(m.ownerDocument.documentElement,m)){if(x!==null&&VE(m)){if(h=x.start,c=x.end,c===void 0&&(c=h),"selectionStart"in m)m.selectionStart=h,m.selectionEnd=Math.min(c,m.value.length);else if(c=(h=m.ownerDocument||document)&&h.defaultView||window,c.getSelection){c=c.getSelection();var S=m.textContent.length,I=Math.min(x.start,S);x=x.end===void 0?I:Math.min(x.end,S),!c.extend&&I>x&&(S=x,x=I,I=S),S=tP(m,I);var G=tP(m,x);S&&G&&(c.rangeCount!==1||c.anchorNode!==S.node||c.anchorOffset!==S.offset||c.focusNode!==G.node||c.focusOffset!==G.offset)&&(h=h.createRange(),h.setStart(S.node,S.offset),c.removeAllRanges(),I>x?(c.addRange(h),c.extend(G.node,G.offset)):(h.setEnd(G.node,G.offset),c.addRange(h)))}}for(h=[],c=m;c=c.parentNode;)c.nodeType===1&&h.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<h.length;m++)c=h[m],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var Hj=o&&"documentMode"in document&&11>=document.documentMode,xf=null,jE=null,eg=null,GE=!1;function iP(c,h,m){var x=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;GE||xf==null||xf!==he(x)||(x=xf,"selectionStart"in x&&VE(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),eg&&J0(eg,x)||(eg=x,x=N_(jE,"onSelect"),0<x.length&&(h=new Iu("onSelect","select",null,h,m),c.push({event:h,listeners:x}),h.target=xf)))}function b_(c,h){var m={};return m[c.toLowerCase()]=h.toLowerCase(),m["Webkit"+c]="webkit"+h,m["Moz"+c]="moz"+h,m}var vf={animationend:b_("Animation","AnimationEnd"),animationiteration:b_("Animation","AnimationIteration"),animationstart:b_("Animation","AnimationStart"),transitionend:b_("Transition","TransitionEnd")},BE={},sP={};o&&(sP=document.createElement("div").style,"AnimationEvent"in window||(delete vf.animationend.animation,delete vf.animationiteration.animation,delete vf.animationstart.animation),"TransitionEvent"in window||delete vf.transitionend.transition);function M_(c){if(BE[c])return BE[c];if(!vf[c])return c;var h=vf[c],m;for(m in h)if(h.hasOwnProperty(m)&&m in sP)return BE[c]=h[m];return c}var aP=M_("animationend"),oP=M_("animationiteration"),lP=M_("animationstart"),cP=M_("transitionend"),uP=new Map,hP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yl(c,h){uP.set(c,h),s(h,[c])}for(var UE=0;UE<hP.length;UE++){var zE=hP[UE],Kj=zE.toLowerCase(),Yj=zE[0].toUpperCase()+zE.slice(1);Yl(Kj,"on"+Yj)}Yl(aP,"onAnimationEnd"),Yl(oP,"onAnimationIteration"),Yl(lP,"onAnimationStart"),Yl("dblclick","onDoubleClick"),Yl("focusin","onFocus"),Yl("focusout","onBlur"),Yl(cP,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xj=new Set("cancel close invalid load scroll toggle".split(" ").concat(tg));function fP(c,h,m){var x=c.type||"unknown-event";c.currentTarget=m,Z(x,h,void 0,c),c.currentTarget=null}function dP(c,h){h=(h&4)!==0;for(var m=0;m<c.length;m++){var x=c[m],S=x.event;x=x.listeners;e:{var I=void 0;if(h)for(var G=x.length-1;0<=G;G--){var J=x[G],ie=J.instance,Ee=J.currentTarget;if(J=J.listener,ie!==I&&S.isPropagationStopped())break e;fP(S,J,Ee),I=ie}else for(G=0;G<x.length;G++){if(J=x[G],ie=J.instance,Ee=J.currentTarget,J=J.listener,ie!==I&&S.isPropagationStopped())break e;fP(S,J,Ee),I=ie}}}if(B)throw c=q,B=!1,q=null,c}function On(c,h){var m=h[ZE];m===void 0&&(m=h[ZE]=new Set);var x=c+"__bubble";m.has(x)||(gP(h,c,2,!1),m.add(x))}function $E(c,h,m){var x=0;h&&(x|=4),gP(m,c,x,h)}var k_="_reactListening"+Math.random().toString(36).slice(2);function ng(c){if(!c[k_]){c[k_]=!0,r.forEach(function(m){m!=="selectionchange"&&(Xj.has(m)||$E(m,!1,c),$E(m,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[k_]||(h[k_]=!0,$E("selectionchange",!1,h))}}function gP(c,h,m,x){switch(hf(h)){case 1:var S=io;break;case 4:S=S_;break;default:S=H0}m=S.bind(null,h,m,c),S=void 0,!mr||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(S=!0),x?S!==void 0?c.addEventListener(h,m,{capture:!0,passive:S}):c.addEventListener(h,m,!0):S!==void 0?c.addEventListener(h,m,{passive:S}):c.addEventListener(h,m,!1)}function WE(c,h,m,x,S){var I=x;if((h&1)===0&&(h&2)===0&&x!==null)e:for(;;){if(x===null)return;var G=x.tag;if(G===3||G===4){var J=x.stateNode.containerInfo;if(J===S||J.nodeType===8&&J.parentNode===S)break;if(G===4)for(G=x.return;G!==null;){var ie=G.tag;if((ie===3||ie===4)&&(ie=G.stateNode.containerInfo,ie===S||ie.nodeType===8&&ie.parentNode===S))return;G=G.return}for(;J!==null;){if(G=Ru(J),G===null)return;if(ie=G.tag,ie===5||ie===6){x=I=G;continue e}J=J.parentNode}}x=x.return}Ar(function(){var Ee=I,Ve=ys(m),ze=[];e:{var De=uP.get(c);if(De!==void 0){var at=Iu,ft=c;switch(c){case"keypress":if(Tu(m)===0)break e;case"keydown":case"keyup":at=yn;break;case"focusin":ft="focus",at=ei;break;case"focusout":ft="blur",at=ei;break;case"beforeblur":case"afterblur":at=ei;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=Y0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=A_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=lo;break;case aP:case oP:case lP:at=C_;break;case cP:at=_f;break;case"scroll":at=df;break;case"wheel":at=kj;break;case"copy":case"cut":case"paste":at=_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=Is}var mt=(h&4)!==0,hr=!mt&&c==="scroll",de=mt?De!==null?De+"Capture":null:De;mt=[];for(var oe=Ee,ye;oe!==null;){ye=oe;var Ke=ye.stateNode;if(ye.tag===5&&Ke!==null&&(ye=Ke,de!==null&&(Ke=Rr(oe,de),Ke!=null&&mt.push(rg(oe,Ke,ye)))),hr)break;oe=oe.return}0<mt.length&&(De=new at(De,ft,null,m,Ve),ze.push({event:De,listeners:mt}))}}if((h&7)===0){e:{if(De=c==="mouseover"||c==="pointerover",at=c==="mouseout"||c==="pointerout",De&&m!==_s&&(ft=m.relatedTarget||m.fromElement)&&(Ru(ft)||ft[Jo]))break e;if((at||De)&&(De=Ve.window===Ve?Ve:(De=Ve.ownerDocument)?De.defaultView||De.parentWindow:window,at?(ft=m.relatedTarget||m.toElement,at=Ee,ft=ft?Ru(ft):null,ft!==null&&(hr=Q(ft),ft!==hr||ft.tag!==5&&ft.tag!==6)&&(ft=null)):(at=null,ft=Ee),at!==ft)){if(mt=Y0,Ke="onMouseLeave",de="onMouseEnter",oe="mouse",(c==="pointerout"||c==="pointerover")&&(mt=Is,Ke="onPointerLeave",de="onPointerEnter",oe="pointer"),hr=at==null?De:Sf(at),ye=ft==null?De:Sf(ft),De=new mt(Ke,oe+"leave",at,m,Ve),De.target=hr,De.relatedTarget=ye,Ke=null,Ru(Ve)===Ee&&(mt=new mt(de,oe+"enter",ft,m,Ve),mt.target=ye,mt.relatedTarget=hr,Ke=mt),hr=Ke,at&&ft)t:{for(mt=at,de=ft,oe=0,ye=mt;ye;ye=Ef(ye))oe++;for(ye=0,Ke=de;Ke;Ke=Ef(Ke))ye++;for(;0<oe-ye;)mt=Ef(mt),oe--;for(;0<ye-oe;)de=Ef(de),ye--;for(;oe--;){if(mt===de||de!==null&&mt===de.alternate)break t;mt=Ef(mt),de=Ef(de)}mt=null}else mt=null;at!==null&&mP(ze,De,at,mt,!1),ft!==null&&hr!==null&&mP(ze,hr,ft,mt,!0)}}e:{if(De=Ee?Sf(Ee):window,at=De.nodeName&&De.nodeName.toLowerCase(),at==="select"||at==="input"&&De.type==="file")var _t=jj;else if(YC(De))if(qC)_t=zj;else{_t=Bj;var wt=Gj}else(at=De.nodeName)&&at.toLowerCase()==="input"&&(De.type==="checkbox"||De.type==="radio")&&(_t=Uj);if(_t&&(_t=_t(c,Ee))){XC(ze,_t,m,Ve);break e}wt&&wt(c,De,Ee),c==="focusout"&&(wt=De._wrapperState)&&wt.controlled&&De.type==="number"&&ot(De,"number",De.value)}switch(wt=Ee?Sf(Ee):window,c){case"focusin":(YC(wt)||wt.contentEditable==="true")&&(xf=wt,jE=Ee,eg=null);break;case"focusout":eg=jE=xf=null;break;case"mousedown":GE=!0;break;case"contextmenu":case"mouseup":case"dragend":GE=!1,iP(ze,m,Ve);break;case"selectionchange":if(Hj)break;case"keydown":case"keyup":iP(ze,m,Ve)}var St;if(OE)e:{switch(c){case"compositionstart":var Ct="onCompositionStart";break e;case"compositionend":Ct="onCompositionEnd";break e;case"compositionupdate":Ct="onCompositionUpdate";break e}Ct=void 0}else yf?HC(c,m)&&(Ct="onCompositionEnd"):c==="keydown"&&m.keyCode===229&&(Ct="onCompositionStart");Ct&&(zC&&m.locale!=="ko"&&(yf||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&yf&&(St=T_()):(Ss=Ve,ff="value"in Ss?Ss.value:Ss.textContent,yf=!0)),wt=N_(Ee,Ct),0<wt.length&&(Ct=new N(Ct,c,null,m,Ve),ze.push({event:Ct,listeners:wt}),St?Ct.data=St:(St=KC(m),St!==null&&(Ct.data=St)))),(St=Lj?Oj(c,m):Dj(c,m))&&(Ee=N_(Ee,"onBeforeInput"),0<Ee.length&&(Ve=new N("onBeforeInput","beforeinput",null,m,Ve),ze.push({event:Ve,listeners:Ee}),Ve.data=St))}dP(ze,h)})}function rg(c,h,m){return{instance:c,listener:h,currentTarget:m}}function N_(c,h){for(var m=h+"Capture",x=[];c!==null;){var S=c,I=S.stateNode;S.tag===5&&I!==null&&(S=I,I=Rr(c,m),I!=null&&x.unshift(rg(c,I,S)),I=Rr(c,h),I!=null&&x.push(rg(c,I,S))),c=c.return}return x}function Ef(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function mP(c,h,m,x,S){for(var I=h._reactName,G=[];m!==null&&m!==x;){var J=m,ie=J.alternate,Ee=J.stateNode;if(ie!==null&&ie===x)break;J.tag===5&&Ee!==null&&(J=Ee,S?(ie=Rr(m,I),ie!=null&&G.unshift(rg(m,ie,J))):S||(ie=Rr(m,I),ie!=null&&G.push(rg(m,ie,J)))),m=m.return}G.length!==0&&c.push({event:h,listeners:G})}var qj=/\r\n?/g,Zj=/\u0000|\uFFFD/g;function pP(c){return(typeof c=="string"?c:""+c).replace(qj,`
`).replace(Zj,"")}function L_(c,h,m){if(h=pP(h),pP(c)!==h&&m)throw Error(t(425))}function O_(){}var HE=null,KE=null;function YE(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var XE=typeof setTimeout=="function"?setTimeout:void 0,Qj=typeof clearTimeout=="function"?clearTimeout:void 0,_P=typeof Promise=="function"?Promise:void 0,Jj=typeof queueMicrotask=="function"?queueMicrotask:typeof _P<"u"?function(c){return _P.resolve(null).then(c).catch(eG)}:XE;function eG(c){setTimeout(function(){throw c})}function qE(c,h){var m=h,x=0;do{var S=m.nextSibling;if(c.removeChild(m),S&&S.nodeType===8)if(m=S.data,m==="/$"){if(x===0){c.removeChild(S),Wl(h);return}x--}else m!=="$"&&m!=="$?"&&m!=="$!"||x++;m=S}while(m);Wl(h)}function Xl(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return c}function yP(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var m=c.data;if(m==="$"||m==="$!"||m==="$?"){if(h===0)return c;h--}else m==="/$"&&h++}c=c.previousSibling}return null}var wf=Math.random().toString(36).slice(2),uo="__reactFiber$"+wf,ig="__reactProps$"+wf,Jo="__reactContainer$"+wf,ZE="__reactEvents$"+wf,tG="__reactListeners$"+wf,nG="__reactHandles$"+wf;function Ru(c){var h=c[uo];if(h)return h;for(var m=c.parentNode;m;){if(h=m[Jo]||m[uo]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(c=yP(c);c!==null;){if(m=c[uo])return m;c=yP(c)}return h}c=m,m=c.parentNode}return null}function sg(c){return c=c[uo]||c[Jo],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Sf(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(t(33))}function D_(c){return c[ig]||null}var QE=[],Tf=-1;function ql(c){return{current:c}}function Dn(c){0>Tf||(c.current=QE[Tf],QE[Tf]=null,Tf--)}function kn(c,h){Tf++,QE[Tf]=c.current,c.current=h}var Zl={},mi=ql(Zl),Yi=ql(!1),Cu=Zl;function If(c,h){var m=c.type.contextTypes;if(!m)return Zl;var x=c.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===h)return x.__reactInternalMemoizedMaskedChildContext;var S={},I;for(I in m)S[I]=h[I];return x&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=h,c.__reactInternalMemoizedMaskedChildContext=S),S}function Xi(c){return c=c.childContextTypes,c!=null}function F_(){Dn(Yi),Dn(mi)}function xP(c,h,m){if(mi.current!==Zl)throw Error(t(168));kn(mi,h),kn(Yi,m)}function vP(c,h,m){var x=c.stateNode;if(h=h.childContextTypes,typeof x.getChildContext!="function")return m;x=x.getChildContext();for(var S in x)if(!(S in h))throw Error(t(108,Se(c)||"Unknown",S));return Ie({},m,x)}function V_(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Zl,Cu=mi.current,kn(mi,c),kn(Yi,Yi.current),!0}function EP(c,h,m){var x=c.stateNode;if(!x)throw Error(t(169));m?(c=vP(c,h,Cu),x.__reactInternalMemoizedMergedChildContext=c,Dn(Yi),Dn(mi),kn(mi,c)):Dn(Yi),kn(Yi,m)}var el=null,j_=!1,JE=!1;function wP(c){el===null?el=[c]:el.push(c)}function rG(c){j_=!0,wP(c)}function Ql(){if(!JE&&el!==null){JE=!0;var c=0,h=Ht;try{var m=el;for(Ht=1;c<m.length;c++){var x=m[c];do x=x(!0);while(x!==null)}el=null,j_=!1}catch(S){throw el!==null&&(el=el.slice(c+1)),je(hn,Ql),S}finally{Ht=h,JE=!1}}return null}var Af=[],Rf=0,G_=null,B_=0,qs=[],Zs=0,Pu=null,tl=1,nl="";function bu(c,h){Af[Rf++]=B_,Af[Rf++]=G_,G_=c,B_=h}function SP(c,h,m){qs[Zs++]=tl,qs[Zs++]=nl,qs[Zs++]=Pu,Pu=c;var x=tl;c=nl;var S=32-Kn(x)-1;x&=~(1<<S),m+=1;var I=32-Kn(h)+S;if(30<I){var G=S-S%5;I=(x&(1<<G)-1).toString(32),x>>=G,S-=G,tl=1<<32-Kn(h)+S|m<<S|x,nl=I+c}else tl=1<<I|m<<S|x,nl=c}function ew(c){c.return!==null&&(bu(c,1),SP(c,1,0))}function tw(c){for(;c===G_;)G_=Af[--Rf],Af[Rf]=null,B_=Af[--Rf],Af[Rf]=null;for(;c===Pu;)Pu=qs[--Zs],qs[Zs]=null,nl=qs[--Zs],qs[Zs]=null,tl=qs[--Zs],qs[Zs]=null}var As=null,Rs=null,Un=!1,Ta=null;function TP(c,h){var m=ta(5,null,null,0);m.elementType="DELETED",m.stateNode=h,m.return=c,h=c.deletions,h===null?(c.deletions=[m],c.flags|=16):h.push(m)}function IP(c,h){switch(c.tag){case 5:var m=c.type;return h=h.nodeType!==1||m.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(c.stateNode=h,As=c,Rs=Xl(h.firstChild),!0):!1;case 6:return h=c.pendingProps===""||h.nodeType!==3?null:h,h!==null?(c.stateNode=h,As=c,Rs=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(m=Pu!==null?{id:tl,overflow:nl}:null,c.memoizedState={dehydrated:h,treeContext:m,retryLane:1073741824},m=ta(18,null,null,0),m.stateNode=h,m.return=c,c.child=m,As=c,Rs=null,!0):!1;default:return!1}}function nw(c){return(c.mode&1)!==0&&(c.flags&128)===0}function rw(c){if(Un){var h=Rs;if(h){var m=h;if(!IP(c,h)){if(nw(c))throw Error(t(418));h=Xl(m.nextSibling);var x=As;h&&IP(c,h)?TP(x,m):(c.flags=c.flags&-4097|2,Un=!1,As=c)}}else{if(nw(c))throw Error(t(418));c.flags=c.flags&-4097|2,Un=!1,As=c}}}function AP(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;As=c}function U_(c){if(c!==As)return!1;if(!Un)return AP(c),Un=!0,!1;var h;if((h=c.tag!==3)&&!(h=c.tag!==5)&&(h=c.type,h=h!=="head"&&h!=="body"&&!YE(c.type,c.memoizedProps)),h&&(h=Rs)){if(nw(c))throw RP(),Error(t(418));for(;h;)TP(c,h),h=Xl(h.nextSibling)}if(AP(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(t(317));e:{for(c=c.nextSibling,h=0;c;){if(c.nodeType===8){var m=c.data;if(m==="/$"){if(h===0){Rs=Xl(c.nextSibling);break e}h--}else m!=="$"&&m!=="$!"&&m!=="$?"||h++}c=c.nextSibling}Rs=null}}else Rs=As?Xl(c.stateNode.nextSibling):null;return!0}function RP(){for(var c=Rs;c;)c=Xl(c.nextSibling)}function Cf(){Rs=As=null,Un=!1}function iw(c){Ta===null?Ta=[c]:Ta.push(c)}var iG=k.ReactCurrentBatchConfig;function ag(c,h,m){if(c=m.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(t(309));var x=m.stateNode}if(!x)throw Error(t(147,c));var S=x,I=""+c;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===I?h.ref:(h=function(G){var J=S.refs;G===null?delete J[I]:J[I]=G},h._stringRef=I,h)}if(typeof c!="string")throw Error(t(284));if(!m._owner)throw Error(t(290,c))}return c}function z_(c,h){throw c=Object.prototype.toString.call(h),Error(t(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c))}function CP(c){var h=c._init;return h(c._payload)}function PP(c){function h(de,oe){if(c){var ye=de.deletions;ye===null?(de.deletions=[oe],de.flags|=16):ye.push(oe)}}function m(de,oe){if(!c)return null;for(;oe!==null;)h(de,oe),oe=oe.sibling;return null}function x(de,oe){for(de=new Map;oe!==null;)oe.key!==null?de.set(oe.key,oe):de.set(oe.index,oe),oe=oe.sibling;return de}function S(de,oe){return de=ac(de,oe),de.index=0,de.sibling=null,de}function I(de,oe,ye){return de.index=ye,c?(ye=de.alternate,ye!==null?(ye=ye.index,ye<oe?(de.flags|=2,oe):ye):(de.flags|=2,oe)):(de.flags|=1048576,oe)}function G(de){return c&&de.alternate===null&&(de.flags|=2),de}function J(de,oe,ye,Ke){return oe===null||oe.tag!==6?(oe=Xw(ye,de.mode,Ke),oe.return=de,oe):(oe=S(oe,ye),oe.return=de,oe)}function ie(de,oe,ye,Ke){var _t=ye.type;return _t===P?Ve(de,oe,ye.props.children,Ke,ye.key):oe!==null&&(oe.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===Ue&&CP(_t)===oe.type)?(Ke=S(oe,ye.props),Ke.ref=ag(de,oe,ye),Ke.return=de,Ke):(Ke=d1(ye.type,ye.key,ye.props,null,de.mode,Ke),Ke.ref=ag(de,oe,ye),Ke.return=de,Ke)}function Ee(de,oe,ye,Ke){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==ye.containerInfo||oe.stateNode.implementation!==ye.implementation?(oe=qw(ye,de.mode,Ke),oe.return=de,oe):(oe=S(oe,ye.children||[]),oe.return=de,oe)}function Ve(de,oe,ye,Ke,_t){return oe===null||oe.tag!==7?(oe=Vu(ye,de.mode,Ke,_t),oe.return=de,oe):(oe=S(oe,ye),oe.return=de,oe)}function ze(de,oe,ye){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=Xw(""+oe,de.mode,ye),oe.return=de,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case V:return ye=d1(oe.type,oe.key,oe.props,null,de.mode,ye),ye.ref=ag(de,null,oe),ye.return=de,ye;case z:return oe=qw(oe,de.mode,ye),oe.return=de,oe;case Ue:var Ke=oe._init;return ze(de,Ke(oe._payload),ye)}if(gt(oe)||Ae(oe))return oe=Vu(oe,de.mode,ye,null),oe.return=de,oe;z_(de,oe)}return null}function De(de,oe,ye,Ke){var _t=oe!==null?oe.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return _t!==null?null:J(de,oe,""+ye,Ke);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case V:return ye.key===_t?ie(de,oe,ye,Ke):null;case z:return ye.key===_t?Ee(de,oe,ye,Ke):null;case Ue:return _t=ye._init,De(de,oe,_t(ye._payload),Ke)}if(gt(ye)||Ae(ye))return _t!==null?null:Ve(de,oe,ye,Ke,null);z_(de,ye)}return null}function at(de,oe,ye,Ke,_t){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return de=de.get(ye)||null,J(oe,de,""+Ke,_t);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case V:return de=de.get(Ke.key===null?ye:Ke.key)||null,ie(oe,de,Ke,_t);case z:return de=de.get(Ke.key===null?ye:Ke.key)||null,Ee(oe,de,Ke,_t);case Ue:var wt=Ke._init;return at(de,oe,ye,wt(Ke._payload),_t)}if(gt(Ke)||Ae(Ke))return de=de.get(ye)||null,Ve(oe,de,Ke,_t,null);z_(oe,Ke)}return null}function ft(de,oe,ye,Ke){for(var _t=null,wt=null,St=oe,Ct=oe=0,Br=null;St!==null&&Ct<ye.length;Ct++){St.index>Ct?(Br=St,St=null):Br=St.sibling;var Jt=De(de,St,ye[Ct],Ke);if(Jt===null){St===null&&(St=Br);break}c&&St&&Jt.alternate===null&&h(de,St),oe=I(Jt,oe,Ct),wt===null?_t=Jt:wt.sibling=Jt,wt=Jt,St=Br}if(Ct===ye.length)return m(de,St),Un&&bu(de,Ct),_t;if(St===null){for(;Ct<ye.length;Ct++)St=ze(de,ye[Ct],Ke),St!==null&&(oe=I(St,oe,Ct),wt===null?_t=St:wt.sibling=St,wt=St);return Un&&bu(de,Ct),_t}for(St=x(de,St);Ct<ye.length;Ct++)Br=at(St,de,Ct,ye[Ct],Ke),Br!==null&&(c&&Br.alternate!==null&&St.delete(Br.key===null?Ct:Br.key),oe=I(Br,oe,Ct),wt===null?_t=Br:wt.sibling=Br,wt=Br);return c&&St.forEach(function(oc){return h(de,oc)}),Un&&bu(de,Ct),_t}function mt(de,oe,ye,Ke){var _t=Ae(ye);if(typeof _t!="function")throw Error(t(150));if(ye=_t.call(ye),ye==null)throw Error(t(151));for(var wt=_t=null,St=oe,Ct=oe=0,Br=null,Jt=ye.next();St!==null&&!Jt.done;Ct++,Jt=ye.next()){St.index>Ct?(Br=St,St=null):Br=St.sibling;var oc=De(de,St,Jt.value,Ke);if(oc===null){St===null&&(St=Br);break}c&&St&&oc.alternate===null&&h(de,St),oe=I(oc,oe,Ct),wt===null?_t=oc:wt.sibling=oc,wt=oc,St=Br}if(Jt.done)return m(de,St),Un&&bu(de,Ct),_t;if(St===null){for(;!Jt.done;Ct++,Jt=ye.next())Jt=ze(de,Jt.value,Ke),Jt!==null&&(oe=I(Jt,oe,Ct),wt===null?_t=Jt:wt.sibling=Jt,wt=Jt);return Un&&bu(de,Ct),_t}for(St=x(de,St);!Jt.done;Ct++,Jt=ye.next())Jt=at(St,de,Ct,Jt.value,Ke),Jt!==null&&(c&&Jt.alternate!==null&&St.delete(Jt.key===null?Ct:Jt.key),oe=I(Jt,oe,Ct),wt===null?_t=Jt:wt.sibling=Jt,wt=Jt);return c&&St.forEach(function(FG){return h(de,FG)}),Un&&bu(de,Ct),_t}function hr(de,oe,ye,Ke){if(typeof ye=="object"&&ye!==null&&ye.type===P&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case V:e:{for(var _t=ye.key,wt=oe;wt!==null;){if(wt.key===_t){if(_t=ye.type,_t===P){if(wt.tag===7){m(de,wt.sibling),oe=S(wt,ye.props.children),oe.return=de,de=oe;break e}}else if(wt.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===Ue&&CP(_t)===wt.type){m(de,wt.sibling),oe=S(wt,ye.props),oe.ref=ag(de,wt,ye),oe.return=de,de=oe;break e}m(de,wt);break}else h(de,wt);wt=wt.sibling}ye.type===P?(oe=Vu(ye.props.children,de.mode,Ke,ye.key),oe.return=de,de=oe):(Ke=d1(ye.type,ye.key,ye.props,null,de.mode,Ke),Ke.ref=ag(de,oe,ye),Ke.return=de,de=Ke)}return G(de);case z:e:{for(wt=ye.key;oe!==null;){if(oe.key===wt)if(oe.tag===4&&oe.stateNode.containerInfo===ye.containerInfo&&oe.stateNode.implementation===ye.implementation){m(de,oe.sibling),oe=S(oe,ye.children||[]),oe.return=de,de=oe;break e}else{m(de,oe);break}else h(de,oe);oe=oe.sibling}oe=qw(ye,de.mode,Ke),oe.return=de,de=oe}return G(de);case Ue:return wt=ye._init,hr(de,oe,wt(ye._payload),Ke)}if(gt(ye))return ft(de,oe,ye,Ke);if(Ae(ye))return mt(de,oe,ye,Ke);z_(de,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"?(ye=""+ye,oe!==null&&oe.tag===6?(m(de,oe.sibling),oe=S(oe,ye),oe.return=de,de=oe):(m(de,oe),oe=Xw(ye,de.mode,Ke),oe.return=de,de=oe),G(de)):m(de,oe)}return hr}var Pf=PP(!0),bP=PP(!1),$_=ql(null),W_=null,bf=null,sw=null;function aw(){sw=bf=W_=null}function ow(c){var h=$_.current;Dn($_),c._currentValue=h}function lw(c,h,m){for(;c!==null;){var x=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,x!==null&&(x.childLanes|=h)):x!==null&&(x.childLanes&h)!==h&&(x.childLanes|=h),c===m)break;c=c.return}}function Mf(c,h){W_=c,sw=bf=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&h)!==0&&(qi=!0),c.firstContext=null)}function Qs(c){var h=c._currentValue;if(sw!==c)if(c={context:c,memoizedValue:h,next:null},bf===null){if(W_===null)throw Error(t(308));bf=c,W_.dependencies={lanes:0,firstContext:c}}else bf=bf.next=c;return h}var Mu=null;function cw(c){Mu===null?Mu=[c]:Mu.push(c)}function MP(c,h,m,x){var S=h.interleaved;return S===null?(m.next=m,cw(h)):(m.next=S.next,S.next=m),h.interleaved=m,rl(c,x)}function rl(c,h){c.lanes|=h;var m=c.alternate;for(m!==null&&(m.lanes|=h),m=c,c=c.return;c!==null;)c.childLanes|=h,m=c.alternate,m!==null&&(m.childLanes|=h),m=c,c=c.return;return m.tag===3?m.stateNode:null}var Jl=!1;function uw(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kP(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function il(c,h){return{eventTime:c,lane:h,tag:0,payload:null,callback:null,next:null}}function ec(c,h,m){var x=c.updateQueue;if(x===null)return null;if(x=x.shared,(Zt&2)!==0){var S=x.pending;return S===null?h.next=h:(h.next=S.next,S.next=h),x.pending=h,rl(c,m)}return S=x.interleaved,S===null?(h.next=h,cw(x)):(h.next=S.next,S.next=h),x.interleaved=h,rl(c,m)}function H_(c,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194240)!==0)){var x=h.lanes;x&=c.pendingLanes,m|=x,h.lanes=m,B0(c,m)}}function NP(c,h){var m=c.updateQueue,x=c.alternate;if(x!==null&&(x=x.updateQueue,m===x)){var S=null,I=null;if(m=m.firstBaseUpdate,m!==null){do{var G={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};I===null?S=I=G:I=I.next=G,m=m.next}while(m!==null);I===null?S=I=h:I=I.next=h}else S=I=h;m={baseState:x.baseState,firstBaseUpdate:S,lastBaseUpdate:I,shared:x.shared,effects:x.effects},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=h:c.next=h,m.lastBaseUpdate=h}function K_(c,h,m,x){var S=c.updateQueue;Jl=!1;var I=S.firstBaseUpdate,G=S.lastBaseUpdate,J=S.shared.pending;if(J!==null){S.shared.pending=null;var ie=J,Ee=ie.next;ie.next=null,G===null?I=Ee:G.next=Ee,G=ie;var Ve=c.alternate;Ve!==null&&(Ve=Ve.updateQueue,J=Ve.lastBaseUpdate,J!==G&&(J===null?Ve.firstBaseUpdate=Ee:J.next=Ee,Ve.lastBaseUpdate=ie))}if(I!==null){var ze=S.baseState;G=0,Ve=Ee=ie=null,J=I;do{var De=J.lane,at=J.eventTime;if((x&De)===De){Ve!==null&&(Ve=Ve.next={eventTime:at,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var ft=c,mt=J;switch(De=h,at=m,mt.tag){case 1:if(ft=mt.payload,typeof ft=="function"){ze=ft.call(at,ze,De);break e}ze=ft;break e;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=mt.payload,De=typeof ft=="function"?ft.call(at,ze,De):ft,De==null)break e;ze=Ie({},ze,De);break e;case 2:Jl=!0}}J.callback!==null&&J.lane!==0&&(c.flags|=64,De=S.effects,De===null?S.effects=[J]:De.push(J))}else at={eventTime:at,lane:De,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Ve===null?(Ee=Ve=at,ie=ze):Ve=Ve.next=at,G|=De;if(J=J.next,J===null){if(J=S.shared.pending,J===null)break;De=J,J=De.next,De.next=null,S.lastBaseUpdate=De,S.shared.pending=null}}while(!0);if(Ve===null&&(ie=ze),S.baseState=ie,S.firstBaseUpdate=Ee,S.lastBaseUpdate=Ve,h=S.shared.interleaved,h!==null){S=h;do G|=S.lane,S=S.next;while(S!==h)}else I===null&&(S.shared.lanes=0);Lu|=G,c.lanes=G,c.memoizedState=ze}}function LP(c,h,m){if(c=h.effects,h.effects=null,c!==null)for(h=0;h<c.length;h++){var x=c[h],S=x.callback;if(S!==null){if(x.callback=null,x=m,typeof S!="function")throw Error(t(191,S));S.call(x)}}}var og={},ho=ql(og),lg=ql(og),cg=ql(og);function ku(c){if(c===og)throw Error(t(174));return c}function hw(c,h){switch(kn(cg,h),kn(lg,c),kn(ho,og),c=h.nodeType,c){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:Mi(null,"");break;default:c=c===8?h.parentNode:h,h=c.namespaceURI||null,c=c.tagName,h=Mi(h,c)}Dn(ho),kn(ho,h)}function kf(){Dn(ho),Dn(lg),Dn(cg)}function OP(c){ku(cg.current);var h=ku(ho.current),m=Mi(h,c.type);h!==m&&(kn(lg,c),kn(ho,m))}function fw(c){lg.current===c&&(Dn(ho),Dn(lg))}var Yn=ql(0);function Y_(c){for(var h=c;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var dw=[];function gw(){for(var c=0;c<dw.length;c++)dw[c]._workInProgressVersionPrimary=null;dw.length=0}var X_=k.ReactCurrentDispatcher,mw=k.ReactCurrentBatchConfig,Nu=0,Xn=null,Cr=null,jr=null,q_=!1,ug=!1,hg=0,sG=0;function pi(){throw Error(t(321))}function pw(c,h){if(h===null)return!1;for(var m=0;m<h.length&&m<c.length;m++)if(!Sa(c[m],h[m]))return!1;return!0}function _w(c,h,m,x,S,I){if(Nu=I,Xn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,X_.current=c===null||c.memoizedState===null?cG:uG,c=m(x,S),ug){I=0;do{if(ug=!1,hg=0,25<=I)throw Error(t(301));I+=1,jr=Cr=null,h.updateQueue=null,X_.current=hG,c=m(x,S)}while(ug)}if(X_.current=J_,h=Cr!==null&&Cr.next!==null,Nu=0,jr=Cr=Xn=null,q_=!1,h)throw Error(t(300));return c}function yw(){var c=hg!==0;return hg=0,c}function fo(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jr===null?Xn.memoizedState=jr=c:jr=jr.next=c,jr}function Js(){if(Cr===null){var c=Xn.alternate;c=c!==null?c.memoizedState:null}else c=Cr.next;var h=jr===null?Xn.memoizedState:jr.next;if(h!==null)jr=h,Cr=c;else{if(c===null)throw Error(t(310));Cr=c,c={memoizedState:Cr.memoizedState,baseState:Cr.baseState,baseQueue:Cr.baseQueue,queue:Cr.queue,next:null},jr===null?Xn.memoizedState=jr=c:jr=jr.next=c}return jr}function fg(c,h){return typeof h=="function"?h(c):h}function xw(c){var h=Js(),m=h.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=c;var x=Cr,S=x.baseQueue,I=m.pending;if(I!==null){if(S!==null){var G=S.next;S.next=I.next,I.next=G}x.baseQueue=S=I,m.pending=null}if(S!==null){I=S.next,x=x.baseState;var J=G=null,ie=null,Ee=I;do{var Ve=Ee.lane;if((Nu&Ve)===Ve)ie!==null&&(ie=ie.next={lane:0,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),x=Ee.hasEagerState?Ee.eagerState:c(x,Ee.action);else{var ze={lane:Ve,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null};ie===null?(J=ie=ze,G=x):ie=ie.next=ze,Xn.lanes|=Ve,Lu|=Ve}Ee=Ee.next}while(Ee!==null&&Ee!==I);ie===null?G=x:ie.next=J,Sa(x,h.memoizedState)||(qi=!0),h.memoizedState=x,h.baseState=G,h.baseQueue=ie,m.lastRenderedState=x}if(c=m.interleaved,c!==null){S=c;do I=S.lane,Xn.lanes|=I,Lu|=I,S=S.next;while(S!==c)}else S===null&&(m.lanes=0);return[h.memoizedState,m.dispatch]}function vw(c){var h=Js(),m=h.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=c;var x=m.dispatch,S=m.pending,I=h.memoizedState;if(S!==null){m.pending=null;var G=S=S.next;do I=c(I,G.action),G=G.next;while(G!==S);Sa(I,h.memoizedState)||(qi=!0),h.memoizedState=I,h.baseQueue===null&&(h.baseState=I),m.lastRenderedState=I}return[I,x]}function DP(){}function FP(c,h){var m=Xn,x=Js(),S=h(),I=!Sa(x.memoizedState,S);if(I&&(x.memoizedState=S,qi=!0),x=x.queue,Ew(GP.bind(null,m,x,c),[c]),x.getSnapshot!==h||I||jr!==null&&jr.memoizedState.tag&1){if(m.flags|=2048,dg(9,jP.bind(null,m,x,S,h),void 0,null),Gr===null)throw Error(t(349));(Nu&30)!==0||VP(m,h,S)}return S}function VP(c,h,m){c.flags|=16384,c={getSnapshot:h,value:m},h=Xn.updateQueue,h===null?(h={lastEffect:null,stores:null},Xn.updateQueue=h,h.stores=[c]):(m=h.stores,m===null?h.stores=[c]:m.push(c))}function jP(c,h,m,x){h.value=m,h.getSnapshot=x,BP(h)&&UP(c)}function GP(c,h,m){return m(function(){BP(h)&&UP(c)})}function BP(c){var h=c.getSnapshot;c=c.value;try{var m=h();return!Sa(c,m)}catch{return!0}}function UP(c){var h=rl(c,1);h!==null&&Ca(h,c,1,-1)}function zP(c){var h=fo();return typeof c=="function"&&(c=c()),h.memoizedState=h.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fg,lastRenderedState:c},h.queue=c,c=c.dispatch=lG.bind(null,Xn,c),[h.memoizedState,c]}function dg(c,h,m,x){return c={tag:c,create:h,destroy:m,deps:x,next:null},h=Xn.updateQueue,h===null?(h={lastEffect:null,stores:null},Xn.updateQueue=h,h.lastEffect=c.next=c):(m=h.lastEffect,m===null?h.lastEffect=c.next=c:(x=m.next,m.next=c,c.next=x,h.lastEffect=c)),c}function $P(){return Js().memoizedState}function Z_(c,h,m,x){var S=fo();Xn.flags|=c,S.memoizedState=dg(1|h,m,void 0,x===void 0?null:x)}function Q_(c,h,m,x){var S=Js();x=x===void 0?null:x;var I=void 0;if(Cr!==null){var G=Cr.memoizedState;if(I=G.destroy,x!==null&&pw(x,G.deps)){S.memoizedState=dg(h,m,I,x);return}}Xn.flags|=c,S.memoizedState=dg(1|h,m,I,x)}function WP(c,h){return Z_(8390656,8,c,h)}function Ew(c,h){return Q_(2048,8,c,h)}function HP(c,h){return Q_(4,2,c,h)}function KP(c,h){return Q_(4,4,c,h)}function YP(c,h){if(typeof h=="function")return c=c(),h(c),function(){h(null)};if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function XP(c,h,m){return m=m!=null?m.concat([c]):null,Q_(4,4,YP.bind(null,h,c),m)}function ww(){}function qP(c,h){var m=Js();h=h===void 0?null:h;var x=m.memoizedState;return x!==null&&h!==null&&pw(h,x[1])?x[0]:(m.memoizedState=[c,h],c)}function ZP(c,h){var m=Js();h=h===void 0?null:h;var x=m.memoizedState;return x!==null&&h!==null&&pw(h,x[1])?x[0]:(c=c(),m.memoizedState=[c,h],c)}function QP(c,h,m){return(Nu&21)===0?(c.baseState&&(c.baseState=!1,qi=!0),c.memoizedState=m):(Sa(m,h)||(m=j0(),Xn.lanes|=m,Lu|=m,c.baseState=!0),h)}function aG(c,h){var m=Ht;Ht=m!==0&&4>m?m:4,c(!0);var x=mw.transition;mw.transition={};try{c(!1),h()}finally{Ht=m,mw.transition=x}}function JP(){return Js().memoizedState}function oG(c,h,m){var x=ic(c);if(m={lane:x,action:m,hasEagerState:!1,eagerState:null,next:null},e4(c))t4(h,m);else if(m=MP(c,h,m,x),m!==null){var S=Li();Ca(m,c,x,S),n4(m,h,x)}}function lG(c,h,m){var x=ic(c),S={lane:x,action:m,hasEagerState:!1,eagerState:null,next:null};if(e4(c))t4(h,S);else{var I=c.alternate;if(c.lanes===0&&(I===null||I.lanes===0)&&(I=h.lastRenderedReducer,I!==null))try{var G=h.lastRenderedState,J=I(G,m);if(S.hasEagerState=!0,S.eagerState=J,Sa(J,G)){var ie=h.interleaved;ie===null?(S.next=S,cw(h)):(S.next=ie.next,ie.next=S),h.interleaved=S;return}}catch{}m=MP(c,h,S,x),m!==null&&(S=Li(),Ca(m,c,x,S),n4(m,h,x))}}function e4(c){var h=c.alternate;return c===Xn||h!==null&&h===Xn}function t4(c,h){ug=q_=!0;var m=c.pending;m===null?h.next=h:(h.next=m.next,m.next=h),c.pending=h}function n4(c,h,m){if((m&4194240)!==0){var x=h.lanes;x&=c.pendingLanes,m|=x,h.lanes=m,B0(c,m)}}var J_={readContext:Qs,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useInsertionEffect:pi,useLayoutEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useMutableSource:pi,useSyncExternalStore:pi,useId:pi,unstable_isNewReconciler:!1},cG={readContext:Qs,useCallback:function(c,h){return fo().memoizedState=[c,h===void 0?null:h],c},useContext:Qs,useEffect:WP,useImperativeHandle:function(c,h,m){return m=m!=null?m.concat([c]):null,Z_(4194308,4,YP.bind(null,h,c),m)},useLayoutEffect:function(c,h){return Z_(4194308,4,c,h)},useInsertionEffect:function(c,h){return Z_(4,2,c,h)},useMemo:function(c,h){var m=fo();return h=h===void 0?null:h,c=c(),m.memoizedState=[c,h],c},useReducer:function(c,h,m){var x=fo();return h=m!==void 0?m(h):h,x.memoizedState=x.baseState=h,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:h},x.queue=c,c=c.dispatch=oG.bind(null,Xn,c),[x.memoizedState,c]},useRef:function(c){var h=fo();return c={current:c},h.memoizedState=c},useState:zP,useDebugValue:ww,useDeferredValue:function(c){return fo().memoizedState=c},useTransition:function(){var c=zP(!1),h=c[0];return c=aG.bind(null,c[1]),fo().memoizedState=c,[h,c]},useMutableSource:function(){},useSyncExternalStore:function(c,h,m){var x=Xn,S=fo();if(Un){if(m===void 0)throw Error(t(407));m=m()}else{if(m=h(),Gr===null)throw Error(t(349));(Nu&30)!==0||VP(x,h,m)}S.memoizedState=m;var I={value:m,getSnapshot:h};return S.queue=I,WP(GP.bind(null,x,I,c),[c]),x.flags|=2048,dg(9,jP.bind(null,x,I,m,h),void 0,null),m},useId:function(){var c=fo(),h=Gr.identifierPrefix;if(Un){var m=nl,x=tl;m=(x&~(1<<32-Kn(x)-1)).toString(32)+m,h=":"+h+"R"+m,m=hg++,0<m&&(h+="H"+m.toString(32)),h+=":"}else m=sG++,h=":"+h+"r"+m.toString(32)+":";return c.memoizedState=h},unstable_isNewReconciler:!1},uG={readContext:Qs,useCallback:qP,useContext:Qs,useEffect:Ew,useImperativeHandle:XP,useInsertionEffect:HP,useLayoutEffect:KP,useMemo:ZP,useReducer:xw,useRef:$P,useState:function(){return xw(fg)},useDebugValue:ww,useDeferredValue:function(c){var h=Js();return QP(h,Cr.memoizedState,c)},useTransition:function(){var c=xw(fg)[0],h=Js().memoizedState;return[c,h]},useMutableSource:DP,useSyncExternalStore:FP,useId:JP,unstable_isNewReconciler:!1},hG={readContext:Qs,useCallback:qP,useContext:Qs,useEffect:Ew,useImperativeHandle:XP,useInsertionEffect:HP,useLayoutEffect:KP,useMemo:ZP,useReducer:vw,useRef:$P,useState:function(){return vw(fg)},useDebugValue:ww,useDeferredValue:function(c){var h=Js();return Cr===null?h.memoizedState=c:QP(h,Cr.memoizedState,c)},useTransition:function(){var c=vw(fg)[0],h=Js().memoizedState;return[c,h]},useMutableSource:DP,useSyncExternalStore:FP,useId:JP,unstable_isNewReconciler:!1};function Ia(c,h){if(c&&c.defaultProps){h=Ie({},h),c=c.defaultProps;for(var m in c)h[m]===void 0&&(h[m]=c[m]);return h}return h}function Sw(c,h,m,x){h=c.memoizedState,m=m(x,h),m=m==null?h:Ie({},h,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}var e1={isMounted:function(c){return(c=c._reactInternals)?Q(c)===c:!1},enqueueSetState:function(c,h,m){c=c._reactInternals;var x=Li(),S=ic(c),I=il(x,S);I.payload=h,m!=null&&(I.callback=m),h=ec(c,I,S),h!==null&&(Ca(h,c,S,x),H_(h,c,S))},enqueueReplaceState:function(c,h,m){c=c._reactInternals;var x=Li(),S=ic(c),I=il(x,S);I.tag=1,I.payload=h,m!=null&&(I.callback=m),h=ec(c,I,S),h!==null&&(Ca(h,c,S,x),H_(h,c,S))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var m=Li(),x=ic(c),S=il(m,x);S.tag=2,h!=null&&(S.callback=h),h=ec(c,S,x),h!==null&&(Ca(h,c,x,m),H_(h,c,x))}};function r4(c,h,m,x,S,I,G){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(x,I,G):h.prototype&&h.prototype.isPureReactComponent?!J0(m,x)||!J0(S,I):!0}function i4(c,h,m){var x=!1,S=Zl,I=h.contextType;return typeof I=="object"&&I!==null?I=Qs(I):(S=Xi(h)?Cu:mi.current,x=h.contextTypes,I=(x=x!=null)?If(c,S):Zl),h=new h(m,I),c.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=e1,c.stateNode=h,h._reactInternals=c,x&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=S,c.__reactInternalMemoizedMaskedChildContext=I),h}function s4(c,h,m,x){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,x),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,x),h.state!==c&&e1.enqueueReplaceState(h,h.state,null)}function Tw(c,h,m,x){var S=c.stateNode;S.props=m,S.state=c.memoizedState,S.refs={},uw(c);var I=h.contextType;typeof I=="object"&&I!==null?S.context=Qs(I):(I=Xi(h)?Cu:mi.current,S.context=If(c,I)),S.state=c.memoizedState,I=h.getDerivedStateFromProps,typeof I=="function"&&(Sw(c,h,I,m),S.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(h=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),h!==S.state&&e1.enqueueReplaceState(S,S.state,null),K_(c,m,S,x),S.state=c.memoizedState),typeof S.componentDidMount=="function"&&(c.flags|=4194308)}function Nf(c,h){try{var m="",x=h;do m+=ee(x),x=x.return;while(x);var S=m}catch(I){S=`
Error generating stack: `+I.message+`
`+I.stack}return{value:c,source:h,stack:S,digest:null}}function Iw(c,h,m){return{value:c,source:null,stack:m??null,digest:h??null}}function Aw(c,h){try{console.error(h.value)}catch(m){setTimeout(function(){throw m})}}var fG=typeof WeakMap=="function"?WeakMap:Map;function a4(c,h,m){m=il(-1,m),m.tag=3,m.payload={element:null};var x=h.value;return m.callback=function(){o1||(o1=!0,Bw=x),Aw(c,h)},m}function o4(c,h,m){m=il(-1,m),m.tag=3;var x=c.type.getDerivedStateFromError;if(typeof x=="function"){var S=h.value;m.payload=function(){return x(S)},m.callback=function(){Aw(c,h)}}var I=c.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(m.callback=function(){Aw(c,h),typeof x!="function"&&(nc===null?nc=new Set([this]):nc.add(this));var G=h.stack;this.componentDidCatch(h.value,{componentStack:G!==null?G:""})}),m}function l4(c,h,m){var x=c.pingCache;if(x===null){x=c.pingCache=new fG;var S=new Set;x.set(h,S)}else S=x.get(h),S===void 0&&(S=new Set,x.set(h,S));S.has(m)||(S.add(m),c=AG.bind(null,c,h,m),h.then(c,c))}function c4(c){do{var h;if((h=c.tag===13)&&(h=c.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return c;c=c.return}while(c!==null);return null}function u4(c,h,m,x,S){return(c.mode&1)===0?(c===h?c.flags|=65536:(c.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(h=il(-1,1),h.tag=2,ec(m,h,1))),m.lanes|=1),c):(c.flags|=65536,c.lanes=S,c)}var dG=k.ReactCurrentOwner,qi=!1;function Ni(c,h,m,x){h.child=c===null?bP(h,null,m,x):Pf(h,c.child,m,x)}function h4(c,h,m,x,S){m=m.render;var I=h.ref;return Mf(h,S),x=_w(c,h,m,x,I,S),m=yw(),c!==null&&!qi?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~S,sl(c,h,S)):(Un&&m&&ew(h),h.flags|=1,Ni(c,h,x,S),h.child)}function f4(c,h,m,x,S){if(c===null){var I=m.type;return typeof I=="function"&&!Yw(I)&&I.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(h.tag=15,h.type=I,d4(c,h,I,x,S)):(c=d1(m.type,null,x,h,h.mode,S),c.ref=h.ref,c.return=h,h.child=c)}if(I=c.child,(c.lanes&S)===0){var G=I.memoizedProps;if(m=m.compare,m=m!==null?m:J0,m(G,x)&&c.ref===h.ref)return sl(c,h,S)}return h.flags|=1,c=ac(I,x),c.ref=h.ref,c.return=h,h.child=c}function d4(c,h,m,x,S){if(c!==null){var I=c.memoizedProps;if(J0(I,x)&&c.ref===h.ref)if(qi=!1,h.pendingProps=x=I,(c.lanes&S)!==0)(c.flags&131072)!==0&&(qi=!0);else return h.lanes=c.lanes,sl(c,h,S)}return Rw(c,h,m,x,S)}function g4(c,h,m){var x=h.pendingProps,S=x.children,I=c!==null?c.memoizedState:null;if(x.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},kn(Of,Cs),Cs|=m;else{if((m&1073741824)===0)return c=I!==null?I.baseLanes|m:m,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:c,cachePool:null,transitions:null},h.updateQueue=null,kn(Of,Cs),Cs|=c,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=I!==null?I.baseLanes:m,kn(Of,Cs),Cs|=x}else I!==null?(x=I.baseLanes|m,h.memoizedState=null):x=m,kn(Of,Cs),Cs|=x;return Ni(c,h,S,m),h.child}function m4(c,h){var m=h.ref;(c===null&&m!==null||c!==null&&c.ref!==m)&&(h.flags|=512,h.flags|=2097152)}function Rw(c,h,m,x,S){var I=Xi(m)?Cu:mi.current;return I=If(h,I),Mf(h,S),m=_w(c,h,m,x,I,S),x=yw(),c!==null&&!qi?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~S,sl(c,h,S)):(Un&&x&&ew(h),h.flags|=1,Ni(c,h,m,S),h.child)}function p4(c,h,m,x,S){if(Xi(m)){var I=!0;V_(h)}else I=!1;if(Mf(h,S),h.stateNode===null)n1(c,h),i4(h,m,x),Tw(h,m,x,S),x=!0;else if(c===null){var G=h.stateNode,J=h.memoizedProps;G.props=J;var ie=G.context,Ee=m.contextType;typeof Ee=="object"&&Ee!==null?Ee=Qs(Ee):(Ee=Xi(m)?Cu:mi.current,Ee=If(h,Ee));var Ve=m.getDerivedStateFromProps,ze=typeof Ve=="function"||typeof G.getSnapshotBeforeUpdate=="function";ze||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(J!==x||ie!==Ee)&&s4(h,G,x,Ee),Jl=!1;var De=h.memoizedState;G.state=De,K_(h,x,G,S),ie=h.memoizedState,J!==x||De!==ie||Yi.current||Jl?(typeof Ve=="function"&&(Sw(h,m,Ve,x),ie=h.memoizedState),(J=Jl||r4(h,m,J,x,De,ie,Ee))?(ze||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(h.flags|=4194308)):(typeof G.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=x,h.memoizedState=ie),G.props=x,G.state=ie,G.context=Ee,x=J):(typeof G.componentDidMount=="function"&&(h.flags|=4194308),x=!1)}else{G=h.stateNode,kP(c,h),J=h.memoizedProps,Ee=h.type===h.elementType?J:Ia(h.type,J),G.props=Ee,ze=h.pendingProps,De=G.context,ie=m.contextType,typeof ie=="object"&&ie!==null?ie=Qs(ie):(ie=Xi(m)?Cu:mi.current,ie=If(h,ie));var at=m.getDerivedStateFromProps;(Ve=typeof at=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(J!==ze||De!==ie)&&s4(h,G,x,ie),Jl=!1,De=h.memoizedState,G.state=De,K_(h,x,G,S);var ft=h.memoizedState;J!==ze||De!==ft||Yi.current||Jl?(typeof at=="function"&&(Sw(h,m,at,x),ft=h.memoizedState),(Ee=Jl||r4(h,m,Ee,x,De,ft,ie)||!1)?(Ve||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(x,ft,ie),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(x,ft,ie)),typeof G.componentDidUpdate=="function"&&(h.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof G.componentDidUpdate!="function"||J===c.memoizedProps&&De===c.memoizedState||(h.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||J===c.memoizedProps&&De===c.memoizedState||(h.flags|=1024),h.memoizedProps=x,h.memoizedState=ft),G.props=x,G.state=ft,G.context=ie,x=Ee):(typeof G.componentDidUpdate!="function"||J===c.memoizedProps&&De===c.memoizedState||(h.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||J===c.memoizedProps&&De===c.memoizedState||(h.flags|=1024),x=!1)}return Cw(c,h,m,x,I,S)}function Cw(c,h,m,x,S,I){m4(c,h);var G=(h.flags&128)!==0;if(!x&&!G)return S&&EP(h,m,!1),sl(c,h,I);x=h.stateNode,dG.current=h;var J=G&&typeof m.getDerivedStateFromError!="function"?null:x.render();return h.flags|=1,c!==null&&G?(h.child=Pf(h,c.child,null,I),h.child=Pf(h,null,J,I)):Ni(c,h,J,I),h.memoizedState=x.state,S&&EP(h,m,!0),h.child}function _4(c){var h=c.stateNode;h.pendingContext?xP(c,h.pendingContext,h.pendingContext!==h.context):h.context&&xP(c,h.context,!1),hw(c,h.containerInfo)}function y4(c,h,m,x,S){return Cf(),iw(S),h.flags|=256,Ni(c,h,m,x),h.child}var Pw={dehydrated:null,treeContext:null,retryLane:0};function bw(c){return{baseLanes:c,cachePool:null,transitions:null}}function x4(c,h,m){var x=h.pendingProps,S=Yn.current,I=!1,G=(h.flags&128)!==0,J;if((J=G)||(J=c!==null&&c.memoizedState===null?!1:(S&2)!==0),J?(I=!0,h.flags&=-129):(c===null||c.memoizedState!==null)&&(S|=1),kn(Yn,S&1),c===null)return rw(h),c=h.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((h.mode&1)===0?h.lanes=1:c.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(G=x.children,c=x.fallback,I?(x=h.mode,I=h.child,G={mode:"hidden",children:G},(x&1)===0&&I!==null?(I.childLanes=0,I.pendingProps=G):I=g1(G,x,0,null),c=Vu(c,x,m,null),I.return=h,c.return=h,I.sibling=c,h.child=I,h.child.memoizedState=bw(m),h.memoizedState=Pw,c):Mw(h,G));if(S=c.memoizedState,S!==null&&(J=S.dehydrated,J!==null))return gG(c,h,G,x,J,S,m);if(I){I=x.fallback,G=h.mode,S=c.child,J=S.sibling;var ie={mode:"hidden",children:x.children};return(G&1)===0&&h.child!==S?(x=h.child,x.childLanes=0,x.pendingProps=ie,h.deletions=null):(x=ac(S,ie),x.subtreeFlags=S.subtreeFlags&14680064),J!==null?I=ac(J,I):(I=Vu(I,G,m,null),I.flags|=2),I.return=h,x.return=h,x.sibling=I,h.child=x,x=I,I=h.child,G=c.child.memoizedState,G=G===null?bw(m):{baseLanes:G.baseLanes|m,cachePool:null,transitions:G.transitions},I.memoizedState=G,I.childLanes=c.childLanes&~m,h.memoizedState=Pw,x}return I=c.child,c=I.sibling,x=ac(I,{mode:"visible",children:x.children}),(h.mode&1)===0&&(x.lanes=m),x.return=h,x.sibling=null,c!==null&&(m=h.deletions,m===null?(h.deletions=[c],h.flags|=16):m.push(c)),h.child=x,h.memoizedState=null,x}function Mw(c,h){return h=g1({mode:"visible",children:h},c.mode,0,null),h.return=c,c.child=h}function t1(c,h,m,x){return x!==null&&iw(x),Pf(h,c.child,null,m),c=Mw(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function gG(c,h,m,x,S,I,G){if(m)return h.flags&256?(h.flags&=-257,x=Iw(Error(t(422))),t1(c,h,G,x)):h.memoizedState!==null?(h.child=c.child,h.flags|=128,null):(I=x.fallback,S=h.mode,x=g1({mode:"visible",children:x.children},S,0,null),I=Vu(I,S,G,null),I.flags|=2,x.return=h,I.return=h,x.sibling=I,h.child=x,(h.mode&1)!==0&&Pf(h,c.child,null,G),h.child.memoizedState=bw(G),h.memoizedState=Pw,I);if((h.mode&1)===0)return t1(c,h,G,null);if(S.data==="$!"){if(x=S.nextSibling&&S.nextSibling.dataset,x)var J=x.dgst;return x=J,I=Error(t(419)),x=Iw(I,x,void 0),t1(c,h,G,x)}if(J=(G&c.childLanes)!==0,qi||J){if(x=Gr,x!==null){switch(G&-G){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(x.suspendedLanes|G))!==0?0:S,S!==0&&S!==I.retryLane&&(I.retryLane=S,rl(c,S),Ca(x,c,S,-1))}return Kw(),x=Iw(Error(t(421))),t1(c,h,G,x)}return S.data==="$?"?(h.flags|=128,h.child=c.child,h=RG.bind(null,c),S._reactRetry=h,null):(c=I.treeContext,Rs=Xl(S.nextSibling),As=h,Un=!0,Ta=null,c!==null&&(qs[Zs++]=tl,qs[Zs++]=nl,qs[Zs++]=Pu,tl=c.id,nl=c.overflow,Pu=h),h=Mw(h,x.children),h.flags|=4096,h)}function v4(c,h,m){c.lanes|=h;var x=c.alternate;x!==null&&(x.lanes|=h),lw(c.return,h,m)}function kw(c,h,m,x,S){var I=c.memoizedState;I===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:x,tail:m,tailMode:S}:(I.isBackwards=h,I.rendering=null,I.renderingStartTime=0,I.last=x,I.tail=m,I.tailMode=S)}function E4(c,h,m){var x=h.pendingProps,S=x.revealOrder,I=x.tail;if(Ni(c,h,x.children,m),x=Yn.current,(x&2)!==0)x=x&1|2,h.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&v4(c,m,h);else if(c.tag===19)v4(c,m,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}x&=1}if(kn(Yn,x),(h.mode&1)===0)h.memoizedState=null;else switch(S){case"forwards":for(m=h.child,S=null;m!==null;)c=m.alternate,c!==null&&Y_(c)===null&&(S=m),m=m.sibling;m=S,m===null?(S=h.child,h.child=null):(S=m.sibling,m.sibling=null),kw(h,!1,S,m,I);break;case"backwards":for(m=null,S=h.child,h.child=null;S!==null;){if(c=S.alternate,c!==null&&Y_(c)===null){h.child=S;break}c=S.sibling,S.sibling=m,m=S,S=c}kw(h,!0,m,null,I);break;case"together":kw(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function n1(c,h){(h.mode&1)===0&&c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2)}function sl(c,h,m){if(c!==null&&(h.dependencies=c.dependencies),Lu|=h.lanes,(m&h.childLanes)===0)return null;if(c!==null&&h.child!==c.child)throw Error(t(153));if(h.child!==null){for(c=h.child,m=ac(c,c.pendingProps),h.child=m,m.return=h;c.sibling!==null;)c=c.sibling,m=m.sibling=ac(c,c.pendingProps),m.return=h;m.sibling=null}return h.child}function mG(c,h,m){switch(h.tag){case 3:_4(h),Cf();break;case 5:OP(h);break;case 1:Xi(h.type)&&V_(h);break;case 4:hw(h,h.stateNode.containerInfo);break;case 10:var x=h.type._context,S=h.memoizedProps.value;kn($_,x._currentValue),x._currentValue=S;break;case 13:if(x=h.memoizedState,x!==null)return x.dehydrated!==null?(kn(Yn,Yn.current&1),h.flags|=128,null):(m&h.child.childLanes)!==0?x4(c,h,m):(kn(Yn,Yn.current&1),c=sl(c,h,m),c!==null?c.sibling:null);kn(Yn,Yn.current&1);break;case 19:if(x=(m&h.childLanes)!==0,(c.flags&128)!==0){if(x)return E4(c,h,m);h.flags|=128}if(S=h.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),kn(Yn,Yn.current),x)break;return null;case 22:case 23:return h.lanes=0,g4(c,h,m)}return sl(c,h,m)}var w4,Nw,S4,T4;w4=function(c,h){for(var m=h.child;m!==null;){if(m.tag===5||m.tag===6)c.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Nw=function(){},S4=function(c,h,m,x){var S=c.memoizedProps;if(S!==x){c=h.stateNode,ku(ho.current);var I=null;switch(m){case"input":S=He(c,S),x=He(c,x),I=[];break;case"select":S=Ie({},S,{value:void 0}),x=Ie({},x,{value:void 0}),I=[];break;case"textarea":S=Rn(c,S),x=Rn(c,x),I=[];break;default:typeof S.onClick!="function"&&typeof x.onClick=="function"&&(c.onclick=O_)}Zr(m,x);var G;m=null;for(Ee in S)if(!x.hasOwnProperty(Ee)&&S.hasOwnProperty(Ee)&&S[Ee]!=null)if(Ee==="style"){var J=S[Ee];for(G in J)J.hasOwnProperty(G)&&(m||(m={}),m[G]="")}else Ee!=="dangerouslySetInnerHTML"&&Ee!=="children"&&Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&Ee!=="autoFocus"&&(i.hasOwnProperty(Ee)?I||(I=[]):(I=I||[]).push(Ee,null));for(Ee in x){var ie=x[Ee];if(J=S?.[Ee],x.hasOwnProperty(Ee)&&ie!==J&&(ie!=null||J!=null))if(Ee==="style")if(J){for(G in J)!J.hasOwnProperty(G)||ie&&ie.hasOwnProperty(G)||(m||(m={}),m[G]="");for(G in ie)ie.hasOwnProperty(G)&&J[G]!==ie[G]&&(m||(m={}),m[G]=ie[G])}else m||(I||(I=[]),I.push(Ee,m)),m=ie;else Ee==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,J=J?J.__html:void 0,ie!=null&&J!==ie&&(I=I||[]).push(Ee,ie)):Ee==="children"?typeof ie!="string"&&typeof ie!="number"||(I=I||[]).push(Ee,""+ie):Ee!=="suppressContentEditableWarning"&&Ee!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ee)?(ie!=null&&Ee==="onScroll"&&On("scroll",c),I||J===ie||(I=[])):(I=I||[]).push(Ee,ie))}m&&(I=I||[]).push("style",m);var Ee=I;(h.updateQueue=Ee)&&(h.flags|=4)}},T4=function(c,h,m,x){m!==x&&(h.flags|=4)};function gg(c,h){if(!Un)switch(c.tailMode){case"hidden":h=c.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:x.sibling=null}}function _i(c){var h=c.alternate!==null&&c.alternate.child===c.child,m=0,x=0;if(h)for(var S=c.child;S!==null;)m|=S.lanes|S.childLanes,x|=S.subtreeFlags&14680064,x|=S.flags&14680064,S.return=c,S=S.sibling;else for(S=c.child;S!==null;)m|=S.lanes|S.childLanes,x|=S.subtreeFlags,x|=S.flags,S.return=c,S=S.sibling;return c.subtreeFlags|=x,c.childLanes=m,h}function pG(c,h,m){var x=h.pendingProps;switch(tw(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _i(h),null;case 1:return Xi(h.type)&&F_(),_i(h),null;case 3:return x=h.stateNode,kf(),Dn(Yi),Dn(mi),gw(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(c===null||c.child===null)&&(U_(h)?h.flags|=4:c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Ta!==null&&($w(Ta),Ta=null))),Nw(c,h),_i(h),null;case 5:fw(h);var S=ku(cg.current);if(m=h.type,c!==null&&h.stateNode!=null)S4(c,h,m,x,S),c.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!x){if(h.stateNode===null)throw Error(t(166));return _i(h),null}if(c=ku(ho.current),U_(h)){x=h.stateNode,m=h.type;var I=h.memoizedProps;switch(x[uo]=h,x[ig]=I,c=(h.mode&1)!==0,m){case"dialog":On("cancel",x),On("close",x);break;case"iframe":case"object":case"embed":On("load",x);break;case"video":case"audio":for(S=0;S<tg.length;S++)On(tg[S],x);break;case"source":On("error",x);break;case"img":case"image":case"link":On("error",x),On("load",x);break;case"details":On("toggle",x);break;case"input":ue(x,I),On("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!I.multiple},On("invalid",x);break;case"textarea":Yt(x,I),On("invalid",x)}Zr(m,I),S=null;for(var G in I)if(I.hasOwnProperty(G)){var J=I[G];G==="children"?typeof J=="string"?x.textContent!==J&&(I.suppressHydrationWarning!==!0&&L_(x.textContent,J,c),S=["children",J]):typeof J=="number"&&x.textContent!==""+J&&(I.suppressHydrationWarning!==!0&&L_(x.textContent,J,c),S=["children",""+J]):i.hasOwnProperty(G)&&J!=null&&G==="onScroll"&&On("scroll",x)}switch(m){case"input":D(x),lt(x,I,!0);break;case"textarea":D(x),gr(x);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(x.onclick=O_)}x=S,h.updateQueue=x,x!==null&&(h.flags|=4)}else{G=S.nodeType===9?S:S.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=Wi(m)),c==="http://www.w3.org/1999/xhtml"?m==="script"?(c=G.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof x.is=="string"?c=G.createElement(m,{is:x.is}):(c=G.createElement(m),m==="select"&&(G=c,x.multiple?G.multiple=!0:x.size&&(G.size=x.size))):c=G.createElementNS(c,m),c[uo]=h,c[ig]=x,w4(c,h,!1,!1),h.stateNode=c;e:{switch(G=va(m,x),m){case"dialog":On("cancel",c),On("close",c),S=x;break;case"iframe":case"object":case"embed":On("load",c),S=x;break;case"video":case"audio":for(S=0;S<tg.length;S++)On(tg[S],c);S=x;break;case"source":On("error",c),S=x;break;case"img":case"image":case"link":On("error",c),On("load",c),S=x;break;case"details":On("toggle",c),S=x;break;case"input":ue(c,x),S=He(c,x),On("invalid",c);break;case"option":S=x;break;case"select":c._wrapperState={wasMultiple:!!x.multiple},S=Ie({},x,{value:void 0}),On("invalid",c);break;case"textarea":Yt(c,x),S=Rn(c,x),On("invalid",c);break;default:S=x}Zr(m,S),J=S;for(I in J)if(J.hasOwnProperty(I)){var ie=J[I];I==="style"?Ks(c,ie):I==="dangerouslySetInnerHTML"?(ie=ie?ie.__html:void 0,ie!=null&&Wo(c,ie)):I==="children"?typeof ie=="string"?(m!=="textarea"||ie!=="")&&ms(c,ie):typeof ie=="number"&&ms(c,""+ie):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(i.hasOwnProperty(I)?ie!=null&&I==="onScroll"&&On("scroll",c):ie!=null&&M(c,I,ie,G))}switch(m){case"input":D(c),lt(c,x,!1);break;case"textarea":D(c),gr(c);break;case"option":x.value!=null&&c.setAttribute("value",""+Ne(x.value));break;case"select":c.multiple=!!x.multiple,I=x.value,I!=null?Ot(c,!!x.multiple,I,!1):x.defaultValue!=null&&Ot(c,!!x.multiple,x.defaultValue,!0);break;default:typeof S.onClick=="function"&&(c.onclick=O_)}switch(m){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return _i(h),null;case 6:if(c&&h.stateNode!=null)T4(c,h,c.memoizedProps,x);else{if(typeof x!="string"&&h.stateNode===null)throw Error(t(166));if(m=ku(cg.current),ku(ho.current),U_(h)){if(x=h.stateNode,m=h.memoizedProps,x[uo]=h,(I=x.nodeValue!==m)&&(c=As,c!==null))switch(c.tag){case 3:L_(x.nodeValue,m,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&L_(x.nodeValue,m,(c.mode&1)!==0)}I&&(h.flags|=4)}else x=(m.nodeType===9?m:m.ownerDocument).createTextNode(x),x[uo]=h,h.stateNode=x}return _i(h),null;case 13:if(Dn(Yn),x=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Un&&Rs!==null&&(h.mode&1)!==0&&(h.flags&128)===0)RP(),Cf(),h.flags|=98560,I=!1;else if(I=U_(h),x!==null&&x.dehydrated!==null){if(c===null){if(!I)throw Error(t(318));if(I=h.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(t(317));I[uo]=h}else Cf(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;_i(h),I=!1}else Ta!==null&&($w(Ta),Ta=null),I=!0;if(!I)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=m,h):(x=x!==null,x!==(c!==null&&c.memoizedState!==null)&&x&&(h.child.flags|=8192,(h.mode&1)!==0&&(c===null||(Yn.current&1)!==0?Pr===0&&(Pr=3):Kw())),h.updateQueue!==null&&(h.flags|=4),_i(h),null);case 4:return kf(),Nw(c,h),c===null&&ng(h.stateNode.containerInfo),_i(h),null;case 10:return ow(h.type._context),_i(h),null;case 17:return Xi(h.type)&&F_(),_i(h),null;case 19:if(Dn(Yn),I=h.memoizedState,I===null)return _i(h),null;if(x=(h.flags&128)!==0,G=I.rendering,G===null)if(x)gg(I,!1);else{if(Pr!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(G=Y_(c),G!==null){for(h.flags|=128,gg(I,!1),x=G.updateQueue,x!==null&&(h.updateQueue=x,h.flags|=4),h.subtreeFlags=0,x=m,m=h.child;m!==null;)I=m,c=x,I.flags&=14680066,G=I.alternate,G===null?(I.childLanes=0,I.lanes=c,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=G.childLanes,I.lanes=G.lanes,I.child=G.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=G.memoizedProps,I.memoizedState=G.memoizedState,I.updateQueue=G.updateQueue,I.type=G.type,c=G.dependencies,I.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),m=m.sibling;return kn(Yn,Yn.current&1|2),h.child}c=c.sibling}I.tail!==null&&Be()>Df&&(h.flags|=128,x=!0,gg(I,!1),h.lanes=4194304)}else{if(!x)if(c=Y_(G),c!==null){if(h.flags|=128,x=!0,m=c.updateQueue,m!==null&&(h.updateQueue=m,h.flags|=4),gg(I,!0),I.tail===null&&I.tailMode==="hidden"&&!G.alternate&&!Un)return _i(h),null}else 2*Be()-I.renderingStartTime>Df&&m!==1073741824&&(h.flags|=128,x=!0,gg(I,!1),h.lanes=4194304);I.isBackwards?(G.sibling=h.child,h.child=G):(m=I.last,m!==null?m.sibling=G:h.child=G,I.last=G)}return I.tail!==null?(h=I.tail,I.rendering=h,I.tail=h.sibling,I.renderingStartTime=Be(),h.sibling=null,m=Yn.current,kn(Yn,x?m&1|2:m&1),h):(_i(h),null);case 22:case 23:return Hw(),x=h.memoizedState!==null,c!==null&&c.memoizedState!==null!==x&&(h.flags|=8192),x&&(h.mode&1)!==0?(Cs&1073741824)!==0&&(_i(h),h.subtreeFlags&6&&(h.flags|=8192)):_i(h),null;case 24:return null;case 25:return null}throw Error(t(156,h.tag))}function _G(c,h){switch(tw(h),h.tag){case 1:return Xi(h.type)&&F_(),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return kf(),Dn(Yi),Dn(mi),gw(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 5:return fw(h),null;case 13:if(Dn(Yn),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(t(340));Cf()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return Dn(Yn),null;case 4:return kf(),null;case 10:return ow(h.type._context),null;case 22:case 23:return Hw(),null;case 24:return null;default:return null}}var r1=!1,yi=!1,yG=typeof WeakSet=="function"?WeakSet:Set,ut=null;function Lf(c,h){var m=c.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(x){er(c,h,x)}else m.current=null}function Lw(c,h,m){try{m()}catch(x){er(c,h,x)}}var I4=!1;function xG(c,h){if(HE=qo,c=rP(),VE(c)){if("selectionStart"in c)var m={start:c.selectionStart,end:c.selectionEnd};else e:{m=(m=c.ownerDocument)&&m.defaultView||window;var x=m.getSelection&&m.getSelection();if(x&&x.rangeCount!==0){m=x.anchorNode;var S=x.anchorOffset,I=x.focusNode;x=x.focusOffset;try{m.nodeType,I.nodeType}catch{m=null;break e}var G=0,J=-1,ie=-1,Ee=0,Ve=0,ze=c,De=null;t:for(;;){for(var at;ze!==m||S!==0&&ze.nodeType!==3||(J=G+S),ze!==I||x!==0&&ze.nodeType!==3||(ie=G+x),ze.nodeType===3&&(G+=ze.nodeValue.length),(at=ze.firstChild)!==null;)De=ze,ze=at;for(;;){if(ze===c)break t;if(De===m&&++Ee===S&&(J=G),De===I&&++Ve===x&&(ie=G),(at=ze.nextSibling)!==null)break;ze=De,De=ze.parentNode}ze=at}m=J===-1||ie===-1?null:{start:J,end:ie}}else m=null}m=m||{start:0,end:0}}else m=null;for(KE={focusedElem:c,selectionRange:m},qo=!1,ut=h;ut!==null;)if(h=ut,c=h.child,(h.subtreeFlags&1028)!==0&&c!==null)c.return=h,ut=c;else for(;ut!==null;){h=ut;try{var ft=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(ft!==null){var mt=ft.memoizedProps,hr=ft.memoizedState,de=h.stateNode,oe=de.getSnapshotBeforeUpdate(h.elementType===h.type?mt:Ia(h.type,mt),hr);de.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:var ye=h.stateNode.containerInfo;ye.nodeType===1?ye.textContent="":ye.nodeType===9&&ye.documentElement&&ye.removeChild(ye.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Ke){er(h,h.return,Ke)}if(c=h.sibling,c!==null){c.return=h.return,ut=c;break}ut=h.return}return ft=I4,I4=!1,ft}function mg(c,h,m){var x=h.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var S=x=x.next;do{if((S.tag&c)===c){var I=S.destroy;S.destroy=void 0,I!==void 0&&Lw(h,m,I)}S=S.next}while(S!==x)}}function i1(c,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&c)===c){var x=m.create;m.destroy=x()}m=m.next}while(m!==h)}}function Ow(c){var h=c.ref;if(h!==null){var m=c.stateNode;switch(c.tag){case 5:c=m;break;default:c=m}typeof h=="function"?h(c):h.current=c}}function A4(c){var h=c.alternate;h!==null&&(c.alternate=null,A4(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&(delete h[uo],delete h[ig],delete h[ZE],delete h[tG],delete h[nG])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function R4(c){return c.tag===5||c.tag===3||c.tag===4}function C4(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||R4(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Dw(c,h,m){var x=c.tag;if(x===5||x===6)c=c.stateNode,h?m.nodeType===8?m.parentNode.insertBefore(c,h):m.insertBefore(c,h):(m.nodeType===8?(h=m.parentNode,h.insertBefore(c,m)):(h=m,h.appendChild(c)),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=O_));else if(x!==4&&(c=c.child,c!==null))for(Dw(c,h,m),c=c.sibling;c!==null;)Dw(c,h,m),c=c.sibling}function Fw(c,h,m){var x=c.tag;if(x===5||x===6)c=c.stateNode,h?m.insertBefore(c,h):m.appendChild(c);else if(x!==4&&(c=c.child,c!==null))for(Fw(c,h,m),c=c.sibling;c!==null;)Fw(c,h,m),c=c.sibling}var ti=null,Aa=!1;function tc(c,h,m){for(m=m.child;m!==null;)P4(c,h,m),m=m.sibling}function P4(c,h,m){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(Es,m)}catch{}switch(m.tag){case 5:yi||Lf(m,h);case 6:var x=ti,S=Aa;ti=null,tc(c,h,m),ti=x,Aa=S,ti!==null&&(Aa?(c=ti,m=m.stateNode,c.nodeType===8?c.parentNode.removeChild(m):c.removeChild(m)):ti.removeChild(m.stateNode));break;case 18:ti!==null&&(Aa?(c=ti,m=m.stateNode,c.nodeType===8?qE(c.parentNode,m):c.nodeType===1&&qE(c,m),Wl(c)):qE(ti,m.stateNode));break;case 4:x=ti,S=Aa,ti=m.stateNode.containerInfo,Aa=!0,tc(c,h,m),ti=x,Aa=S;break;case 0:case 11:case 14:case 15:if(!yi&&(x=m.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){S=x=x.next;do{var I=S,G=I.destroy;I=I.tag,G!==void 0&&((I&2)!==0||(I&4)!==0)&&Lw(m,h,G),S=S.next}while(S!==x)}tc(c,h,m);break;case 1:if(!yi&&(Lf(m,h),x=m.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=m.memoizedProps,x.state=m.memoizedState,x.componentWillUnmount()}catch(J){er(m,h,J)}tc(c,h,m);break;case 21:tc(c,h,m);break;case 22:m.mode&1?(yi=(x=yi)||m.memoizedState!==null,tc(c,h,m),yi=x):tc(c,h,m);break;default:tc(c,h,m)}}function b4(c){var h=c.updateQueue;if(h!==null){c.updateQueue=null;var m=c.stateNode;m===null&&(m=c.stateNode=new yG),h.forEach(function(x){var S=CG.bind(null,c,x);m.has(x)||(m.add(x),x.then(S,S))})}}function Ra(c,h){var m=h.deletions;if(m!==null)for(var x=0;x<m.length;x++){var S=m[x];try{var I=c,G=h,J=G;e:for(;J!==null;){switch(J.tag){case 5:ti=J.stateNode,Aa=!1;break e;case 3:ti=J.stateNode.containerInfo,Aa=!0;break e;case 4:ti=J.stateNode.containerInfo,Aa=!0;break e}J=J.return}if(ti===null)throw Error(t(160));P4(I,G,S),ti=null,Aa=!1;var ie=S.alternate;ie!==null&&(ie.return=null),S.return=null}catch(Ee){er(S,h,Ee)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)M4(h,c),h=h.sibling}function M4(c,h){var m=c.alternate,x=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Ra(h,c),go(c),x&4){try{mg(3,c,c.return),i1(3,c)}catch(mt){er(c,c.return,mt)}try{mg(5,c,c.return)}catch(mt){er(c,c.return,mt)}}break;case 1:Ra(h,c),go(c),x&512&&m!==null&&Lf(m,m.return);break;case 5:if(Ra(h,c),go(c),x&512&&m!==null&&Lf(m,m.return),c.flags&32){var S=c.stateNode;try{ms(S,"")}catch(mt){er(c,c.return,mt)}}if(x&4&&(S=c.stateNode,S!=null)){var I=c.memoizedProps,G=m!==null?m.memoizedProps:I,J=c.type,ie=c.updateQueue;if(c.updateQueue=null,ie!==null)try{J==="input"&&I.type==="radio"&&I.name!=null&&W(S,I),va(J,G);var Ee=va(J,I);for(G=0;G<ie.length;G+=2){var Ve=ie[G],ze=ie[G+1];Ve==="style"?Ks(S,ze):Ve==="dangerouslySetInnerHTML"?Wo(S,ze):Ve==="children"?ms(S,ze):M(S,Ve,ze,Ee)}switch(J){case"input":ae(S,I);break;case"textarea":Ln(S,I);break;case"select":var De=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!I.multiple;var at=I.value;at!=null?Ot(S,!!I.multiple,at,!1):De!==!!I.multiple&&(I.defaultValue!=null?Ot(S,!!I.multiple,I.defaultValue,!0):Ot(S,!!I.multiple,I.multiple?[]:"",!1))}S[ig]=I}catch(mt){er(c,c.return,mt)}}break;case 6:if(Ra(h,c),go(c),x&4){if(c.stateNode===null)throw Error(t(162));S=c.stateNode,I=c.memoizedProps;try{S.nodeValue=I}catch(mt){er(c,c.return,mt)}}break;case 3:if(Ra(h,c),go(c),x&4&&m!==null&&m.memoizedState.isDehydrated)try{Wl(h.containerInfo)}catch(mt){er(c,c.return,mt)}break;case 4:Ra(h,c),go(c);break;case 13:Ra(h,c),go(c),S=c.child,S.flags&8192&&(I=S.memoizedState!==null,S.stateNode.isHidden=I,!I||S.alternate!==null&&S.alternate.memoizedState!==null||(Gw=Be())),x&4&&b4(c);break;case 22:if(Ve=m!==null&&m.memoizedState!==null,c.mode&1?(yi=(Ee=yi)||Ve,Ra(h,c),yi=Ee):Ra(h,c),go(c),x&8192){if(Ee=c.memoizedState!==null,(c.stateNode.isHidden=Ee)&&!Ve&&(c.mode&1)!==0)for(ut=c,Ve=c.child;Ve!==null;){for(ze=ut=Ve;ut!==null;){switch(De=ut,at=De.child,De.tag){case 0:case 11:case 14:case 15:mg(4,De,De.return);break;case 1:Lf(De,De.return);var ft=De.stateNode;if(typeof ft.componentWillUnmount=="function"){x=De,m=De.return;try{h=x,ft.props=h.memoizedProps,ft.state=h.memoizedState,ft.componentWillUnmount()}catch(mt){er(x,m,mt)}}break;case 5:Lf(De,De.return);break;case 22:if(De.memoizedState!==null){L4(ze);continue}}at!==null?(at.return=De,ut=at):L4(ze)}Ve=Ve.sibling}e:for(Ve=null,ze=c;;){if(ze.tag===5){if(Ve===null){Ve=ze;try{S=ze.stateNode,Ee?(I=S.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(J=ze.stateNode,ie=ze.memoizedProps.style,G=ie!=null&&ie.hasOwnProperty("display")?ie.display:null,J.style.display=ps("display",G))}catch(mt){er(c,c.return,mt)}}}else if(ze.tag===6){if(Ve===null)try{ze.stateNode.nodeValue=Ee?"":ze.memoizedProps}catch(mt){er(c,c.return,mt)}}else if((ze.tag!==22&&ze.tag!==23||ze.memoizedState===null||ze===c)&&ze.child!==null){ze.child.return=ze,ze=ze.child;continue}if(ze===c)break e;for(;ze.sibling===null;){if(ze.return===null||ze.return===c)break e;Ve===ze&&(Ve=null),ze=ze.return}Ve===ze&&(Ve=null),ze.sibling.return=ze.return,ze=ze.sibling}}break;case 19:Ra(h,c),go(c),x&4&&b4(c);break;case 21:break;default:Ra(h,c),go(c)}}function go(c){var h=c.flags;if(h&2){try{e:{for(var m=c.return;m!==null;){if(R4(m)){var x=m;break e}m=m.return}throw Error(t(160))}switch(x.tag){case 5:var S=x.stateNode;x.flags&32&&(ms(S,""),x.flags&=-33);var I=C4(c);Fw(c,I,S);break;case 3:case 4:var G=x.stateNode.containerInfo,J=C4(c);Dw(c,J,G);break;default:throw Error(t(161))}}catch(ie){er(c,c.return,ie)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function vG(c,h,m){ut=c,k4(c)}function k4(c,h,m){for(var x=(c.mode&1)!==0;ut!==null;){var S=ut,I=S.child;if(S.tag===22&&x){var G=S.memoizedState!==null||r1;if(!G){var J=S.alternate,ie=J!==null&&J.memoizedState!==null||yi;J=r1;var Ee=yi;if(r1=G,(yi=ie)&&!Ee)for(ut=S;ut!==null;)G=ut,ie=G.child,G.tag===22&&G.memoizedState!==null?O4(S):ie!==null?(ie.return=G,ut=ie):O4(S);for(;I!==null;)ut=I,k4(I),I=I.sibling;ut=S,r1=J,yi=Ee}N4(c)}else(S.subtreeFlags&8772)!==0&&I!==null?(I.return=S,ut=I):N4(c)}}function N4(c){for(;ut!==null;){var h=ut;if((h.flags&8772)!==0){var m=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:yi||i1(5,h);break;case 1:var x=h.stateNode;if(h.flags&4&&!yi)if(m===null)x.componentDidMount();else{var S=h.elementType===h.type?m.memoizedProps:Ia(h.type,m.memoizedProps);x.componentDidUpdate(S,m.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var I=h.updateQueue;I!==null&&LP(h,I,x);break;case 3:var G=h.updateQueue;if(G!==null){if(m=null,h.child!==null)switch(h.child.tag){case 5:m=h.child.stateNode;break;case 1:m=h.child.stateNode}LP(h,G,m)}break;case 5:var J=h.stateNode;if(m===null&&h.flags&4){m=J;var ie=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":ie.autoFocus&&m.focus();break;case"img":ie.src&&(m.src=ie.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var Ee=h.alternate;if(Ee!==null){var Ve=Ee.memoizedState;if(Ve!==null){var ze=Ve.dehydrated;ze!==null&&Wl(ze)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}yi||h.flags&512&&Ow(h)}catch(De){er(h,h.return,De)}}if(h===c){ut=null;break}if(m=h.sibling,m!==null){m.return=h.return,ut=m;break}ut=h.return}}function L4(c){for(;ut!==null;){var h=ut;if(h===c){ut=null;break}var m=h.sibling;if(m!==null){m.return=h.return,ut=m;break}ut=h.return}}function O4(c){for(;ut!==null;){var h=ut;try{switch(h.tag){case 0:case 11:case 15:var m=h.return;try{i1(4,h)}catch(ie){er(h,m,ie)}break;case 1:var x=h.stateNode;if(typeof x.componentDidMount=="function"){var S=h.return;try{x.componentDidMount()}catch(ie){er(h,S,ie)}}var I=h.return;try{Ow(h)}catch(ie){er(h,I,ie)}break;case 5:var G=h.return;try{Ow(h)}catch(ie){er(h,G,ie)}}}catch(ie){er(h,h.return,ie)}if(h===c){ut=null;break}var J=h.sibling;if(J!==null){J.return=h.return,ut=J;break}ut=h.return}}var EG=Math.ceil,s1=k.ReactCurrentDispatcher,Vw=k.ReactCurrentOwner,ea=k.ReactCurrentBatchConfig,Zt=0,Gr=null,_r=null,ni=0,Cs=0,Of=ql(0),Pr=0,pg=null,Lu=0,a1=0,jw=0,_g=null,Zi=null,Gw=0,Df=1/0,al=null,o1=!1,Bw=null,nc=null,l1=!1,rc=null,c1=0,yg=0,Uw=null,u1=-1,h1=0;function Li(){return(Zt&6)!==0?Be():u1!==-1?u1:u1=Be()}function ic(c){return(c.mode&1)===0?1:(Zt&2)!==0&&ni!==0?ni&-ni:iG.transition!==null?(h1===0&&(h1=j0()),h1):(c=Ht,c!==0||(c=window.event,c=c===void 0?16:hf(c.type)),c)}function Ca(c,h,m,x){if(50<yg)throw yg=0,Uw=null,Error(t(185));wu(c,m,x),((Zt&2)===0||c!==Gr)&&(c===Gr&&((Zt&2)===0&&(a1|=m),Pr===4&&sc(c,ni)),Qi(c,x),m===1&&Zt===0&&(h.mode&1)===0&&(Df=Be()+500,j_&&Ql()))}function Qi(c,h){var m=c.callbackNode;Eu(c,h);var x=Ko(c,c===Gr?ni:0);if(x===0)m!==null&&Xe(m),c.callbackNode=null,c.callbackPriority=0;else if(h=x&-x,c.callbackPriority!==h){if(m!=null&&Xe(m),h===1)c.tag===0?rG(F4.bind(null,c)):wP(F4.bind(null,c)),Jj(function(){(Zt&6)===0&&Ql()}),m=null;else{switch(eo(x)){case 1:m=hn;break;case 4:m=_n;break;case 16:m=Bn;break;case 536870912:m=Ys;break;default:m=Bn}m=W4(m,D4.bind(null,c))}c.callbackPriority=h,c.callbackNode=m}}function D4(c,h){if(u1=-1,h1=0,(Zt&6)!==0)throw Error(t(327));var m=c.callbackNode;if(Ff()&&c.callbackNode!==m)return null;var x=Ko(c,c===Gr?ni:0);if(x===0)return null;if((x&30)!==0||(x&c.expiredLanes)!==0||h)h=f1(c,x);else{h=x;var S=Zt;Zt|=2;var I=j4();(Gr!==c||ni!==h)&&(al=null,Df=Be()+500,Du(c,h));do try{TG();break}catch(J){V4(c,J)}while(!0);aw(),s1.current=I,Zt=S,_r!==null?h=0:(Gr=null,ni=0,h=Pr)}if(h!==0){if(h===2&&(S=V0(c),S!==0&&(x=S,h=zw(c,S))),h===1)throw m=pg,Du(c,0),sc(c,x),Qi(c,Be()),m;if(h===6)sc(c,x);else{if(S=c.current.alternate,(x&30)===0&&!wG(S)&&(h=f1(c,x),h===2&&(I=V0(c),I!==0&&(x=I,h=zw(c,I))),h===1))throw m=pg,Du(c,0),sc(c,x),Qi(c,Be()),m;switch(c.finishedWork=S,c.finishedLanes=x,h){case 0:case 1:throw Error(t(345));case 2:Fu(c,Zi,al);break;case 3:if(sc(c,x),(x&130023424)===x&&(h=Gw+500-Be(),10<h)){if(Ko(c,0)!==0)break;if(S=c.suspendedLanes,(S&x)!==x){Li(),c.pingedLanes|=c.suspendedLanes&S;break}c.timeoutHandle=XE(Fu.bind(null,c,Zi,al),h);break}Fu(c,Zi,al);break;case 4:if(sc(c,x),(x&4194240)===x)break;for(h=c.eventTimes,S=-1;0<x;){var G=31-Kn(x);I=1<<G,G=h[G],G>S&&(S=G),x&=~I}if(x=S,x=Be()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*EG(x/1960))-x,10<x){c.timeoutHandle=XE(Fu.bind(null,c,Zi,al),x);break}Fu(c,Zi,al);break;case 5:Fu(c,Zi,al);break;default:throw Error(t(329))}}}return Qi(c,Be()),c.callbackNode===m?D4.bind(null,c):null}function zw(c,h){var m=_g;return c.current.memoizedState.isDehydrated&&(Du(c,h).flags|=256),c=f1(c,h),c!==2&&(h=Zi,Zi=m,h!==null&&$w(h)),c}function $w(c){Zi===null?Zi=c:Zi.push.apply(Zi,c)}function wG(c){for(var h=c;;){if(h.flags&16384){var m=h.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var x=0;x<m.length;x++){var S=m[x],I=S.getSnapshot;S=S.value;try{if(!Sa(I(),S))return!1}catch{return!1}}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function sc(c,h){for(h&=~jw,h&=~a1,c.suspendedLanes|=h,c.pingedLanes&=~h,c=c.expirationTimes;0<h;){var m=31-Kn(h),x=1<<m;c[m]=-1,h&=~x}}function F4(c){if((Zt&6)!==0)throw Error(t(327));Ff();var h=Ko(c,0);if((h&1)===0)return Qi(c,Be()),null;var m=f1(c,h);if(c.tag!==0&&m===2){var x=V0(c);x!==0&&(h=x,m=zw(c,x))}if(m===1)throw m=pg,Du(c,0),sc(c,h),Qi(c,Be()),m;if(m===6)throw Error(t(345));return c.finishedWork=c.current.alternate,c.finishedLanes=h,Fu(c,Zi,al),Qi(c,Be()),null}function Ww(c,h){var m=Zt;Zt|=1;try{return c(h)}finally{Zt=m,Zt===0&&(Df=Be()+500,j_&&Ql())}}function Ou(c){rc!==null&&rc.tag===0&&(Zt&6)===0&&Ff();var h=Zt;Zt|=1;var m=ea.transition,x=Ht;try{if(ea.transition=null,Ht=1,c)return c()}finally{Ht=x,ea.transition=m,Zt=h,(Zt&6)===0&&Ql()}}function Hw(){Cs=Of.current,Dn(Of)}function Du(c,h){c.finishedWork=null,c.finishedLanes=0;var m=c.timeoutHandle;if(m!==-1&&(c.timeoutHandle=-1,Qj(m)),_r!==null)for(m=_r.return;m!==null;){var x=m;switch(tw(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&F_();break;case 3:kf(),Dn(Yi),Dn(mi),gw();break;case 5:fw(x);break;case 4:kf();break;case 13:Dn(Yn);break;case 19:Dn(Yn);break;case 10:ow(x.type._context);break;case 22:case 23:Hw()}m=m.return}if(Gr=c,_r=c=ac(c.current,null),ni=Cs=h,Pr=0,pg=null,jw=a1=Lu=0,Zi=_g=null,Mu!==null){for(h=0;h<Mu.length;h++)if(m=Mu[h],x=m.interleaved,x!==null){m.interleaved=null;var S=x.next,I=m.pending;if(I!==null){var G=I.next;I.next=S,x.next=G}m.pending=x}Mu=null}return c}function V4(c,h){do{var m=_r;try{if(aw(),X_.current=J_,q_){for(var x=Xn.memoizedState;x!==null;){var S=x.queue;S!==null&&(S.pending=null),x=x.next}q_=!1}if(Nu=0,jr=Cr=Xn=null,ug=!1,hg=0,Vw.current=null,m===null||m.return===null){Pr=1,pg=h,_r=null;break}e:{var I=c,G=m.return,J=m,ie=h;if(h=ni,J.flags|=32768,ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var Ee=ie,Ve=J,ze=Ve.tag;if((Ve.mode&1)===0&&(ze===0||ze===11||ze===15)){var De=Ve.alternate;De?(Ve.updateQueue=De.updateQueue,Ve.memoizedState=De.memoizedState,Ve.lanes=De.lanes):(Ve.updateQueue=null,Ve.memoizedState=null)}var at=c4(G);if(at!==null){at.flags&=-257,u4(at,G,J,I,h),at.mode&1&&l4(I,Ee,h),h=at,ie=Ee;var ft=h.updateQueue;if(ft===null){var mt=new Set;mt.add(ie),h.updateQueue=mt}else ft.add(ie);break e}else{if((h&1)===0){l4(I,Ee,h),Kw();break e}ie=Error(t(426))}}else if(Un&&J.mode&1){var hr=c4(G);if(hr!==null){(hr.flags&65536)===0&&(hr.flags|=256),u4(hr,G,J,I,h),iw(Nf(ie,J));break e}}I=ie=Nf(ie,J),Pr!==4&&(Pr=2),_g===null?_g=[I]:_g.push(I),I=G;do{switch(I.tag){case 3:I.flags|=65536,h&=-h,I.lanes|=h;var de=a4(I,ie,h);NP(I,de);break e;case 1:J=ie;var oe=I.type,ye=I.stateNode;if((I.flags&128)===0&&(typeof oe.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(nc===null||!nc.has(ye)))){I.flags|=65536,h&=-h,I.lanes|=h;var Ke=o4(I,J,h);NP(I,Ke);break e}}I=I.return}while(I!==null)}B4(m)}catch(_t){h=_t,_r===m&&m!==null&&(_r=m=m.return);continue}break}while(!0)}function j4(){var c=s1.current;return s1.current=J_,c===null?J_:c}function Kw(){(Pr===0||Pr===3||Pr===2)&&(Pr=4),Gr===null||(Lu&268435455)===0&&(a1&268435455)===0||sc(Gr,ni)}function f1(c,h){var m=Zt;Zt|=2;var x=j4();(Gr!==c||ni!==h)&&(al=null,Du(c,h));do try{SG();break}catch(S){V4(c,S)}while(!0);if(aw(),Zt=m,s1.current=x,_r!==null)throw Error(t(261));return Gr=null,ni=0,Pr}function SG(){for(;_r!==null;)G4(_r)}function TG(){for(;_r!==null&&!it();)G4(_r)}function G4(c){var h=$4(c.alternate,c,Cs);c.memoizedProps=c.pendingProps,h===null?B4(c):_r=h,Vw.current=null}function B4(c){var h=c;do{var m=h.alternate;if(c=h.return,(h.flags&32768)===0){if(m=pG(m,h,Cs),m!==null){_r=m;return}}else{if(m=_G(m,h),m!==null){m.flags&=32767,_r=m;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Pr=6,_r=null;return}}if(h=h.sibling,h!==null){_r=h;return}_r=h=c}while(h!==null);Pr===0&&(Pr=5)}function Fu(c,h,m){var x=Ht,S=ea.transition;try{ea.transition=null,Ht=1,IG(c,h,m,x)}finally{ea.transition=S,Ht=x}return null}function IG(c,h,m,x){do Ff();while(rc!==null);if((Zt&6)!==0)throw Error(t(327));m=c.finishedWork;var S=c.finishedLanes;if(m===null)return null;if(c.finishedWork=null,c.finishedLanes=0,m===c.current)throw Error(t(177));c.callbackNode=null,c.callbackPriority=0;var I=m.lanes|m.childLanes;if(NE(c,I),c===Gr&&(_r=Gr=null,ni=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||l1||(l1=!0,W4(Bn,function(){return Ff(),null})),I=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||I){I=ea.transition,ea.transition=null;var G=Ht;Ht=1;var J=Zt;Zt|=4,Vw.current=null,xG(c,m),M4(m,c),Wj(KE),qo=!!HE,KE=HE=null,c.current=m,vG(m),Ge(),Zt=J,Ht=G,ea.transition=I}else c.current=m;if(l1&&(l1=!1,rc=c,c1=S),I=c.pendingLanes,I===0&&(nc=null),Bl(m.stateNode),Qi(c,Be()),h!==null)for(x=c.onRecoverableError,m=0;m<h.length;m++)S=h[m],x(S.value,{componentStack:S.stack,digest:S.digest});if(o1)throw o1=!1,c=Bw,Bw=null,c;return(c1&1)!==0&&c.tag!==0&&Ff(),I=c.pendingLanes,(I&1)!==0?c===Uw?yg++:(yg=0,Uw=c):yg=0,Ql(),null}function Ff(){if(rc!==null){var c=eo(c1),h=ea.transition,m=Ht;try{if(ea.transition=null,Ht=16>c?16:c,rc===null)var x=!1;else{if(c=rc,rc=null,c1=0,(Zt&6)!==0)throw Error(t(331));var S=Zt;for(Zt|=4,ut=c.current;ut!==null;){var I=ut,G=I.child;if((ut.flags&16)!==0){var J=I.deletions;if(J!==null){for(var ie=0;ie<J.length;ie++){var Ee=J[ie];for(ut=Ee;ut!==null;){var Ve=ut;switch(Ve.tag){case 0:case 11:case 15:mg(8,Ve,I)}var ze=Ve.child;if(ze!==null)ze.return=Ve,ut=ze;else for(;ut!==null;){Ve=ut;var De=Ve.sibling,at=Ve.return;if(A4(Ve),Ve===Ee){ut=null;break}if(De!==null){De.return=at,ut=De;break}ut=at}}}var ft=I.alternate;if(ft!==null){var mt=ft.child;if(mt!==null){ft.child=null;do{var hr=mt.sibling;mt.sibling=null,mt=hr}while(mt!==null)}}ut=I}}if((I.subtreeFlags&2064)!==0&&G!==null)G.return=I,ut=G;else e:for(;ut!==null;){if(I=ut,(I.flags&2048)!==0)switch(I.tag){case 0:case 11:case 15:mg(9,I,I.return)}var de=I.sibling;if(de!==null){de.return=I.return,ut=de;break e}ut=I.return}}var oe=c.current;for(ut=oe;ut!==null;){G=ut;var ye=G.child;if((G.subtreeFlags&2064)!==0&&ye!==null)ye.return=G,ut=ye;else e:for(G=oe;ut!==null;){if(J=ut,(J.flags&2048)!==0)try{switch(J.tag){case 0:case 11:case 15:i1(9,J)}}catch(_t){er(J,J.return,_t)}if(J===G){ut=null;break e}var Ke=J.sibling;if(Ke!==null){Ke.return=J.return,ut=Ke;break e}ut=J.return}}if(Zt=S,Ql(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(Es,c)}catch{}x=!0}return x}finally{Ht=m,ea.transition=h}}return!1}function U4(c,h,m){h=Nf(m,h),h=a4(c,h,1),c=ec(c,h,1),h=Li(),c!==null&&(wu(c,1,h),Qi(c,h))}function er(c,h,m){if(c.tag===3)U4(c,c,m);else for(;h!==null;){if(h.tag===3){U4(h,c,m);break}else if(h.tag===1){var x=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(nc===null||!nc.has(x))){c=Nf(m,c),c=o4(h,c,1),h=ec(h,c,1),c=Li(),h!==null&&(wu(h,1,c),Qi(h,c));break}}h=h.return}}function AG(c,h,m){var x=c.pingCache;x!==null&&x.delete(h),h=Li(),c.pingedLanes|=c.suspendedLanes&m,Gr===c&&(ni&m)===m&&(Pr===4||Pr===3&&(ni&130023424)===ni&&500>Be()-Gw?Du(c,0):jw|=m),Qi(c,h)}function z4(c,h){h===0&&((c.mode&1)===0?h=1:(h=Ul,Ul<<=1,(Ul&130023424)===0&&(Ul=4194304)));var m=Li();c=rl(c,h),c!==null&&(wu(c,h,m),Qi(c,m))}function RG(c){var h=c.memoizedState,m=0;h!==null&&(m=h.retryLane),z4(c,m)}function CG(c,h){var m=0;switch(c.tag){case 13:var x=c.stateNode,S=c.memoizedState;S!==null&&(m=S.retryLane);break;case 19:x=c.stateNode;break;default:throw Error(t(314))}x!==null&&x.delete(h),z4(c,m)}var $4;$4=function(c,h,m){if(c!==null)if(c.memoizedProps!==h.pendingProps||Yi.current)qi=!0;else{if((c.lanes&m)===0&&(h.flags&128)===0)return qi=!1,mG(c,h,m);qi=(c.flags&131072)!==0}else qi=!1,Un&&(h.flags&1048576)!==0&&SP(h,B_,h.index);switch(h.lanes=0,h.tag){case 2:var x=h.type;n1(c,h),c=h.pendingProps;var S=If(h,mi.current);Mf(h,m),S=_w(null,h,x,c,S,m);var I=yw();return h.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Xi(x)?(I=!0,V_(h)):I=!1,h.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,uw(h),S.updater=e1,h.stateNode=S,S._reactInternals=h,Tw(h,x,c,m),h=Cw(null,h,x,!0,I,m)):(h.tag=0,Un&&I&&ew(h),Ni(null,h,S,m),h=h.child),h;case 16:x=h.elementType;e:{switch(n1(c,h),c=h.pendingProps,S=x._init,x=S(x._payload),h.type=x,S=h.tag=bG(x),c=Ia(x,c),S){case 0:h=Rw(null,h,x,c,m);break e;case 1:h=p4(null,h,x,c,m);break e;case 11:h=h4(null,h,x,c,m);break e;case 14:h=f4(null,h,x,Ia(x.type,c),m);break e}throw Error(t(306,x,""))}return h;case 0:return x=h.type,S=h.pendingProps,S=h.elementType===x?S:Ia(x,S),Rw(c,h,x,S,m);case 1:return x=h.type,S=h.pendingProps,S=h.elementType===x?S:Ia(x,S),p4(c,h,x,S,m);case 3:e:{if(_4(h),c===null)throw Error(t(387));x=h.pendingProps,I=h.memoizedState,S=I.element,kP(c,h),K_(h,x,null,m);var G=h.memoizedState;if(x=G.element,I.isDehydrated)if(I={element:x,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},h.updateQueue.baseState=I,h.memoizedState=I,h.flags&256){S=Nf(Error(t(423)),h),h=y4(c,h,x,m,S);break e}else if(x!==S){S=Nf(Error(t(424)),h),h=y4(c,h,x,m,S);break e}else for(Rs=Xl(h.stateNode.containerInfo.firstChild),As=h,Un=!0,Ta=null,m=bP(h,null,x,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Cf(),x===S){h=sl(c,h,m);break e}Ni(c,h,x,m)}h=h.child}return h;case 5:return OP(h),c===null&&rw(h),x=h.type,S=h.pendingProps,I=c!==null?c.memoizedProps:null,G=S.children,YE(x,S)?G=null:I!==null&&YE(x,I)&&(h.flags|=32),m4(c,h),Ni(c,h,G,m),h.child;case 6:return c===null&&rw(h),null;case 13:return x4(c,h,m);case 4:return hw(h,h.stateNode.containerInfo),x=h.pendingProps,c===null?h.child=Pf(h,null,x,m):Ni(c,h,x,m),h.child;case 11:return x=h.type,S=h.pendingProps,S=h.elementType===x?S:Ia(x,S),h4(c,h,x,S,m);case 7:return Ni(c,h,h.pendingProps,m),h.child;case 8:return Ni(c,h,h.pendingProps.children,m),h.child;case 12:return Ni(c,h,h.pendingProps.children,m),h.child;case 10:e:{if(x=h.type._context,S=h.pendingProps,I=h.memoizedProps,G=S.value,kn($_,x._currentValue),x._currentValue=G,I!==null)if(Sa(I.value,G)){if(I.children===S.children&&!Yi.current){h=sl(c,h,m);break e}}else for(I=h.child,I!==null&&(I.return=h);I!==null;){var J=I.dependencies;if(J!==null){G=I.child;for(var ie=J.firstContext;ie!==null;){if(ie.context===x){if(I.tag===1){ie=il(-1,m&-m),ie.tag=2;var Ee=I.updateQueue;if(Ee!==null){Ee=Ee.shared;var Ve=Ee.pending;Ve===null?ie.next=ie:(ie.next=Ve.next,Ve.next=ie),Ee.pending=ie}}I.lanes|=m,ie=I.alternate,ie!==null&&(ie.lanes|=m),lw(I.return,m,h),J.lanes|=m;break}ie=ie.next}}else if(I.tag===10)G=I.type===h.type?null:I.child;else if(I.tag===18){if(G=I.return,G===null)throw Error(t(341));G.lanes|=m,J=G.alternate,J!==null&&(J.lanes|=m),lw(G,m,h),G=I.sibling}else G=I.child;if(G!==null)G.return=I;else for(G=I;G!==null;){if(G===h){G=null;break}if(I=G.sibling,I!==null){I.return=G.return,G=I;break}G=G.return}I=G}Ni(c,h,S.children,m),h=h.child}return h;case 9:return S=h.type,x=h.pendingProps.children,Mf(h,m),S=Qs(S),x=x(S),h.flags|=1,Ni(c,h,x,m),h.child;case 14:return x=h.type,S=Ia(x,h.pendingProps),S=Ia(x.type,S),f4(c,h,x,S,m);case 15:return d4(c,h,h.type,h.pendingProps,m);case 17:return x=h.type,S=h.pendingProps,S=h.elementType===x?S:Ia(x,S),n1(c,h),h.tag=1,Xi(x)?(c=!0,V_(h)):c=!1,Mf(h,m),i4(h,x,S),Tw(h,x,S,m),Cw(null,h,x,!0,c,m);case 19:return E4(c,h,m);case 22:return g4(c,h,m)}throw Error(t(156,h.tag))};function W4(c,h){return je(c,h)}function PG(c,h,m,x){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ta(c,h,m,x){return new PG(c,h,m,x)}function Yw(c){return c=c.prototype,!(!c||!c.isReactComponent)}function bG(c){if(typeof c=="function")return Yw(c)?1:0;if(c!=null){if(c=c.$$typeof,c===U)return 11;if(c===Me)return 14}return 2}function ac(c,h){var m=c.alternate;return m===null?(m=ta(c.tag,h,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=h,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&14680064,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,h=c.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m}function d1(c,h,m,x,S,I){var G=2;if(x=c,typeof c=="function")Yw(c)&&(G=1);else if(typeof c=="string")G=5;else e:switch(c){case P:return Vu(m.children,S,I,h);case C:G=8,S|=8;break;case b:return c=ta(12,m,h,S|2),c.elementType=b,c.lanes=I,c;case j:return c=ta(13,m,h,S),c.elementType=j,c.lanes=I,c;case Te:return c=ta(19,m,h,S),c.elementType=Te,c.lanes=I,c;case ke:return g1(m,S,I,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case L:G=10;break e;case F:G=9;break e;case U:G=11;break e;case Me:G=14;break e;case Ue:G=16,x=null;break e}throw Error(t(130,c==null?c:typeof c,""))}return h=ta(G,m,h,S),h.elementType=c,h.type=x,h.lanes=I,h}function Vu(c,h,m,x){return c=ta(7,c,x,h),c.lanes=m,c}function g1(c,h,m,x){return c=ta(22,c,x,h),c.elementType=ke,c.lanes=m,c.stateNode={isHidden:!1},c}function Xw(c,h,m){return c=ta(6,c,null,h),c.lanes=m,c}function qw(c,h,m){return h=ta(4,c.children!==null?c.children:[],c.key,h),h.lanes=m,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function MG(c,h,m,x,S){this.tag=h,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=G0(0),this.expirationTimes=G0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=G0(0),this.identifierPrefix=x,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function Zw(c,h,m,x,S,I,G,J,ie){return c=new MG(c,h,m,J,ie),h===1?(h=1,I===!0&&(h|=8)):h=0,I=ta(3,null,null,h),c.current=I,I.stateNode=c,I.memoizedState={element:x,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},uw(I),c}function kG(c,h,m){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:x==null?null:""+x,children:c,containerInfo:h,implementation:m}}function H4(c){if(!c)return Zl;c=c._reactInternals;e:{if(Q(c)!==c||c.tag!==1)throw Error(t(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Xi(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(t(171))}if(c.tag===1){var m=c.type;if(Xi(m))return vP(c,m,h)}return h}function K4(c,h,m,x,S,I,G,J,ie){return c=Zw(m,x,!0,c,S,I,G,J,ie),c.context=H4(null),m=c.current,x=Li(),S=ic(m),I=il(x,S),I.callback=h??null,ec(m,I,S),c.current.lanes=S,wu(c,S,x),Qi(c,x),c}function m1(c,h,m,x){var S=h.current,I=Li(),G=ic(S);return m=H4(m),h.context===null?h.context=m:h.pendingContext=m,h=il(I,G),h.payload={element:c},x=x===void 0?null:x,x!==null&&(h.callback=x),c=ec(S,h,G),c!==null&&(Ca(c,S,G,I),H_(c,S,G)),G}function p1(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function Y4(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<h?m:h}}function Qw(c,h){Y4(c,h),(c=c.alternate)&&Y4(c,h)}function NG(){return null}var X4=typeof reportError=="function"?reportError:function(c){console.error(c)};function Jw(c){this._internalRoot=c}_1.prototype.render=Jw.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(t(409));m1(c,h,null,null)},_1.prototype.unmount=Jw.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;Ou(function(){m1(null,c,null,null)}),h[Jo]=null}};function _1(c){this._internalRoot=c}_1.prototype.unstable_scheduleHydration=function(c){if(c){var h=$0();c={blockedOn:null,target:c,priority:h};for(var m=0;m<ws.length&&h!==0&&h<ws[m].priority;m++);ws.splice(m,0,c),m===0&&cf(c)}};function e2(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function y1(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function q4(){}function LG(c,h,m,x,S){if(S){if(typeof x=="function"){var I=x;x=function(){var Ee=p1(G);I.call(Ee)}}var G=K4(h,x,c,0,null,!1,!1,"",q4);return c._reactRootContainer=G,c[Jo]=G.current,ng(c.nodeType===8?c.parentNode:c),Ou(),G}for(;S=c.lastChild;)c.removeChild(S);if(typeof x=="function"){var J=x;x=function(){var Ee=p1(ie);J.call(Ee)}}var ie=Zw(c,0,!1,null,null,!1,!1,"",q4);return c._reactRootContainer=ie,c[Jo]=ie.current,ng(c.nodeType===8?c.parentNode:c),Ou(function(){m1(h,ie,m,x)}),ie}function x1(c,h,m,x,S){var I=m._reactRootContainer;if(I){var G=I;if(typeof S=="function"){var J=S;S=function(){var ie=p1(G);J.call(ie)}}m1(h,G,c,S)}else G=LG(m,h,c,S,x);return p1(G)}U0=function(c){switch(c.tag){case 3:var h=c.stateNode;if(h.current.memoizedState.isDehydrated){var m=sn(h.pendingLanes);m!==0&&(B0(h,m|1),Qi(h,Be()),(Zt&6)===0&&(Df=Be()+500,Ql()))}break;case 13:Ou(function(){var x=rl(c,1);if(x!==null){var S=Li();Ca(x,c,1,S)}}),Qw(c,1)}},of=function(c){if(c.tag===13){var h=rl(c,134217728);if(h!==null){var m=Li();Ca(h,c,134217728,m)}Qw(c,134217728)}},z0=function(c){if(c.tag===13){var h=ic(c),m=rl(c,h);if(m!==null){var x=Li();Ca(m,c,h,x)}Qw(c,h)}},$0=function(){return Ht},W0=function(c,h){var m=Ht;try{return Ht=c,h()}finally{Ht=m}},Vr=function(c,h,m){switch(h){case"input":if(ae(c,m),h=m.name,m.type==="radio"&&h!=null){for(m=c;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<m.length;h++){var x=m[h];if(x!==c&&x.form===c.form){var S=D_(x);if(!S)throw Error(t(90));Ye(x),ae(x,S)}}}break;case"textarea":Ln(c,m);break;case"select":h=m.value,h!=null&&Ot(c,!!m.multiple,h,!1)}},Hi=Ww,Ir=Ou;var OG={usingClientEntryPoint:!1,Events:[sg,Sf,D_,vs,Wn,Ww]},xg={findFiberByHostInstance:Ru,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DG={bundleType:xg.bundleType,version:xg.version,rendererPackageName:xg.rendererPackageName,rendererConfig:xg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=xe(c),c===null?null:c.stateNode},findFiberByHostInstance:xg.findFiberByHostInstance||NG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var v1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!v1.isDisabled&&v1.supportsFiber)try{Es=v1.inject(DG),cr=v1}catch{}}return Ji.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OG,Ji.createPortal=function(c,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e2(h))throw Error(t(200));return kG(c,h,null,m)},Ji.createRoot=function(c,h){if(!e2(c))throw Error(t(299));var m=!1,x="",S=X4;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onRecoverableError!==void 0&&(S=h.onRecoverableError)),h=Zw(c,1,!1,null,null,m,!1,x,S),c[Jo]=h.current,ng(c.nodeType===8?c.parentNode:c),new Jw(h)},Ji.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(t(188)):(c=Object.keys(c).join(","),Error(t(268,c)));return c=xe(h),c=c===null?null:c.stateNode,c},Ji.flushSync=function(c){return Ou(c)},Ji.hydrate=function(c,h,m){if(!y1(h))throw Error(t(200));return x1(null,c,h,!0,m)},Ji.hydrateRoot=function(c,h,m){if(!e2(c))throw Error(t(405));var x=m!=null&&m.hydratedSources||null,S=!1,I="",G=X4;if(m!=null&&(m.unstable_strictMode===!0&&(S=!0),m.identifierPrefix!==void 0&&(I=m.identifierPrefix),m.onRecoverableError!==void 0&&(G=m.onRecoverableError)),h=K4(h,null,c,1,m??null,S,!1,I,G),c[Jo]=h.current,ng(c),x)for(c=0;c<x.length;c++)m=x[c],S=m._getVersion,S=S(m._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[m,S]:h.mutableSourceEagerHydrationData.push(m,S);return new _1(h)},Ji.render=function(c,h,m){if(!y1(h))throw Error(t(200));return x1(null,c,h,!1,m)},Ji.unmountComponentAtNode=function(c){if(!y1(c))throw Error(t(40));return c._reactRootContainer?(Ou(function(){x1(null,null,c,!1,function(){c._reactRootContainer=null,c[Jo]=null})}),!0):!1},Ji.unstable_batchedUpdates=Ww,Ji.unstable_renderSubtreeIntoContainer=function(c,h,m,x){if(!y1(m))throw Error(t(200));if(c==null||c._reactInternals===void 0)throw Error(t(38));return x1(c,h,m,!1,x)},Ji.version="18.3.1-next-f1338f8080-20240426",Ji}var ib;function $G(){if(ib)return r2.exports;ib=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),r2.exports=zG(),r2.exports}var sb;function WG(){if(sb)return E1;sb=1;var n=$G();return E1.createRoot=n.createRoot,E1.hydrateRoot=n.hydrateRoot,E1}var HG=WG();const KG=TI(HG);var ce=Ap();const YG=TI(ce),ns={ADD:"add",REMOVE:"remove"},zd={PROPERTYCHANGE:"propertychange"},Mt={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class dv{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function XG(n,e,t){let r,i;t=t||pl;let s=0,a=n.length,o=!1;for(;s<a;)r=s+(a-s>>1),i=+t(n[r],e),i<0?s=r+1:(a=r,o=!i);return o?s:~s}function pl(n,e){return n>e?1:n<e?-1:0}function qG(n,e){return n<e?1:n>e?-1:0}function gv(n,e,t){if(n[0]<=e)return 0;const r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){const s=n[i];if(s===e)return i;if(s<e)return t(e,n[i-1],s)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function ZG(n,e,t){for(;e<t;){const r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function dn(n,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function hu(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function QG(n,e,t){const r=e||pl;return n.every(function(i,s){if(s===0)return!0;const a=r(n[s-1],i);return!(a>0||a===0)})}function km(){return!0}function mv(){return!1}function Nm(){}function lO(n){let e,t,r;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==r||!hu(i,t))&&(r=this,t=i,e=n.apply(this,arguments)),e}}function cO(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function Rp(n){for(const e in n)delete n[e]}function xh(n){let e;for(e in n)return!1;return!e}class Go{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}let Cp=class extends dv{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=t?new Go(e):e;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});r in a||(a[r]=0,o[r]=0),++a[r];let l;for(let u=0,f=i.length;u<f;++u)if("handleEvent"in i[u]?l=i[u].handleEvent(s):l=i[u].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--a[r]===0){let u=o[r];for(delete o[r];u--;)this.removeEventListener(r,Nm);delete a[r]}return l}disposeInternal(){this.listeners_&&Rp(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=Nm,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}};function qt(n,e,t,r,i){if(i){const a=t;t=function(o){return n.removeEventListener(e,t),a.call(r??this,o)}}else r&&r!==n&&(t=t.bind(r));const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function Dy(n,e,t,r){return qt(n,e,t,r,!0)}function Nn(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),Rp(n))}class Pp extends Cp{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Mt.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=qt(this,e[s],t);return i}return qt(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=Dy(this,e[s],t)}else r=Dy(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)JG(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}Pp.prototype.on;Pp.prototype.once;Pp.prototype.un;function JG(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Nn(n[e]);else Nn(n)}function At(){throw new Error("Unimplemented abstract method.")}let eB=0;function nn(n){return n.ol_uid||(n.ol_uid=String(++eB))}class ab extends Go{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class Bo extends Pp{constructor(e){super(),this.on,this.once,this.un,nn(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new ab(r,e,t)),r=zd.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new ab(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const i=this.values_||(this.values_={});if(r)i[e]=t;else{const s=i[e];i[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],xh(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}const ob={LENGTH:"length"};class w1 extends Go{constructor(e,t,r){super(e),this.element=t,this.index=r}}class ua extends Bo{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e??[],this.unique_)for(let r=1,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(ob.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new w1(ns.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new w1(ns.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new w1(ns.REMOVE,i,e)),this.dispatchEvent(new w1(ns.ADD,t,e))}updateLength_(){this.set(ob.LENGTH,this.array_.length)}assertUnique_(e,t){const r=this.array_;for(let i=0,s=r.length;i<s;++i)if(r[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}function pn(n,e){if(!n)throw new Error(e)}let Mo=class uO extends Bo{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new uO(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Nn(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=qt(e,Mt.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?tB(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function tB(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(pn(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}const zr={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function lb(n){const e=Gs();for(let t=0,r=n.length;t<r;++t)tm(e,n[t]);return e}function Lm(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function hO(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function $h(n,e,t){let r,i;return e<n[0]?r=n[0]-e:n[2]<e?r=e-n[2]:r=0,t<n[1]?i=n[1]-t:n[3]<t?i=t-n[3]:i=0,r*r+i*i}function vh(n,e){return II(n,e[0],e[1])}function Cc(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function II(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function NS(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],a=e[0],o=e[1];let l=zr.UNKNOWN;return a<t?l=l|zr.LEFT:a>i&&(l=l|zr.RIGHT),o<r?l=l|zr.BELOW:o>s&&(l=l|zr.ABOVE),l===zr.UNKNOWN&&(l=zr.INTERSECTING),l}function Gs(){return[1/0,1/0,-1/0,-1/0]}function Kc(n,e,t,r,i){return i?(i[0]=n,i[1]=e,i[2]=t,i[3]=r,i):[n,e,t,r]}function bp(n){return Kc(1/0,1/0,-1/0,-1/0,n)}function fO(n,e){const t=n[0],r=n[1];return Kc(t,r,t,r,e)}function AI(n,e,t,r,i){const s=bp(i);return gO(s,n,e,t,r)}function $d(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function dO(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function tm(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function gO(n,e,t,r,i){for(;t<r;t+=i)nB(n,e[t],e[t+1]);return n}function nB(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function mO(n,e){let t;return t=e(pv(n)),t||(t=e(_v(n)),t)||(t=e(yv(n)),t)||(t=e(Wh(n)),t)?t:!1}function LS(n){let e=0;return y0(n)||(e=Bt(n)*vr(n)),e}function pv(n){return[n[0],n[1]]}function _v(n){return[n[2],n[1]]}function ko(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function rB(n,e){let t;if(e==="bottom-left")t=pv(n);else if(e==="bottom-right")t=_v(n);else if(e==="top-left")t=Wh(n);else if(e==="top-right")t=yv(n);else throw new Error("Invalid corner");return t}function Fy(n,e,t,r,i){const[s,a,o,l,u,f,d,g]=pO(n,e,t,r);return Kc(Math.min(s,o,u,d),Math.min(a,l,f,g),Math.max(s,o,u,d),Math.max(a,l,f,g),i)}function pO(n,e,t,r){const i=e*r[0]/2,s=e*r[1]/2,a=Math.cos(t),o=Math.sin(t),l=i*a,u=i*o,f=s*a,d=s*o,g=n[0],p=n[1];return[g-l+d,p-u-f,g-l-d,p-u+f,g+l-d,p+u+f,g+l+d,p+u-f,g-l+d,p-u-f]}function vr(n){return n[3]-n[1]}function _l(n,e,t){const r=t||Gs();return ji(n,e)?(n[0]>e[0]?r[0]=n[0]:r[0]=e[0],n[1]>e[1]?r[1]=n[1]:r[1]=e[1],n[2]<e[2]?r[2]=n[2]:r[2]=e[2],n[3]<e[3]?r[3]=n[3]:r[3]=e[3]):bp(r),r}function Wh(n){return[n[0],n[3]]}function yv(n){return[n[2],n[3]]}function Bt(n){return n[2]-n[0]}function ji(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function y0(n){return n[2]<n[0]||n[3]<n[1]}function iB(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function sB(n,e,t){let r=!1;const i=NS(n,e),s=NS(n,t);if(i===zr.INTERSECTING||s===zr.INTERSECTING)r=!0;else{const a=n[0],o=n[1],l=n[2],u=n[3],f=e[0],d=e[1],g=t[0],p=t[1],v=(p-d)/(g-f);let y,E;s&zr.ABOVE&&!(i&zr.ABOVE)&&(y=g-(p-u)/v,r=y>=a&&y<=l),!r&&s&zr.RIGHT&&!(i&zr.RIGHT)&&(E=p-(g-l)*v,r=E>=o&&E<=u),!r&&s&zr.BELOW&&!(i&zr.BELOW)&&(y=g-(p-o)/v,r=y>=a&&y<=l),!r&&s&zr.LEFT&&!(i&zr.LEFT)&&(E=p-(g-a)*v,r=E>=o&&E<=u)}return r}function _O(n,e){const t=e.getExtent(),r=ko(n);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const i=Bt(t),a=Math.floor((r[0]-t[0])/i)*i;n[0]-=a,n[2]-=a}return n}function yO(n,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[r[0],n[1],r[2],n[3]]];_O(n,e);const i=Bt(r);if(Bt(n)>i&&!t)return[[r[0],n[1],r[2],n[3]]];if(n[0]<r[0])return[[n[0]+i,n[1],r[2],n[3]],[r[0],n[1],n[2],n[3]]];if(n[2]>r[2])return[[n[0],n[1],r[2],n[3]],[r[0],n[1],n[2]-i,n[3]]]}return[n]}function Fn(n,e,t){return Math.min(Math.max(n,e),t)}function aB(n,e,t,r,i,s){const a=i-t,o=s-r;if(a!==0||o!==0){const l=((n-t)*a+(e-r)*o)/(a*a+o*o);l>1?(t=i,r=s):l>0&&(t+=a*l,r+=o*l)}return fh(n,e,t,r)}function fh(n,e,t,r){const i=t-n,s=r-e;return i*i+s*s}function oB(n){const e=n.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(n[r][r]);for(let o=r+1;o<e;o++){const l=Math.abs(n[o][r]);l>s&&(s=l,i=o)}if(s===0)return null;const a=n[i];n[i]=n[r],n[r]=a;for(let o=r+1;o<e;o++){const l=-n[o][r]/n[r][r];for(let u=r;u<e+1;u++)r==u?n[o][u]=0:n[o][u]+=l*n[r][u]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=n[r][e]/n[r][r];for(let i=r-1;i>=0;i--)n[i][e]-=n[i][r]*t[r]}return t}function cb(n){return n*180/Math.PI}function yl(n){return n*Math.PI/180}function Vc(n,e){const t=n%e;return t*e<0?t+e:t}function ks(n,e,t){return n+t*(e-n)}function Mp(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function Vy(n,e){return Math.round(Mp(n,e))}function S1(n,e){return Math.floor(Mp(n,e))}function Pc(n,e){return Math.ceil(Mp(n,e))}function OS(n,e,t){if(n>=e&&n<t)return n;const r=t-e;return((n-e)%r+r)%r+e}function Eg(n,e,t){const r=""+n;let i=r.indexOf(".");return i=i===-1?r.length:i,i>e?r:new Array(1+e-i).join("0")+r}function xO(n,e){const t=(""+n).split("."),r=(""+e).split(".");for(let i=0;i<Math.max(t.length,r.length);i++){const s=parseInt(t[i]||"0",10),a=parseInt(r[i]||"0",10);if(s>a)return 1;if(a>s)return-1}return 0}function lB(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function jy(n,e){let t=!0;for(let r=n.length-1;r>=0;--r)if(n[r]!=e[r]){t=!1;break}return t}function RI(n,e){const t=Math.cos(e),r=Math.sin(e),i=n[0]*t-n[1]*r,s=n[1]*t+n[0]*r;return n[0]=i,n[1]=s,n}function cB(n,e){return n[0]*=e,n[1]*=e,n}function vO(n,e){if(e.canWrapX()){const t=Bt(e.getExtent()),r=EO(n,e,t);r&&(n[0]-=r*t)}return n}function EO(n,e,t){const r=e.getExtent();let i=0;return e.canWrapX()&&(n[0]<r[0]||n[0]>r[2])&&(t=t||Bt(r),i=Math.floor((n[0]-r[0])/t)),i}function wO(...n){console.warn(...n)}const Wd={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let xv=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Wd[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const kp=6378137,gd=Math.PI*kp,uB=[-gd,-gd,gd,gd],hB=[-180,-85,180,85],T1=kp*Math.log(Math.tan(Math.PI/2));class Vf extends xv{constructor(e){super({code:e,units:"m",extent:uB,global:!0,worldExtent:hB,getPointResolution:function(t,r){return t/Math.cosh(r[1]/kp)}})}}const ub=[new Vf("EPSG:3857"),new Vf("EPSG:102100"),new Vf("EPSG:102113"),new Vf("EPSG:900913"),new Vf("http://www.opengis.net/def/crs/EPSG/0/3857"),new Vf("http://www.opengis.net/gml/srs/epsg.xml#3857")];function fB(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r){e[s]=gd*n[s]/180;let a=kp*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));a>T1?a=T1:a<-T1&&(a=-T1),e[s+1]=a}return e}function dB(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r)e[s]=180*n[s]/gd,e[s+1]=360*Math.atan(Math.exp(n[s+1]/kp))/Math.PI-90;return e}const gB=6378137,hb=[-180,-90,180,90],mB=Math.PI*gB/180;class ju extends xv{constructor(e,t){super({code:e,units:"degrees",extent:hb,axisOrientation:t,global:!0,metersPerUnit:mB,worldExtent:hb})}}const fb=[new ju("CRS:84"),new ju("EPSG:4326","neu"),new ju("urn:ogc:def:crs:OGC:1.3:CRS84"),new ju("urn:ogc:def:crs:OGC:2:84"),new ju("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new ju("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ju("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let DS={};function ly(n){return DS[n]||DS[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function pB(n,e){DS[n]=e}let Ad={};function Eh(n,e,t){const r=n.getCode(),i=e.getCode();r in Ad||(Ad[r]={}),Ad[r][i]=t}function cy(n,e){return n in Ad&&e in Ad[n]?Ad[n][e]:null}const Gy=.9996,ga=.00669438,vv=ga*ga,Ev=vv*ga,ih=ga/(1-ga),db=Math.sqrt(1-ga),Hd=(1-db)/(1+db),SO=Hd*Hd,CI=SO*Hd,PI=CI*Hd,TO=PI*Hd,IO=1-ga/4-3*vv/64-5*Ev/256,_B=3*ga/8+3*vv/32+45*Ev/1024,yB=15*vv/256+45*Ev/1024,xB=35*Ev/3072,vB=3/2*Hd-27/32*CI+269/512*TO,EB=21/16*SO-55/32*PI,wB=151/96*CI-417/128*TO,SB=1097/512*PI,By=6378137;function TB(n,e,t){const r=n-5e5,a=(t.north?e:e-1e7)/Gy/(By*IO),o=a+vB*Math.sin(2*a)+EB*Math.sin(4*a)+wB*Math.sin(6*a)+SB*Math.sin(8*a),l=Math.sin(o),u=l*l,f=Math.cos(o),d=l/f,g=d*d,p=g*g,v=1-ga*u,y=Math.sqrt(1-ga*u),E=By/y,T=(1-ga)/v,R=ih*f**2,M=R*R,k=r/(E*Gy),V=k*k,z=V*k,P=z*k,C=P*k,b=C*k,L=o-d/T*(V/2-P/24*(5+3*g+10*R-4*M-9*ih))+b/720*(61+90*g+298*R+45*p-252*ih-3*M);let F=(k-z/6*(1+2*g+R)+C/120*(5-2*R+28*g-3*M+8*ih+24*p))/f;return F=OS(F+yl(AO(t.number)),-Math.PI,Math.PI),[cb(F),cb(L)]}const gb=-80,mb=84,IB=-180,AB=180;function RB(n,e,t){n=OS(n,IB,AB),e<gb?e=gb:e>mb&&(e=mb);const r=yl(e),i=Math.sin(r),s=Math.cos(r),a=i/s,o=a*a,l=o*o,u=yl(n),f=AO(t.number),d=yl(f),g=By/Math.sqrt(1-ga*i**2),p=ih*s**2,v=s*OS(u-d,-Math.PI,Math.PI),y=v*v,E=y*v,T=E*v,R=T*v,M=R*v,k=By*(IO*r-_B*Math.sin(2*r)+yB*Math.sin(4*r)-xB*Math.sin(6*r)),V=Gy*g*(v+E/6*(1-o+p)+R/120*(5-18*o+l+72*p-58*ih))+5e5;let z=Gy*(k+g*a*(y/2+T/24*(5-o+9*p+4*p**2)+M/720*(61-58*o+l+600*p-330*ih)));return t.north||(z+=1e7),[V,z]}function AO(n){return(n-1)*6-180+3}const CB=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function RO(n){let e=0;for(const i of CB){const s=n.match(i);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,r=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(r=!0,t=e-32600),t?{number:t,north:r}:null}function pb(n,e){return function(t,r,i,s){const a=t.length;i=i>1?i:2,s=s??i,r||(i>2?r=t.slice():r=new Array(a));for(let o=0;o<a;o+=s){const l=t[o],u=t[o+1],f=n(l,u,e);r[o]=f[0],r[o+1]=f[1]}return r}}function PB(n){return RO(n)?new xv({code:n,units:"m"}):null}function bB(n){const e=RO(n.getCode());return e?{forward:pb(RB,e),inverse:pb(TB,e)}:null}const MB=63710088e-1;function _b(n,e,t){t=t||MB;const r=yl(n[1]),i=yl(e[1]),s=(i-r)/2,a=yl(e[0]-n[0])/2,o=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}const kB=[bB],NB=[PB];let FS=!0;function CO(n){FS=!1}function bI(n,e){if(e!==void 0){for(let t=0,r=n.length;t<r;++t)e[t]=n[t];e=e}else e=n.slice();return e}function Uy(n){pB(n.getCode(),n),Eh(n,n,bI)}function LB(n){n.forEach(Uy)}function Pn(n){if(typeof n!="string")return n;const e=ly(n);if(e)return e;for(const t of NB){const r=t(n);if(r)return r}return null}function zy(n,e,t,r){n=Pn(n);let i;const s=n.getPointResolutionFunc();if(s){if(i=s(e,t),r&&r!==n.getUnits()){const a=n.getMetersPerUnit();a&&(i=i*a/Wd[r])}}else{const a=n.getUnits();if(a=="degrees"&&!r||r=="degrees")i=e;else{const o=kI(n,Pn("EPSG:4326"));if(!o&&a!=="degrees")i=e*n.getMetersPerUnit();else{let u=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];u=o(u,u,2);const f=_b(u.slice(0,2),u.slice(2,4)),d=_b(u.slice(4,6),u.slice(6,8));i=(f+d)/2}const l=r?Wd[r]:n.getMetersPerUnit();l!==void 0&&(i/=l)}}return i}function VS(n){LB(n),n.forEach(function(e){n.forEach(function(t){e!==t&&Eh(e,t,bI)})})}function OB(n,e,t,r){n.forEach(function(i){e.forEach(function(s){Eh(i,s,t),Eh(s,i,r)})})}function MI(n,e){return n?typeof n=="string"?Pn(n):n:Pn(e)}function jS(n){return(function(e,t,r,i){const s=e.length;r=r!==void 0?r:2,i=i??r,t=t!==void 0?t:new Array(s);for(let a=0;a<s;a+=i){const o=n(e.slice(a,a+r)),l=o.length;for(let u=0,f=i;u<f;++u)t[a+u]=u>=l?e[a+u]:o[u]}return t})}function DB(n,e,t,r){const i=Pn(n),s=Pn(e);Eh(i,s,jS(t)),Eh(s,i,jS(r))}function Kd(n,e){return CO(),Np(n,"EPSG:4326","EPSG:3857")}function fn(n,e){const t=Np(n,"EPSG:3857","EPSG:4326"),r=t[0];return(r<-180||r>180)&&(t[0]=Vc(r+180,360)-180),t}function dh(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||kI(n,e)===bI)&&t}function kI(n,e){const t=n.getCode(),r=e.getCode();let i=cy(t,r);if(i)return i;let s=null,a=null;for(const l of kB)s||(s=l(n)),a||(a=l(e));if(!s&&!a)return null;const o="EPSG:4326";if(a)if(s)i=a2(s.inverse,a.forward);else{const l=cy(t,o);l&&(i=a2(l,a.forward))}else{const l=cy(o,r);l&&(i=a2(s.inverse,l))}return i&&(Uy(n),Uy(e),Eh(n,e,i)),i}function a2(n,e){return function(t,r,i,s){return r=n(t,r,i,s),e(r,r,i,s)}}function Om(n,e){const t=Pn(n),r=Pn(e);return kI(t,r)}function Np(n,e,t){const r=Om(e,t);if(!r){const i=Pn(e).getCode(),s=Pn(t).getCode();throw new Error(`No transform available between ${i} and ${s}`)}return r(n,void 0,n.length)}function GS(n,e){return n}function cl(n,e){return FS&&!jy(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(FS=!1,wO("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function PO(n,e){return n}function vo(n,e){return n}function yb(n,e,t){return function(r){let i,s;if(n.canWrapX()){const a=n.getExtent(),o=Bt(a);r=r.slice(0),s=EO(r,n,o),s&&(r[0]=r[0]-s*o),r[0]=Fn(r[0],a[0],a[2]),r[1]=Fn(r[1],a[1],a[3]),i=t(r)}else i=t(r);return s&&e.canWrapX()&&(i[0]+=s*Bt(e.getExtent())),i}}function FB(){VS(ub),VS(fb),OB(fb,ub,fB,dB)}FB();new Array(6);function za(){return[1,0,0,1,0,0]}function VB(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function kr(n,e){const t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function No(n,e,t,r,i,s,a,o){const l=Math.sin(s),u=Math.cos(s);return n[0]=r*u,n[1]=i*l,n[2]=-r*l,n[3]=i*u,n[4]=a*r*u-o*r*l+e,n[5]=a*i*l+o*i*u+t,n}function bO(n,e){const t=jB(e);pn(t!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5];return n[0]=a/t,n[1]=-i/t,n[2]=-s/t,n[3]=r/t,n[4]=(s*l-a*o)/t,n[5]=-(r*l-i*o)/t,n}function jB(n){return n[0]*n[3]-n[1]*n[2]}const GB=[1e5,1e5,1e5,1e5,2,2];function BB(n){return"matrix("+n.join(", ")+")"}function BS(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function UB(n,e){const t=BS(n),r=BS(e);for(let i=0;i<6;++i)if(Math.round((t[i]-r[i])*GB[i])!==0)return!1;return!0}function jc(n,e,t,r,i,s,a){s=s||[],a=a||2;let o=0;for(let l=e;l<t;l+=r){const u=n[l],f=n[l+1];s[o++]=i[0]*u+i[2]*f+i[4],s[o++]=i[1]*u+i[3]*f+i[5];for(let d=2;d<a;d++)s[o++]=n[l+d]}return s&&s.length!=o&&(s.length=o),s}function MO(n,e,t,r,i,s,a){a=a||[];const o=Math.cos(i),l=Math.sin(i),u=s[0],f=s[1];let d=0;for(let g=e;g<t;g+=r){const p=n[g]-u,v=n[g+1]-f;a[d++]=u+p*o-v*l,a[d++]=f+p*l+v*o;for(let y=g+2;y<g+r;++y)a[d++]=n[y]}return a&&a.length!=d&&(a.length=d),a}function zB(n,e,t,r,i,s,a,o){o=o||[];const l=a[0],u=a[1];let f=0;for(let d=e;d<t;d+=r){const g=n[d]-l,p=n[d+1]-u;o[f++]=l+i*g,o[f++]=u+s*p;for(let v=d+2;v<d+r;++v)o[f++]=n[v]}return o&&o.length!=f&&(o.length=f),o}function $B(n,e,t,r,i,s,a){a=a||[];let o=0;for(let l=e;l<t;l+=r){a[o++]=n[l]+i,a[o++]=n[l+1]+s;for(let u=l+2;u<l+r;++u)a[o++]=n[u]}return a&&a.length!=o&&(a.length=o),a}const xb=za(),WB=[NaN,NaN];class kO extends Bo{constructor(){super(),this.extent_=Gs(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=lO((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return At()}closestPointXY(e,t,r,i){return At()}containsXY(e,t){return this.closestPointXY(e,t,WB,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return At()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&bp(t),this.extentRevision_=this.getRevision()}return iB(this.extent_,e)}rotate(e,t){At()}scale(e,t,r){At()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return At()}getType(){return At()}applyTransform(e){At()}intersectsExtent(e){return At()}translate(e,t){At()}transform(e,t){const r=Pn(e),i=r.getUnits()=="tile-pixels"?function(s,a,o){const l=r.getExtent(),u=r.getWorldExtent(),f=vr(u)/vr(l);No(xb,u[0],u[3],f,-f,0,0,0);const d=jc(s,0,s.length,o,xb,a),g=Om(r,t);return g?g(d,d,o):d}:Om(r,t);return this.applyTransform(i),this}}class Hh extends kO{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return AI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return At()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=vb(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){At()}setLayout(e,t,r){let i;if(e)i=vb(e);else{for(let s=0;s<r;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=Kh(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();MO(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=ko(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();zB(i,0,i.length,s,e,t,r,i),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();$B(r,0,r.length,i,e,t,r),this.changed()}}}function Kh(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function vb(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function HB(n,e,t){const r=n.getFlatCoordinates();if(!r)return null;const i=n.getStride();return jc(r,0,r.length,i,e,t)}function Eb(n,e,t,r,i,s,a){const o=n[e],l=n[e+1],u=n[t]-o,f=n[t+1]-l;let d;if(u===0&&f===0)d=e;else{const g=((i-o)*u+(s-l)*f)/(u*u+f*f);if(g>1)d=t;else if(g>0){for(let p=0;p<r;++p)a[p]=ks(n[e+p],n[t+p],g);a.length=r;return}else d=e}for(let g=0;g<r;++g)a[g]=n[d+g];a.length=r}function NI(n,e,t,r,i){let s=n[e],a=n[e+1];for(e+=r;e<t;e+=r){const o=n[e],l=n[e+1],u=fh(s,a,o,l);u>i&&(i=u),s=o,a=l}return i}function LI(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=NI(n,e,o,r,i),e=o}return i}function KB(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=LI(n,e,o,r,i),e=o[o.length-1]}return i}function OI(n,e,t,r,i,s,a,o,l,u,f){if(e==t)return u;let d,g;if(i===0){if(g=fh(a,o,n[e],n[e+1]),g<u){for(d=0;d<r;++d)l[d]=n[e+d];return l.length=r,g}return u}f=f||[NaN,NaN];let p=e+r;for(;p<t;)if(Eb(n,p-r,p,r,a,o,f),g=fh(a,o,f[0],f[1]),g<u){for(u=g,d=0;d<r;++d)l[d]=f[d];l.length=r,p+=r}else p+=r*Math.max((Math.sqrt(g)-Math.sqrt(u))/i|0,1);if(s&&(Eb(n,t-r,e,r,a,o,f),g=fh(a,o,f[0],f[1]),g<u)){for(u=g,d=0;d<r;++d)l[d]=f[d];l.length=r}return u}function DI(n,e,t,r,i,s,a,o,l,u,f){f=f||[NaN,NaN];for(let d=0,g=t.length;d<g;++d){const p=t[d];u=OI(n,e,p,r,i,s,a,o,l,u,f),e=p}return u}function YB(n,e,t,r,i,s,a,o,l,u,f){f=f||[NaN,NaN];for(let d=0,g=t.length;d<g;++d){const p=t[d];u=DI(n,e,p,r,i,s,a,o,l,u,f),e=p[p.length-1]}return u}function XB(n,e,t,r){for(let i=0,s=t.length;i<s;++i)n[e++]=t[i];return e}function wv(n,e,t,r){for(let i=0,s=t.length;i<s;++i){const a=t[i];for(let o=0;o<r;++o)n[e++]=a[o]}return e}function Lp(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=wv(n,e,t[a],r);i[s++]=l,e=l}return i.length=s,i}function NO(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=Lp(n,e,t[a],r,i[s]);l.length===0&&(l[0]=e),i[s++]=l,e=l[l.length-1]}return i.length=s,i}function bc(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=e;a<t;a+=r)i[s++]=n.slice(a,a+r);return i.length=s,i}function Dm(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a];i[s++]=bc(n,e,l,r,i[s]),e=l}return i.length=s,i}function US(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a];i[s++]=l.length===1&&l[0]===e?[]:Dm(n,e,l,r,i[s]),e=l[l.length-1]}return i.length=s,i}function $y(n,e,t,r,i,s,a){let o,l;const u=(t-e)/r;if(u===1)o=e;else if(u===2)o=e,l=i;else if(u!==0){let f=n[e],d=n[e+1],g=0;const p=[0];for(let E=e+r;E<t;E+=r){const T=n[E],R=n[E+1];g+=Math.sqrt((T-f)*(T-f)+(R-d)*(R-d)),p.push(g),f=T,d=R}const v=i*g,y=XG(p,v);y<0?(l=(v-p[-y-2])/(p[-y-1]-p[-y-2]),o=e+(-y-2)*r):o=e+y*r}a=a>1?a:2,s=s||new Array(a);for(let f=0;f<a;++f)s[f]=o===void 0?NaN:l===void 0?n[o+f]:ks(n[o+f],n[o+r+f],l);return s}function zS(n,e,t,r,i,s){if(t==e)return null;let a;if(i<n[e+r-1])return s?(a=n.slice(e,e+r),a[r-1]=i,a):null;if(n[t-1]<i)return s?(a=n.slice(t-r,t),a[r-1]=i,a):null;if(i==n[e+r-1])return n.slice(e,e+r);let o=e/r,l=t/r;for(;o<l;){const g=o+l>>1;i<n[(g+1)*r-1]?l=g:o=g+1}const u=n[o*r-1];if(i==u)return n.slice((o-1)*r,(o-1)*r+r);const f=n[(o+1)*r-1],d=(i-u)/(f-u);a=[];for(let g=0;g<r-1;++g)a.push(ks(n[(o-1)*r+g],n[o*r+g],d));return a.push(i),a}function qB(n,e,t,r,i,s,a){if(a)return zS(n,e,t[t.length-1],r,i,s);let o;if(i<n[r-1])return s?(o=n.slice(0,r),o[r-1]=i,o):null;if(n[n.length-1]<i)return s?(o=n.slice(n.length-r),o[r-1]=i,o):null;for(let l=0,u=t.length;l<u;++l){const f=t[l];if(e!=f){if(i<n[e+r-1])return null;if(i<=n[f-1])return zS(n,e,f,r,i,!1);e=f}}return null}function ZB(n,e,t,r,i){return!mO(i,function(a){return!sh(n,e,t,r,a[0],a[1])})}function sh(n,e,t,r,i,s){let a=0,o=n[t-r],l=n[t-r+1];for(;e<t;e+=r){const u=n[e],f=n[e+1];l<=s?f>s&&(u-o)*(s-l)-(i-o)*(f-l)>0&&a++:f<=s&&(u-o)*(s-l)-(i-o)*(f-l)<0&&a--,o=u,l=f}return a!==0}function FI(n,e,t,r,i,s){if(t.length===0||!sh(n,e,t[0],r,i,s))return!1;for(let a=1,o=t.length;a<o;++a)if(sh(n,t[a-1],t[a],r,i,s))return!1;return!0}function QB(n,e,t,r,i,s){if(t.length===0)return!1;for(let a=0,o=t.length;a<o;++a){const l=t[a];if(FI(n,e,l,r,i,s))return!0;e=l[l.length-1]}return!1}function LO(n,e,t,r,i){let s;for(e+=r;e<t;e+=r)if(s=i(n.slice(e-r,e),n.slice(e,e+r)),s)return s;return!1}function Sv(n,e,t,r,i,s){return s=s??gO(Gs(),n,e,t,r),ji(i,s)?s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:LO(n,e,t,r,function(a,o){return sB(i,a,o)}):!1}function JB(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){if(Sv(n,e,t[s],r,i))return!0;e=t[s]}return!1}function OO(n,e,t,r,i){return!!(Sv(n,e,t,r,i)||sh(n,e,t,r,i[0],i[1])||sh(n,e,t,r,i[0],i[3])||sh(n,e,t,r,i[2],i[1])||sh(n,e,t,r,i[2],i[3]))}function DO(n,e,t,r,i){if(!OO(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let s=1,a=t.length;s<a;++s)if(ZB(n,t[s-1],t[s],r,i)&&!Sv(n,t[s-1],t[s],r,i))return!1;return!0}function eU(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(DO(n,e,o,r,i))return!0;e=o[o.length-1]}return!1}function VI(n,e,t,r){let i=n[e],s=n[e+1],a=0;for(let o=e+r;o<t;o+=r){const l=n[o],u=n[o+1];a+=Math.sqrt((l-i)*(l-i)+(u-s)*(u-s)),i=l,s=u}return a}function Tv(n,e,t,r,i,s,a){const o=(t-e)/r;if(o<3){for(;e<t;e+=r)s[a++]=n[e],s[a++]=n[e+1];return a}const l=new Array(o);l[0]=1,l[o-1]=1;const u=[e,t-r];let f=0;for(;u.length>0;){const d=u.pop(),g=u.pop();let p=0;const v=n[g],y=n[g+1],E=n[d],T=n[d+1];for(let R=g+r;R<d;R+=r){const M=n[R],k=n[R+1],V=aB(M,k,v,y,E,T);V>p&&(f=R,p=V)}p>i&&(l[(f-e)/r]=1,g+r<f&&u.push(g,f),f+r<d&&u.push(f,d))}for(let d=0;d<o;++d)l[d]&&(s[a++]=n[e+d*r],s[a++]=n[e+d*r+1]);return a}function FO(n,e,t,r,i,s,a,o){for(let l=0,u=t.length;l<u;++l){const f=t[l];a=Tv(n,e,f,r,i,s,a),o.push(a),e=f}return a}function zu(n,e){return e*Math.round(n/e)}function tU(n,e,t,r,i,s,a){if(e==t)return a;let o=zu(n[e],i),l=zu(n[e+1],i);e+=r,s[a++]=o,s[a++]=l;let u,f;do if(u=zu(n[e],i),f=zu(n[e+1],i),e+=r,e==t)return s[a++]=u,s[a++]=f,a;while(u==o&&f==l);for(;e<t;){const d=zu(n[e],i),g=zu(n[e+1],i);if(e+=r,d==u&&g==f)continue;const p=u-o,v=f-l,y=d-o,E=g-l;if(p*E==v*y&&(p<0&&y<p||p==y||p>0&&y>p)&&(v<0&&E<v||v==E||v>0&&E>v)){u=d,f=g;continue}s[a++]=u,s[a++]=f,o=u,l=f,u=d,f=g}return s[a++]=u,s[a++]=f,a}function jI(n,e,t,r,i,s,a,o){for(let l=0,u=t.length;l<u;++l){const f=t[l];a=tU(n,e,f,r,i,s,a),o.push(a),e=f}return a}function nU(n,e,t,r,i,s,a,o){for(let l=0,u=t.length;l<u;++l){const f=t[l],d=[];a=jI(n,e,f,r,i,s,a,d),o.push(d),e=f[f.length-1]}return a}class Lo extends Hh{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){dn(this.flatCoordinates,e),this.changed()}clone(){const e=new Lo(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<$h(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(NI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),OI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return LO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,zS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return bc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return $y(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return VI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=Tv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Lo(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Sv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=wv(this.flatCoordinates,0,e,this.stride),this.changed()}}let Oo=class VO extends Hh{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new VO(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const s=this.flatCoordinates,a=fh(e,t,s[0],s[1]);if(a<i){const o=this.stride;for(let l=0;l<o;++l)r[l]=s[l];return r.length=o,a}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return fO(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return II(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=XB(this.flatCoordinates,0,e,this.stride),this.changed()}};const ha={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},wh=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",rU=wh.includes("safari")&&!wh.includes("chrom");rU&&(wh.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(wh));const iU=wh.includes("webkit")&&!wh.includes("edge"),jO=wh.includes("macintosh"),sU=typeof devicePixelRatio<"u"?devicePixelRatio:1,Ds=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,GI=typeof Image<"u"&&Image.prototype.decode,GO=typeof createImageBitmap=="function",BO=(function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n})(),ht={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Lr(n,e,t,r){let i;return t&&t.length?i=t.shift():Ds?i=new class extends OffscreenCanvas{style={}}(n??300,e??150):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}let o2;function Wy(){return o2||(o2=Lr(1,1)),o2}function Iv(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function wb(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function aU(n){for(;n.lastChild;)n.lastChild.remove()}function oU(n,e){const t=n.childNodes;for(let r=0;;++r){const i=t[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){n.appendChild(s);continue}if(!s){n.removeChild(i),--r;continue}n.insertBefore(s,i)}}}function UO(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const t=this.childNodes.indexOf(e);if(t===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(t,1),e},insertBefore:function(e,t){const r=this.childNodes.indexOf(t);if(r===-1)throw new Error("Reference node not found");return this.childNodes.splice(r,0,e),e},style:{}},{get(e,t,r){return t==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,t,r)}})}function Mc(n){return typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas}const BI=[NaN,NaN,NaN,0];let l2;function lU(){return l2||(l2=Lr(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),l2}const cU=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,uU=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,hU=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,fU=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function I1(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function nm(n){throw new Error('failed to parse "'+n+'" as color')}function zO(n){if(n.toLowerCase().startsWith("rgb")){const s=n.match(uU)||n.match(cU)||n.match(hU);if(s){const a=s[4],o=100/255;return[Fn(I1(s[1],o)+.5|0,0,255),Fn(I1(s[2],o)+.5|0,0,255),Fn(I1(s[3],o)+.5|0,0,255),a!==void 0?Fn(I1(a,100),0,1):1]}nm(n)}if(n.startsWith("#")){if(fU.test(n)){const s=n.substring(1),a=s.length<=4?1:2,o=[0,0,0,255];for(let l=0,u=s.length;l<u;l+=a){let f=parseInt(s.substring(l,l+a),16);a===1&&(f+=f<<4),o[l/a]=f}return o[3]=o[3]/255,o}nm(n)}const e=lU();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&nm(n));const r=e.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return zO(r);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=Mp(i[3]/255,3),i}function dU(n){return typeof n=="string"?n:zI(n)}const gU=1024,wg={};let c2=0;function mU(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function u2(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function h2(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function f2(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function d2(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function Sb(n){const e=f2(n[0]),t=f2(n[1]),r=f2(n[2]),i=d2(e*.222488403+t*.716873169+r*.06060791),s=500*(d2(e*.452247074+t*.399439023+r*.148375274)-i),a=200*(i-d2(e*.016863605+t*.117638439+r*.865350722)),o=Math.atan2(a,s)*(180/Math.PI);return[116*i-16,Math.sqrt(s*s+a*a),o<0?o+360:o,n[3]]}function pU(n){const e=(n[0]+16)/116,t=n[1],r=n[2]*Math.PI/180,i=h2(e),s=h2(e+t/500*Math.cos(r)),a=h2(e-t/200*Math.sin(r)),o=u2(s*3.021973625-i*1.617392459-a*.404875592),l=u2(s*-.943766287+i*1.916279586+a*.027607165),u=u2(s*.069407491-i*.22898585+a*1.159737864);return[Fn(o+.5|0,0,255),Fn(l+.5|0,0,255),Fn(u+.5|0,0,255),n[3]]}function UI(n){if(n==="none")return BI;if(wg.hasOwnProperty(n))return wg[n];if(c2>=gU){let t=0;for(const r in wg)(t++&3)===0&&(delete wg[r],--c2)}const e=zO(n);e.length!==4&&nm(n);for(const t of e)isNaN(t)&&nm(n);return wg[n]=e,++c2,e}function Sh(n){return Array.isArray(n)?n:UI(n)}function zI(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}class $O extends Cp{constructor(e,t,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof i=="function"?ht.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(Mt.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==ht.IDLE&&this.loader){this.state=ht.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;cO(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||GO&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=ht.LOADED}).catch(r=>{this.state=ht.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function _U(n,e,t){const r=n;let i=!0,s=!1,a=!1;const o=[Dy(r,Mt.LOAD,function(){a=!0,s||e()})];return r.src&&GI?(s=!0,r.decode().then(function(){i&&e()}).catch(function(l){i&&(a?e():t())})):o.push(Dy(r,Mt.ERROR,t)),function(){i=!1,o.forEach(Nn)}}function yU(n,e){return new Promise((t,r)=>{function i(){a(),t(n)}function s(){a(),r(new Error("Image load error"))}function a(){n.removeEventListener("load",i),n.removeEventListener("error",s)}n.addEventListener("load",i),n.addEventListener("error",s)})}function WO(n,e){return e&&(n.src=e),n.src&&GI?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):yU(n)}function HO(n,e){return e&&(n.src=e),n.src&&GI&&GO?n.decode().then(()=>createImageBitmap(n)).catch(t=>{if(n.complete&&n.width)return n;throw t}):WO(n)}class xU{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const i=g2(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){const i=g2(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,s){const a=g2(e,t,r),o=a in this.cache_;this.cache_[a]=i,s&&(i.getImageState()===ht.IDLE&&i.load(),i.getImageState()===ht.LOADING?i.ready().then(()=>{this.patternCache_[a]=Wy().createPattern(i.getImage(1),"repeat")}):this.patternCache_[a]=Wy().createPattern(i.getImage(1),"repeat")),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function g2(n,e,t){const r=t?Sh(t):"null";return e+":"+n+":"+r}const fa=new xU;let Sg=null;class KO extends Cp{constructor(e,t,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?ht.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ht.LOADED){Sg||(Sg=Lr(1,1,void 0,{willReadFrequently:!0})),Sg.drawImage(this.image_,0,0);try{Sg.getImageData(0,0,1,1),this.tainted_=!1}catch{Sg=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Mt.CHANGE)}handleImageError_(){this.imageState_=ht.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ht.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=Lr(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ht.IDLE){this.image_||this.initializeImage_(),this.imageState_=ht.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&WO(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ht.LOADED)return;const t=this.image_,r=Lr(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=dU(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===ht.LOADED||this.imageState_===ht.ERROR)e();else{const t=()=>{(this.imageState_===ht.LOADED||this.imageState_===ht.ERROR)&&(this.removeEventListener(Mt.CHANGE,t),e())};this.addEventListener(Mt.CHANGE,t)}})),this.ready_}}function Hy(n,e,t,r,i,s){let a=e===void 0?void 0:fa.get(e,t,i);return a||(a=new KO(n,n&&"src"in n?n.src||void 0:e,t,r,i),fa.set(e,t,i,a,s)),s&&a&&!fa.getPattern(e,t,i)&&fa.set(e,t,i,a,s),a}function Eo(n){return n?Array.isArray(n)?zI(n):typeof n=="object"&&"src"in n?vU(n):n:null}function vU(n){if(!n.offset||!n.size)return fa.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=fa.getPattern(e,void 0,n.color);if(t)return t;const r=fa.get(n.src,"anonymous",null);if(r.getImageState()!==ht.LOADED)return null;const i=Lr(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),Hy(i.canvas,e,void 0,ht.LOADED,n.color,!0),fa.getPattern(e,void 0,n.color)}class YO{drawCustom(e,t,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const A1="ol-hidden",Op="ol-unselectable",$I="ol-control",Tb="ol-collapsed",EU=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),Ib=["style","variant","weight","size","lineHeight","family"],$S={normal:400,bold:700},WS=function(n){const e=n.match(EU);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let r=0,i=Ib.length;r<i;++r){const s=e[r+1];s!==void 0&&(t[Ib[r]]=typeof s=="string"?s.trim():s)}return isNaN(Number(t.weight))&&t.weight in $S&&(t.weight=$S[t.weight]),t.families=t.family.split(/,\s?/).map(r=>r.trim().replace(/^['"]|['"]$/g,"")),t},XO="10px sans-serif",rs="#000",Yd="round",xl=[],vl=0,Xd="round",Fm=10,Vm="#000",jm="center",Ky="middle",ah=[0,0,0,0],Gm=1,td=new Bo;let Tg=null,Ab;const HS={},wU=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function SU(n,e,t){return`${n} ${e} 16px "${t}"`}const TU=(function(){let e,t;async function r(s){await t.ready;const a=await t.load(s);if(a.length===0)return!1;const o=WS(s),l=o.families[0].toLowerCase(),u=o.weight;return a.some(f=>{const d=f.family.replace(/^['"]|['"]$/g,"").toLowerCase(),g=$S[f.weight]||f.weight;return d===l&&f.style===o.style&&g==u})}async function i(){await t.ready;let s=!0;const a=td.getProperties(),o=Object.keys(a).filter(l=>a[l]<100);for(let l=o.length-1;l>=0;--l){const u=o[l];let f=a[u];f<100&&(await r(u)?(Rp(HS),td.set(u,100)):(f+=10,td.set(u,f,!0),f<100&&(s=!1)))}e=void 0,s||(e=setTimeout(i,100))}return async function(s){t||(t=Ds?self.fonts:document.fonts);const a=WS(s);if(!a)return;const o=a.families;let l=!1;for(const u of o){if(wU.has(u))continue;const f=SU(a.style,a.weight,u);td.get(f)===void 0&&(td.set(f,0,!0),l=!0)}l&&(clearTimeout(e),e=setTimeout(i,100))}})(),IU=(function(){let n;return function(e){let t=HS[e];if(t==null){if(Ds){const r=WS(e),i=qO(e,"g");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);HS[e]=t}return t}})();function qO(n,e){return Tg||(Tg=Lr(1,1)),n!=Ab&&(Tg.font=n,Ab=Tg.font),Tg.measureText(e)}function ZO(n,e){return qO(n,e).width}function Rb(n,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,ZO(n,s)),0);return t[e]=r,r}function AU(n,e){const t=[],r=[],i=[];let s=0,a=0,o=0,l=0;for(let u=0,f=e.length;u<=f;u+=2){const d=e[u];if(d===`
`||u===f){s=Math.max(s,a),i.push(a),a=0,o+=l,l=0;continue}const g=e[u+1]||n.font,p=ZO(g,d);t.push(p),a+=p;const v=IU(g);r.push(v),l=Math.max(l,v)}return{width:s,height:o,widths:t,heights:r,lineWidths:i}}function RU(n,e,t,r,i,s,a,o,l,u,f){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=d=>d.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(l,u),n.scale(f[0],f[1]),CU(r,n)):f[0]<0||f[1]<0?(n.translate(l,u),n.scale(f[0],f[1]),n.drawImage(r,i,s,a,o,0,0,a,o)):n.drawImage(r,i,s,a,o,l,u,a*f[0],o*f[1]),n.restore()}function CU(n,e){const t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}class PU extends YO{constructor(e,t,r,i,s,a,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?Mp(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=a,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=za()}drawImages_(e,t,r,i){if(!this.image_)return;const s=jc(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_,o=this.tmpLocalTransform_,l=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let f=0,d=s.length;f<d;f+=2){const g=s[f]-this.imageAnchorX_,p=s[f+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const v=g+this.imageAnchorX_,y=p+this.imageAnchorY_;No(o,v,y,1,1,u,-v,-y),a.save(),a.transform.apply(a,o),a.translate(v,y),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,g,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=l)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=jc(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<r;t+=i){const l=s[t]+this.textOffsetX_,u=s[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(l-this.textOffsetX_,u-this.textOffsetY_),a.rotate(o),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,l,u),this.textFillState_&&a.fillText(this.text_,l,u))}}moveToLineTo_(e,t,r,i,s){const a=this.context_,o=jc(e,t,r,i,this.transform_,this.pixelCoordinates_);a.moveTo(o[0],o[1]);let l=o.length;s&&(l-=2);for(let u=2;u<l;u+=2)a.lineTo(o[u],o[u+1]);return s&&a.closePath(),r}drawRings_(e,t,r,i){for(let s=0,a=r.length;s<a;++s)t=this.moveToLineTo_(e,t,r[s],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ji(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=HB(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],s=Math.sqrt(r*r+i*i),a=this.context_;a.beginPath(),a.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ji(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(ji(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const a=e.getEnds(),o=e.getStride();r.beginPath();for(let l=0,u=a.length;l<u;++l)s=this.moveToLineTo_(i,s,a[l],o,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ji(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ji(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),a=e.getStride();t.beginPath();for(let o=0,l=s.length;o<l;++o){const u=s[o];i=this.drawRings_(r,i,u,a)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),hu(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:jm;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:Eo(r||rs)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),i=t.getLineCap(),s=t.getLineDash(),a=t.getLineDashOffset(),o=t.getLineJoin(),l=t.getWidth(),u=t.getMiterLimit(),f=s||xl;this.strokeState_={lineCap:i!==void 0?i:Yd,lineDash:this.pixelRatio_===1?f:f.map(d=>d*this.pixelRatio_),lineDashOffset:(a||vl)*this.pixelRatio_,lineJoin:o!==void 0?o:Xd,lineWidth:(l!==void 0?l:Gm)*this.pixelRatio_,miterLimit:u!==void 0?u:Fm,strokeStyle:Eo(r||Vm)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/r,a[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const p=t.getColor();this.textFillState_={fillStyle:Eo(p||rs)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const p=r.getColor(),v=r.getLineCap(),y=r.getLineDash(),E=r.getLineDashOffset(),T=r.getLineJoin(),R=r.getWidth(),M=r.getMiterLimit();this.textStrokeState_={lineCap:v!==void 0?v:Yd,lineDash:y||xl,lineDashOffset:E||vl,lineJoin:T!==void 0?T:Xd,lineWidth:R!==void 0?R:Gm,miterLimit:M!==void 0?M:Fm,strokeStyle:Eo(p||Vm)}}const i=e.getFont(),s=e.getOffsetX(),a=e.getOffsetY(),o=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),f=e.getText(),d=e.getTextAlign(),g=e.getTextBaseline();this.textState_={font:i!==void 0?i:XO,textAlign:d!==void 0?d:jm,textBaseline:g!==void 0?g:Ky},this.text_=f!==void 0?Array.isArray(f)?f.reduce((p,v,y)=>p+=y%2?" ":v,""):f:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const bU=.5,QO={Point:VU,LineString:OU,Polygon:GU,MultiPoint:jU,MultiLineString:DU,MultiPolygon:FU,GeometryCollection:LU,Circle:kU};function MU(n,e){return parseInt(nn(n),10)-parseInt(nn(e),10)}function Cb(n,e){const t=JO(n,e);return t*t}function JO(n,e){return bU*n/e}function kU(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const l=n.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,a),l.drawCircle(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r)}}function Pb(n,e,t,r,i,s,a,o){const l=[],u=t.getImage();if(u){let g=!0;const p=u.getImageState();p==ht.LOADED||p==ht.ERROR?g=!1:p==ht.IDLE&&u.load(),g&&l.push(u.ready())}const f=t.getFill();f&&f.loading()&&l.push(f.ready());const d=l.length>0;return d&&Promise.all(l).then(()=>i(null)),NU(n,e,t,r,s,a,o),d}function NU(n,e,t,r,i,s,a){const o=t.getGeometryFunction()(e);if(!o)return;const l=o.simplifyTransformed(r,i);if(t.getRenderer())eD(n,l,t,e,a);else{const f=QO[l.getType()];f(n,l,t,e,a,s)}}function eD(n,e,t,r,i){if(e.getType()=="GeometryCollection"){const a=e.getGeometries();for(let o=0,l=a.length;o<l;++o)eD(n,a[o],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function LU(n,e,t,r,i,s){const a=e.getGeometriesArray();let o,l;for(o=0,l=a.length;o<l;++o){const u=QO[a[o].getType()];u(n,a[o],t,r,i,s)}}function OU(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function DU(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function FU(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(a||s){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawMultiPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r,i)}}function VU(n,e,t,r,i,s){const a=t.getImage(),o=t.getText(),l=o&&o.getText(),u=s&&a&&l?{}:void 0;if(a){if(a.getImageState()!=ht.LOADED)return;const f=n.getBuilder(t.getZIndex(),"Image");f.setImageStyle(a,u),f.drawPoint(e,r,i)}if(l){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(o,u),f.drawText(e,r,i)}}function jU(n,e,t,r,i,s){const a=t.getImage(),o=a&&a.getOpacity()!==0,l=t.getText(),u=l&&l.getText(),f=s&&o&&u?{}:void 0;if(o){if(a.getImageState()!=ht.LOADED)return;const d=n.getBuilder(t.getZIndex(),"Image");d.setImageStyle(a,f),d.drawMultiPoint(e,r,i)}if(u){const d=n.getBuilder(t.getZIndex(),"Text");d.setTextStyle(l,f),d.drawText(e,r,i)}}function GU(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r,i)}}let BU=!1;function UU(n,e,t,r,i,s,a){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=BU,o.onload=function(l){if(!o.status||o.status>=200&&o.status<300){const u=e.getType();try{let f;u=="text"||u=="json"?f=o.responseText:u=="xml"?f=o.responseXML||o.responseText:u=="arraybuffer"&&(f=o.response),f?s(e.readFeatures(f,{extent:t,featureProjection:i}),e.readProjection(f)):a()}catch{a()}}else a()},o.onerror=a,o.send()}function bb(n,e){return function(t,r,i,s,a){UU(n,e,t,r,i,(o,l)=>{this.addFeatures(o),s!==void 0&&s(o)},()=>{this.changed(),a!==void 0&&a()})}}function zU(n,e){return[[-1/0,-1/0,1/0,1/0]]}function tD(n,e,t,r){const i=[];let s=Gs();for(let a=0,o=t.length;a<o;++a){const l=t[a];s=AI(n,e,l[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return i}function WI(n,e,t,r,i,s,a){let o,l,u,f,d,g,p;const v=i[s+1],y=[];for(let R=0,M=t.length;R<M;++R){const k=t[R];for(f=n[k-r],g=n[k-r+1],o=e;o<k;o+=r)d=n[o],p=n[o+1],(v<=g&&p<=v||g<=v&&v<=p)&&(u=(v-g)/(p-g)*(d-f)+f,y.push(u)),f=d,g=p}let E=NaN,T=-1/0;for(y.sort(pl),f=y[0],o=1,l=y.length;o<l;++o){d=y[o];const R=Math.abs(d-f);R>T&&(u=(f+d)/2,FI(n,e,t,r,u,v)&&(E=u,T=R)),f=d}return isNaN(E)&&(E=i[s]),a?(a.push(E,v,T),a):[E,v,T]}function nD(n,e,t,r,i){let s=[];for(let a=0,o=t.length;a<o;++a){const l=t[a];s=WI(n,e,l,r,i,2*a,s),e=l[l.length-1]}return s}function $U(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){const s=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=s}e+=r,t-=r}}function HI(n,e,t,r){let i=0,s=n[t-r],a=n[t-r+1];for(;e<t;e+=r){const o=n[e],l=n[e+1];i+=(o-s)*(l+a),s=o,a=l}return i===0?void 0:i>0}function KI(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],l=HI(n,e,o,r);if(s===0){if(i&&l||!i&&!l)return!1}else if(i&&!l||!i&&l)return!1;e=o}return!0}function rD(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(!KI(n,e,o,r,i))return!1;o.length&&(e=o[o.length-1])}return!0}function Yy(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],l=HI(n,e,o,r);(s===0?i&&l||!i&&!l:i&&!l||!i&&l)&&$U(n,e,o,r),e=o}return e}function KS(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s)e=Yy(n,e,t[s],r,i);return e}function WU(n,e){const t=[];let r=0,i=0,s;for(let a=0,o=e.length;a<o;++a){const l=e[a],u=HI(n,r,l,2);if(s===void 0&&(s=u),u===s)t.push(e.slice(i,a+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=a+1,r=l}return t}class $a extends kO{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Nn),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(qt(e[t],Mt.CHANGE,this.changed,this))}clone(){const e=new $a(m2(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<$h(this.getExtent(),e,t))return i;const s=this.geometries_;for(let a=0,o=s.length;a<o;++a)i=s[a].closestPointXY(e,t,r,i);return i}containsXY(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){bp(e);const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)dO(e,t[r].getExtent());return e}getGeometries(){return m2(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let i=!1;for(let s=0,a=r.length;s<a;++s){const o=r[s],l=o.getSimplifiedGeometry(e);t.push(l),l!==o&&(i=!0)}return i?new $a(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=ko(this.getExtent()));const i=this.geometries_;for(let s=0,a=i.length;s<a;++s)i[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(m2(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function m2(n){return n.map(e=>e.clone())}function iD(n,e,t,r){let i=0;const s=n[t-r],a=n[t-r+1];let o=0,l=0;for(;e<t;e+=r){const u=n[e]-s,f=n[e+1]-a;i+=l*u-o*f,o=u,l=f}return i/2}function sD(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=iD(n,e,o,r),e=o}return i}function HU(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=sD(n,e,o,r),e=o[o.length-1]}return i}class Bm extends Hh{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Bm(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<$h(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(NI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),OI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return iD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return bc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=Tv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Bm(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=wv(this.flatCoordinates,0,e,this.stride),this.changed()}}class Yc extends Hh{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const i=e,s=[],a=[];for(let l=0,u=i.length;l<u;++l){const f=i[l];dn(s,f.getFlatCoordinates()),a.push(s.length)}const o=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(o,s),this.ends_=a}}appendLineString(e){dn(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Yc(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<$h(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(LI(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),DI(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,qB(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return Dm(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Lo(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a],u=new Lo(e.slice(s,l),r);i.push(u),s=l}return i}getLength(){const e=this.ends_;let t=0,r=0;for(let i=0,s=e.length;i<s;++i)r+=VI(this.flatCoordinates,t,e[i],this.stride),t=e[i];return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let a=0,o=i.length;a<o;++a){const l=i[a],u=$y(t,r,l,s,.5);dn(e,u),r=l}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=FO(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new Yc(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return JB(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=Lp(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class x0 extends Hh{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){dn(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new x0(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<$h(this.getExtent(),e,t))return i;const s=this.flatCoordinates,a=this.stride;for(let o=0,l=s.length;o<l;o+=a){const u=fh(e,t,s[o],s[o+1]);if(u<i){i=u;for(let f=0;f<a;++f)r[f]=s[o+f];r.length=a}}return i}getCoordinates(){return bc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Oo(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let s=0,a=e.length;s<a;s+=r){const o=new Oo(e.slice(s,s+r),t);i.push(o)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let i=0,s=t.length;i<s;i+=r){const a=t[i],o=t[i+1];if(II(e,a,o))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=wv(this.flatCoordinates,0,e,this.stride),this.changed()}}class Ka extends Hh{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?dn(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Ka(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<$h(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(LI(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),DI(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return FI(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return sD(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Yy(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Dm(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=ko(this.getExtent());this.flatInteriorPoint_=WI(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Oo(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Bm(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const l=r[a],u=new Bm(t.slice(s,l),e);i.push(u),s=l}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;KI(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Yy(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=jI(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new Ka(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return DO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=Lp(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function Mb(n){if(y0(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],r=n[2],i=n[3],s=[e,t,e,i,r,i,r,t,e,t];return new Ka(s,"XY",[s.length])}class qd extends Hh{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],a=[];for(let o=0,l=i.length;o<l;++o){const u=i[o],f=s.length,d=u.getEnds();for(let g=0,p=d.length;g<p;++g)d[g]+=f;dn(s,u.getFlatCoordinates()),a.push(d)}t=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=a}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;dn(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,s=t.length;i<s;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const r=new qd(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<$h(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(KB(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),YB(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return QB(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return HU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),KS(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,US(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=tD(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=nD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new x0(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;rD(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=KS(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=nU(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new qd(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let s=0,a=r.length;s<a;++s)r[s]-=t;return new Ka(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const l=r[a].slice(),u=l[l.length-1];if(s!==0)for(let d=0,g=l.length;d<g;++d)l[d]-=s;const f=new Ka(t.slice(s,u),e,l);i.push(f),s=u}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return eU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=NO(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const kb=za();class Ns{constructor(e,t,r,i,s,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?fO(this.flatCoordinates_):AI(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=ko(this.getExtent());this.flatInteriorPoints_=WI(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=WU(this.flatCoordinates_,this.ends_),t=tD(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=nD(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=$y(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const a=r[i],o=$y(e,t,a,2,.5);dn(this.flatMidpoints_,o),t=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Pn(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const i=vr(r)/vr(t);No(kb,r[0],r[3],i,-i,0,0,0),jc(this.flatCoordinates_,0,this.flatCoordinates_.length,2,kb,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new Ns(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=lO((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=Tv(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=FO(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=jI(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new Ns(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}Ns.prototype.getFlatCoordinates=Ns.prototype.getOrientedFlatCoordinates;function aD(n,e,t=0,r=n.length-1,i=KU){for(;r>t;){if(r-t>600){const l=r-t+1,u=e-t+1,f=Math.log(l),d=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*d*(l-d)/l)*(u-l/2<0?-1:1),p=Math.max(t,Math.floor(e-u*d/l+g)),v=Math.min(r,Math.floor(e+(l-u)*d/l+g));aD(n,e,p,v,i)}const s=n[e];let a=t,o=r;for(Ig(n,t,e),i(n[r],s)>0&&Ig(n,t,r);a<o;){for(Ig(n,a,o),a++,o--;i(n[a],s)<0;)a++;for(;i(n[o],s)>0;)o--}i(n[t],s)===0?Ig(n,t,o):(o++,Ig(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}}function Ig(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function KU(n,e){return n<e?-1:n>e?1:0}let oD=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!C1(e,t))return r;const i=this.toBBox,s=[];for(;t;){for(let a=0;a<t.children.length;a++){const o=t.children[a],l=t.leaf?i(o):o;C1(e,l)&&(t.leaf?r.push(o):_2(e,l)?this._all(o,r):s.push(o))}t=s.pop()}return r}collides(e){let t=this.data;if(!C1(e,t))return!1;const r=[];for(;t;){for(let i=0;i<t.children.length;i++){const s=t.children[i],a=t.leaf?this.toBBox(s):s;if(C1(e,a)){if(t.leaf||_2(e,a))return!0;r.push(s)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=nd([]),this}remove(e,t){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],a=[];let o,l,u;for(;r||s.length;){if(r||(r=s.pop(),l=s[s.length-1],o=a.pop(),u=!0),r.leaf){const f=YU(e,r.children,t);if(f!==-1)return r.children.splice(f,1),s.push(r),this._condense(s),this}!u&&!r.leaf&&_2(r,i)?(s.push(r),a.push(o),o=0,l=r,r=r.children[0]):l?(o++,r=l.children[o],u=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){const s=r-t+1;let a=this._maxEntries,o;if(s<=a)return o=nd(e.slice(t,r+1)),jf(o,this.toBBox),o;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),o=nd([]),o.leaf=!1,o.height=i;const l=Math.ceil(s/a),u=l*Math.ceil(Math.sqrt(a));Nb(e,t,r,u,this.compareMinX);for(let f=t;f<=r;f+=u){const d=Math.min(f+u-1,r);Nb(e,f,d,l,this.compareMinY);for(let g=f;g<=d;g+=l){const p=Math.min(g+l-1,d);o.children.push(this._build(e,g,p,i-1))}}return jf(o,this.toBBox),o}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let s=1/0,a=1/0,o;for(let l=0;l<t.children.length;l++){const u=t.children[l],f=p2(u),d=ZU(e,u)-f;d<a?(a=d,s=f<s?f:s,o=u):d===a&&f<s&&(s=f,o=u)}t=o||t.children[0]}return t}_insert(e,t,r){const i=r?e:this.toBBox(e),s=[],a=this._chooseSubtree(i,this.data,t,s);for(a.children.push(e),Vg(a,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)}_split(e,t){const r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const a=this._chooseSplitIndex(r,s,i),o=nd(r.children.splice(a,r.children.length-a));o.height=r.height,o.leaf=r.leaf,jf(r,this.toBBox),jf(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)}_splitRoot(e,t){this.data=nd([e,t]),this.data.height=e.height+1,this.data.leaf=!1,jf(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,s=1/0,a=1/0;for(let o=t;o<=r-t;o++){const l=Fg(e,0,o,this.toBBox),u=Fg(e,o,r,this.toBBox),f=QU(l,u),d=p2(l)+p2(u);f<s?(s=f,i=o,a=d<a?d:a):f===s&&d<a&&(a=d,i=o)}return i||r-t}_chooseSplitAxis(e,t,r){const i=e.leaf?this.compareMinX:XU,s=e.leaf?this.compareMinY:qU,a=this._allDistMargin(e,t,r,i),o=this._allDistMargin(e,t,r,s);a<o&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);const s=this.toBBox,a=Fg(e,0,t,s),o=Fg(e,r-t,r,s);let l=R1(a)+R1(o);for(let u=t;u<r-t;u++){const f=e.children[u];Vg(a,e.leaf?s(f):f),l+=R1(a)}for(let u=r-t-1;u>=t;u--){const f=e.children[u];Vg(o,e.leaf?s(f):f),l+=R1(o)}return l}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)Vg(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():jf(e[t],this.toBBox)}};function YU(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function jf(n,e){Fg(n,0,n.children.length,e,n)}function Fg(n,e,t,r,i){i||(i=nd(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<t;s++){const a=n.children[s];Vg(i,n.leaf?r(a):a)}return i}function Vg(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function XU(n,e){return n.minX-e.minX}function qU(n,e){return n.minY-e.minY}function p2(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function R1(n){return n.maxX-n.minX+(n.maxY-n.minY)}function ZU(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function QU(n,e){const t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,s-r)}function _2(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function C1(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function nd(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Nb(n,e,t,r,i){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=r)continue;const a=e+Math.ceil((t-e)/r/2)*r;aD(n,a,e,t,i),s.push(e,a,a,t)}}class Lb{constructor(e){this.rbush_=new oD(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[nn(t)]=r}load(e,t){const r=new Array(t.length);for(let i=0,s=t.length;i<s;i++){const a=e[i],o=t[i],l={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:o};r[i]=l,this.items_[nn(o)]=l}this.rbush_.load(r)}remove(e){const t=nn(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[nn(t)],i=[r.minX,r.minY,r.maxX,r.maxY];$d(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,s=e.length;i<s;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return xh(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Kc(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class YI extends Bo{constructor(e){super(),this.projection=Pn(e.projection),this.attributions_=Ob(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Ob(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Ob(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const na={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class lc extends Go{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class Av extends YI{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Nm,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(pn(this.format_,"`format` must be set when `url` is set"),this.loader_=bb(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:zU;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Lb:null,this.loadedExtentsRtree_=new Lb,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new ua(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=nn(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new lc(na.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof Ns||(this.featureChangeKeys_[e]=[qt(t,Mt.CHANGE,this.handleFeatureChange_,this),qt(t,zd.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof Ns){const s=this.idIndex_[i];s instanceof Ns?Array.isArray(s)?s.push(t):this.idIndex_[i]=[s,t]:r=!1}else r=!1}return r&&(pn(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],i=[];for(let s=0,a=e.length;s<a;s++){const o=e[s],l=nn(o);this.addToIndex_(l,o)&&r.push(o)}for(let s=0,a=r.length;s<a;s++){const o=r[s],l=nn(o);this.setupChangeEvents_(l,o);const u=o.getGeometry();if(u){const f=u.getExtent();t.push(f),i.push(o)}else this.nullGeometryFeatures_[l]=o}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(na.ADDFEATURE))for(let s=0,a=r.length;s<a;s++)this.dispatchEvent(new lc(na.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(na.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(na.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(ns.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(ns.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(Nn);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new lc(na.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof Ns||s.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof Ns||i.intersectsExtent(e)){const s=t(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),xh(this.nullGeometryFeatures_)||dn(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=yO(e,t);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],i=e[1];let s=null;const a=[NaN,NaN];let o=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||km,this.featuresRtree_.forEachInExtent(l,function(u){if(t(u)){const f=u.getGeometry(),d=o;if(o=f instanceof Ns?0:f.closestPointXY(r,i,a,o),o<d){s=u;const g=Math.sqrt(o);l[0]=r-g,l[1]=i-g,l[2]=r+g,l[3]=i+g}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=nn(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const a=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(a,t)):this.featuresRtree_&&this.featuresRtree_.update(a,t)}const s=t.getId();if(s!==void 0){const a=s.toString();this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new lc(na.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:nn(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&xh(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,t,r);for(let a=0,o=s.length;a<o;++a){const l=s[a];i.forEachInExtent(l,function(f){return Cc(f.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new lc(na.FEATURESLOADSTART)),this.loader_.call(this,l,t,r,f=>{--this.loadingExtentsCount_,this.dispatchEvent(new lc(na.FEATURESLOADEND,void 0,f))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new lc(na.FEATURESLOADERROR))}),i.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(i){if($d(i.extent,e))return i});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,i=e.length;r<i;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=nn(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(Nn),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const s=i.toString(),a=this.idIndex_[s];a===e?delete this.idIndex_[s]:Array.isArray(a)&&(a.splice(a.indexOf(e),1),a.length===1&&(this.idIndex_[s]=a[0]))}return delete this.uidIndex_[t],this.hasListener(na.REMOVEFEATURE)&&this.dispatchEvent(new lc(na.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){pn(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(bb(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class Ai{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Ai({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=Hy(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===ht.IDLE&&t.load(),t.getImageState()===ht.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?nn(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Sh(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Fs{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Fs({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function Db(n){return n[0]>0&&n[1]>0}function JU(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function os(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}class Rv{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=os(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Rv({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return At()}getImage(e){return At()}getHitDetectionImage(){return At()}getPixelRatio(e){return 1}getImageState(){return At()}getImageSize(){return At()}getOrigin(){return At()}getSize(){return At()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=os(e)}listenImageChange(e){At()}load(){At()}unlistenImageChange(e){At()}ready(){return Promise.resolve()}}class Cv extends Rv{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?ht.LOADING:ht.LOADED,this.imageState_===ht.LOADING&&this.ready().then(()=>this.imageState_=ht.LOADED),this.render()}clone(){const e=this.getScale(),t=new Cv({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let i=fa.get(r,null,null)?.getImage(1);if(!i){const s=this.renderOptions_,a=Math.ceil(s.size*e),o=Lr(a,a);this.draw_(s,o,e),i=o.canvas,fa.set(r,null,null,new KO(i,void 0,null,ht.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const z=i;i=s,s=z}const a=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/a,l=s*Math.sin(o),u=Math.sqrt(s*s-l*l),f=i-u,d=Math.sqrt(l*l+f*f),g=d/l;if(e==="miter"&&g<=r)return g*t;const p=t/2/g,v=t/2*(f/d),E=Math.sqrt((i+p)*(i+p)+v*v)-i;if(this.radius2_===void 0||e==="bevel")return E*2;const T=i*Math.sin(o),R=Math.sqrt(i*i-T*T),M=s-R,V=Math.sqrt(T*T+M*M)/T;if(V<=r){const z=V*t/2-s-i;return 2*Math.max(E,z)}return E*2}createRenderOptions(){let e=Yd,t=Xd,r=0,i=null,s=0,a,o=0;this.stroke_&&(a=Eo(this.stroke_.getColor()??Vm),o=this.stroke_.getWidth()??Gm,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Xd,e=this.stroke_.getLineCap()??Yd,r=this.stroke_.getMiterLimit()??Fm);const l=this.calculateLineJoinSize_(t,o,r),u=Math.max(this.radius,this.radius2_||0),f=Math.ceil(2*u+l);return{strokeStyle:a,strokeWidth:o,size:f,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=rs),t.fillStyle=Eo(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=Sh(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=Lr(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let o=0;o<t;o++){const l=s+o*a,u=o%2===0?r:i;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=rs,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Xc extends Cv{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Xc({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class ar{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=Fb,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new ar({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Fb,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function ez(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(pn(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let y2=null;function lD(n,e){if(!y2){const t=new Ai({color:"rgba(255,255,255,0.4)"}),r=new Fs({color:"#3399CC",width:1.25});y2=[new ar({image:new Xc({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return y2}function Fb(n){return n.getGeometry()}const tz="#333";class v0{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=os(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Ai({color:tz}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new v0({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof Ai?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=os(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Wr={ANIMATING:0,INTERACTING:1},vt={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},P1=[vt.FILL],kc=[vt.STROKE],oh=[vt.BEGIN_PATH],Vb=[vt.CLOSE_PATH];class Dp extends YO{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let a=s.length;for(let o=0,l=e.length;o<l;o+=t)i[0]=e[o],i[1]=e[o+1],vh(r,i)&&(s[a++]=i[0],s[a++]=i[1]);return a}appendFlatLineCoordinates(e,t,r,i,s,a){const o=this.coordinates;let l=o.length;const u=this.getBufferedMaxExtent();a&&(t+=i);let f=e[t],d=e[t+1];const g=this.tmpCoordinate_;let p=!0,v,y,E;for(v=t+i;v<r;v+=i)g[0]=e[v],g[1]=e[v+1],E=NS(u,g),E!==y?(p&&(o[l++]=f,o[l++]=d,p=!1),o[l++]=g[0],o[l++]=g[1]):E===zr.INTERSECTING?(o[l++]=g[0],o[l++]=g[1],p=!1):p=!0,f=g[0],d=g[1],y=E;return(s&&p||v===t+i)&&(o[l++]=f,o[l++]=d),l}drawCustomCoordinates_(e,t,r,i,s){for(let a=0,o=r.length;a<o;++a){const l=r[a],u=this.appendFlatLineCoordinates(e,t,l,i,!1,!1);s.push(u),t=l}return t}drawCustom(e,t,r,i,s){this.beginGeometry(e,t,s);const a=e.getType(),o=e.getStride(),l=this.coordinates.length;let u,f,d,g,p;switch(a){case"MultiPolygon":u=e.getOrientedFlatCoordinates(),g=[];const v=e.getEndss();p=0;for(let y=0,E=v.length;y<E;++y){const T=[];p=this.drawCustomCoordinates_(u,p,v[y],o,T),g.push(T)}this.instructions.push([vt.CUSTOM,l,g,e,r,US,s]),this.hitDetectionInstructions.push([vt.CUSTOM,l,g,e,i||r,US,s]);break;case"Polygon":case"MultiLineString":d=[],u=a=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),p=this.drawCustomCoordinates_(u,0,e.getEnds(),o,d),this.instructions.push([vt.CUSTOM,l,d,e,r,Dm,s]),this.hitDetectionInstructions.push([vt.CUSTOM,l,d,e,i||r,Dm,s]);break;case"LineString":case"Circle":u=e.getFlatCoordinates(),f=this.appendFlatLineCoordinates(u,0,u.length,o,!1,!1),this.instructions.push([vt.CUSTOM,l,f,e,r,bc,s]),this.hitDetectionInstructions.push([vt.CUSTOM,l,f,e,i||r,bc,s]);break;case"MultiPoint":u=e.getFlatCoordinates(),f=this.appendFlatPointCoordinates(u,o),f>l&&(this.instructions.push([vt.CUSTOM,l,f,e,r,bc,s]),this.hitDetectionInstructions.push([vt.CUSTOM,l,f,e,i||r,bc,s]));break;case"Point":u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),f=this.coordinates.length,this.instructions.push([vt.CUSTOM,l,f,e,r,void 0,s]),this.hitDetectionInstructions.push([vt.CUSTOM,l,f,e,i||r,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[vt.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[vt.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let i,s,a=-1;for(t=0;t<r;++t)i=e[t],s=i[0],s==vt.END_GEOMETRY?a=t:s==vt.BEGIN_GEOMETRY&&(i[2]=t,ZG(this.hitDetectionInstructions,a,t),a=-1)}fillStyleToState(e,t={}){if(e){const r=e.getColor();t.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,t.fillStyle=Eo(r||rs)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const r=e.getColor();t.strokeStyle=Eo(r||Vm);const i=e.getLineCap();t.lineCap=i!==void 0?i:Yd;const s=e.getLineDash();t.lineDash=s?s.slice():xl;const a=e.getLineDashOffset();t.lineDashOffset=a||vl;const o=e.getLineJoin();t.lineJoin=o!==void 0?o:Xd;const l=e.getWidth();t.lineWidth=l!==void 0?l:Gm;const u=e.getMiterLimit();t.miterLimit=u!==void 0?u:Fm,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(t,r)}createFill(e){const t=e.fillStyle,r=[vt.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[vt.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,a=e.lineDashOffset,o=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!hu(e.currentLineDash,s)||e.currentLineDashOffset!=a||e.currentLineJoin!=o||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=a,e.currentLineJoin=o,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[vt.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=hO(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Lm(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class nz extends Dp{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!vh(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=e.getStride(),a=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([vt.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([vt.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=[];for(let l=0,u=i.length;l<u;l+=e.getStride())(!this.maxExtent||vh(this.maxExtent,i.slice(l,l+2)))&&s.push(i[l],i[l+1]);const a=this.coordinates.length,o=this.appendFlatPointCoordinates(s,2);this.instructions.push([vt.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([vt.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class rz extends Dp{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){const s=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),o=[vt.MOVE_TO_LINE_TO,s,a];return this.instructions.push(o),this.hitDetectionInstructions.push(o),r}drawLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([vt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,xl,vl],oh);const o=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(o,0,o.length,l),this.hitDetectionInstructions.push(kc),this.endGeometry(t)}drawMultiLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([vt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,xl,vl],oh);const o=e.getEnds(),l=e.getFlatCoordinates(),u=e.getStride();let f=0;for(let d=0,g=o.length;d<g;++d)f=this.drawFlatCoordinates_(l,f,o[d],u);this.hitDetectionInstructions.push(kc),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(kc),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(kc),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(oh)}}class jb extends Dp{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){const s=this.state,a=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,l=r.length;this.instructions.push(oh),this.hitDetectionInstructions.push(oh);for(let u=0;u<l;++u){const f=r[u],d=this.coordinates.length,g=this.appendFlatLineCoordinates(e,t,f,i,!0,!o),p=[vt.MOVE_TO_LINE_TO,d,g];this.instructions.push(p),this.hitDetectionInstructions.push(p),o&&(this.instructions.push(Vb),this.hitDetectionInstructions.push(Vb)),t=f}return a&&(this.instructions.push(P1),this.hitDetectionInstructions.push(P1)),o&&(this.instructions.push(kc),this.hitDetectionInstructions.push(kc)),t}drawCircle(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([vt.SET_FILL_STYLE,rs]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([vt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,xl,vl]);const o=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,l,!1,!1);const f=[vt.CIRCLE,u];this.instructions.push(oh,f),this.hitDetectionInstructions.push(oh,f),i.fillStyle!==void 0&&(this.instructions.push(P1),this.hitDetectionInstructions.push(P1)),i.strokeStyle!==void 0&&(this.instructions.push(kc),this.hitDetectionInstructions.push(kc)),this.endGeometry(t)}drawPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([vt.SET_FILL_STYLE,rs]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([vt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,xl,vl]);const o=e.getEnds(),l=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(l,0,o,u),this.endGeometry(t)}drawMultiPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([vt.SET_FILL_STYLE,rs]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([vt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,xl,vl]);const o=e.getEndss(),l=e.getOrientedFlatCoordinates(),u=e.getStride();let f=0;for(let d=0,g=o.length;d<g;++d)f=this.drawFlatCoordinatess_(l,f,o[d],u);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=zu(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function iz(n,e,t,r,i){const s=[];let a=t,o=0,l=e.slice(t,2);for(;o<n&&a+i<r;){const[u,f]=l.slice(-2),d=e[a+i],g=e[a+i+1],p=Math.sqrt((d-u)*(d-u)+(g-f)*(g-f));if(o+=p,o>=n){const v=(n-o+p)/p,y=ks(u,d,v),E=ks(f,g,v);l.push(y,E),s.push(l),l=[y,E],o==n&&(a+=i),o=0}else if(o<n)l.push(e[a+i],e[a+i+1]),a+=i;else{const v=p-o,y=ks(u,d,v/p),E=ks(f,g,v/p);l.push(y,E),s.push(l),l=[y,E],o=0,a+=i}}return o>0&&s.push(l),s}function sz(n,e,t,r,i){let s=t,a=t,o=0,l=0,u=t,f,d,g,p,v,y,E,T,R,M;for(d=t;d<r;d+=i){const k=e[d],V=e[d+1];v!==void 0&&(R=k-v,M=V-y,p=Math.sqrt(R*R+M*M),E!==void 0&&(l+=g,f=Math.acos((E*R+T*M)/(g*p)),f>n&&(l>o&&(o=l,s=u,a=d),l=0,u=d-i)),g=p,E=R,T=M),v=k,y=V}return l+=p,l>o?[u,d]:[s,a]}const Xy={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class az extends Dp{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[rs]={fillStyle:rs},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const i=this.textFillState_,s=this.textStrokeState_,a=this.textState_;if(this.text_===""||!a||!i&&!s)return;const o=this.coordinates;let l=o.length;const u=e.getType();let f=null,d=e.getStride();if(a.placement==="line"&&(u=="LineString"||u=="MultiLineString"||u=="Polygon"||u=="MultiPolygon")){if(!ji(this.maxExtent,e.getExtent()))return;let g;if(f=e.getFlatCoordinates(),u=="LineString")g=[f.length];else if(u=="MultiLineString")g=e.getEnds();else if(u=="Polygon")g=e.getEnds().slice(0,1);else if(u=="MultiPolygon"){const E=e.getEndss();g=[];for(let T=0,R=E.length;T<R;++T)g.push(E[T][0])}this.beginGeometry(e,t,r);const p=a.repeat,v=p?void 0:a.textAlign;let y=0;for(let E=0,T=g.length;E<T;++E){let R;p?R=iz(p*this.resolution,f,y,g[E],d):R=[f.slice(y,g[E])];for(let M=0,k=R.length;M<k;++M){const V=R[M];let z=0,P=V.length;if(v==null){const b=sz(a.maxAngle,V,0,V.length,2);z=b[0],P=b[1]}for(let b=z;b<P;b+=d)o.push(V[b],V[b+1]);const C=o.length;y=g[E],this.drawChars_(l,C),l=C}}this.endGeometry(t)}else{let g=a.overflow?null:[];switch(u){case"Point":case"MultiPoint":f=e.getFlatCoordinates();break;case"LineString":f=e.getFlatMidpoint();break;case"Circle":f=e.getCenter();break;case"MultiLineString":f=e.getFlatMidpoints(),d=2;break;case"Polygon":f=e.getFlatInteriorPoint(),a.overflow||g.push(f[2]/this.resolution),d=3;break;case"MultiPolygon":const k=e.getFlatInteriorPoints();f=[];for(let V=0,z=k.length;V<z;V+=3)a.overflow||g.push(k[V+2]/this.resolution),f.push(k[V],k[V+1]);if(f.length===0)return;d=2;break}const p=this.appendFlatPointCoordinates(f,d);if(p===l)return;if(g&&(p-l)/2!==f.length/d){let k=l/2;g=g.filter((V,z)=>{const P=o[(k+z)*2]===f[z*d]&&o[(k+z)*2+1]===f[z*d+1];return P||--k,P})}this.saveTextStates_();const v=a.backgroundFill?this.createFill(this.fillStyleToState(a.backgroundFill)):null,y=a.backgroundStroke?this.createStroke(this.strokeStyleToState(a.backgroundStroke)):null;this.beginGeometry(e,t,r);let E=a.padding;if(E!=ah&&(a.scale[0]<0||a.scale[1]<0)){let k=a.padding[0],V=a.padding[1],z=a.padding[2],P=a.padding[3];a.scale[0]<0&&(V=-V,P=-P),a.scale[1]<0&&(k=-k,z=-z),E=[k,V,z,P]}const T=this.pixelRatio;this.instructions.push([vt.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,E==ah?ah:E.map(function(k){return k*T}),v,y,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]);const R=1/T,M=v?v.slice(0):null;M&&(M[1]=rs),this.hitDetectionInstructions.push([vt.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[R,R],NaN,this.declutterMode_,this.declutterImageWithText_,E,M,y,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?rs:this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||jm,justify:t.justify,textBaseline:t.textBaseline||Ky,scale:t.scale});const a=this.fillKey_;r&&(a in this.fillStates||(this.fillStates[a]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,a=this.textKey_,o=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=Xy[i.textBaseline],f=this.textOffsetY_*l,d=this.text_,g=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([vt.DRAW_CHARS,e,t,u,i.overflow,o,i.maxAngle,l,f,s,g*l,d,a,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([vt.DRAW_CHARS,e,t,u,i.overflow,o&&rs,i.maxAngle,l,f,s,g*l,d,a,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,i,s;if(!e)this.text_="";else{const a=e.getFill();a?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Eo(a.getColor()||rs)):(i=null,this.textFillState_=i);const o=e.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const y=o.getLineDash(),E=o.getLineDashOffset(),T=o.getWidth(),R=o.getMiterLimit();s.lineCap=o.getLineCap()||Yd,s.lineDash=y?y.slice():xl,s.lineDashOffset=E===void 0?vl:E,s.lineJoin=o.getLineJoin()||Xd,s.lineWidth=T===void 0?Gm:T,s.miterLimit=R===void 0?Fm:R,s.strokeStyle=Eo(o.getColor()||Vm)}r=this.textState_;const l=e.getFont()||XO;TU(l);const u=e.getScaleArray();r.overflow=e.getOverflow(),r.font=l,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||Ky,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||ah,r.scale=u===void 0?[1,1]:u;const f=e.getOffsetX(),d=e.getOffsetY(),g=e.getRotateWithView(),p=e.getKeepUpright(),v=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=f===void 0?0:f,this.textOffsetY_=d===void 0?0:d,this.textRotateWithView_=g===void 0?!1:g,this.textKeepUpright_=p===void 0?!0:p,this.textRotation_=v===void 0?0:v,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:nn(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+nn(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const oz={Circle:jb,Default:Dp,Image:nz,LineString:rz,Polygon:jb,Text:az};class lz{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const i in r){const s=r[i].finish();e[t][i]=s}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[t];if(s===void 0){const a=oz[t];s=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=s}return s}}function cz(n,e,t,r,i,s,a,o,l,u,f,d,g=!0){let p=n[e],v=n[e+1],y=0,E=0,T=0,R=0;function M(){y=p,E=v,e+=r,p=n[e],v=n[e+1],R+=T,T=Math.sqrt((p-y)*(p-y)+(v-E)*(v-E))}do M();while(e<t-r&&R+T<s);let k=T===0?0:(s-R)/T;const V=ks(y,p,k),z=ks(E,v,k),P=e-r,C=R,b=s+o*l(u,i,f);for(;e<t-r&&R+T<b;)M();k=T===0?0:(b-R)/T;const L=ks(y,p,k),F=ks(E,v,k);let U=!1;if(g)if(d){const ke=[V,z,L,F];MO(ke,0,4,2,d,ke,ke),U=ke[0]>ke[2]}else U=V>L;const j=Math.PI,Te=[],Me=P+r===e;e=P,T=0,R=C,p=n[e],v=n[e+1];let Ue;if(Me){M(),Ue=Math.atan2(v-E,p-y),U&&(Ue+=Ue>0?-j:j);const ke=(L+V)/2,le=(F+z)/2;return Te[0]=[ke,le,(b-s)/2,Ue,i],Te}i=i.replace(/\n/g," ");for(let ke=0,le=i.length;ke<le;){M();let Ae=Math.atan2(v-E,p-y);if(U&&(Ae+=Ae>0?-j:j),Ue!==void 0){let ee=Ae-Ue;if(ee+=ee>j?-2*j:ee<-j?2*j:0,Math.abs(ee)>a)return null}Ue=Ae;const Ie=ke;let Y=0;for(;ke<le;++ke){const ee=U?le-ke-1:ke,me=o*l(u,i[ee],f);if(e+r<t&&R+T<s+Y+me/2)break;Y+=me}if(ke===Ie)continue;const O=U?i.substring(le-Ie,le-ke):i.substring(Ie,ke);k=T===0?0:(s+Y/2-R)/T;const te=ks(y,p,k),ne=ks(E,v,k);Te.push([te,ne,Y/2,Ae,O]),s+=Y}return Te}class cD{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Wy(),{get:(e,t)=>{if(typeof Wy()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,r)=>(this.push_(t,r),!0)})}push_(...e){const t=this.instructions_,r=this.zIndex+this.offset_;t[r]||(t[r]=[]),t[r].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){const s=t[r];if(typeof s=="function"){s(e);continue}const a=t[++r];if(typeof e[s]=="function")e[s](...a);else{if(typeof a=="function"){e[s]=a(e);continue}e[s]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Gf=Gs(),cc=[],ol=[],ll=[],uc=[];function Gb(n){return n[3].declutterBox}const Bb=new RegExp("[-----]");function x2(n,e){return e==="start"?e=Bb.test(n)?"right":"left":e==="end"&&(e=Bb.test(n)?"left":"right"),Xy[e]}function uz(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function hz(n,e,t){return t%2===0&&(n+=e),n}class fz{constructor(e,t,r,i,s){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=za(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new cD:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){const s=e+t+r+i;if(this.labels_[s])return this.labels_[s];const a=i?this.strokeStates[i]:null,o=r?this.fillStates[r]:null,l=this.textStates[t],u=this.pixelRatio,f=[l.scale[0]*u,l.scale[1]*u],d=l.justify?Xy[l.justify]:x2(Array.isArray(e)?e[0]:e,l.textAlign||jm),g=i&&a.lineWidth?a.lineWidth:0,p=Array.isArray(e)?e:String(e).split(`
`).reduce(uz,[]),{width:v,height:y,widths:E,heights:T,lineWidths:R}=AU(l,p),M=v+g,k=[],V=(M+2)*f[0],z=(y+g)*f[1],P={width:V<0?Math.floor(V):Math.ceil(V),height:z<0?Math.floor(z):Math.ceil(z),contextInstructions:k};(f[0]!=1||f[1]!=1)&&k.push("scale",f),i&&(k.push("strokeStyle",a.strokeStyle),k.push("lineWidth",g),k.push("lineCap",a.lineCap),k.push("lineJoin",a.lineJoin),k.push("miterLimit",a.miterLimit),k.push("setLineDash",[a.lineDash]),k.push("lineDashOffset",a.lineDashOffset)),r&&k.push("fillStyle",o.fillStyle),k.push("textBaseline","middle"),k.push("textAlign","center");const C=.5-d;let b=d*M+C*g;const L=[],F=[];let U=0,j=0,Te=0,Me=0,Ue;for(let ke=0,le=p.length;ke<le;ke+=2){const Ae=p[ke];if(Ae===`
`){j+=U,U=0,b=d*M+C*g,++Me;continue}const Ie=p[ke+1]||l.font;Ie!==Ue&&(i&&L.push("font",Ie),r&&F.push("font",Ie),Ue=Ie),U=Math.max(U,T[Te]);const Y=[Ae,b+C*E[Te]+d*(E[Te]-R[Me]),.5*(g+U)+j];b+=E[Te],i&&L.push("strokeText",Y),r&&F.push("fillText",Y),++Te}return Array.prototype.push.apply(k,L),Array.prototype.push.apply(k,F),this.labels_[s]=P,P}replayTextBackground_(e,t,r,i,s,a,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,t),a&&(this.alignAndScaleFill_=a[2],e.fillStyle=a[1],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,s,a,o,l,u,f,d,g,p,v,y,E){o*=g[0],l*=g[1];let T=r-o,R=i-l;const M=s+u>e?e-u:s,k=a+f>t?t-f:a,V=v[3]+M*g[0]+v[1],z=v[0]+k*g[1]+v[2],P=T-v[3],C=R-v[0];(y||d!==0)&&(cc[0]=P,uc[0]=P,cc[1]=C,ol[1]=C,ol[0]=P+V,ll[0]=ol[0],ll[1]=C+z,uc[1]=ll[1]);let b;return d!==0?(b=No(za(),r,i,1,1,d,-r,-i),kr(b,cc),kr(b,ol),kr(b,ll),kr(b,uc),Kc(Math.min(cc[0],ol[0],ll[0],uc[0]),Math.min(cc[1],ol[1],ll[1],uc[1]),Math.max(cc[0],ol[0],ll[0],uc[0]),Math.max(cc[1],ol[1],ll[1],uc[1]),Gf)):Kc(Math.min(P,P+V),Math.min(C,C+z),Math.max(P,P+V),Math.max(C,C+z),Gf),p&&(T=Math.round(T),R=Math.round(R)),{drawImageX:T,drawImageY:R,drawImageW:M,drawImageH:k,originX:u,originY:f,declutterBox:{minX:Gf[0],minY:Gf[1],maxX:Gf[2],maxY:Gf[3],value:E},canvasTransform:b,scale:g}}replayImageOrLabel_(e,t,r,i,s,a,o){const l=!!(a||o),u=i.declutterBox,f=o?o[2]*i.scale[0]/2:0;return u.minX-f<=t[0]&&u.maxX+f>=0&&u.minY-f<=t[1]&&u.maxY+f>=0&&(l&&this.replayTextBackground_(e,cc,ol,ll,uc,a,o),RU(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=kr(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,r,i){const s=this.textStates[t],a=this.createLabel(e,t,i,r),o=this.strokeStates[r],l=this.pixelRatio,u=x2(Array.isArray(e)?e[0]:e,s.textAlign||jm),f=Xy[s.textBaseline||Ky],d=o&&o.lineWidth?o.lineWidth:0,g=a.width/l-2*s.scale[0],p=u*g+2*(.5-u)*d,v=f*a.height/l+2*(.5-f)*d;return{label:a,anchorX:p,anchorY:v}}execute_(e,t,r,i,s,a,o,l){const u=this.zIndexContext_;let f;this.pixelCoordinates_&&hu(r,this.renderedTransform_)?f=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),f=jc(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),VB(this.renderedTransform_,r));let d=0;const g=i.length;let p=0,v,y,E,T,R,M,k,V,z,P,C,b,L,F=0,U=0;const j=this.coordinateCache_,Te=this.viewRotation_,Me=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,Ue={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Te},ke=this.instructions!=i||this.overlaps?0:200;let le,Ae,Ie,Y;for(;d<g;){const O=i[d];switch(O[0]){case vt.BEGIN_GEOMETRY:le=O[1],Y=O[3],le.getGeometry()?o!==void 0&&!ji(o,Y.getExtent())?d=O[2]+1:++d:d=O[2],u&&(u.zIndex=O[4]);break;case vt.BEGIN_PATH:F>ke&&(this.fill_(e),F=0),U>ke&&(e.stroke(),U=0),!F&&!U&&(e.beginPath(),R=NaN,M=NaN),++d;break;case vt.CIRCLE:p=O[1];const ne=f[p],ee=f[p+1],me=f[p+2],Se=f[p+3],Ne=me-ne,se=Se-ee,re=Math.sqrt(Ne*Ne+se*se);e.moveTo(ne+re,ee),e.arc(ne,ee,re,0,2*Math.PI,!0),++d;break;case vt.CLOSE_PATH:e.closePath(),++d;break;case vt.CUSTOM:p=O[1],v=O[2];const D=O[3],Ye=O[4],he=O[5];Ue.geometry=D,Ue.feature=le,d in j||(j[d]=[]);const He=j[d];he?he(f,p,v,2,He):(He[0]=f[p],He[1]=f[p+1],He.length=2),u&&(u.zIndex=O[6]),Ye(He,Ue),++d;break;case vt.DRAW_IMAGE:p=O[1],v=O[2],z=O[3],y=O[4],E=O[5];let ue=O[6];const W=O[7],ae=O[8],lt=O[9],ot=O[10];let gt=O[11];const Ot=O[12];let Rn=O[13];T=O[14]||"declutter";const Yt=O[15];if(!z&&O.length>=20){P=O[19],C=O[20],b=O[21],L=O[22];const Wn=this.drawLabelWithPointPlacement_(P,C,b,L);z=Wn.label,O[3]=z;const Hi=O[23];y=(Wn.anchorX-Hi)*this.pixelRatio,O[4]=y;const Ir=O[24];E=(Wn.anchorY-Ir)*this.pixelRatio,O[5]=E,ue=z.height,O[6]=ue,Rn=z.width,O[13]=Rn}let Ln;O.length>25&&(Ln=O[25]);let gr,Wi,Mi;O.length>17?(gr=O[16],Wi=O[17],Mi=O[18]):(gr=ah,Wi=null,Mi=null),ot&&Me?gt+=Te:!ot&&!Me&&(gt-=Te);let Fr=0;for(;p<v;p+=2){if(Ln&&Ln[Fr++]<Rn/this.pixelRatio)continue;const Wn=this.calculateImageOrLabelDimensions_(z.width,z.height,f[p],f[p+1],Rn,ue,y,E,ae,lt,gt,Ot,s,gr,!!Wi||!!Mi,le),Hi=[e,t,z,Wn,W,Wi,Mi];if(l){let Ir,Hn,Ar;if(Yt){const Wt=v-p;if(!Yt[Wt]){Yt[Wt]={args:Hi,declutterMode:T};continue}const Jn=Yt[Wt];Ir=Jn.args,Hn=Jn.declutterMode,delete Yt[Wt],Ar=Gb(Ir)}let Rr,mr;if(Ir&&(Hn!=="declutter"||!l.collides(Ar))&&(Rr=!0),(T!=="declutter"||!l.collides(Wn.declutterBox))&&(mr=!0),Hn==="declutter"&&T==="declutter"){const Wt=Rr&&mr;Rr=Wt,mr=Wt}Rr&&(Hn!=="none"&&l.insert(Ar),this.replayImageOrLabel_.apply(this,Ir)),mr&&(T!=="none"&&l.insert(Wn.declutterBox),this.replayImageOrLabel_.apply(this,Hi))}else this.replayImageOrLabel_.apply(this,Hi)}++d;break;case vt.DRAW_CHARS:const Wo=O[1],ms=O[2],ki=O[3],Ho=O[4];L=O[5];const ps=O[6],Ks=O[7],xa=O[8];b=O[9];const Zr=O[10];P=O[11],Array.isArray(P)&&(P=P.reduce(hz,"")),C=O[12];const va=[O[13],O[13]];T=O[14]||"declutter";const _s=O[15],ys=this.textStates[C],Vr=ys.font,Qr=[ys.scale[0]*Ks,ys.scale[1]*Ks];let un;Vr in this.widths_?un=this.widths_[Vr]:(un={},this.widths_[Vr]=un);const xs=VI(f,Wo,ms,2),vs=Math.abs(Qr[0])*Rb(Vr,P,un);if(Ho||vs<=xs){const Wn=this.textStates[C].textAlign,Hi=(xs-vs)*x2(P,Wn),Ir=cz(f,Wo,ms,2,P,Hi,ps,Math.abs(Qr[0]),Rb,Vr,un,Me?0:this.viewRotation_,_s);e:if(Ir){const Hn=[];let Ar,Rr,mr,Wt,Jn;if(b)for(Ar=0,Rr=Ir.length;Ar<Rr;++Ar){Jn=Ir[Ar],mr=Jn[4],Wt=this.createLabel(mr,C,"",b),y=Jn[2]+(Qr[0]<0?-Zr:Zr),E=ki*Wt.height+(.5-ki)*2*Zr*Qr[1]/Qr[0]-xa;const lr=this.calculateImageOrLabelDimensions_(Wt.width,Wt.height,Jn[0],Jn[1],Wt.width,Wt.height,y,E,0,0,Jn[3],va,!1,ah,!1,le);if(l&&T==="declutter"&&l.collides(lr.declutterBox))break e;Hn.push([e,t,Wt,lr,1,null,null])}if(L)for(Ar=0,Rr=Ir.length;Ar<Rr;++Ar){Jn=Ir[Ar],mr=Jn[4],Wt=this.createLabel(mr,C,L,""),y=Jn[2],E=ki*Wt.height-xa;const lr=this.calculateImageOrLabelDimensions_(Wt.width,Wt.height,Jn[0],Jn[1],Wt.width,Wt.height,y,E,0,0,Jn[3],va,!1,ah,!1,le);if(l&&T==="declutter"&&l.collides(lr.declutterBox))break e;Hn.push([e,t,Wt,lr,1,null,null])}l&&T!=="none"&&l.load(Hn.map(Gb));for(let lr=0,Ki=Hn.length;lr<Ki;++lr)this.replayImageOrLabel_.apply(this,Hn[lr])}}++d;break;case vt.END_GEOMETRY:if(a!==void 0){le=O[1];const Wn=a(le,Y,T);if(Wn)return Wn}++d;break;case vt.FILL:ke?F++:this.fill_(e),++d;break;case vt.MOVE_TO_LINE_TO:for(p=O[1],v=O[2],Ae=f[p],Ie=f[p+1],e.moveTo(Ae,Ie),R=Ae+.5|0,M=Ie+.5|0,p+=2;p<v;p+=2)Ae=f[p],Ie=f[p+1],k=Ae+.5|0,V=Ie+.5|0,(p==v-2||k!==R||V!==M)&&(e.lineTo(Ae,Ie),R=k,M=V);++d;break;case vt.SET_FILL_STYLE:this.alignAndScaleFill_=O[2],F&&(this.fill_(e),F=0,U&&(e.stroke(),U=0)),e.fillStyle=O[1],++d;break;case vt.SET_STROKE_STYLE:U&&(e.stroke(),U=0),this.setStrokeStyle_(e,O),++d;break;case vt.STROKE:ke?U++:e.stroke(),++d;break;default:++d;break}}F&&this.fill_(e),U&&e.stroke()}execute(e,t,r,i,s,a){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,s,void 0,void 0,a)}executeHitDetection(e,t,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,s)}}const Qu=["Polygon","Circle","LineString","Image","Text","Default"],uD=["Image","Text"],dz=Qu.filter(n=>!uD.includes(n));class gz{constructor(e,t,r,i,s,a,o){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=za(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,o)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const a in s){const o=s[a];i[a]=new fz(this.resolution_,this.pixelRatio_,this.overlaps_,o,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,s,a){i=Math.round(i);const o=i*2+1,l=No(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Lr(o,o));const f=this.hitDetectionContext_;f.canvas.width!==o||f.canvas.height!==o?(f.canvas.width=o,f.canvas.height=o):u||f.clearRect(0,0,o,o);let d;this.renderBuffer_!==void 0&&(d=Gs(),tm(d,e),Lm(d,t*(this.renderBuffer_+i),d));const g=mz(i);let p;function v(V,z,P){const C=f.getImageData(0,0,o,o).data;for(let b=0,L=g.length;b<L;b++)if(C[g[b]]>0){if(!a||P==="none"||p!=="Image"&&p!=="Text"||a.includes(V)){const F=(g[b]-3)/4,U=i-F%o,j=i-(F/o|0),Te=s(V,z,U*U+j*j);if(Te)return Te}f.clearRect(0,0,o,o);break}}const y=Object.keys(this.executorsByZIndex_).map(Number);y.sort(pl);let E,T,R,M,k;for(E=y.length-1;E>=0;--E){const V=y[E].toString();for(R=this.executorsByZIndex_[V],T=Qu.length-1;T>=0;--T)if(p=Qu[T],M=R[p],M!==void 0&&(k=M.executeHitDetection(f,l,r,v,d),k))return k}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],i=t[1],s=t[2],a=t[3],o=[r,i,r,a,s,a,s,i];return jc(o,0,8,2,e,o),o}isEmpty(){return xh(this.executorsByZIndex_)}execute(e,t,r,i,s,a,o){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(o?qG:pl),a=a||Qu;const u=Qu.length;for(let f=0,d=l.length;f<d;++f){const g=l[f].toString(),p=this.executorsByZIndex_[g];for(let v=0,y=a.length;v<y;++v){const E=a[v],T=p[E];if(T!==void 0){const R=o===null?void 0:T.getZIndexContext(),M=R?R.getContext():e,k=this.maxExtent_&&E!=="Image"&&E!=="Text";if(k&&(M.save(),this.clip(M,r)),!R||E==="Text"||E==="Image"?T.execute(M,t,r,i,s,o):R.pushFunction(V=>T.execute(V,t,r,i,s,o)),k&&M.restore(),R){R.offset();const V=l[f]*u+Qu.indexOf(E);this.deferredZIndexContexts_[V]||(this.deferredZIndexContexts_[V]=[]),this.deferredZIndexContexts_[V].push(R)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(pl);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[r]].length=0}}const v2={};function mz(n){if(v2[n]!==void 0)return v2[n];const e=n*2+1,t=n*n,r=new Array(t+1);for(let s=0;s<=n;++s)for(let a=0;a<=n;++a){const o=s*s+a*a;if(o>t)break;let l=r[o];l||(l=[],r[o]=l),l.push(((n+s)*e+(n+a))*4+3),s>0&&l.push(((n-s)*e+(n+a))*4+3),a>0&&(l.push(((n+s)*e+(n-a))*4+3),s>0&&l.push(((n-s)*e+(n-a))*4+3))}const i=[];for(let s=0,a=r.length;s<a;++s)r[s]&&i.push(...r[s]);return v2[n]=i,i}function Ub(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}let Fp=class hD extends Rv{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let o=e.src;pn(!(o!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&a&&(o=a.src||nn(a)),pn(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),pn(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=ht.IDLE:a!==void 0&&("complete"in a?a.complete?l=a.src?ht.LOADED:ht.IDLE:l=ht.LOADING:l=ht.LOADED),this.color_=e.color!==void 0?Sh(e.color):null,this.iconImage_=Hy(a,o,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let u,f;if(e.size)[u,f]=e.size;else{const d=this.getImage(1);if(d.width&&d.height)u=d.width,f=d.height;else if(d instanceof HTMLImageElement){this.initialOptions_=e;const g=()=>{if(this.unlistenImageChange(g),!this.initialOptions_)return;const p=this.iconImage_.getSize();this.setScale(Ub(p[0],p[1],e.width,e.height))};this.listenImageChange(g);return}}u!==void 0&&this.setScale(Ub(u,f,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new hD({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=Hy(null,e,this.crossOrigin_,ht.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ht.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ht.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Mt.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Mt.CHANGE,e)}ready(){return this.iconImage_.ready()}};const yo=.5;function pz(n,e,t,r,i,s,a,o,l){const u=i,f=n[0]*yo,d=n[1]*yo,g=Lr(f,d);g.imageSmoothingEnabled=!1;const p=g.canvas,v=new PU(g,yo,i,null,a,o,null),y=t.length,E=Math.floor((256*256*256-1)/y),T={};for(let M=1;M<=y;++M){const k=t[M-1],V=k.getStyleFunction()||r;if(!V)continue;let z=V(k,s);if(!z)continue;Array.isArray(z)||(z=[z]);const C=(M*E).toString(16).padStart(7,"#00000");for(let b=0,L=z.length;b<L;++b){const F=z[b],U=F.getGeometryFunction()(k);if(!U||!ji(u,U.getExtent()))continue;const j=F.clone(),Te=j.getFill();Te&&Te.setColor(C);const Me=j.getStroke();Me&&(Me.setColor(C),Me.setLineDash(null)),j.setText(void 0);const Ue=F.getImage();if(Ue){const Ie=Ue.getImageSize();if(!Ie)continue;const Y=Lr(Ie[0],Ie[1],void 0,{alpha:!1}),O=Y.canvas;Y.fillStyle=C,Y.fillRect(0,0,O.width,O.height),j.setImage(new Fp({img:O,anchor:Ue.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Ue.getOrigin(),opacity:1,size:Ue.getSize(),scale:Ue.getScale(),rotation:Ue.getRotation(),rotateWithView:Ue.getRotateWithView()}))}const ke=j.getZIndex()||0;let le=T[ke];le||(le={},T[ke]=le,le.Polygon=[],le.Circle=[],le.LineString=[],le.Point=[]);const Ae=U.getType();if(Ae==="GeometryCollection"){const Ie=U.getGeometriesArrayRecursive();for(let Y=0,O=Ie.length;Y<O;++Y){const te=Ie[Y];le[te.getType().replace("Multi","")].push(te,j)}}else le[Ae.replace("Multi","")].push(U,j)}}const R=Object.keys(T).map(Number).sort(pl);for(let M=0,k=R.length;M<k;++M){const V=T[R[M]];for(const z in V){const P=V[z];for(let C=0,b=P.length;C<b;C+=2){v.setStyle(P[C+1]);for(let L=0,F=e.length;L<F;++L)v.setTransform(e[L]),v.drawGeometry(P[C])}}}return g.getImageData(0,0,p.width,p.height)}function _z(n,e,t){const r=[];if(t){const i=Math.floor(Math.round(n[0])*yo),s=Math.floor(Math.round(n[1])*yo),a=(Fn(i,0,t.width-1)+Fn(s,0,t.height-1)*t.width)*4,o=t.data[a],l=t.data[a+1],f=t.data[a+2]+256*(l+256*o),d=Math.floor((256*256*256-1)/e.length);f&&f%d===0&&r.push(e[f/d-1])}return r}class fD extends Go{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}}const yz=5;class xz extends Pp{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=yz}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return At()}getData(e){return null}prepareFrame(e){return At()}renderFrame(e,t){return At()}forEachFeatureAtCoordinate(e,t,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===ht.LOADED||t.getState()===ht.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=ht.LOADED&&t!=ht.ERROR&&e.addEventListener(Mt.CHANGE,this.boundHandleImageChange_),t==ht.IDLE&&(e.load(),t=e.getState()),t==ht.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const zb=[];let rd=null;function vz(){rd=Lr(1,1,void 0,{willReadFrequently:!0})}class XI extends xz{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=za(),this.pixelTransform=za(),this.inversePixelTransform=za(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){rd||vz(),rd.clearRect(0,0,1,1);let i;try{rd.drawImage(e,t,r,1,1,0,0,1,1),i=rd.getImageData(0,0,1,1).data}catch{return rd=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const i=this.getLayer().getClassName();let s,a;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&hu(Sh(e.style.backgroundColor),Sh(r)))){const o=e.firstElementChild;Mc(o)&&(a=o.getContext("2d"))}if(a&&UB(a.canvas.style.transform,t)?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=Ds?UO():document.createElement("div"),s.className=i;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",a=Lr();const l=a.canvas;s.appendChild(l),o=l.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=a}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const i=Wh(r),s=yv(r),a=_v(r),o=pv(r);kr(t.coordinateToPixelTransform,i),kr(t.coordinateToPixelTransform,s),kr(t.coordinateToPixelTransform,a),kr(t.coordinateToPixelTransform,o);const l=this.inversePixelTransform;kr(l,i),kr(l,s),kr(l,a),kr(l,o),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,a=e.pixelRatio,o=Math.round(Bt(r)/i*a),l=Math.round(vr(r)/i*a);No(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,s,-o/2,-l/2),bO(this.inversePixelTransform,this.pixelTransform);const u=BB(this.pixelTransform);if(this.useContainer(t,u,this.getBackground(e)),!this.containerReused){const f=this.context.canvas;f.width!=o||f.height!=l?(f.width=o,f.height=l):this.context.clearRect(0,0,o,l),u!==f.style.transform&&(f.style.transform=u)}}dispatchRenderEvent_(e,t,r){const i=this.getLayer();if(i.hasListener(e)){const s=new fD(e,this.inversePixelTransform,r,t);i.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(ha.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(ha.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new cD),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(ha.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(ha.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,s,a,o){const l=s/2,u=a/2,f=i/t,d=-f,g=-e[0]+o,p=-e[1];return No(this.tempTransform,l,u,f,d,-r,g,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class Ez extends XI{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Gs(),this.wrappedRenderedExtent_=Gs(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const i=t.extent,s=t.viewState,a=s.center,o=s.resolution,l=s.projection,u=s.rotation,f=l.getExtent(),d=this.getLayer().getSource(),g=this.getLayer().getDeclutter(),p=t.pixelRatio,v=t.viewHints,y=!(v[Wr.ANIMATING]||v[Wr.INTERACTING]),E=this.context,T=Math.round(Bt(i)/o*p),R=Math.round(vr(i)/o*p),M=d.getWrapX()&&l.canWrapX(),k=M?Bt(f):null,V=M?Math.ceil((i[2]-f[2])/k)+1:1;let z=M?Math.floor((i[0]-f[0])/k):0;do{let P=this.getRenderTransform(a,o,0,p,T,R,z*k);t.declutter&&(P=P.slice(0)),e.execute(E,[E.canvas.width,E.canvas.height],P,u,y,r===void 0?Qu:r?uD:dz,r?g&&t.declutter[g]:void 0)}while(++z<V)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Lr(this.context.canvas.width,this.context.canvas.height,zb))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Iv(this.context),zb.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,t);const s=this.context,a=this.replayGroup_;let o=a&&!a.isEmpty();if(!o&&!(this.getLayer().hasListener(ha.PRERENDER)||this.getLayer().hasListener(ha.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,o&&r.extent&&this.clipping){const l=vo(r.extent);o=ji(l,e.extent),this.clipped_=o&&!Cc(l,e.extent),this.clipped_&&this.clipUnrotated(s,e,l)}return o&&this.renderWorlds(a,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,a=this.renderedRotation_,o=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),f=[],d=r[0]*yo,g=r[1]*yo;f.push(this.getRenderTransform(i,s,a,yo,d,g,0).slice());const p=u.getSource(),v=o.getExtent();if(p.getWrapX()&&o.canWrapX()&&!Cc(v,l)){let y=l[0];const E=Bt(v);let T=0,R;for(;y<v[0];)--T,R=E*T,f.push(this.getRenderTransform(i,s,a,yo,d,g,R).slice()),y+=E;for(T=0,y=l[2];y>v[2];)++T,R=E*T,f.push(this.getRenderTransform(i,s,a,yo,d,g,R).slice()),y-=E}this.hitDetectionImageData_=pz(r,f,this.renderedFeatures_,u.getStyleFunction(),l,s,a,Cb(s,this.renderedPixelRatio_))}t(_z(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,s){if(!this.replayGroup_)return;const a=t.viewState.resolution,o=t.viewState.rotation,l=this.getLayer(),u={},f=function(g,p,v){const y=nn(g),E=u[y];if(E){if(E!==!0&&v<E.distanceSq){if(v===0)return u[y]=!0,s.splice(s.lastIndexOf(E),1),i(g,l,p);E.geometry=p,E.distanceSq=v}}else{if(v===0)return u[y]=!0,i(g,l,p);s.push(u[y]={feature:g,layer:l,geometry:p,distanceSq:v,callback:i})}},d=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,a,o,r,f,d?t.declutter?.[d]?.all().map(g=>g.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const i=e.viewHints[Wr.ANIMATING],s=e.viewHints[Wr.INTERACTING],a=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!a&&i||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,u=e.viewState,f=u.projection,d=u.resolution,g=e.pixelRatio,p=t.getRevision(),v=t.getRenderBuffer();let y=t.getRenderOrder();y===void 0&&(y=MU);const E=u.center.slice(),T=Lm(l,v*d),R=T.slice(),M=[T.slice()],k=f.getExtent();if(r.getWrapX()&&f.canWrapX()&&!Cc(k,e.extent)){const Te=Bt(k),Me=Math.max(Bt(T)/2,Te);T[0]=k[0]-Me,T[2]=k[2]+Me,vO(E,f);const Ue=_O(M[0],f);Ue[0]<k[0]&&Ue[2]<k[2]?M.push([Ue[0]+Te,Ue[1],Ue[2]+Te,Ue[3]]):Ue[0]>k[0]&&Ue[2]>k[2]&&M.push([Ue[0]-Te,Ue[1],Ue[2]-Te,Ue[3]])}if(this.ready&&this.renderedResolution_==d&&this.renderedRevision_==p&&this.renderedRenderOrder_==y&&this.renderedFrameDeclutter_===!!e.declutter&&Cc(this.wrappedRenderedExtent_,T))return hu(this.renderedExtent_,R)||(this.hitDetectionImageData_=null,this.renderedExtent_=R),this.renderedCenter_=E,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const V=new lz(JO(d,g),T,d,g);let z;for(let Te=0,Me=M.length;Te<Me;++Te)r.loadFeatures(M[Te],d,f);const P=Cb(d,g);let C=!0;const b=(Te,Me)=>{let Ue;const ke=Te.getStyleFunction()||t.getStyleFunction();if(ke&&(Ue=ke(Te,d)),Ue){const le=this.renderFeature(Te,P,Ue,V,z,this.getLayer().getDeclutter(),Me);C=C&&!le}},L=PO(T),F=r.getFeaturesInExtent(L);y&&F.sort(y);for(let Te=0,Me=F.length;Te<Me;++Te)b(F[Te],Te);this.renderedFeatures_=F,this.ready=C;const U=V.finish(),j=new gz(T,d,g,r.getOverlaps(),U,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=d,this.renderedRevision_=p,this.renderedRenderOrder_=y,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=R,this.wrappedRenderedExtent_=T,this.renderedCenter_=E,this.renderedProjection_=f,this.renderedPixelRatio_=g,this.replayGroup_=j,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,s,a,o){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let u=0,f=r.length;u<f;++u)l=Pb(i,e,r[u],t,this.boundHandleStyleImageChange_,s,a,o)||l;else l=Pb(i,e,r,t,this.boundHandleStyleImageChange_,s,a,o);return l}}let Yh=0;const Vi=1<<Yh++,Kt=1<<Yh++,is=1<<Yh++,Oa=1<<Yh++,Th=1<<Yh++,jg=1<<Yh++,b1=Math.pow(2,Yh)-1,qI={[Vi]:"boolean",[Kt]:"number",[is]:"string",[Oa]:"color",[Th]:"number[]",[jg]:"size"},wz=Object.keys(qI).map(Number).sort(pl);function Sz(n){return n in qI}function Gg(n){const e=[];for(const t of wz)Bg(n,t)&&e.push(qI[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Bg(n,e){return(n&e)===e}function hc(n,e){return n===e}class Mr{constructor(e,t){if(!Sz(e))throw new Error(`literal expressions must have a specific type, got ${Gg(e)}`);this.type=e,this.value=t}}class Tz{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function dD(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function hi(n,e,t){switch(typeof n){case"boolean":{if(hc(e,is))return new Mr(is,n?"true":"false");if(!Bg(e,Vi))throw new Error(`got a boolean, but expected ${Gg(e)}`);return new Mr(Vi,n)}case"number":{if(hc(e,jg))return new Mr(jg,os(n));if(hc(e,Vi))return new Mr(Vi,!!n);if(hc(e,is))return new Mr(is,n.toString());if(!Bg(e,Kt))throw new Error(`got a number, but expected ${Gg(e)}`);return new Mr(Kt,n)}case"string":{if(hc(e,Oa))return new Mr(Oa,UI(n));if(hc(e,Vi))return new Mr(Vi,!!n);if(!Bg(e,is))throw new Error(`got a string, but expected ${Gg(e)}`);return new Mr(is,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return Oz(n,e,t);for(const r of n)if(typeof r!="number")throw new Error("expected an array of numbers");if(hc(e,jg)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new Mr(jg,n)}if(hc(e,Oa)){if(n.length===3)return new Mr(Oa,[...n,1]);if(n.length===4)return new Mr(Oa,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!Bg(e,Th))throw new Error(`got an array of numbers, but expected ${Gg(e)}`);return new Mr(Th,n)}const be={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},Iz={[be.Get]:Pt(Dt(1,1/0),$b),[be.Var]:Pt(Dt(1,1),Az),[be.Has]:Pt(Dt(1,1/0),$b),[be.Id]:Pt(Rz,Bf),[be.Concat]:Pt(Dt(2,1/0),an(is)),[be.GeometryType]:Pt(Cz,Bf),[be.LineMetric]:Pt(Bf),[be.Resolution]:Pt(E2,Bf),[be.Zoom]:Pt(E2,Bf),[be.Time]:Pt(E2,Bf),[be.Any]:Pt(Dt(2,1/0),an(Vi)),[be.All]:Pt(Dt(2,1/0),an(Vi)),[be.Not]:Pt(Dt(1,1),an(Vi)),[be.Equal]:Pt(Dt(2,2),an(b1)),[be.NotEqual]:Pt(Dt(2,2),an(b1)),[be.GreaterThan]:Pt(Dt(2,2),an(Kt)),[be.GreaterThanOrEqualTo]:Pt(Dt(2,2),an(Kt)),[be.LessThan]:Pt(Dt(2,2),an(Kt)),[be.LessThanOrEqualTo]:Pt(Dt(2,2),an(Kt)),[be.Multiply]:Pt(Dt(2,1/0),Wb),[be.Coalesce]:Pt(Dt(2,1/0),Wb),[be.Divide]:Pt(Dt(2,2),an(Kt)),[be.Add]:Pt(Dt(2,1/0),an(Kt)),[be.Subtract]:Pt(Dt(2,2),an(Kt)),[be.Clamp]:Pt(Dt(3,3),an(Kt)),[be.Mod]:Pt(Dt(2,2),an(Kt)),[be.Pow]:Pt(Dt(2,2),an(Kt)),[be.Abs]:Pt(Dt(1,1),an(Kt)),[be.Floor]:Pt(Dt(1,1),an(Kt)),[be.Ceil]:Pt(Dt(1,1),an(Kt)),[be.Round]:Pt(Dt(1,1),an(Kt)),[be.Sin]:Pt(Dt(1,1),an(Kt)),[be.Cos]:Pt(Dt(1,1),an(Kt)),[be.Atan]:Pt(Dt(1,2),an(Kt)),[be.Sqrt]:Pt(Dt(1,1),an(Kt)),[be.Match]:Pt(Dt(4,1/0),Hb,bz),[be.Between]:Pt(Dt(3,3),an(Kt)),[be.Interpolate]:Pt(Dt(6,1/0),Hb,Mz),[be.Case]:Pt(Dt(3,1/0),Pz,kz),[be.In]:Pt(Dt(2,2),Nz),[be.Number]:Pt(Dt(1,1/0),an(b1)),[be.String]:Pt(Dt(1,1/0),an(b1)),[be.Array]:Pt(Dt(1,1/0),an(Kt)),[be.Color]:Pt(Dt(1,4),an(Kt)),[be.Band]:Pt(Dt(1,3),an(Kt)),[be.Palette]:Pt(Dt(2,2),Lz),[be.ToString]:Pt(Dt(1,1),an(Vi|Kt|is|Oa))};function $b(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=n[s+1];switch(typeof a){case"number":{i[s]=new Mr(Kt,a);break}case"string":{i[s]=new Mr(is,a);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}s===0&&t.properties.add(String(a))}return i}function Az(n,e,t){const r=n[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new Mr(is,r)]}function Rz(n,e,t){t.featureId=!0}function Cz(n,e,t){t.geometryType=!0}function E2(n,e,t){t.mapState=!0}function Bf(n,e,t){const r=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function Dt(n,e){return function(t,r,i){const s=t[0],a=t.length-1;if(n===e){if(a!==n){const o=n===1?"":"s";throw new Error(`expected ${n} argument${o} for ${s}, got ${a}`)}}else if(a<n||a>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${o} arguments for ${s}, got ${a}`)}}}function Wb(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=hi(n[s+1],e,t);i[s]=a}return i}function an(n){return function(e,t,r){const i=e.length-1,s=new Array(i);for(let a=0;a<i;++a){const o=hi(e[a+1],n,r);s[a]=o}return s}}function Pz(n,e,t){const r=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function Hb(n,e,t){const r=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function bz(n,e,t){const r=n.length-1,i=is|Kt|Vi,s=hi(n[1],i,t),a=hi(n[n.length-1],e,t),o=new Array(r-2);for(let l=0;l<r-2;l+=2){try{const u=hi(n[l+2],s.type,t);o[l]=u}catch(u){throw new Error(`failed to parse argument ${l+1} of match expression: ${u.message}`)}try{const u=hi(n[l+3],a.type,t);o[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+2} of match expression: ${u.message}`)}}return[s,...o,a]}function Mz(n,e,t){const r=n[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const l=r[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);i=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const s=new Mr(Kt,i);let a;try{a=hi(n[2],Kt,t)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const o=new Array(n.length-3);for(let l=0;l<o.length;l+=2){try{const u=hi(n[l+3],Kt,t);o[l]=u}catch(u){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${u.message}`)}try{const u=hi(n[l+4],e,t);o[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${u.message}`)}}return[s,a,...o]}function kz(n,e,t){const r=hi(n[n.length-1],e,t),i=new Array(n.length-1);for(let s=0;s<i.length-1;s+=2){try{const a=hi(n[s+1],Vi,t);i[s]=a}catch(a){throw new Error(`failed to parse argument ${s} of case expression: ${a.message}`)}try{const a=hi(n[s+2],r.type,t);i[s+1]=a}catch(a){throw new Error(`failed to parse argument ${s+1} of case expression: ${a.message}`)}}return i[i.length-1]=r,i}function Nz(n,e,t){let r=n[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=is}else i=Kt;const s=new Array(r.length);for(let o=0;o<s.length;o++)try{const l=hi(r[o],i,t);s[o]=l}catch(l){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${l.message}`)}return[hi(n[1],i,t),...s]}function Lz(n,e,t){let r;try{r=hi(n[1],Kt,t)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let a=0;a<s.length;a++){let o;try{o=hi(i[a],Oa,t)}catch(l){throw new Error(`failed to parse color at index ${a} in palette expression: ${l.message}`)}if(!(o instanceof Mr))throw new Error(`the palette color at index ${a} must be a literal value`);s[a]=o}return[r,...s]}function Pt(...n){return function(e,t,r){const i=e[0];let s;for(let a=0;a<n.length;a++){const o=n[a](e,t,r);if(a==n.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");s=o}}return new Tz(t,i,...s)}}function Oz(n,e,t){const r=n[0],i=Iz[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(n,e,t)}function gD(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return gD(n.getGeometries()[0]);default:return""}}function mD(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Ol(n,e,t){const r=hi(n,e,t);return Ya(r)}function Ya(n,e){if(n instanceof Mr){if(n.type===Oa&&typeof n.value=="string"){const r=UI(n.value);return function(){return r}}return function(){return n.value}}const t=n.operator;switch(t){case be.Number:case be.String:case be.Coalesce:return Dz(n);case be.Get:case be.Var:case be.Has:return Fz(n);case be.Id:return r=>r.featureId;case be.GeometryType:return r=>r.geometryType;case be.Concat:{const r=n.args.map(i=>Ya(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case be.Resolution:return r=>r.resolution;case be.Any:case be.All:case be.Between:case be.In:case be.Not:return jz(n);case be.Equal:case be.NotEqual:case be.LessThan:case be.LessThanOrEqualTo:case be.GreaterThan:case be.GreaterThanOrEqualTo:return Vz(n);case be.Multiply:case be.Divide:case be.Add:case be.Subtract:case be.Clamp:case be.Mod:case be.Pow:case be.Abs:case be.Floor:case be.Ceil:case be.Round:case be.Sin:case be.Cos:case be.Atan:case be.Sqrt:return Gz(n);case be.Case:return Bz(n);case be.Match:return Uz(n);case be.Interpolate:return zz(n);case be.ToString:return $z(n);default:throw new Error(`Unsupported operator ${t}`)}}function Dz(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Ya(n.args[s]);switch(t){case be.Coalesce:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case be.Number:case be.String:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o===t)return o}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function Fz(n,e){const r=n.args[0].value;switch(n.operator){case be.Get:return i=>{const s=n.args;let a=i.properties[r];for(let o=1,l=s.length;o<l;++o){const f=s[o].value;a=a[f]}return a};case be.Var:return i=>i.variables[r];case be.Has:return i=>{const s=n.args;if(!(r in i.properties))return!1;let a=i.properties[r];for(let o=1,l=s.length;o<l;++o){const f=s[o].value;if(!a||!Object.hasOwn(a,f))return!1;a=a[f]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function Vz(n,e){const t=n.operator,r=Ya(n.args[0]),i=Ya(n.args[1]);switch(t){case be.Equal:return s=>r(s)===i(s);case be.NotEqual:return s=>r(s)!==i(s);case be.LessThan:return s=>r(s)<i(s);case be.LessThanOrEqualTo:return s=>r(s)<=i(s);case be.GreaterThan:return s=>r(s)>i(s);case be.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function jz(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Ya(n.args[s]);switch(t){case be.Any:return s=>{for(let a=0;a<r;++a)if(i[a](s))return!0;return!1};case be.All:return s=>{for(let a=0;a<r;++a)if(!i[a](s))return!1;return!0};case be.Between:return s=>{const a=i[0](s),o=i[1](s),l=i[2](s);return a>=o&&a<=l};case be.In:return s=>{const a=i[0](s);for(let o=1;o<r;++o)if(a===i[o](s))return!0;return!1};case be.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function Gz(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Ya(n.args[s]);switch(t){case be.Multiply:return s=>{let a=1;for(let o=0;o<r;++o)a*=i[o](s);return a};case be.Divide:return s=>i[0](s)/i[1](s);case be.Add:return s=>{let a=0;for(let o=0;o<r;++o)a+=i[o](s);return a};case be.Subtract:return s=>i[0](s)-i[1](s);case be.Clamp:return s=>{const a=i[0](s),o=i[1](s);if(a<o)return o;const l=i[2](s);return a>l?l:a};case be.Mod:return s=>i[0](s)%i[1](s);case be.Pow:return s=>Math.pow(i[0](s),i[1](s));case be.Abs:return s=>Math.abs(i[0](s));case be.Floor:return s=>Math.floor(i[0](s));case be.Ceil:return s=>Math.ceil(i[0](s));case be.Round:return s=>Math.round(i[0](s));case be.Sin:return s=>Math.sin(i[0](s));case be.Cos:return s=>Math.cos(i[0](s));case be.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case be.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function Bz(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Ya(n.args[i]);return i=>{for(let s=0;s<t-1;s+=2)if(r[s](i))return r[s+1](i);return r[t-1](i)}}function Uz(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Ya(n.args[i]);return i=>{const s=r[0](i);for(let a=1;a<t-1;a+=2)if(s===r[a](i))return r[a+1](i);return r[t-1](i)}}function zz(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Ya(n.args[i]);return i=>{const s=r[0](i),a=r[1](i);let o,l;for(let u=2;u<t;u+=2){const f=r[u](i);let d=r[u+1](i);const g=Array.isArray(d);if(g&&(d=mU(d)),f>=a)return u===2?d:g?Wz(s,a,o,l,f,d):Ug(s,a,o,l,f,d);o=f,l=d}return l}}function $z(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Ya(n.args[s]);switch(t){case be.ToString:return s=>{const a=i[0](s);return n.args[0].type===Oa?zI(a):a.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Ug(n,e,t,r,i,s){const a=i-t;if(a===0)return r;const o=e-t,l=n===1?o/a:(Math.pow(n,o)-1)/(Math.pow(n,a)-1);return r+l*(s-r)}function Wz(n,e,t,r,i,s){if(i-t===0)return r;const o=Sb(r),l=Sb(s);let u=l[2]-o[2];u>180?u-=360:u<-180&&(u+=360);const f=[Ug(n,e,t,o[0],i,l[0]),Ug(n,e,t,o[1],i,l[1]),o[2]+Ug(n,e,t,0,i,u),Ug(n,e,t,r[3],i,s[3])];return pU(f)}function Hz(n){return!0}function Kz(n){const e=dD(),t=Yz(n,e),r=mD();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const a=i.getId();a!==void 0?r.featureId=a:r.featureId=null}return e.geometryType&&(r.geometryType=gD(i.getGeometry())),t(r)}}function Kb(n){const e=dD(),t=n.length,r=new Array(t);for(let a=0;a<t;++a)r[a]=YS(n[a],e);const i=mD(),s=new Array(t);return function(a,o){if(i.properties=a.getPropertiesInternal(),i.resolution=o,e.featureId){const u=a.getId();u!==void 0?i.featureId=u:i.featureId=null}let l=0;for(let u=0;u<t;++u){const f=r[u](i);f&&(s[l]=f,l+=1)}return s.length=l,s}}function Yz(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i){const s=n[i],a="filter"in s?Ol(s.filter,Vi,e):Hz;let o;if(Array.isArray(s.style)){const l=s.style.length;o=new Array(l);for(let u=0;u<l;++u)o[u]=YS(s.style[u],e)}else o=[YS(s.style,e)];r[i]={filter:a,styles:o}}return function(i){const s=[];let a=!1;for(let o=0;o<t;++o){const l=r[o].filter;if(l(i)&&!(n[o].else&&a)){a=!0;for(const u of r[o].styles){const f=u(i);f&&s.push(f)}}}return s}}function YS(n,e){const t=Um(n,"",e),r=zm(n,"",e),i=Xz(n,e),s=qz(n,e),a=ss(n,"z-index",e);if(!t&&!r&&!i&&!s&&!xh(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const o=new ar;return function(l){let u=!0;if(t){const f=t(l);f&&(u=!1),o.setFill(f)}if(r){const f=r(l);f&&(u=!1),o.setStroke(f)}if(i){const f=i(l);f&&(u=!1),o.setText(f)}if(s){const f=s(l);f&&(u=!1),o.setImage(f)}return a&&o.setZIndex(a(l)),u?null:o}}function Um(n,e,t){let r;if(e+"fill-pattern-src"in n)r=e$(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return s=>null;r=ZI(n,e+"fill-color",t)}if(!r)return null;const i=new Ai;return function(s){const a=r(s);return a===BI?null:(i.setColor(a),i)}}function zm(n,e,t){const r=ss(n,e+"stroke-width",t),i=ZI(n,e+"stroke-color",t);if(!r&&!i)return null;const s=ul(n,e+"stroke-line-cap",t),a=ul(n,e+"stroke-line-join",t),o=pD(n,e+"stroke-line-dash",t),l=ss(n,e+"stroke-line-dash-offset",t),u=ss(n,e+"stroke-miter-limit",t),f=new Fs;return function(d){if(i){const g=i(d);if(g===BI)return null;f.setColor(g)}if(r&&f.setWidth(r(d)),s){const g=s(d);if(g!=="butt"&&g!=="round"&&g!=="square")throw new Error("Expected butt, round, or square line cap");f.setLineCap(g)}if(a){const g=a(d);if(g!=="bevel"&&g!=="round"&&g!=="miter")throw new Error("Expected bevel, round, or miter line join");f.setLineJoin(g)}return o&&f.setLineDash(o(d)),l&&f.setLineDashOffset(l(d)),u&&f.setMiterLimit(u(d)),f}}function Xz(n,e){const t="text-",r=ul(n,t+"value",e);if(!r)return null;const i=Um(n,t,e),s=Um(n,t+"background-",e),a=zm(n,t,e),o=zm(n,t+"background-",e),l=ul(n,t+"font",e),u=ss(n,t+"max-angle",e),f=ss(n,t+"offset-x",e),d=ss(n,t+"offset-y",e),g=Rd(n,t+"overflow",e),p=ul(n,t+"placement",e),v=ss(n,t+"repeat",e),y=Pv(n,t+"scale",e),E=Rd(n,t+"rotate-with-view",e),T=ss(n,t+"rotation",e),R=ul(n,t+"align",e),M=ul(n,t+"justify",e),k=ul(n,t+"baseline",e),V=Rd(n,t+"keep-upright",e),z=pD(n,t+"padding",e),P=bv(n,t+"declutter-mode"),C=new v0({declutterMode:P});return function(b){if(C.setText(r(b)),i&&C.setFill(i(b)),s&&C.setBackgroundFill(s(b)),a&&C.setStroke(a(b)),o&&C.setBackgroundStroke(o(b)),l&&C.setFont(l(b)),u&&C.setMaxAngle(u(b)),f&&C.setOffsetX(f(b)),d&&C.setOffsetY(d(b)),g&&C.setOverflow(g(b)),p){const L=p(b);if(L!=="point"&&L!=="line")throw new Error("Expected point or line for text-placement");C.setPlacement(L)}if(v&&C.setRepeat(v(b)),y&&C.setScale(y(b)),E&&C.setRotateWithView(E(b)),T&&C.setRotation(T(b)),R){const L=R(b);if(L!=="left"&&L!=="center"&&L!=="right"&&L!=="end"&&L!=="start")throw new Error("Expected left, right, center, start, or end for text-align");C.setTextAlign(L)}if(M){const L=M(b);if(L!=="left"&&L!=="right"&&L!=="center")throw new Error("Expected left, right, or center for text-justify");C.setJustify(L)}if(k){const L=k(b);if(L!=="bottom"&&L!=="top"&&L!=="middle"&&L!=="alphabetic"&&L!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");C.setTextBaseline(L)}return z&&C.setPadding(z(b)),V&&C.setKeepUpright(V(b)),C}}function qz(n,e){return"icon-src"in n?Zz(n,e):"shape-points"in n?Qz(n,e):"circle-radius"in n?Jz(n,e):null}function Zz(n,e){const t="icon-",r=t+"src",i=_D(n[r],r),s=qy(n,t+"anchor",e),a=Pv(n,t+"scale",e),o=ss(n,t+"opacity",e),l=qy(n,t+"displacement",e),u=ss(n,t+"rotation",e),f=Rd(n,t+"rotate-with-view",e),d=Xb(n,t+"anchor-origin"),g=qb(n,t+"anchor-x-units"),p=qb(n,t+"anchor-y-units"),v=i$(n,t+"color"),y=n$(n,t+"cross-origin"),E=r$(n,t+"offset"),T=Xb(n,t+"offset-origin"),R=Zy(n,t+"width"),M=Zy(n,t+"height"),k=t$(n,t+"size"),V=bv(n,t+"declutter-mode"),z=new Fp({src:i,anchorOrigin:d,anchorXUnits:g,anchorYUnits:p,color:v,crossOrigin:y,offset:E,offsetOrigin:T,height:M,width:R,size:k,declutterMode:V});return function(P){return o&&z.setOpacity(o(P)),l&&z.setDisplacement(l(P)),u&&z.setRotation(u(P)),f&&z.setRotateWithView(f(P)),a&&z.setScale(a(P)),s&&z.setAnchor(s(P)),z}}function Qz(n,e){const t="shape-",r=t+"points",i=t+"radius",s=XS(n[r],r),a=XS(n[i],i),o=Um(n,t,e),l=zm(n,t,e),u=Pv(n,t+"scale",e),f=qy(n,t+"displacement",e),d=ss(n,t+"rotation",e),g=Rd(n,t+"rotate-with-view",e),p=Zy(n,t+"radius2"),v=Zy(n,t+"angle"),y=bv(n,t+"declutter-mode"),E=new Cv({points:s,radius:a,radius2:p,angle:v,declutterMode:y});return function(T){return o&&E.setFill(o(T)),l&&E.setStroke(l(T)),f&&E.setDisplacement(f(T)),d&&E.setRotation(d(T)),g&&E.setRotateWithView(g(T)),u&&E.setScale(u(T)),E}}function Jz(n,e){const t="circle-",r=Um(n,t,e),i=zm(n,t,e),s=ss(n,t+"radius",e),a=Pv(n,t+"scale",e),o=qy(n,t+"displacement",e),l=ss(n,t+"rotation",e),u=Rd(n,t+"rotate-with-view",e),f=bv(n,t+"declutter-mode"),d=new Xc({radius:5,declutterMode:f});return function(g){return s&&d.setRadius(s(g)),r&&d.setFill(r(g)),i&&d.setStroke(i(g)),o&&d.setDisplacement(o(g)),l&&d.setRotation(l(g)),u&&d.setRotateWithView(u(g)),a&&d.setScale(a(g)),d}}function ss(n,e,t){if(!(e in n))return;const r=Ol(n[e],Kt,t);return function(i){return XS(r(i),e)}}function ul(n,e,t){if(!(e in n))return null;const r=Ol(n[e],is,t);return function(i){return _D(r(i),e)}}function e$(n,e,t){const r=ul(n,e+"pattern-src",t),i=Yb(n,e+"pattern-offset",t),s=Yb(n,e+"pattern-size",t),a=ZI(n,e+"color",t);return function(o){return{src:r(o),offset:i&&i(o),size:s&&s(o),color:a&&a(o)}}}function Rd(n,e,t){if(!(e in n))return null;const r=Ol(n[e],Vi,t);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function ZI(n,e,t){if(!(e in n))return null;const r=Ol(n[e],Oa,t);return function(i){return yD(r(i),e)}}function pD(n,e,t){if(!(e in n))return null;const r=Ol(n[e],Th,t);return function(i){return Vp(r(i),e)}}function qy(n,e,t){if(!(e in n))return null;const r=Ol(n[e],Th,t);return function(i){const s=Vp(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function Yb(n,e,t){if(!(e in n))return null;const r=Ol(n[e],Th,t);return function(i){return xD(r(i),e)}}function Pv(n,e,t){if(!(e in n))return null;const r=Ol(n[e],Th|Kt,t);return function(i){return s$(r(i),e)}}function Zy(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function t$(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return os(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function n$(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function Xb(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function qb(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function r$(n,e){const t=n[e];if(t!==void 0)return Vp(t,e)}function bv(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function i$(n,e){const t=n[e];if(t!==void 0)return yD(t,e)}function Vp(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function _D(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function XS(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function yD(n,e){if(typeof n=="string")return n;const t=Vp(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function xD(n,e){const t=Vp(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function s$(n,e){return typeof n=="number"?n:xD(n,e)}const Pa={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Zb(n,e,t){return(function(r,i,s,a,o){if(!r)return;if(!i&&!e)return r;const l=e?0:s[0]*i,u=e?0:s[1]*i,f=o?o[0]:0,d=o?o[1]:0;let g=n[0]+l/2+f,p=n[2]-l/2+f,v=n[1]+u/2+d,y=n[3]-u/2+d;g>p&&(g=(p+g)/2,p=g),v>y&&(v=(y+v)/2,y=v);let E=Fn(r[0],g,p),T=Fn(r[1],v,y);if(a&&t&&i){const R=30*i;E+=-R*Math.log(1+Math.max(0,g-r[0])/R)+R*Math.log(1+Math.max(0,r[0]-p)/R),T+=-R*Math.log(1+Math.max(0,v-r[1])/R)+R*Math.log(1+Math.max(0,r[1]-y)/R)}return[E,T]})}function a$(n){return n}function vD(n){return Math.pow(n,3)}function E0(n){return 1-vD(1-n)}function o$(n){return 3*n*n-2*n*n*n}function l$(n){return n}function QI(n,e,t,r){const i=Bt(e)/t[0],s=vr(e)/t[1];return r?Math.min(n,Math.max(i,s)):Math.min(n,Math.min(i,s))}function JI(n,e,t){let r=Math.min(n,e);const i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),Fn(r,t/2,e*2)}function c$(n,e,t,r){return e=e!==void 0?e:!0,(function(i,s,a,o){if(i!==void 0){const l=n[0],u=n[n.length-1],f=t?QI(l,t,a,r):l;if(o)return e?JI(i,f,u):Fn(i,u,f);const d=Math.min(f,i),g=Math.floor(gv(n,d,s));return n[g]>f&&g<n.length-1?n[g+1]:n[g]}})}function u$(n,e,t,r,i,s){return r=r!==void 0?r:!0,t=t!==void 0?t:0,(function(a,o,l,u){if(a!==void 0){const f=i?QI(e,i,l,s):e;if(u)return r?JI(a,f,t):Fn(a,t,f);const d=1e-9,g=Math.ceil(Math.log(e/f)/Math.log(n)-d),p=-o*(.5-d)+.5,v=Math.min(f,a),y=Math.floor(Math.log(e/v)/Math.log(n)+p),E=Math.max(g,y),T=e/Math.pow(n,E);return Fn(T,t,f)}})}function Qb(n,e,t,r,i){return t=t!==void 0?t:!0,(function(s,a,o,l){if(s!==void 0){const u=r?QI(n,r,o,i):n;return!t||!l?Fn(s,e,u):JI(s,u,e)}})}function eA(n){if(n!==void 0)return 0}function Jb(n){if(n!==void 0)return n}function h$(n){const e=2*Math.PI/n;return(function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function f$(n){const e=yl(5);return(function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t})}const d$=42,tA=256,w2=0;class xo extends Bo{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=MI(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&CO(),e.center&&(e.center=cl(e.center,this.projection_)),e.extent&&(e.extent=vo(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in Pa)delete t[o];this.setProperties(t,!0);const r=m$(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=g$(e),s=r.constraint,a=p$(e);this.constraints_={center:i,resolution:s,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),a=s/2*(i[3]-t[3]+t[1]-i[1]),o=s/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+a,r[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=cl(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=cl(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const f=arguments[i];f.center&&this.setCenterInternal(f.center),f.zoom!==void 0?this.setZoom(f.zoom):f.resolution&&this.setResolution(f.resolution),f.rotation!==void 0&&this.setRotation(f.rotation)}if(i===t){r&&M1(r,!0);return}let s=Date.now(),a=this.targetCenter_.slice(),o=this.targetResolution_,l=this.targetRotation_;const u=[];for(;i<t;++i){const f=arguments[i],d={start:s,complete:!1,anchor:f.anchor,duration:f.duration!==void 0?f.duration:1e3,easing:f.easing||o$,callback:r};if(f.center&&(d.sourceCenter=a,d.targetCenter=f.center.slice(),a=d.targetCenter),f.zoom!==void 0?(d.sourceResolution=o,d.targetResolution=this.getResolutionForZoom(f.zoom),o=d.targetResolution):f.resolution&&(d.sourceResolution=o,d.targetResolution=f.resolution,o=d.targetResolution),f.rotation!==void 0){d.sourceRotation=l;const g=Vc(f.rotation-l+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=l+g,l=d.targetRotation}_$(d)?d.complete=!0:s+=d.duration,u.push(d)}this.animations_.push(u),this.setHint(Wr.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Wr.ANIMATING]>0}getInteracting(){return this.hints_[Wr.INTERACTING]>0}cancelAnimations(){this.setHint(Wr.ANIMATING,-this.hints_[Wr.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const i=this.animations_[t];if(i[0].callback&&M1(i[0].callback,!1),!e)for(let s=0,a=i.length;s<a;++s){const o=i[s];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let a=0,o=i.length;a<o;++a){const l=i[a];if(l.complete)continue;const u=e-l.start;let f=l.duration>0?u/l.duration:1;f>=1?(l.complete=!0,f=1):s=!1;const d=l.easing(f);if(l.sourceCenter){const g=l.sourceCenter[0],p=l.sourceCenter[1],v=l.targetCenter[0],y=l.targetCenter[1];this.nextCenter_=l.targetCenter;const E=g+d*(v-g),T=p+d*(y-p);this.targetCenter_=[E,T]}if(l.sourceResolution&&l.targetResolution){const g=d===1?l.targetResolution:l.sourceResolution+d*(l.targetResolution-l.sourceResolution);if(l.anchor){const p=this.getViewportSize_(this.getRotation()),v=this.constraints_.resolution(g,0,p,!0);this.targetCenter_=this.calculateCenterZoom(v,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=g,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const g=d===1?Vc(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+d*(l.targetRotation-l.sourceRotation);if(l.anchor){const p=this.constraints_.rotation(g,!0);this.targetCenter_=this.calculateCenterRotate(p,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=g}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[r]=null,this.setHint(Wr.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=i[0].callback;a&&M1(a,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],RI(r,e-this.getRotation()),lB(r,t)),r}calculateCenterZoom(e,t){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const a=t[0]-e*(t[0]-i[0])/s,o=t[1]-e*(t[1]-i[1])/s;r=[a,o]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&GS(e,this.getProjection())}getCenterInternal(){return this.get(Pa.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return PO(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();pn(t,"The view center is not defined");const r=this.getResolution();pn(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return pn(i!==void 0,"The view rotation is not defined"),Fy(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Pa.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(vo(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=Bt(e)/t[0],i=vr(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return(function(s){return t/Math.pow(e,s*i)})}getRotation(){return this.get(Pa.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/t;return(function(a){return Math.log(r/a)/t/s})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const a=this.getViewportSizeMinusPadding_();i=S2(i,this.getViewportSize_(),[a[0]/2+s[3],a[1]/2+s[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){const s=gv(this.resolutions_,e,1);t=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=Fn(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(r,Fn(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(pn(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){pn(!y0(e),"Cannot fit empty extent provided as `geometry`");const i=vo(e,this.getProjection());r=Mb(i)}else if(e.getType()==="Circle"){const i=vo(e.getExtent(),this.getProjection());r=Mb(i),r.rotate(this.getRotation(),ko(i))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),s=e.getFlatCoordinates(),a=e.getStride();let o=1/0,l=1/0,u=-1/0,f=-1/0;for(let d=0,g=s.length;d<g;d+=a){const p=s[d]*r-s[d+1]*i,v=s[d]*i+s[d+1]*r;o=Math.min(o,p),l=Math.min(l,v),u=Math.max(u,p),f=Math.max(f,v)}return[o,l,u,f]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let a;t.minResolution!==void 0?a=t.minResolution:t.maxZoom!==void 0?a=this.getResolutionForZoom(t.maxZoom):a=0;const o=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(o,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);l=isNaN(l)?a:Math.max(l,a),l=this.getConstrainedResolution(l,s?0:1);const u=this.getRotation(),f=Math.sin(u),d=Math.cos(u),g=ko(o);g[0]+=(i[1]-i[3])/2*l,g[1]+=(i[0]-i[2])/2*l;const p=g[0]*d-g[1]*f,v=g[1]*d+g[0]*f,y=this.getConstrainedCenter([p,v],l),E=t.callback?t.callback:Nm;t.duration!==void 0?this.animateInternal({resolution:l,center:y,duration:t.duration,easing:t.easing},E):(this.targetResolution_=l,this.targetCenter_=y,this.applyTargetState_(!1,!0),M1(E,!0))}centerOn(e,t,r){this.centerOnInternal(cl(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(S2(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let s;const a=this.padding_;if(a&&e){const o=this.getViewportSizeMinusPadding_(-r),l=S2(e,i,[o[0]/2+a[3],o[1]/2+a[0]],t,r);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=GS(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&cl(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=cl(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&cl(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),a=this.constraints_.resolution(this.targetResolution_,0,s,r),o=this.constraints_.center(this.targetCenter_,a,s,r,this.calculateCenterShift(this.targetCenter_,a,i,s));this.get(Pa.ROTATION)!==i&&this.set(Pa.ROTATION,i),this.get(Pa.RESOLUTION)!==a&&(this.set(Pa.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(Pa.CENTER)||!jy(this.get(Pa.CENTER),o))&&this.set(Pa.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const i=t||0,s=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,i,a),l=this.constraints_.center(this.targetCenter_,o,a,!1,this.calculateCenterShift(this.targetCenter_,o,s,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!jy(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:o,duration:e,easing:E0,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Wr.INTERACTING,1)}endInteraction(e,t,r){r=r&&cl(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(Wr.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function M1(n,e){setTimeout(function(){n(e)},0)}function g$(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return Zb(n.extent,n.constrainOnlyCenter,t)}const e=MI(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Zb(t,!1,!1)}return a$}function m$(n){let e,t,r,a=n.minZoom!==void 0?n.minZoom:w2,o=n.maxZoom!==void 0?n.maxZoom:28;const l=n.zoomFactor!==void 0?n.zoomFactor:2,u=n.multiWorld!==void 0?n.multiWorld:!1,f=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,d=n.showFullExtent!==void 0?n.showFullExtent:!1,g=MI(n.projection,"EPSG:3857"),p=g.getExtent();let v=n.constrainOnlyCenter,y=n.extent;if(!u&&!y&&g.isGlobal()&&(v=!1,y=p),n.resolutions!==void 0){const E=n.resolutions;t=E[a],r=E[o]!==void 0?E[o]:E[E.length-1],n.constrainResolution?e=c$(E,f,!v&&y,d):e=Qb(t,r,f,!v&&y,d)}else{const T=(p?Math.max(Bt(p),vr(p)):360*Wd.degrees/g.getMetersPerUnit())/tA/Math.pow(2,w2),R=T/Math.pow(2,28-w2);t=n.maxResolution,t!==void 0?a=0:t=T/Math.pow(l,a),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(l,o):r=T/Math.pow(l,o):r=R),o=a+Math.floor(Math.log(t/r)/Math.log(l)),r=t/Math.pow(l,o-a),n.constrainResolution?e=u$(l,t,r,f,!v&&y,d):e=Qb(t,r,f,!v&&y,d)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:a,zoomFactor:l}}function p$(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?f$():t===!1?Jb:typeof t=="number"?h$(t):Jb}return eA}function _$(n){return!(n.sourceCenter&&n.targetCenter&&!jy(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function S2(n,e,t,r,i){const s=Math.cos(-i);let a=Math.sin(-i),o=n[0]*s-n[1]*a,l=n[1]*s+n[0]*a;o+=(e[0]/2-t[0])*r,l+=(t[1]-e[1]/2)*r,a=-a;const u=o*s-l*a,f=l*s+o*a;return[u,f]}const xn={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class ED extends Bo{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[xn.OPACITY]=e.opacity!==void 0?e.opacity:1,pn(typeof t[xn.OPACITY]=="number","Layer opacity must be a number"),t[xn.VISIBLE]=e.visible!==void 0?e.visible:!0,t[xn.Z_INDEX]=e.zIndex,t[xn.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[xn.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[xn.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[xn.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=Fn(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return At()}getLayerStatesArray(e){return At()}getExtent(){return this.get(xn.EXTENT)}getMaxResolution(){return this.get(xn.MAX_RESOLUTION)}getMinResolution(){return this.get(xn.MIN_RESOLUTION)}getMinZoom(){return this.get(xn.MIN_ZOOM)}getMaxZoom(){return this.get(xn.MAX_ZOOM)}getOpacity(){return this.get(xn.OPACITY)}getSourceState(){return At()}getVisible(){return this.get(xn.VISIBLE)}getZIndex(){return this.get(xn.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(xn.EXTENT,e)}setMaxResolution(e){this.set(xn.MAX_RESOLUTION,e)}setMinResolution(e){this.set(xn.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(xn.MAX_ZOOM,e)}setMinZoom(e){this.set(xn.MIN_ZOOM,e)}setOpacity(e){pn(typeof e=="number","Layer opacity must be a number"),this.set(xn.OPACITY,e)}setVisible(e){this.set(xn.VISIBLE,e)}setZIndex(e){this.set(xn.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class jp extends ED{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(xn.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(xn.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Nn(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=qt(e,Mt.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof xo?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(a=>a.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return nA(i,t.viewState)&&(!s||ji(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const r=e instanceof xo?e.getViewStateAndExtent():e;let i=t(r);return Array.isArray(i)||(i=[i]),i}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(xn.MAP,e)}getMapInternal(){return this.get(xn.MAP)}setMap(e){this.mapPrecomposeKey_&&(Nn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Nn(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=qt(e,ha.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=qt(this,Mt.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,r=this.getLayerState(!1);pn(!t.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(xn.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function nA(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}const eM={RENDER_ORDER:"renderOrder"};class wD extends jp{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(eM.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new oD(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(eM.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?lD:e;const t=y$(e);this.styleFunction_=e===null?void 0:ez(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function y$(n){if(n===void 0)return lD;if(!n)return null;if(typeof n=="function"||n instanceof ar)return n;if(!Array.isArray(n))return Kb([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof ar){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!(a instanceof ar))throw new Error("Expected a list of style instances");i[s]=a}return i}if("style"in t){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!("style"in a))throw new Error("Expected a list of rules with a style property");i[s]=a}return Kz(i)}return Kb(n)}class Mv extends wD{constructor(e){super(e)}createRenderer(){return new Ez(this)}}const fc={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class wc extends Go{constructor(e,t){super(e),this.layer=t}}const T2={LAYERS:"layers"};let kv=class SD extends ED{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(T2.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new ua(r.slice(),{unique:!0}):pn(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new ua(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Nn),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(qt(e,ns.ADD,this.handleLayersAdd_,this),qt(e,ns.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(Nn);Rp(this.listenerKeys_);const t=e.getArray();for(let r=0,i=t.length;r<i;r++){const s=t[r];this.registerLayerListeners_(s),this.dispatchEvent(new wc(fc.ADDLAYER,s))}this.changed()}registerLayerListeners_(e){const t=[qt(e,zd.PROPERTYCHANGE,this.handleLayerChange_,this),qt(e,Mt.CHANGE,this.handleLayerChange_,this)];e instanceof SD&&t.push(qt(e,fc.ADDLAYER,this.handleLayerGroupAdd_,this),qt(e,fc.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[nn(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new wc(fc.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new wc(fc.REMOVELAYER,e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new wc(fc.ADDLAYER,t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=nn(t);this.listenerKeys_[r].forEach(Nn),delete this.listenerKeys_[r],this.dispatchEvent(new wc(fc.REMOVELAYER,t)),this.changed()}getLayers(){return this.get(T2.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new wc(fc.REMOVELAYER,r[i]))}this.set(T2.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(t)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let a=r,o=t.length;a<o;a++){const l=t[a];l.opacity*=i.opacity,l.visible=l.visible&&i.visible,l.maxResolution=Math.min(l.maxResolution,i.maxResolution),l.minResolution=Math.max(l.minResolution,i.minResolution),l.minZoom=Math.max(l.minZoom,i.minZoom),l.maxZoom=Math.min(l.maxZoom,i.maxZoom),i.extent!==void 0&&(l.extent!==void 0?l.extent=_l(l.extent,i.extent):l.extent=i.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}};const Et={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class rA extends Cp{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(Mt.CHANGE)}release(){this.setState(Et.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Et.EMPTY){if(this.state!==Et.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){At()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=t-r+1e3/60;return i>=this.transition_?1:vD(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function qS(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const x$=new Error("disposed"),v$=[256,256];class tM extends rA{constructor(e){const t=Et.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=qS(this.data_);return e?[e.width,e.height]:v$}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Et.IDLE&&this.state!==Et.ERROR)return;this.state=Et.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=Et.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=Et.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(x$),this.controller_=null),super.disposeInternal()}}class TD extends rA{constructor(e,t,r,i,s,a){super(e,t,a),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_,Ds?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,i!==null&&(this.image_.crossOrigin=i)),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Et.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=Et.ERROR,this.unlistenImage_(),this.image_=E$(),this.changed()}handleImageLoad_(){if(Ds)this.state=Et.LOADED;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Et.LOADED:this.state=Et.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==Et.ERROR&&(this.state=Et.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Et.IDLE&&(this.state=Et.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=_U(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function E$(){const n=Lr(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}let I2;const Cd=[];function nM(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function A2(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function w$(){if(I2===void 0){const n=Lr(6,6,Cd);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",nM(n,4,5,4,0),nM(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;I2=A2(e,0)||A2(e,4)||A2(e,8),Iv(n),Cd.push(n.canvas)}return I2}function Qy(n,e,t,r){const i=Np(t,e,n);let s=zy(e,r,t);const a=e.getMetersPerUnit();a!==void 0&&(s*=a);const o=n.getMetersPerUnit();o!==void 0&&(s/=o);const l=n.getExtent();if(!l||vh(l,i)){const u=zy(n,s,i)/s;isFinite(u)&&u>0&&(s/=u)}return s}function S$(n,e,t,r){const i=ko(t);let s=Qy(n,e,i,r);return(!isFinite(s)||s<=0)&&mO(t,function(a){return s=Qy(n,e,a,r),isFinite(s)&&s>0}),s}function ID(n,e,t,r,i,s,a,o,l,u,f,d,g,p){const v=Lr(Math.round(t*n),Math.round(t*e),Cd);if(d||(v.imageSmoothingEnabled=!1),l.length===0)return v.canvas;v.scale(t,t);function y(V){return Math.round(V*t)/t}v.globalCompositeOperation="lighter";const E=Gs();l.forEach(function(V,z,P){dO(E,V.extent)});let T;const R=t/r,M=(d?1:1+Math.pow(2,-24))/R;(!g||l.length!==1||u!==0)&&(T=Lr(Math.round(Bt(E)*R),Math.round(vr(E)*R),Cd),d||(T.imageSmoothingEnabled=!1),l.forEach(function(V,z,P){if(V.image.width>0&&V.image.height>0){if(V.clipExtent){T.save();const U=(V.clipExtent[0]-E[0])*R,j=-(V.clipExtent[3]-E[3])*R,Te=Bt(V.clipExtent)*R,Me=vr(V.clipExtent)*R;T.rect(d?U:Math.round(U),d?j:Math.round(j),d?Te:Math.round(U+Te)-Math.round(U),d?Me:Math.round(j+Me)-Math.round(j)),T.clip()}const C=(V.extent[0]-E[0])*R,b=-(V.extent[3]-E[3])*R,L=Bt(V.extent)*R,F=vr(V.extent)*R;T.drawImage(V.image,u,u,V.image.width-2*u,V.image.height-2*u,d?C:Math.round(C),d?b:Math.round(b),d?L:Math.round(C+L)-Math.round(C),d?F:Math.round(b+F)-Math.round(b)),V.clipExtent&&T.restore()}}));const k=Wh(a);return o.getTriangles().forEach(function(V,z,P){const C=V.source,b=V.target;let L=C[0][0],F=C[0][1],U=C[1][0],j=C[1][1],Te=C[2][0],Me=C[2][1];const Ue=y((b[0][0]-k[0])/s),ke=y(-(b[0][1]-k[1])/s),le=y((b[1][0]-k[0])/s),Ae=y(-(b[1][1]-k[1])/s),Ie=y((b[2][0]-k[0])/s),Y=y(-(b[2][1]-k[1])/s),O=L,te=F;L=0,F=0,U-=O,j-=te,Te-=O,Me-=te;const ne=[[U,j,0,0,le-Ue],[Te,Me,0,0,Ie-Ue],[0,0,U,j,Ae-ke],[0,0,Te,Me,Y-ke]],ee=oB(ne);if(!ee)return;if(v.save(),v.beginPath(),w$()||!d){v.moveTo(le,Ae);const Se=4,Ne=Ue-le,se=ke-Ae;for(let re=0;re<Se;re++)v.lineTo(le+y((re+1)*Ne/Se),Ae+y(re*se/(Se-1))),re!=Se-1&&v.lineTo(le+y((re+1)*Ne/Se),Ae+y((re+1)*se/(Se-1)));v.lineTo(Ie,Y)}else v.moveTo(le,Ae),v.lineTo(Ue,ke),v.lineTo(Ie,Y);v.clip(),v.transform(ee[0],ee[2],ee[1],ee[3],Ue,ke),v.translate(E[0]-O,E[3]-te);let me;if(T)me=T.canvas,v.scale(M,-M);else{const Se=l[0],Ne=Se.extent;me=Se.image,v.scale(Bt(Ne)/me.width,-vr(Ne)/me.height)}v.drawImage(me,0,0),v.restore()}),T&&(Iv(T),Cd.push(T.canvas)),f&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,o.getTriangles().forEach(function(V,z,P){const C=V.target,b=(C[0][0]-k[0])/s,L=-(C[0][1]-k[1])/s,F=(C[1][0]-k[0])/s,U=-(C[1][1]-k[1])/s,j=(C[2][0]-k[0])/s,Te=-(C[2][1]-k[1])/s;v.beginPath(),v.moveTo(F,U),v.lineTo(b,L),v.lineTo(j,Te),v.closePath(),v.stroke()}),v.restore()),v.canvas}const T$=10,rM=.25;class AD{constructor(e,t,r,i,s,a,o){this.sourceProj_=e,this.targetProj_=t;let l={};const u=o?jS(M=>kr(o,Np(M,this.targetProj_,this.sourceProj_))):Om(this.targetProj_,this.sourceProj_);this.transformInv_=function(M){const k=M[0]+"/"+M[1];return l[k]||(l[k]=u(M)),l[k]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Bt(i)>=Bt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Bt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Bt(this.targetProj_.getExtent()):null;const f=Wh(r),d=yv(r),g=_v(r),p=pv(r),v=this.transformInv_(f),y=this.transformInv_(d),E=this.transformInv_(g),T=this.transformInv_(p),R=T$+(a?Math.max(0,Math.ceil(Math.log2(LS(r)/(a*a*256*256)))):0);if(this.addQuad_(f,d,g,p,v,y,E,T,R),this.wrapsXInSource_){let M=1/0;this.triangles_.forEach(function(k,V,z){M=Math.min(M,k.source[0][0],k.source[1][0],k.source[2][0])}),this.triangles_.forEach(k=>{if(Math.max(k.source[0][0],k.source[1][0],k.source[2][0])-M>this.sourceWorldWidth_/2){const V=[[k.source[0][0],k.source[0][1]],[k.source[1][0],k.source[1][1]],[k.source[2][0],k.source[2][1]]];V[0][0]-M>this.sourceWorldWidth_/2&&(V[0][0]-=this.sourceWorldWidth_),V[1][0]-M>this.sourceWorldWidth_/2&&(V[1][0]-=this.sourceWorldWidth_),V[2][0]-M>this.sourceWorldWidth_/2&&(V[2][0]-=this.sourceWorldWidth_);const z=Math.min(V[0][0],V[1][0],V[2][0]);Math.max(V[0][0],V[1][0],V[2][0])-z<this.sourceWorldWidth_/2&&(k.source=V)}})}l={}}addTriangle_(e,t,r,i,s,a){this.triangles_.push({source:[i,s,a],target:[e,t,r]})}addQuad_(e,t,r,i,s,a,o,l,u){const f=lb([s,a,o,l]),d=this.sourceWorldWidth_?Bt(f)/this.sourceWorldWidth_:null,g=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&d>.5&&d<1;let v=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const E=lb([e,t,r,i]);v=Bt(E)/this.targetWorldWidth_>rM||v}!p&&this.sourceProj_.isGlobal()&&d&&(v=d>rM||v)}if(!v&&this.maxSourceExtent_&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3])&&!ji(f,this.maxSourceExtent_))return;let y=0;if(!v&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)v=!0;else if(y=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),y!=1&&y!=2&&y!=4&&y!=8)return}if(u>0){if(!v){const E=[(e[0]+r[0])/2,(e[1]+r[1])/2],T=this.transformInv_(E);let R;p?R=(Vc(s[0],g)+Vc(o[0],g))/2-Vc(T[0],g):R=(s[0]+o[0])/2-T[0];const M=(s[1]+o[1])/2-T[1];v=R*R+M*M>this.errorThresholdSquared_}if(v){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const E=[(t[0]+r[0])/2,(t[1]+r[1])/2],T=this.transformInv_(E),R=[(i[0]+e[0])/2,(i[1]+e[1])/2],M=this.transformInv_(R);this.addQuad_(e,t,E,R,s,a,T,M,u-1),this.addQuad_(R,E,r,i,M,T,o,l,u-1)}else{const E=[(e[0]+t[0])/2,(e[1]+t[1])/2],T=this.transformInv_(E),R=[(r[0]+i[0])/2,(r[1]+i[1])/2],M=this.transformInv_(R);this.addQuad_(e,E,R,i,s,T,M,l,u-1),this.addQuad_(E,t,r,R,T,a,o,M,u-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(y&11)==0&&this.addTriangle_(e,r,i,s,o,l),(y&14)==0&&this.addTriangle_(e,r,t,s,o,a),y&&((y&13)==0&&this.addTriangle_(t,i,e,a,l,s),(y&7)==0&&this.addTriangle_(t,i,r,a,l,o))}calculateSourceExtent(){const e=Gs();return this.triangles_.forEach(function(t,r,i){const s=t.source;tm(e,s[0]),tm(e,s[1]),tm(e,s[2])}),e}getTriangles(){return this.triangles_}}const RD=.5;class CD extends rA{constructor(e,t,r,i,s,a,o,l,u,f,d,g){super(s,Et.IDLE,g),this.renderEdges_=d!==void 0?d:!1,this.pixelRatio_=o,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=a||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const p=i.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent();let y=this.sourceTileGrid_.getExtent();const E=v?_l(p,v):p;if(LS(E)===0){this.state=Et.EMPTY;return}const T=e.getExtent();T&&(y?y=_l(y,T):y=T);const R=i.getResolution(this.wrappedTileCoord_[0]),M=S$(e,r,E,R);if(!isFinite(M)||M<=0){this.state=Et.EMPTY;return}const k=f!==void 0?f:RD;if(this.triangulation_=new AD(e,r,E,y,M*k,R),this.triangulation_.getTriangles().length===0){this.state=Et.EMPTY;return}this.sourceZ_=t.getZForResolution(M);let V=this.triangulation_.calculateSourceExtent();if(y&&(e.canWrapX()?(V[1]=Fn(V[1],y[1],y[3]),V[3]=Fn(V[3],y[1],y[3])):V=_l(V,y)),!LS(V))this.state=Et.EMPTY;else{let z=0,P=0;e.canWrapX()&&(z=Bt(T),P=Math.floor((V[0]-T[0])/z)),yO(V.slice(),e,!0).forEach(b=>{const L=t.getTileRangeForExtentAndZ(b,this.sourceZ_);for(let F=L.minX;F<=L.maxX;F++)for(let U=L.minY;U<=L.maxY;U++){const j=u(this.sourceZ_,F,U,o);if(j){const Te=P*z;this.sourceTiles_.push({tile:j,offset:Te})}}++P}),this.sourceTiles_.length===0&&(this.state=Et.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const r=t.tile;if(r&&r.getState()==Et.LOADED){const i=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);i[0]+=t.offset,i[2]+=t.offset;const s=this.clipExtent_?.slice();s&&(s[0]+=t.offset,s[2]+=t.offset),e.push({extent:i,clipExtent:s,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Et.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],a=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=ID(i,s,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),a,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Et.LOADED}this.changed()}load(){if(this.state==Et.IDLE){this.state=Et.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==Et.IDLE||r==Et.LOADING){e++;const i=qt(t,Mt.CHANGE,s=>{const a=t.getState();(a==Et.LOADED||a==Et.ERROR||a==Et.EMPTY)&&(Nn(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==Et.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Nn),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Iv(this.canvas_.getContext("2d")),Cd.push(this.canvas_),this.canvas_=null),super.release()}}class iA{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Uf(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new iA(n,e,t,r)}class iM{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof dv&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return pn(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return pn(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){pn(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function Jy(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function I$(n,e,t){return n+"/"+e+"/"+t}function uy(n,e,t,r,i){return`${nn(n)},${e},${I$(t,r,i)}`}function PD(n){return A$(n[0],n[1],n[2])}function A$(n,e,t){return(e<<n)+t}function R$(n,e){const t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(r,i):!0}class C$ extends XI{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,a=this.getLayer().getSource(),o=e.viewHints;let l=e.extent;if(t.extent!==void 0&&(l=_l(l,vo(t.extent,i.projection))),!o[Wr.ANIMATING]&&!o[Wr.INTERACTING]&&!y0(l))if(a){const u=i.projection,f=a.getImage(l,s,r,u);f&&(this.loadImage(f)?this.image=f:f.getState()===ht.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=kr(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!vh(s,i))return null;const a=this.image.getExtent(),o=this.image.getImage(),l=Bt(a),u=Math.floor(o.width*((i[0]-a[0])/l));if(u<0||u>=o.width)return null;const f=vr(a),d=Math.floor(o.height*((a[3]-i[1])/f));return d<0||d>=o.height?null:this.getImageData(o,u,d)}renderFrame(e,t){const r=this.image,i=r.getExtent(),s=r.getResolution(),[a,o]=Array.isArray(s)?s:[s,s],l=r.getPixelRatio(),u=e.layerStatesArray[e.layerIndex],f=e.pixelRatio,d=e.viewState,g=d.center,p=d.resolution,v=f*a/(p*l),y=f*o/(p*l);this.prepareContainer(e,t);const E=this.context.canvas.width,T=this.context.canvas.height,R=this.getRenderContext(e);let M=!1,k=!0;if(u.extent){const b=vo(u.extent,d.projection);k=ji(b,e.extent),M=k&&!Cc(b,e.extent),M&&this.clipUnrotated(R,e,b)}const V=r.getImage(),z=No(this.tempTransform,E/2,T/2,v,y,0,l*(i[0]-g[0])/a,l*(g[1]-i[3])/o);this.renderedResolution=o*f/l;const P=V.width*z[0],C=V.height*z[3];if(this.getLayer().getSource().getInterpolate()||(R.imageSmoothingEnabled=!1),this.preRender(R,e),k&&P>=.5&&C>=.5){const b=z[4],L=z[5],F=u.opacity;F!==1&&(R.save(),R.globalAlpha=F),R.drawImage(V,0,0,+V.width,+V.height,b,L,P,C),F!==1&&R.restore()}return this.postRender(this.context,e),M&&R.restore(),R.imageSmoothingEnabled=!0,this.container}}class P$ extends jp{constructor(e){e=e||{},super(e)}}class b$ extends P${constructor(e){super(e)}createRenderer(){return new C$(this)}getData(e){return super.getData(e)}}function R2(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const r=n[t],i=r.has(e);return i||r.add(e),!i}function M$(n,e,t){const r=n[t];return r?r.delete(e):!1}function sM(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=_l(e,vo(t.extent,n.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=_l(e,i))}return e}class k$ extends XI{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Gs(),this.tempTileRange_=new iA(0,0,0,0),this.tempTileCoord_=Jy(0,0,0);const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new iM(r),this.sourceTileCache_=null,this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new iM(512)),this.sourceTileCache_}getOrCreateTile(e,t,r,i){const s=this.tileCache_,o=this.getLayer().getSource(),l=uy(o,o.getKey(),e,t,r);let u;if(s.containsKey(l))u=s.get(l);else{const f=i.viewState.projection,d=o.getProjection();if(u=o.getTile(e,t,r,i.pixelRatio,f,!d||dh(d,f)?void 0:this.getSourceTileCache()),!u)return null;s.set(l,u)}return u}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);return s||null}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=kr(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!vh(s,i))return null;const a=t.viewState,o=r.getRenderSource(),l=o.getTileGridForProjection(a.projection),u=o.getTilePixelRatio(t.pixelRatio);for(let f=l.getZForResolution(a.resolution);f>=l.getMinZoom();--f){const d=l.getTileCoordForCoordAndZ(i,f),g=this.getTile(f,d[1],d[2],t);if(!g||g.getState()!==Et.LOADED)continue;const p=l.getOrigin(f),v=os(l.getTileSize(f)),y=l.getResolution(f);let E;if(g instanceof TD||g instanceof CD)E=g.getImage();else if(g instanceof tM){if(E=qS(g.getData()),!E)continue}else continue;const T=Math.floor(u*((i[0]-p[0])/y-d[1]*v[0])),R=Math.floor(u*((p[1]-i[1])/y-d[2]*v[1])),M=Math.round(u*o.getGutterForProjection(a.projection));return this.getImageData(E,T+M,R+M)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const r=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==r&&(this.renderedSourceRevision_=r,this.renderedSourceKey_===t.getKey()&&(this.tileCache_.clear(),this.sourceTileCache_?.clear())):this.renderedSourceRevision_=r,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,t,r,i,s){const a=e.viewState,o=this.getLayer(),l=o.getRenderSource(),u=l.getTileGridForProjection(a.projection),f=nn(l);f in e.wantedTiles||(e.wantedTiles[f]={});const d=e.wantedTiles[f],g=o.getMapInternal(),p=Math.max(r-s,u.getMinZoom(),u.getZForResolution(Math.min(o.getMaxResolution(),g?g.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):u.getResolution(0)),l.zDirection)),v=a.rotation,y=v?pO(a.center,a.resolution,v,e.size):void 0;for(let E=r;E>=p;--E){const T=u.getTileRangeForExtentAndZ(t,E,this.tempTileRange_),R=u.getResolution(E);for(let M=T.minX;M<=T.maxX;++M)for(let k=T.minY;k<=T.maxY;++k){if(v&&!u.tileCoordIntersectsViewport([E,M,k],y))continue;const V=this.getTile(E,M,k,e);if(!V||!R2(i,V,E))continue;const P=V.getKey();if(d[P]=!0,V.getState()===Et.IDLE&&!e.tileQueue.isKeyQueued(P)){const C=Jy(E,M,k,this.tempTileCoord_);e.tileQueue.enqueue([V,f,u.getTileCoordCenter(C),R])}}}}findStaleTile_(e,t){const r=this.tileCache_,i=e[0],s=e[1],a=e[2],o=this.getStaleKeys();for(let l=0;l<o.length;++l){const u=uy(this.getLayer().getSource(),o[l],i,s,a);if(r.containsKey(u)){const f=r.peek(u);if(f.getState()===Et.LOADED)return f.endTransition(nn(this)),R2(t,f,i),!0}}return!1}findAltTiles_(e,t,r,i){const s=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!s)return!1;let a=!0;const o=this.tileCache_,l=this.getLayer().getRenderSource(),u=l.getKey();for(let f=s.minX;f<=s.maxX;++f)for(let d=s.minY;d<=s.maxY;++d){const g=uy(l,u,r,f,d);let p=!1;if(o.containsKey(g)){const v=o.peek(g);v.getState()===Et.LOADED&&(R2(i,v,r),p=!0)}p||(a=!1)}return a}renderFrame(e,t){this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],i=e.viewState,s=i.projection,a=i.resolution,o=i.center,l=e.pixelRatio,u=this.getLayer(),f=u.getSource(),d=f.getTileGridForProjection(s),g=d.getZForResolution(a,f.zDirection),p=d.getResolution(g),v=f.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==v&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=v):this.renderedSourceKey_=v;let y=e.extent;const E=f.getTilePixelRatio(l);this.prepareContainer(e,t);const T=this.context.canvas.width,R=this.context.canvas.height,M=r.extent&&vo(r.extent);M&&(y=_l(y,vo(r.extent)));const k=p*T/2/E,V=p*R/2/E,z=[o[0]-k,o[1]-V,o[0]+k,o[1]+V],P={};this.renderedTiles.length=0;const C=u.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const le=d.getZForResolution(i.nextResolution,f.zDirection),Ae=sM(e,e.nextExtent);this.enqueueTiles(e,Ae,le,P,C)}const b=sM(e,y);if(this.enqueueTiles(e,b,g,P,0),C>0&&setTimeout(()=>{this.enqueueTiles(e,b,g-1,P,C-1)},0),!(g in P))return this.container;const L=nn(this),F=e.time;for(const le of P[g]){const Ae=le.getState();if(Ae===Et.EMPTY)continue;const Ie=le.tileCoord;if(Ae===Et.LOADED&&le.getAlpha(L,F)===1){le.endTransition(L);continue}if(Ae!==Et.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Ie,P)){M$(P,le,g),e.animate=!0;continue}if(this.findAltTiles_(d,Ie,g+1,P))continue;const te=d.getMinZoom();for(let ne=g-1;ne>=te&&!this.findAltTiles_(d,Ie,ne,P);--ne);}const U=p/a*l/E,j=this.getRenderContext(e);No(this.tempTransform,T/2,R/2,U,U,0,-T/2,-R/2),r.extent&&this.clipUnrotated(j,e,M),f.getInterpolate()||(j.imageSmoothingEnabled=!1),this.preRender(j,e);const Te=Object.keys(P).map(Number);Te.sort(pl);let Me;const Ue=[],ke=[];for(let le=Te.length-1;le>=0;--le){const Ae=Te[le],Ie=f.getTilePixelSize(Ae,l,s),O=d.getResolution(Ae)/p,te=Ie[0]*O*U,ne=Ie[1]*O*U,ee=d.getTileCoordForCoordAndZ(Wh(z),Ae),me=d.getTileCoordExtent(ee),Se=kr(this.tempTransform,[E*(me[0]-z[0])/p,E*(z[3]-me[3])/p]),Ne=E*f.getGutterForProjection(s);for(const se of P[Ae]){if(se.getState()!==Et.LOADED)continue;const re=se.tileCoord,D=ee[1]-re[1],Ye=Math.round(Se[0]-(D-1)*te),he=ee[2]-re[2],He=Math.round(Se[1]-(he-1)*ne),ue=Math.round(Se[0]-D*te),W=Math.round(Se[1]-he*ne),ae=Ye-ue,lt=He-W,ot=Te.length===1;let gt=!1;Me=[ue,W,ue+ae,W,ue+ae,W+lt,ue,W+lt];for(let Ot=0,Rn=Ue.length;Ot<Rn;++Ot)if(!ot&&Ae<ke[Ot]){const Yt=Ue[Ot];ji([ue,W,ue+ae,W+lt],[Yt[0],Yt[3],Yt[4],Yt[7]])&&(gt||(j.save(),gt=!0),j.beginPath(),j.moveTo(Me[0],Me[1]),j.lineTo(Me[2],Me[3]),j.lineTo(Me[4],Me[5]),j.lineTo(Me[6],Me[7]),j.moveTo(Yt[6],Yt[7]),j.lineTo(Yt[4],Yt[5]),j.lineTo(Yt[2],Yt[3]),j.lineTo(Yt[0],Yt[1]),j.clip())}Ue.push(Me),ke.push(Ae),this.drawTile(se,e,ue,W,ae,lt,Ne,ot),gt&&j.restore(),this.renderedTiles.unshift(se),this.updateUsedTiles(e.usedTiles,f,se)}}if(this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!$d(this.renderedExtent_,z),this.renderedExtent_=z,this.renderedPixelRatio=l,this.postRender(this.context,e),r.extent&&j.restore(),j.imageSmoothingEnabled=!0,this.renderComplete){const le=(Ae,Ie)=>{const Y=nn(f),O=Ie.wantedTiles[Y],te=O?Object.keys(O).length:0;this.updateCacheSize(te),this.tileCache_.expireCache(),this.sourceTileCache_?.expireCache()};e.postRenderFunctions.push(le)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,i,s,a,o,l){let u;if(e instanceof tM){if(u=qS(e.getData()),!u)throw new Error("Rendering array data is not yet supported")}else u=this.getTileImage(e);if(!u)return;const f=this.getRenderContext(t),d=nn(this),g=t.layerStatesArray[t.layerIndex],p=g.opacity*(l?e.getAlpha(d,t.time):1),v=p!==f.globalAlpha;v&&(f.save(),f.globalAlpha=p),f.drawImage(u,o,o,u.width-2*o,u.height-2*o,r,i,s,a),v&&f.restore(),p!==g.opacity?t.animate=!0:l&&e.endTransition(d)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){const i=nn(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const k1={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class N$ extends jp{constructor(e){e=e||{};const t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(k1.PRELOAD)}setPreload(e){this.set(k1.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(k1.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(k1.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class $u extends N${constructor(e){super(e)}createRenderer(){return new k$(this,{cacheSize:this.getCacheSize()})}}function ZS(n){return Array.isArray(n)?Math.min(...n):n}const zf=[0,0,0],dc=5;class bD{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,pn(QG(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,pn(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Wh(r)),pn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,pn(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:tA,pn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const a=new iA(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const o=this.getTileRangeForExtentAndZ(r,s);a.minX=Math.max(o.minX,a.minX),a.maxX=Math.min(o.maxX,a.maxX),a.minY=Math.max(o.minY,a.minY),a.maxY=Math.min(o.maxY,a.maxY)}return a}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const i=this.getTileRangeForExtentAndZ(e,t);for(let s=i.minX,a=i.maxX;s<=a;++s)for(let o=i.minY,l=i.maxY;o<=l;++o)r([t,s,o])}forEachTileCoordParentTileRange(e,t,r,i){let s,a,o,l=null,u=e[0]-1;for(this.zoomFactor_===2?(a=e[1],o=e[2]):l=this.getTileCoordExtent(e,i);u>=this.minZoom;){if(a!==void 0&&o!==void 0?(a=Math.floor(a/2),o=Math.floor(o/2),s=Uf(a,a,o,o,r)):s=this.getTileRangeForExtentAndZ(l,u,r),t(u,s))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,a=e[2]*2;return Uf(s,s+1,a,a+1,t)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],s=e[1],a=e[2];if(t===i)return Uf(s,a,s,a,r);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-i),u=Math.floor(s*l),f=Math.floor(a*l);if(t<i)return Uf(u,u,f,f,r);const d=Math.floor(l*(s+1))-1,g=Math.floor(l*(a+1))-1;return Uf(u,d,f,g,r)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,zf);const i=zf[1],s=zf[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,zf);const a=zf[1],o=zf[2];return Uf(i,a,s,o,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=os(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=os(this.getTileSize(e[0]),this.tmpSize_),a=r[0]+e[1]*s[0]*i,o=r[1]-(e[2]+1)*s[1]*i,l=a+s[0]*i,u=o+s[1]*i;return Kc(a,o,l,u,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,s){const a=this.getZForResolution(r),o=r/this.getResolution(a),l=this.getOrigin(a),u=os(this.getTileSize(a),this.tmpSize_);let f=o*(e-l[0])/r/u[0],d=o*(l[1]-t)/r/u[1];return i?(f=Pc(f,dc)-1,d=Pc(d,dc)-1):(f=S1(f,dc),d=S1(d,dc)),Jy(a,f,d,s)}getTileCoordForXYAndZ_(e,t,r,i,s){const a=this.getOrigin(r),o=this.getResolution(r),l=os(this.getTileSize(r),this.tmpSize_);let u=(e-a[0])/o/l[0],f=(a[1]-t)/o/l[1];return i?(u=Pc(u,dc)-1,f=Pc(f,dc)-1):(u=S1(u,dc),f=S1(f,dc)),Jy(r,u,f,s)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=gv(this.resolutions_,e,t||0);return Fn(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return OO(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function MD(n){let e=n.getDefaultTileGrid();return e||(e=F$(n),n.setDefaultTileGrid(e)),e}function L$(n,e,t){const r=e[0],i=n.getTileCoordCenter(e),s=sA(t);if(!vh(s,i)){const a=Bt(s),o=Math.ceil((s[0]-i[0])/a);return i[0]+=a*o,n.getTileCoordForCoordAndZ(i,r)}return e}function O$(n,e,t,r){r=r!==void 0?r:"top-left";const i=kD(n,e,t);return new bD({extent:n,origin:rB(n,r),resolutions:i,tileSize:t})}function D$(n){const e=n||{},t=e.extent||Pn("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:kD(t,e.maxZoom,e.tileSize,e.maxResolution)};return new bD(r)}function kD(n,e,t,r){e=e!==void 0?e:d$,t=os(t!==void 0?t:tA);const i=vr(n),s=Bt(n);r=r>0?r:Math.max(s/t[0],i/t[1]);const a=e+1,o=new Array(a);for(let l=0;l<a;++l)o[l]=r/Math.pow(2,l);return o}function F$(n,e,t,r){const i=sA(n);return O$(i,e,t,r)}function sA(n){n=Pn(n);let e=n.getExtent();if(!e){const t=180*Wd.degrees/n.getMetersPerUnit();e=Kc(-t,-t,t,t)}return e}function aA(n,e){const t=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&t.push(i+"="+encodeURIComponent(e[i]))});const r=t.join("&");return n=n.replace(/[?&]$/,""),n+=n.includes("?")?"&":"?",n+r}const V$=/\{z\}/g,j$=/\{x\}/g,G$=/\{y\}/g,B$=/\{-y\}/g;function U$(n,e,t,r,i){return n.replace(V$,e.toString()).replace(j$,t.toString()).replace(G$,r.toString()).replace(B$,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function z$(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const r=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}function $$(n,e){return(function(t,r,i){if(!t)return;let s;const a=t[0];if(e){const o=e.getFullTileRange(a);o&&(s=o.getHeight()-1)}return U$(n,a,t[1],t[2],s)})}function W$(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=$$(n[i],e);return H$(r)}function H$(n){return n.length===1?n[0]:(function(e,t,r){if(!e)return;const i=PD(e),s=Vc(i,n.length);return n[s](e,t,r)})}class K$ extends YI{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&os(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||nn(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,s,a){return At()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:MD(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(t),a=os(i.getTileSize(e),this.tmpSize);return s==1?a:JU(a,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const r=t!==void 0?t:this.getProjection(),i=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=L$(i,e,r)),R$(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class Y$ extends Go{constructor(e,t){super(e),this.tile=t}}const C2={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class oA extends K${constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===oA.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=nn(t),i=t.getState();let s;i==Et.LOADING?(this.tileLoadingKeys_[r]=!0,s=C2.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==Et.ERROR?C2.TILELOADERROR:i==Et.LOADED?C2.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new Y$(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=z$(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(W$(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}}class ND extends oA{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:LD,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:TD,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!dh(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||dh(t,e)))return this.tileGrid;const r=nn(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=MD(e)),this.tileGridForProjection[r]}createTile_(e,t,r,i,s,a){const o=[e,t,r],l=this.getTileCoordForTileUrlFunction(o,s),u=l?this.tileUrlFunction(l,i,s):void 0,f=new this.tileClass(o,u!==void 0?Et.IDLE:Et.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=a,f.addEventListener(Mt.CHANGE,this.handleTileChange.bind(this)),f}getTile(e,t,r,i,s,a){const o=this.getProjection();if(!o||!s||dh(o,s))return this.getTileInternal(e,t,r,i,o||s);const l=[e,t,r],u=this.getKey(),f=this.getTileGridForProjection(o),d=this.getTileGridForProjection(s),g=this.getTileCoordForTileUrlFunction(l,s),p=new CD(o,f,s,d,l,g,this.getTilePixelRatio(i),this.getGutter(),(v,y,E,T)=>this.getTileInternal(v,y,E,T,o,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return p.key=u,p}getTileInternal(e,t,r,i,s,a){const o=this.getKey(),l=uy(this,o,e,t,r);if(a&&a.containsKey(l))return a.get(l);const u=this.createTile_(e,t,r,i,s,o);return a?.set(l,u),u}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const r=Pn(e);if(r){const i=nn(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}}function LD(n,e){if(Ds){const t=n.getCrossOrigin();let r="same-origin",i="same-origin";t==="anonymous"||t===""?(r="cors",i="omit"):t==="use-credentials"&&(r="cors",i="include"),fetch(e,{mode:r,credentials:i}).then(s=>{if(!s.ok)throw new Error(`HTTP ${s.status}`);return s.blob()}).then(s=>createImageBitmap(s)).then(s=>{const a=n.getImage();a.width=s.width,a.height=s.height,a.getContext("2d").drawImage(s,0,0),s.close?.(),a.dispatchEvent(new Event("load"))}).catch(()=>{n.getImage().dispatchEvent(new Event("error"))});return}n.getImage().src=e}class id extends ND{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:D$({extent:sA(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const X$="modulepreload",q$=function(n){return"/detectorapp-nl/"+n},aM={},ct=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let l=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");i=l(t.map(u=>{if(u=q$(u),u in aM)return;aM[u]=!0;const f=u.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":X$,f||(g.as="script"),g.crossOrigin="",g.href=u,o&&g.setAttribute("nonce",o),document.head.appendChild(g),f)return new Promise((p,v)=>{g.addEventListener("load",p),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};class Z$ extends $O{constructor(e,t,r,i,s,a,o){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let u=t.getExtent();u&&t.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0);const f=u?_l(r,u):r,d=ko(f),g=Qy(e,t,d,i),p=RD,v=new AD(e,t,f,l,g*p,i),y=v.calculateSourceExtent(),E=y0(y)?null:a(y,g,s),T=E?ht.IDLE:ht.EMPTY,R=E?E.getPixelRatio():1;super(r,i,R,T),this.targetProj_=t,this.maxSourceExtent_=l,this.triangulation_=v,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=E,this.sourcePixelRatio_=R,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==ht.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==ht.LOADED){const t=Bt(this.targetExtent_)/this.targetResolution_,r=vr(this.targetExtent_)/this.targetResolution_;this.canvas_=ID(t,r,this.sourcePixelRatio_,ZS(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==ht.IDLE){this.state=ht.LOADING,this.changed();const e=this.sourceImage_.getState();e==ht.LOADED||e==ht.ERROR?this.reproject_():(this.sourceListenerKey_=qt(this.sourceImage_,Mt.CHANGE,t=>{const r=this.sourceImage_.getState();(r==ht.LOADED||r==ht.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Nn(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Nc=4,P2={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class Q$ extends Go{constructor(e,t){super(e),this.image=t}}class J$ extends YI{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=gv(t,e,0);e=t[r]}return e}getImage(e,t,r,i){const s=this.getProjection();if(!s||!i||dh(s,i))return s&&(i=s),this.getImageInternal(e,t,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&dh(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&$d(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Z$(s,i,e,t,r,(a,o,l)=>this.getImageInternal(a,o,l,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,i){if(this.loader){const s=OD(e,t,r,1),a=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&Cc(this.wantedExtent_,s)||Cc(this.image.getExtent(),s))&&(this.wantedResolution_&&ZS(this.wantedResolution_)===a||ZS(this.image.getResolution())===a)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=a,this.image=new $O(s,a,r,this.loader),this.image.addEventListener(Mt.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case ht.LOADING:this.loading=!0,r=P2.IMAGELOADSTART;break;case ht.LOADED:this.loading=!1,r=P2.IMAGELOADEND;break;case ht.ERROR:this.loading=!1,r=P2.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new Q$(r,t))}}function eW(n,e){n.getImage().src=e}function OD(n,e,t,r){const i=e/t,s=ko(n),a=Pc(Bt(n)/i,Nc),o=Pc(vr(n)/i,Nc),l=Pc((r-1)*a/2,Nc),u=a+2*l,f=Pc((r-1)*o/2,Nc),d=o+2*f;return Fy(s,i,0,[u,d])}function tW(n,e,t,r,i,s){const a=i.getCode().split(/:(?=\d+$)/).pop(),o=t/r,l=[Vy(Bt(e)/o,Nc),Vy(vr(e)/o,Nc)];s.SIZE=l[0]+","+l[1],s.BBOX=e.join(","),s.BBOXSR=a,s.IMAGESR=a,s.DPI=Math.round(s.DPI?s.DPI*r:90*r);const u=n.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return aA(u,s)}function nW(n){const e=n.load?n.load:HO,t=Pn(n.projection||"EPSG:3857"),r=n.ratio??1.5,i=n.crossOrigin??null;return function(s,a,o){o=n.hidpi?o:1;const l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(l,n.params),s=OD(s,a,o,r);const u=tW(n.url,s,a,o,t,l),f=new Image;return f.crossOrigin=i,e(f,u).then(d=>{const g=Bt(s)/d.width*o;return{image:d,extent:s,resolution:g,pixelRatio:o}})}}class rW extends J${constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:eW,this.params_=Object.assign({},e.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,t,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=nW({crossOrigin:this.crossOrigin_,params:this.params_,projection:i,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,a)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,a),HO(s))})),super.getImageInternal(e,t,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}setParams(e){this.params_=Object.assign({},e),this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const QS="1.3.0";function iW(n,e,t,r,i){i.WIDTH=t[0],i.HEIGHT=t[1];const s=r.getAxisOrientation(),a=xO(i.VERSION,"1.3")>=0;i[a?"CRS":"SRS"]=r.getCode();const o=a&&s.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return i.BBOX=o.join(","),aA(n,i)}function sW(n,e,t,r,i,s,a){s=Object.assign({REQUEST:"GetMap"},s);const o=e/t,l=[Vy(Bt(n)/o,Nc),Vy(vr(n)/o,Nc)];if(t!=1)switch(a){case"geoserver":const f=90*t+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+f:s.FORMAT_OPTIONS="dpi:"+f;break;case"mapserver":s.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":s.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return iW(i,n,l,r,s)}function oM(n,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:QS,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},n)}const aW='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class oW extends id{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[aW];const r=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",i=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:(s,a)=>{const o=s.getImage();!Ds&&o instanceof HTMLImageElement&&(o.referrerPolicy="origin-when-cross-origin"),(e.tileLoadFunction||LD)(s,a)},transition:e.transition,url:i,wrapX:e.wrapX,zDirection:e.zDirection})}}const ex=1/0;class lW{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Rp(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){pn(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=ex?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,i=t.length,s=t[e],a=r[e],o=e;for(;e<i>>1;){const l=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),f=u<i&&r[u]<r[l]?u:l;t[e]=t[f],r[e]=r[f],e=f}t[e]=s,r[e]=a,this.siftDown_(o,e)}siftDown_(e,t){const r=this.elements_,i=this.priorities_,s=r[t],a=i[t];for(;t>e;){const o=this.getParentIndex_(t);if(i[o]>a)r[t]=r[o],i[t]=i[o],t=o;else break}r[t]=s,i[t]=a}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let i=0;const s=t.length;let a,o,l;for(o=0;o<s;++o)a=t[o],l=e(a),l==ex?delete this.queuedElements_[this.keyFunction_(a)]:(r[i]=l,t[i++]=a);t.length=i,r.length=i,this.heapify_()}}class cW extends lW{constructor(e,t){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Mt.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===Et.LOADED||r===Et.ERROR||r===Et.EMPTY){r!==Et.ERROR&&t.removeEventListener(Mt.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){const i=this.dequeue()[0],s=i.getKey();i.getState()===Et.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,i.load())}}}function uW(n,e,t,r,i){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return ex;const s=n.viewState.center,a=r[0]-s[0],o=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(a*a+o*o)/i}class hW extends ND{constructor(e){e=e||{};const t=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=Gs(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,r,i){const s=Pn(r),a=this.getProjection()||s;let o=this.getTileGrid();o||(o=this.getTileGridForProjection(a));const l=Np(e,s,a),u=Qy(a,s,e,t),f=o.getZForResolution(u,this.zDirection),d=o.getResolution(f),g=o.getTileCoordForCoordAndZ(l,f);if(o.getResolutions().length<=g[0])return;let p=o.getTileCoordExtent(g,this.tmpExtent_);const v=this.gutter_;v!==0&&(p=Lm(p,d*v,p));const y={QUERY_LAYERS:this.params_.LAYERS};Object.assign(y,oM(this.params_,"GetFeatureInfo"),i);const E=Math.floor((l[0]-p[0])/d),T=Math.floor((p[3]-l[1])/d);return y[this.v13_?"I":"X"]=E,y[this.v13_?"J":"Y"]=T,this.getRequestUrl_(g,p,1,a||s,y)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const r={SERVICE:"WMS",VERSION:QS,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const i=this.params_.LAYERS;if(!(!Array.isArray(i)||i.length===1))return;r.LAYER=i}if(e!==void 0){const i=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;r.SCALE=e*i/s}return Object.assign(r,t),aA(this.urls[0],r)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,r,i,s){const a=this.urls;if(!a)return;let o;if(a.length==1)o=a[0];else{const l=Vc(PD(e),a.length);o=a[l]}return sW(t,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(e[0]),r,i,o,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}setParams_(e){this.params_=e,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(e){this.setParams_(Object.assign({},e))}updateParams(e){this.setParams_(Object.assign(this.params_,e))}updateV13_(){const e=this.params_.VERSION||QS;this.v13_=xO(e,"1.3")>=0}tileUrlFunction(e,t,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const s=i.getResolution(e[0]);let a=i.getTileCoordExtent(e,this.tmpExtent_);const o=this.gutter_;o!==0&&(a=Lm(a,s*o,a));const l=Object.assign({},oM(this.params_,"GetMap"));return this.getRequestUrl_(e,a,t,r,l)}}class sd extends Go{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class xc extends sd{constructor(e,t,r,i,s,a){super(e,t,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const tr={SINGLECLICK:"singleclick",CLICK:Mt.CLICK,DBLCLICK:Mt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},JS={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class fW extends Cp{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=qt(r,JS.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=qt(r,JS.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Mt.TOUCHMOVE,this.boundHandleTouchMove_,BO?{passive:!1}:!1)}emulateClick_(e){let t=new xc(tr.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new xc(tr.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new xc(tr.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==tr.POINTERUP||t.type==tr.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==tr.POINTERDOWN||t.type==tr.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new xc(tr.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Nn),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new xc(tr.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(qt(r,tr.POINTERMOVE,this.handlePointerMove_,this),qt(r,tr.POINTERUP,this.handlePointerUp_,this),qt(this.element_,tr.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(qt(this.element_.getRootNode(),tr.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new xc(tr.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new xc(tr.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Nn(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Mt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Nn(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Nn),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const vc={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},vi={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};class Nv extends Bo{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,r=this.listenerKeys.length;t<r;++t)Nn(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==Nm&&this.listenerKeys.push(qt(e,vc.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class dW extends Nv{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",a=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=a):this.collapseLabel_=s;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=i):this.label_=o;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(Mt.CLICK,this.handleClick_.bind(this),!1);const u=t+" "+Op+" "+$I+(this.collapsed_&&this.collapsible_?" "+Tb:"")+(this.collapsible_?"":" ol-uncollapsible"),f=this.element;f.className=u,f.appendChild(this.toggleButton_),f.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),r=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!t.some(s=>s.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>cO(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!hu(t,this.renderedAttributions_)){aU(this.ulElement_);for(let i=0,s=t.length;i<s;++i){const a=document.createElement("li");a.innerHTML=t[i],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Tb),this.collapsed_?wb(this.collapseLabel_,this.label_):wb(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class gW extends Nv{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=t+"-reset",a.setAttribute("type","button"),a.title=s,a.appendChild(this.label_),a.addEventListener(Mt.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+Op+" "+$I,l=this.element;l.className=o,l.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(A1)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:E0}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(A1);!s&&r===0?this.element.classList.add(A1):s&&r!==0&&this.element.classList.remove(A1)}this.label_.style.transform=i}this.rotation_=r}}class mW extends Nv{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=i,f.setAttribute("type","button"),f.title=l,f.appendChild(typeof a=="string"?document.createTextNode(a):a),f.addEventListener(Mt.CLICK,this.handleClick_.bind(this,r),!1);const d=document.createElement("button");d.className=s,d.setAttribute("type","button"),d.title=u,d.appendChild(typeof o=="string"?document.createTextNode(o):o),d.addEventListener(Mt.CLICK,this.handleClick_.bind(this,-r),!1);const g=t+" "+Op+" "+$I,p=this.element;p.className=g,p.appendChild(f),p.appendChild(d),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:E0})):r.setZoom(s)}}}function pW(n){n=n||{};const e=new ua;return(n.zoom===void 0||n.zoom)&&e.push(new mW(n.zoomOptions)),(n.rotate===void 0||n.rotate)&&e.push(new gW(n.rotateOptions)),(n.attribution===void 0||n.attribution)&&e.push(new dW(n.attributionOptions)),e}class _W{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[t]-this.points_[r],a=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(a,s),this.initialVelocity_=Math.sqrt(s*s+a*a)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const lM={ACTIVE:"active"};class Gp extends Bo{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(lM.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(lM.ACTIVE,e)}setMap(e){this.map_=e}}function yW(n,e,t){const r=n.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:l$,center:n.getConstrainedCenter(i)})}}function lA(n,e,t,r){const i=n.getZoom();if(i===void 0)return;const s=n.getConstrainedZoom(i+e),a=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:a,anchor:t,duration:r!==void 0?r:250,easing:E0})}class xW extends Gp{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==tr.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,a=r.shiftKey?-this.delta_:this.delta_,o=i.getView();lA(o,a,s,this.duration_),r.preventDefault(),t=!0}return!t}}function eT(n){const e=arguments;return function(t){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](t),!!r);++i);return r}}const vW=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},EW=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),r=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},DD=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?EW(n):!0},wW=km,FD=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(iU&&jO&&e.ctrlKey)},VD=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},SW=function(n){const e=n.originalEvent;return jO?e.metaKey:e.ctrlKey},TW=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},jD=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},b2=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},IW=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class Bp extends Gp{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==tr.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==tr.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==tr.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==tr.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function cA(n){const e=n.length;let t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}class AW extends Bp{constructor(e){super({stopDown:mv}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:eT(VD,IW);this.condition_=e.onFocusOnly?eT(DD,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,i=t.getEventPixel(cA(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();cB(s,o.getResolution()),RI(s,o.getRotation()),o.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),a=r.getCenterInternal(),o=t.getPixelFromCoordinateInternal(a),l=t.getCoordinateFromPixelInternal([o[0]-i*Math.cos(s),o[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:E0})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class RW extends Bp{constructor(e){e=e||{},super({stopDown:mv}),this.condition_=e.condition?e.condition:vW,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!b2(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===eA)return;const i=t.getSize(),s=e.pixel,a=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const o=a-this.lastAngle_;r.adjustRotationInternal(-o)}this.lastAngle_=a}handleUpEvent(e){return b2(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return b2(e)&&FD(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class CW extends dv{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Ka([i])}getGeometry(){return this.geometry_}}const $f={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Ag extends Go{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class PW extends Bp{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new CW(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??FD,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const i=r[0]-t[0],s=r[1]-t[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Ag($f.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Ag(t?$f.BOXEND:$f.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ag($f.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Ag($f.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Ag($f.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class bW extends PW{constructor(e){e=e||{};const t=e.condition?e.condition:TW;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),a=r.getResolutionForExtentInternal(s),o=r.getResolution()/a;i=i.clone(),i.scale(o*o)}r.fitInternal(i,{duration:this.duration_,easing:E0})}}const Gu={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class MW extends Gp{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return VD(t)&&jD(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Mt.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==Gu.DOWN||i==Gu.LEFT||i==Gu.RIGHT||i==Gu.UP)){const a=e.map.getView(),o=a.getResolution()*this.pixelDelta_;let l=0,u=0;i==Gu.DOWN?u=-o:i==Gu.LEFT?l=-o:i==Gu.RIGHT?l=o:u=o;const f=[l,u];RI(f,a.getRotation()),yW(a,f,this.duration_),r.preventDefault(),t=!0}}return!t}}class kW extends Gp{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!SW(t)&&jD(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Mt.KEYDOWN||e.type==Mt.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,a=i==="+"?this.delta_:-this.delta_,o=s.getView();lA(o,a,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}const NW=40,LW=300;class OW extends Gp{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:wW;this.condition_=e.onFocusOnly?eT(DD,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Mt.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=NW;break;case WheelEvent.DOM_DELTA_PAGE:s*=LW;break}if(s===0)return!1;this.lastDelta_=s;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=r.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-Fn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),lA(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class DW extends Bp{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=mv),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const a=e.map,o=a.getView();o.getConstraints().rotation!==eA&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(cA(this.targetPointers))),this.rotating_&&(a.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class FW extends Bp{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=mv),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,a=r.clientY-i.clientY,o=Math.sqrt(s*s+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const l=e.map,u=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(cA(this.targetPointers))),l.render(),u.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function VW(n){n=n||{};const e=new ua,t=new _W(-.005,.05,100);return(n.altShiftDragRotate===void 0||n.altShiftDragRotate)&&e.push(new RW),(n.doubleClickZoom===void 0||n.doubleClickZoom)&&e.push(new xW({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan===void 0||n.dragPan)&&e.push(new AW({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate===void 0||n.pinchRotate)&&e.push(new DW),(n.pinchZoom===void 0||n.pinchZoom)&&e.push(new FW({duration:n.zoomDuration})),(n.keyboard===void 0||n.keyboard)&&(e.push(new MW),e.push(new kW({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom===void 0||n.mouseWheelZoom)&&e.push(new OW({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom===void 0||n.shiftDragZoom)&&e.push(new bW({duration:n.zoomDuration})),e}class jW extends dv{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){At()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;No(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),bO(i,r)}forEachFeatureAtCoordinate(e,t,r,i,s,a,o,l){let u;const f=t.viewState;function d(k,V,z,P){return s.call(a,V,k?z:null,P)}const g=f.projection,p=vO(e.slice(),g),v=[[0,0]];if(g.canWrapX()&&i){const k=g.getExtent(),V=Bt(k);v.push([-V,0],[V,0])}const y=t.layerStatesArray,E=y.length,T=[],R=[];for(let k=0;k<v.length;k++)for(let V=E-1;V>=0;--V){const z=y[V],P=z.layer;if(P.hasRenderer()&&nA(z,f)&&o.call(l,P)){const C=P.getRenderer(),b=P.getSource();if(C&&b){const L=b.getWrapX()?p:e,F=d.bind(null,z.managed);R[0]=L[0]+v[k][0],R[1]=L[1]+v[k][1],u=C.forEachFeatureAtCoordinate(R,t,r,F,T)}if(u)return u}}if(T.length===0)return;const M=1/T.length;return T.forEach((k,V)=>k.distanceSq+=V*M),T.sort((k,V)=>k.distanceSq-V.distanceSq),T.some(k=>u=k.callback(k.feature,k.layer,k.geometry)),u}hasFeatureAtCoordinate(e,t,r,i,s,a){return this.forEachFeatureAtCoordinate(e,t,r,i,km,this,s,a)!==void 0}getMap(){return this.map_}renderFrame(e){At()}scheduleExpireIconCache(e){fa.canExpireCache()&&e.postRenderFunctions.push(GW)}}function GW(n,e){fa.expire()}class BW extends jW{constructor(e){super(e),this.fontChangeListenerKey_=qt(td,zd.PROPERTYCHANGE,e.redrawText,e),this.element_=Ds?UO():document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Op+" ol-layers";const r=e.getViewport();r&&r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const i=new fD(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){Nn(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(ha.PRECOMPOSE,e);const t=e.layerStatesArray.sort((u,f)=>u.zIndex-f.zIndex);t.some(u=>u.layer instanceof wD&&u.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let a=null;for(let u=0,f=t.length;u<f;++u){const d=t[u];e.layerIndex=u;const g=d.layer,p=g.getSourceState();if(!nA(d,i)||p!="ready"&&p!="undefined"){g.unrender();continue}const v=g.render(e,a);v&&(v!==a&&(this.children_.push(v),a=v),s.push(d))}this.declutter(e,s),oU(this.element_,this.children_);const l=this.getMap().getTargetElement();if(Mc(l)){const u=l.getContext("2d");for(const f of this.children_){const d=f.firstElementChild||f,g=f.style.backgroundColor;if(g&&(!Mc(d)||d.width>0)&&(u.fillStyle=g,u.fillRect(0,0,l.width,l.height)),Mc(d)&&d.width>0){const p=f.style.opacity||d.style.opacity;u.globalAlpha=p===""?1:Number(p);const v=d.style.transform;if(v)u.setTransform(...BS(v));else{const y=parseFloat(d.style.width)/d.width,E=parseFloat(d.style.height)/d.height;u.setTransform(y,0,0,E,0,0)}u.drawImage(d,0,0)}}u.globalAlpha=1,u.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(ha.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const i=t[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}}function GD(n){if(n instanceof jp){n.setMapInternal(null);return}n instanceof kv&&n.getLayers().forEach(GD)}function BD(n,e){if(n instanceof jp){n.setMapInternal(e);return}if(n instanceof kv){const t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)BD(t[r],e)}}let UW=class extends Bo{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=zW(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:sU,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=za(),this.pixelToCoordinateTransform_=za(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,Ds||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,Ds||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=t.controls||(Ds?new ua:pW()),this.interactions=t.interactions||(Ds?new ua:VW({onFocusOnly:!0})),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new cW(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(vi.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(vi.VIEW,this.handleViewChanged_),this.addChangeListener(vi.SIZE,this.handleSizeChanged_),this.addChangeListener(vi.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof xo)&&e.view.then(function(i){r.setView(new xo(i))}),this.controls.addEventListener(ns.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(ns.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(ns.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(ns.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(ns.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(ns.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){BD(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,a=r.layerFilter!==void 0?r.layerFilter:km,o=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,o,t,null,a,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(i){i instanceof kv?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:km,s=t.hitTolerance!==void 0?t.hitTolerance:0,a=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,a,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],a=r.height/i[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-r.left)/s,(o.clientY-r.top)/a]}getTarget(){return this.get(vi.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return GS(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?kr(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(vi.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof ua){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const a=i.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const t=cl(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?kr(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(vi.SIZE)}getView(){return this.get(vi.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return uW(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;const r=new xc(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===JS.POINTERDOWN||r===Mt.WHEEL||r===Mt.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,a=t.target,o=s instanceof ShadowRoot?s.host===a?s.host.ownerDocument:s:s===i?i.documentElement:s;if(this.overlayContainerStopEvent_.contains(a)||!o.contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const a=e.viewHints;if(a[Wr.ANIMATING]||a[Wr.INTERACTING]){const o=Date.now()-e.time>8;i=o?0:8,s=o?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(ha.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(ha.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new sd(vc.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new sd(vc.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)Nn(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Mt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Mt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!Mc(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(Mc(t)||t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new BW(this)),!Mc(t)){this.mapBrowserEventHandler_=new fW(this,this.moveTolerance_);for(const i in tr)this.mapBrowserEventHandler_.addEventListener(tr[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Mt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Mt.WHEEL,this.boundHandleBrowserEvent_,BO?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const i=t.getRootNode();r=i instanceof ShadowRoot?i.host:t}if(this.targetChangeHandlerKeys_=[qt(r,Mt.KEYDOWN,this.handleBrowserEvent,this),qt(r,Mt.KEYPRESS,this.handleBrowserEvent,this)],t instanceof HTMLElement){const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_?.observe(t)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Nn(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Nn(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=qt(e,zd.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=qt(e,Mt.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Nn),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new wc("addlayer",e)),this.layerGroupPropertyListenerKeys_=[qt(e,zd.PROPERTYCHANGE,this.render,this),qt(e,Mt.CHANGE,this.render,this),qt(e,"addlayer",this.handleLayerAdd_,this),qt(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,r=e.length;t<r;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){GD(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(t!==void 0&&Db(t)&&r&&r.isDef()){const a=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Fy(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:a,wantedTiles:{},mapId:nn(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const l=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=Fy(o.nextCenter,o.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!y0(this.previousExtent_)&&!$d(s.extent,this.previousExtent_))&&(this.dispatchEvent(new sd(vc.MOVESTART,this,i)),this.previousExtent_=bp(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Wr.ANIMATING]&&!s.viewHints[Wr.INTERACTING]&&!$d(s.extent,this.previousExtent_)&&(this.dispatchEvent(new sd(vc.MOVEEND,this,s)),hO(s.extent,this.previousExtent_))),this.dispatchEvent(new sd(vc.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(vc.LOADSTART)||this.hasListener(vc.LOADEND)||this.hasListener(ha.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new wc("removelayer",t)),this.set(vi.LAYERGROUP,e)}setSize(e){this.set(vi.SIZE,e)}setTarget(e){this.set(vi.TARGET,e)}setView(e){if(!e||e instanceof xo){this.set(vi.VIEW,e);return}this.set(vi.VIEW,new xo);const t=this;e.then(function(r){t.setView(new xo(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){let i,s;if(Mc(e))i=e.width,s=e.height;else{const a=getComputedStyle(e);i=e.offsetWidth-parseFloat(a.borderLeftWidth)-parseFloat(a.paddingLeft)-parseFloat(a.paddingRight)-parseFloat(a.borderRightWidth),s=e.offsetHeight-parseFloat(a.borderTopWidth)-parseFloat(a.paddingTop)-parseFloat(a.paddingBottom)-parseFloat(a.borderBottomWidth)}!isNaN(i)&&!isNaN(s)&&(t=[Math.max(0,i),Math.max(0,s)],!Db(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&wO("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!hu(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function zW(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new kv({layers:n.layers});t[vi.LAYERGROUP]=r,t[vi.TARGET]=n.target,t[vi.VIEW]=n.view instanceof xo?n.view:new xo;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new ua(n.controls.slice()):(pn(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new ua(n.interactions.slice()):(pn(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let a;return n.overlays!==void 0?Array.isArray(n.overlays)?a=new ua(n.overlays.slice()):(pn(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=n.overlays):a=new ua,{controls:i,interactions:s,keyboardEventTarget:e,overlays:a,values:t}}const M2="units",$W=[1,2,5],Rg=25.4/.28;class WW extends Nv{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const r=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+Op,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(M2,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(M2)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(M2,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,r=e.projection,i=this.getUnits(),s=i=="degrees"?"degrees":"m";let a=zy(r,e.resolution,t,s);const o=this.minWidth_*(this.dpi_||Rg)/Rg,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||Rg)/Rg:void 0;let u=o*a,f="";if(i=="degrees"){const M=Wd.degrees;u*=M,u<M/60?(f="",a*=3600):u<M?(f="",a*=60):f=""}else if(i=="imperial")u<.9144?(f="in",a/=.0254):u<1609.344?(f="ft",a/=.3048):(f="mi",a/=1609.344);else if(i=="nautical")a/=1852,f="NM";else if(i=="metric")u<1e-6?(f="nm",a*=1e9):u<.001?(f="m",a*=1e6):u<1?(f="mm",a*=1e3):u<1e3?f="m":(f="km",a/=1e3);else if(i=="us")u<.9144?(f="in",a*=39.37):u<1609.344?(f="ft",a/=.30480061):(f="mi",a/=1609.3472);else throw new Error("Invalid units");let d=3*Math.floor(Math.log(o*a)/Math.log(10)),g,p,v,y=0,E,T;for(;;){v=Math.floor(d/3);const M=Math.pow(10,v);if(g=$W[(d%3+3)%3]*M,p=Math.round(g/a),isNaN(p)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&p>=l){g=y,p=E,v=T;break}else if(p>=o)break;y=g,E=p,T=v,++d}const R=this.scaleBar_?this.createScaleBar(p,g,f):g.toFixed(v<0?-v:0)+" "+f;this.renderedHTML_!=R&&(this.innerElement_.innerHTML=R,this.renderedHTML_=R),this.renderedWidth_!=p&&(this.innerElement_.style.width=p+"px",this.renderedWidth_=p),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,r){const i=this.getScaleForResolution(),s=i<1?Math.round(1/i).toLocaleString()+" : 1":"1 : "+Math.round(i).toLocaleString(),a=this.scaleBarSteps_,o=e/a,l=[this.createMarker("absolute")];for(let f=0;f<a;++f){const d=f%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${d}" style="width: ${o}px;"></div>`+this.createMarker("relative")+(f%2===0||a===2?this.createStepText(f,e,!1,t,r):"")+"</div>")}return l.push(this.createStepText(a,e,!0,t,r)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,r,i,s){const o=(e===0?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:t/this.scaleBarSteps_*-1,u=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${u}px;left: ${r?t+"px":"unset"};">`+o+"</div>"}getScaleForResolution(){const e=zy(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||Rg,r=1e3/25.4;return e*r*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const HW={},cM=n=>{let e;const t=new Set,r=(f,d)=>{const g=typeof f=="function"?f(e):f;if(!Object.is(g,e)){const p=e;e=d??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(v=>v(e,p))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>u,subscribe:f=>(t.add(f),()=>t.delete(f)),destroy:()=>{(HW?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},u=e=n(r,i,l);return l},KW=n=>n?cM(n):cM;var k2={exports:{}},N2={},L2={exports:{}},O2={};var uM;function YW(){if(uM)return O2;uM=1;var n=Ap();function e(d,g){return d===g&&(d!==0||1/d===1/g)||d!==d&&g!==g}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function o(d,g){var p=g(),v=r({inst:{value:p,getSnapshot:g}}),y=v[0].inst,E=v[1];return s(function(){y.value=p,y.getSnapshot=g,l(y)&&E({inst:y})},[d,p,g]),i(function(){return l(y)&&E({inst:y}),d(function(){l(y)&&E({inst:y})})},[d]),a(p),p}function l(d){var g=d.getSnapshot;d=d.value;try{var p=g();return!t(d,p)}catch{return!0}}function u(d,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return O2.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:f,O2}var hM;function XW(){return hM||(hM=1,L2.exports=YW()),L2.exports}var fM;function qW(){if(fM)return N2;fM=1;var n=Ap(),e=XW();function t(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=n.useRef,a=n.useEffect,o=n.useMemo,l=n.useDebugValue;return N2.useSyncExternalStoreWithSelector=function(u,f,d,g,p){var v=s(null);if(v.current===null){var y={hasValue:!1,value:null};v.current=y}else y=v.current;v=o(function(){function T(z){if(!R){if(R=!0,M=z,z=g(z),p!==void 0&&y.hasValue){var P=y.value;if(p(P,z))return k=P}return k=z}if(P=k,r(M,z))return P;var C=g(z);return p!==void 0&&p(P,C)?(M=z,P):(M=z,k=C)}var R=!1,M,k,V=d===void 0?null:d;return[function(){return T(f())},V===null?void 0:function(){return T(V())}]},[f,d,g,p]);var E=i(u,v[0],v[1]);return a(function(){y.hasValue=!0,y.value=E},[E]),l(E),E},N2}var dM;function ZW(){return dM||(dM=1,k2.exports=qW()),k2.exports}var QW=ZW();const JW=TI(QW),UD={},{useDebugValue:eH}=YG,{useSyncExternalStoreWithSelector:tH}=JW;let gM=!1;const nH=n=>n;function rH(n,e=nH,t){(UD?"production":void 0)!=="production"&&t&&!gM&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),gM=!0);const r=tH(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return eH(r),r}const iH=n=>{(UD?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?KW(n):n,t=(r,i)=>rH(e,r,i);return Object.assign(t,e),t},Uo=n=>iH;var zD=Symbol.for("immer-nothing"),mM=Symbol.for("immer-draftable"),Bs=Symbol.for("immer-state");function Da(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var $m=Object.getPrototypeOf;function Zd(n){return!!n&&!!n[Bs]}function Ih(n){return n?$D(n)||Array.isArray(n)||!!n[mM]||!!n.constructor?.[mM]||Up(n)||Ov(n):!1}var sH=Object.prototype.constructor.toString(),pM=new WeakMap;function $D(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);if(e===null||e===Object.prototype)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(t===Object)return!0;if(typeof t!="function")return!1;let r=pM.get(t);return r===void 0&&(r=Function.toString.call(t),pM.set(t,r)),r===sH}function tx(n,e,t=!0){Lv(n)===0?(t?Reflect.ownKeys(n):Object.keys(n)).forEach(i=>{e(i,n[i],n)}):n.forEach((r,i)=>e(i,r,n))}function Lv(n){const e=n[Bs];return e?e.type_:Array.isArray(n)?1:Up(n)?2:Ov(n)?3:0}function tT(n,e){return Lv(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function WD(n,e,t){const r=Lv(n);r===2?n.set(e,t):r===3?n.add(t):n[e]=t}function aH(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function Up(n){return n instanceof Map}function Ov(n){return n instanceof Set}function Wu(n){return n.copy_||n.base_}function nT(n,e){if(Up(n))return new Map(n);if(Ov(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=$D(n);if(e===!0||e==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(n);delete r[Bs];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[a]})}return Object.create($m(n),r)}else{const r=$m(n);if(r!==null&&t)return{...n};const i=Object.create(r);return Object.assign(i,n)}}function uA(n,e=!1){return Dv(n)||Zd(n)||!Ih(n)||(Lv(n)>1&&Object.defineProperties(n,{set:N1,add:N1,clear:N1,delete:N1}),Object.freeze(n),e&&Object.values(n).forEach(t=>uA(t,!0))),n}function oH(){Da(2)}var N1={value:oH};function Dv(n){return n===null||typeof n!="object"?!0:Object.isFrozen(n)}var lH={};function Ah(n){const e=lH[n];return e||Da(0,n),e}var Wm;function HD(){return Wm}function cH(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function _M(n,e){e&&(Ah("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function rT(n){iT(n),n.drafts_.forEach(uH),n.drafts_=null}function iT(n){n===Wm&&(Wm=n.parent_)}function yM(n){return Wm=cH(Wm,n)}function uH(n){const e=n[Bs];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function xM(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[Bs].modified_&&(rT(e),Da(4)),Ih(n)&&(n=nx(e,n),e.parent_||rx(e,n)),e.patches_&&Ah("Patches").generateReplacementPatches_(t[Bs].base_,n,e.patches_,e.inversePatches_)):n=nx(e,t,[]),rT(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==zD?n:void 0}function nx(n,e,t){if(Dv(e))return e;const r=n.immer_.shouldUseStrictIteration(),i=e[Bs];if(!i)return tx(e,(s,a)=>vM(n,i,e,s,a,t),r),e;if(i.scope_!==n)return e;if(!i.modified_)return rx(n,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let a=s,o=!1;i.type_===3&&(a=new Set(s),s.clear(),o=!0),tx(a,(l,u)=>vM(n,i,s,l,u,t,o),r),rx(n,s,!1),t&&n.patches_&&Ah("Patches").generatePatches_(i,t,n.patches_,n.inversePatches_)}return i.copy_}function vM(n,e,t,r,i,s,a){if(i==null||typeof i!="object"&&!a)return;const o=Dv(i);if(!(o&&!a)){if(Zd(i)){const l=s&&e&&e.type_!==3&&!tT(e.assigned_,r)?s.concat(r):void 0,u=nx(n,i,l);if(WD(t,r,u),Zd(u))n.canAutoFreeze_=!1;else return}else a&&t.add(i);if(Ih(i)&&!o){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;nx(n,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(Up(t)?t.has(r):Object.prototype.propertyIsEnumerable.call(t,r))&&rx(n,i)}}}function rx(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&uA(e,t)}function hH(n,e){const t=Array.isArray(n),r={type_:t?1:0,scope_:e?e.scope_:HD(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=hA;t&&(i=[r],s=Hm);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,o}var hA={get(n,e){if(e===Bs)return n;const t=Wu(n);if(!tT(t,e))return fH(n,t,e);const r=t[e];return n.finalized_||!Ih(r)?r:r===D2(n.base_,e)?(F2(n),n.copy_[e]=aT(r,n)):r},has(n,e){return e in Wu(n)},ownKeys(n){return Reflect.ownKeys(Wu(n))},set(n,e,t){const r=KD(Wu(n),e);if(r?.set)return r.set.call(n.draft_,t),!0;if(!n.modified_){const i=D2(Wu(n),e),s=i?.[Bs];if(s&&s.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(aH(t,i)&&(t!==void 0||tT(n.base_,e)))return!0;F2(n),sT(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return D2(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,F2(n),sT(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Wu(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty(){Da(11)},getPrototypeOf(n){return $m(n.base_)},setPrototypeOf(){Da(12)}},Hm={};tx(hA,(n,e)=>{Hm[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Hm.deleteProperty=function(n,e){return Hm.set.call(this,n,e,void 0)};Hm.set=function(n,e,t){return hA.set.call(this,n[0],e,t,n[0])};function D2(n,e){const t=n[Bs];return(t?Wu(t):n)[e]}function fH(n,e,t){const r=KD(e,t);return r?"value"in r?r.value:r.get?.call(n.draft_):void 0}function KD(n,e){if(!(e in n))return;let t=$m(n);for(;t;){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=$m(t)}}function sT(n){n.modified_||(n.modified_=!0,n.parent_&&sT(n.parent_))}function F2(n){n.copy_||(n.copy_=nT(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var dH=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){const s=t;t=e;const a=this;return function(l=s,...u){return a.produce(l,f=>t.call(this,f,...u))}}typeof t!="function"&&Da(6),r!==void 0&&typeof r!="function"&&Da(7);let i;if(Ih(e)){const s=yM(this),a=aT(e,void 0);let o=!0;try{i=t(a),o=!1}finally{o?rT(s):iT(s)}return _M(s,r),xM(i,s)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===zD&&(i=void 0),this.autoFreeze_&&uA(i,!0),r){const s=[],a=[];Ah("Patches").generateReplacementPatches_(e,i,s,a),r(s,a)}return i}else Da(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,l=>e(l,...o));let r,i;return[this.produce(e,t,(a,o)=>{r=a,i=o}),r,i]},typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof n?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),typeof n?.useStrictIteration=="boolean"&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){Ih(n)||Da(8),Zd(n)&&(n=gH(n));const e=yM(this),t=aT(n,void 0);return t[Bs].isManual_=!0,iT(e),t}finishDraft(n,e){const t=n&&n[Bs];(!t||!t.isManual_)&&Da(9);const{scope_:r}=t;return _M(r,e),xM(void 0,r)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}t>-1&&(e=e.slice(t+1));const r=Ah("Patches").applyPatches_;return Zd(n)?r(n,e):this.produce(n,i=>r(i,e))}};function aT(n,e){const t=Up(n)?Ah("MapSet").proxyMap_(n,e):Ov(n)?Ah("MapSet").proxySet_(n,e):hH(n,e);return(e?e.scope_:HD()).drafts_.push(t),t}function gH(n){return Zd(n)||Da(10,n),YD(n)}function YD(n){if(!Ih(n)||Dv(n))return n;const e=n[Bs];let t,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=nT(n,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else t=nT(n,!0);return tx(t,(i,s)=>{WD(t,i,YD(s))},r),e&&(e.finalized_=!1),t}var mH=new dH,pH=mH.produce;const _H=n=>(e,t,r)=>(r.setState=(i,s,...a)=>{const o=typeof i=="function"?pH(i):i;return e(o,s,...a)},n(r.setState,t,r)),w0=_H,Fi=Uo()(w0((n,e)=>({tracking:!1,position:null,heading:null,smoothHeading:null,accuracy:null,speed:null,headingSource:null,watchId:null,firstFix:!0,config:{smoothingFactor:.2,minRotationSpeed:8,centerOnUser:!0,animationDuration:100},startTracking:()=>{n(t=>{t.tracking=!0})},stopTracking:()=>{n(t=>{const{watchId:r}=e();r!==null&&navigator.geolocation.clearWatch(r),t.tracking=!1,t.speed=null,t.headingSource=null,t.watchId=null})},updatePosition:t=>{n(r=>{r.position={lat:t.coords.latitude,lng:t.coords.longitude},r.accuracy=t.coords.accuracy,r.speed=t.coords.speed;const i=15,s=.5;if(!(t.coords.accuracy!==null&&t.coords.accuracy<i)){r.headingSource=null;return}if(t.coords.heading!==null&&t.coords.speed!==null&&t.coords.speed>s){r.headingSource="gps";const o=t.coords.heading;e().updateHeading(o,"gps")}else r.headingSource="compass"})},updateHeading:(t,r="compass")=>{n(i=>{const{smoothHeading:s,config:a}=e();if(s===null){i.smoothHeading=t,i.heading=t;return}let o=t-s;o>180&&(o-=360),o<-180&&(o+=360);const l=r==="compass"?5:3;if(Math.abs(o)<l)return;const f=s+o*(r==="gps"?.5:.35);i.smoothHeading=(f+360)%360,i.heading=t})},setSmoothedHeading:t=>{n(r=>{r.smoothHeading=t,r.heading=t})},setWatchId:t=>{n(r=>{r.watchId=t})},resetFirstFix:()=>{n(t=>{t.firstFix=!1})}}))),XD={"AHN 0.5m":{name:"AHN 0.5m",factory:async()=>{const{createAHNLayerOL:n}=await ct(async()=>{const{createAHNLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createAHNLayerOL:e}},[]);return n()},immediateLoad:!0},Geomorfologie:{name:"Geomorfologie",factory:async()=>{const{createGeomorfologieLayerOL:n}=await ct(async()=>{const{createGeomorfologieLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createGeomorfologieLayerOL:e}},[]);return n()},immediateLoad:!0},Bodemkaart:{name:"Bodemkaart",factory:async()=>{const{createBodemkaartLayerOL:n}=await ct(async()=>{const{createBodemkaartLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createBodemkaartLayerOL:e}},[]);return n()},immediateLoad:!0},IKAW:{name:"IKAW",factory:async()=>{const{createIKAWLayerOL:n}=await ct(async()=>{const{createIKAWLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createIKAWLayerOL:e}},[]);return n()},immediateLoad:!0},"FAMKE Steentijd":{name:"FAMKE Steentijd",factory:async()=>{const{createFAMKESteentijdLayerOL:n}=await ct(async()=>{const{createFAMKESteentijdLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createFAMKESteentijdLayerOL:e}},[]);return n()},immediateLoad:!0},"Archeo Landschappen":{name:"Archeo Landschappen",factory:async()=>{const{createArcheoLandschappenLayerOL:n}=await ct(async()=>{const{createArcheoLandschappenLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createArcheoLandschappenLayerOL:e}},[]);return n()},immediateLoad:!0},Essen:{name:"Essen",factory:async()=>{const{createEssenLayerOL:n}=await ct(async()=>{const{createEssenLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createEssenLayerOL:e}},[]);return n()},immediateLoad:!0},Rijksmonumenten:{name:"Rijksmonumenten",factory:async()=>{const{createRijksmonumentenLayerOL:n}=await ct(async()=>{const{createRijksmonumentenLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createRijksmonumentenLayerOL:e}},[]);return n()},immediateLoad:!0},"Archeo Onderzoeken":{name:"Archeo Onderzoeken",factory:async()=>{const{createArcheoOnderzoekenLayerOL:n}=await ct(async()=>{const{createArcheoOnderzoekenLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createArcheoOnderzoekenLayerOL:e}},[]);return n()},immediateLoad:!0},Werelderfgoed:{name:"Werelderfgoed",factory:async()=>{const{createWerelderfgoedLayerOL:n}=await ct(async()=>{const{createWerelderfgoedLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createWerelderfgoedLayerOL:e}},[]);return n()},immediateLoad:!0},Terpen:{name:"Terpen",factory:async()=>{const{createTerpenLayerOL:n}=await ct(async()=>{const{createTerpenLayerOL:e}=await import("./terpenOL-DSO6-guv.js");return{createTerpenLayerOL:e}},[]);return n()},immediateLoad:!0},Verdedigingslinies:{name:"Verdedigingslinies",factory:async()=>{const{createLiniesLayerOL:n}=await ct(async()=>{const{createLiniesLayerOL:e}=await import("./verdedigingswerkenOL-CPeYgttB.js");return{createLiniesLayerOL:e}},[]);return n()},immediateLoad:!0},Inundatiegebieden:{name:"Inundatiegebieden",factory:async()=>{const{createInundatiesLayerOL:n}=await ct(async()=>{const{createInundatiesLayerOL:e}=await import("./verdedigingswerkenOL-CPeYgttB.js");return{createInundatiesLayerOL:e}},[]);return n()},immediateLoad:!0},"Militaire Objecten":{name:"Militaire Objecten",factory:async()=>{const{createMilitaireObjectenLayerOL:n}=await ct(async()=>{const{createMilitaireObjectenLayerOL:e}=await import("./verdedigingswerkenOL-CPeYgttB.js");return{createMilitaireObjectenLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 800 n.Chr.":{name:"Paleokaart 800 n.Chr.",factory:async()=>{const{createPaleo800ncLayerOL:n}=await ct(async()=>{const{createPaleo800ncLayerOL:e}=await import("./paleokaartOL-CjNTPFtd.js");return{createPaleo800ncLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 100 n.Chr.":{name:"Paleokaart 100 n.Chr.",factory:async()=>{const{createPaleo100ncLayerOL:n}=await ct(async()=>{const{createPaleo100ncLayerOL:e}=await import("./paleokaartOL-CjNTPFtd.js");return{createPaleo100ncLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 500 v.Chr.":{name:"Paleokaart 500 v.Chr.",factory:async()=>{const{createPaleo500vcLayerOL:n}=await ct(async()=>{const{createPaleo500vcLayerOL:e}=await import("./paleokaartOL-CjNTPFtd.js");return{createPaleo500vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 1500 v.Chr.":{name:"Paleokaart 1500 v.Chr.",factory:async()=>{const{createPaleo1500vcLayerOL:n}=await ct(async()=>{const{createPaleo1500vcLayerOL:e}=await import("./paleokaartOL-CjNTPFtd.js");return{createPaleo1500vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 2750 v.Chr.":{name:"Paleokaart 2750 v.Chr.",factory:async()=>{const{createPaleo2750vcLayerOL:n}=await ct(async()=>{const{createPaleo2750vcLayerOL:e}=await import("./paleokaartOL-CjNTPFtd.js");return{createPaleo2750vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 5500 v.Chr.":{name:"Paleokaart 5500 v.Chr.",factory:async()=>{const{createPaleo5500vcLayerOL:n}=await ct(async()=>{const{createPaleo5500vcLayerOL:e}=await import("./paleokaartOL-CjNTPFtd.js");return{createPaleo5500vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 9000 v.Chr.":{name:"Paleokaart 9000 v.Chr.",factory:async()=>{const{createPaleo9000vcLayerOL:n}=await ct(async()=>{const{createPaleo9000vcLayerOL:e}=await import("./paleokaartOL-CjNTPFtd.js");return{createPaleo9000vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Religieus Erfgoed":{name:"Religieus Erfgoed",factory:async()=>{const{createReligieusErfgoedLayerOL:n}=await ct(async()=>{const{createReligieusErfgoedLayerOL:e}=await import("./religieusErfgoedOL-BDr_OlQC.js");return{createReligieusErfgoedLayerOL:e}},[]);return n()},immediateLoad:!0},"AHN4 Hoogtekaart Kleur":{name:"AHN4 Hoogtekaart Kleur",factory:async()=>{const{createAHN4ColorElevationLayerOL:n}=await ct(async()=>{const{createAHN4ColorElevationLayerOL:e}=await import("./hillshadeLayers-D-dO9f6l.js");return{createAHN4ColorElevationLayerOL:e}},[]);return n()},immediateLoad:!0},"AHN4 Hillshade NL":{name:"AHN4 Hillshade NL",factory:async()=>{const{createAHN4HillshadeLayerOL:n}=await ct(async()=>{const{createAHN4HillshadeLayerOL:e}=await import("./hillshadeLayers-D-dO9f6l.js");return{createAHN4HillshadeLayerOL:e}},[]);return n()},immediateLoad:!0},"AHN4 Multi-Hillshade NL":{name:"AHN4 Multi-Hillshade NL",factory:async()=>{const{createAHN4MultiHillshadeLayerOL:n}=await ct(async()=>{const{createAHN4MultiHillshadeLayerOL:e}=await import("./hillshadeLayers-D-dO9f6l.js");return{createAHN4MultiHillshadeLayerOL:e}},[]);return n()},immediateLoad:!0},"World Hillshade":{name:"World Hillshade",factory:async()=>{const{createWorldHillshadeLayerOL:n}=await ct(async()=>{const{createWorldHillshadeLayerOL:e}=await import("./hillshadeLayers-D-dO9f6l.js");return{createWorldHillshadeLayerOL:e}},[]);return n()},immediateLoad:!0},Gewaspercelen:{name:"Gewaspercelen",factory:async()=>{const{createGewaspercelenLayerOL:n}=await ct(async()=>{const{createGewaspercelenLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createGewaspercelenLayerOL:e}},[]);return n()},immediateLoad:!0},"Kadastrale Grenzen":{name:"Kadastrale Grenzen",factory:async()=>{const{createKadastraleKaartLayerOL:n}=await ct(async()=>{const{createKadastraleKaartLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createKadastraleKaartLayerOL:e}},[]);return n()},immediateLoad:!0},Scheepswrakken:{name:"Scheepswrakken",factory:async()=>{const{createScheepswrakkenLayerOL:n}=await ct(async()=>{const{createScheepswrakkenLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createScheepswrakkenLayerOL:e}},[]);return n()},immediateLoad:!0},"Woonheuvels ZH":{name:"Woonheuvels ZH",factory:async()=>{const{createWoonheuvelsLayerOL:n}=await ct(async()=>{const{createWoonheuvelsLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createWoonheuvelsLayerOL:e}},[]);return n()},immediateLoad:!0},"Romeinse Forten":{name:"Romeinse Forten",factory:async()=>{const{createRomeinseFortenLayerOL:n}=await ct(async()=>{const{createRomeinseFortenLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createRomeinseFortenLayerOL:e}},[]);return n()},immediateLoad:!0},Windmolens:{name:"Windmolens",factory:async()=>{const{createWindmolensLayerOL:n}=await ct(async()=>{const{createWindmolensLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createWindmolensLayerOL:e}},[]);return n()},immediateLoad:!0},Erfgoedlijnen:{name:"Erfgoedlijnen",factory:async()=>{const{createErfgoedlijnenLayerOL:n}=await ct(async()=>{const{createErfgoedlijnenLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createErfgoedlijnenLayerOL:e}},[]);return n()},immediateLoad:!0},"Oude Kernen":{name:"Oude Kernen",factory:async()=>{const{createOudeKernenLayerOL:n}=await ct(async()=>{const{createOudeKernenLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createOudeKernenLayerOL:e}},[]);return n()},immediateLoad:!0},"Relictenkaart Punten":{name:"Relictenkaart Punten",factory:async()=>{const{createRelictenkaartPuntenLayerOL:n}=await ct(async()=>{const{createRelictenkaartPuntenLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createRelictenkaartPuntenLayerOL:e}},[]);return n()},immediateLoad:!0},"Relictenkaart Lijnen":{name:"Relictenkaart Lijnen",factory:async()=>{const{createRelictenkaartLijnenLayerOL:n}=await ct(async()=>{const{createRelictenkaartLijnenLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createRelictenkaartLijnenLayerOL:e}},[]);return n()},immediateLoad:!0},"Relictenkaart Vlakken":{name:"Relictenkaart Vlakken",factory:async()=>{const{createRelictenkaartVlakkenLayerOL:n}=await ct(async()=>{const{createRelictenkaartVlakkenLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createRelictenkaartVlakkenLayerOL:e}},[]);return n()},immediateLoad:!0},"Verdronken Dorpen":{name:"Verdronken Dorpen",factory:async()=>{const{createVerdronkenDorpenLayerOL:n}=await ct(async()=>{const{createVerdronkenDorpenLayerOL:e}=await import("./pdokWMSLayers-HOja7sKA.js");return{createVerdronkenDorpenLayerOL:e}},[]);return n()},immediateLoad:!0},"AMK Monumenten":{name:"AMK Monumenten",factory:async()=>{const{createAMKLayerOL:n}=await ct(async()=>{const{createAMKLayerOL:e}=await import("./amkOL-C-ZXLStU.js");return{createAMKLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1},"AMK Romeins":{name:"AMK Romeins",factory:async()=>{const{createAMKRomeinsLayerOL:n}=await ct(async()=>{const{createAMKRomeinsLayerOL:e}=await import("./amkOL-C-ZXLStU.js");return{createAMKRomeinsLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1},"AMK Steentijd":{name:"AMK Steentijd",factory:async()=>{const{createAMKSteentijdLayerOL:n}=await ct(async()=>{const{createAMKSteentijdLayerOL:e}=await import("./amkOL-C-ZXLStU.js");return{createAMKSteentijdLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1},"AMK Vroege ME":{name:"AMK Vroege ME",factory:async()=>{const{createAMKVroegeMELayerOL:n}=await ct(async()=>{const{createAMKVroegeMELayerOL:e}=await import("./amkOL-C-ZXLStU.js");return{createAMKVroegeMELayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1},"AMK Late ME":{name:"AMK Late ME",factory:async()=>{const{createAMKLateMELayerOL:n}=await ct(async()=>{const{createAMKLateMELayerOL:e}=await import("./amkOL-C-ZXLStU.js");return{createAMKLateMELayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1},"AMK Overig":{name:"AMK Overig",factory:async()=>{const{createAMKOverigLayerOL:n}=await ct(async()=>{const{createAMKOverigLayerOL:e}=await import("./amkOL-C-ZXLStU.js");return{createAMKOverigLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1},"Romeinse wegen":{name:"Romeinse wegen",factory:async()=>{const{createRomeinseWegenLayerOL:n}=await ct(async()=>{const{createRomeinseWegenLayerOL:e}=await import("./romeinsOL-CHiWIkoi.js");return{createRomeinseWegenLayerOL:e}},__vite__mapDeps([2,1]));return n()},immediateLoad:!1},"Romeinse wegen (Wereld)":{name:"Romeinse wegen (Wereld)",factory:async()=>{const{createRomeinseWegenWereldLayerOL:n}=await ct(async()=>{const{createRomeinseWegenWereldLayerOL:e}=await import("./romeinsOL-CHiWIkoi.js");return{createRomeinseWegenWereldLayerOL:e}},__vite__mapDeps([2,1]));return n()},immediateLoad:!1},Kastelen:{name:"Kastelen",factory:async()=>{const{createKastelenLayerOL:n}=await ct(async()=>{const{createKastelenLayerOL:e}=await import("./kastelenOL-CMuMGdHT.js");return{createKastelenLayerOL:e}},__vite__mapDeps([3,4]));return n()},immediateLoad:!1},Veengebieden:{name:"Veengebieden",factory:async()=>{const{createVeengebiedenLayerOL:n}=await ct(async()=>{const{createVeengebiedenLayerOL:e}=await import("./veengebiedenOL-HQ5hU-a3.js");return{createVeengebiedenLayerOL:e}},[]);return n()},immediateLoad:!1},Hunebedden:{name:"Hunebedden",factory:async()=>{const{createHunebeddenLayerOL:n}=await ct(async()=>{const{createHunebeddenLayerOL:e}=await import("./hunebeddenOL-BOufgyHU.js");return{createHunebeddenLayerOL:e}},__vite__mapDeps([5,4]));return n()},immediateLoad:!1},"UIKAV Punten":{name:"UIKAV Punten",factory:async()=>{const{createUIKAVArcheoPuntenLayerOL:n}=await ct(async()=>{const{createUIKAVArcheoPuntenLayerOL:e}=await import("./uikavArcheoPuntenOL-trWAMu2K.js");return{createUIKAVArcheoPuntenLayerOL:e}},__vite__mapDeps([6,1,4]));return n()},immediateLoad:!1},"UIKAV Vlakken":{name:"UIKAV Vlakken",factory:async()=>{const{createUIKAVVlakkenLayerOL:n}=await ct(async()=>{const{createUIKAVVlakkenLayerOL:e}=await import("./uikavVlakkenOL-BRljmzKJ.js");return{createUIKAVVlakkenLayerOL:e}},__vite__mapDeps([7,1]));return n()},immediateLoad:!1},"UIKAV Buffer":{name:"UIKAV Buffer",factory:async()=>{const{createUIKAVBufferlaagLayerOL:n}=await ct(async()=>{const{createUIKAVBufferlaagLayerOL:e}=await import("./uikavBufferlaagOL-C1xPcP7t.js");return{createUIKAVBufferlaagLayerOL:e}},__vite__mapDeps([8,1]));return n()},immediateLoad:!1},"UIKAV Expert":{name:"UIKAV Expert",factory:async()=>{const{createUIKAVExpertLayerOL:n}=await ct(async()=>{const{createUIKAVExpertLayerOL:e}=await import("./uikavExpertOL-DoZrpeB-.js");return{createUIKAVExpertLayerOL:e}},__vite__mapDeps([9,1]));return n()},immediateLoad:!1},"UIKAV Indeling":{name:"UIKAV Indeling",factory:async()=>{const{createUIKAVUiterwaardenLayerOL:n}=await ct(async()=>{const{createUIKAVUiterwaardenLayerOL:e}=await import("./uikavUiterwaardenOL-DrA1r5OL.js");return{createUIKAVUiterwaardenLayerOL:e}},__vite__mapDeps([10,1]));return n()},immediateLoad:!1},Speeltuinen:{name:"Speeltuinen",factory:async()=>{const{createSpeeltuinenLayerOL:n}=await ct(async()=>{const{createSpeeltuinenLayerOL:e}=await import("./speeltuinenOL-BbXdeAWj.js");return{createSpeeltuinenLayerOL:e}},__vite__mapDeps([11,1,4]));return n()},immediateLoad:!1},Musea:{name:"Musea",factory:async()=>{const{createMuseaLayerOL:n}=await ct(async()=>{const{createMuseaLayerOL:e}=await import("./museaOL-D95ssxWg.js");return{createMuseaLayerOL:e}},__vite__mapDeps([12,1,4]));return n()},immediateLoad:!1},Strandjes:{name:"Strandjes",factory:async()=>{const{createStrandjesLayerOL:n}=await ct(async()=>{const{createStrandjesLayerOL:e}=await import("./strandjesOL-DaUkd77w.js");return{createStrandjesLayerOL:e}},__vite__mapDeps([13,1]));return n()},immediateLoad:!1},Parken:{name:"Parken",factory:async()=>{const{createParkenLayerOL:n}=await ct(async()=>{const{createParkenLayerOL:e}=await import("./parkenOL-BYquY6jB.js");return{createParkenLayerOL:e}},__vite__mapDeps([14,1]));return n()},immediateLoad:!1},Kringloopwinkels:{name:"Kringloopwinkels",factory:async()=>{const{createKringloopwinkelsLayerOL:n}=await ct(async()=>{const{createKringloopwinkelsLayerOL:e}=await import("./kringloopwinkelsOL-CjfZrKnd.js");return{createKringloopwinkelsLayerOL:e}},__vite__mapDeps([15,4]));return n()},immediateLoad:!1},"Fossielen Nederland":{name:"Fossielen Nederland",factory:async()=>{const{createFossielenLayerOL:n}=await ct(async()=>{const{createFossielenLayerOL:e}=await import("./fossielenOL-Cx9eYLDK.js");return{createFossielenLayerOL:e}},__vite__mapDeps([16,17,4]));return n()},immediateLoad:!1},"Fossielen Belgi":{name:"Fossielen Belgi",factory:async()=>{const{createFossielenBelgieLayerOL:n}=await ct(async()=>{const{createFossielenBelgieLayerOL:e}=await import("./fossielenBelgieOL-Db0Gn6zD.js");return{createFossielenBelgieLayerOL:e}},__vite__mapDeps([18,17,4]));return n()},immediateLoad:!1},"Fossielen Duitsland":{name:"Fossielen Duitsland",factory:async()=>{const{createFossielenDuitslandLayerOL:n}=await ct(async()=>{const{createFossielenDuitslandLayerOL:e}=await import("./fossielenDuitslandOL-CAxKRiDT.js");return{createFossielenDuitslandLayerOL:e}},__vite__mapDeps([19,17,4]));return n()},immediateLoad:!1},"Fossielen Frankrijk":{name:"Fossielen Frankrijk",factory:async()=>{const{createFossielenFrankrijkLayerOL:n}=await ct(async()=>{const{createFossielenFrankrijkLayerOL:e}=await import("./fossielenFrankrijkOL-GPEDVAr1.js");return{createFossielenFrankrijkLayerOL:e}},__vite__mapDeps([20,17,4]));return n()},immediateLoad:!1},"WWII Bunkers":{name:"WWII Bunkers",factory:async()=>{const{createBunkersLayerOL:n}=await ct(async()=>{const{createBunkersLayerOL:e}=await import("./bunkersOL-LxPnj9H3.js");return{createBunkersLayerOL:e}},__vite__mapDeps([21,4]));return n()},immediateLoad:!1},Grafheuvels:{name:"Grafheuvels",factory:async()=>{const{createGrafheuvelsLayerOL:n}=await ct(async()=>{const{createGrafheuvelsLayerOL:e}=await import("./grafheuvelsOL-Bzv8G2f-.js");return{createGrafheuvelsLayerOL:e}},__vite__mapDeps([22,4]));return n()},immediateLoad:!1},Slagvelden:{name:"Slagvelden",factory:async()=>{const{createSlagveldenLayerOL:n}=await ct(async()=>{const{createSlagveldenLayerOL:e}=await import("./slagveldenOL-w-y1IM2d.js");return{createSlagveldenLayerOL:e}},[]);return n()},immediateLoad:!1},"Militaire Vliegvelden":{name:"Militaire Vliegvelden",factory:async()=>{const{createVliegveldenLayerOL:n}=await ct(async()=>{const{createVliegveldenLayerOL:e}=await import("./vliegveldenOL-JxUTne7T.js");return{createVliegveldenLayerOL:e}},[]);return n()},immediateLoad:!1}};function yH(){return Object.values(XD).filter(n=>n.immediateLoad)}const Hs=Uo()(w0((n,e)=>({map:null,rotation:0,rotationEnabled:!0,setMap:t=>{n(r=>{r.map=t})},setRotation:t=>{n(r=>{if(r.rotation=t,r.map&&r.rotationEnabled){const i=t*Math.PI/180;r.map.getView().setRotation(i)}})},enableRotation:()=>{n(t=>{t.rotationEnabled=!0})},disableRotation:()=>{n(t=>{t.rotationEnabled=!1,t.rotation=0,t.map&&t.map.getView().animate({rotation:0,duration:500})})}}))),Kr=Uo()(w0((n,e)=>({visible:{"CartoDB (licht)":!0,OpenStreetMap:!1,Luchtfoto:!1,"Labels Overlay":!1,"TMK 1850":!1,"Bonnebladen 1900":!1,Hunebedden:!1,"FAMKE Steentijd":!1,Grafheuvels:!1,Terpen:!1,"AMK Monumenten":!1,"AMK Romeins":!1,"AMK Steentijd":!1,"AMK Vroege ME":!1,"AMK Late ME":!1,"AMK Overig":!1,"Romeinse wegen":!1,"Romeinse wegen (Wereld)":!1,Kastelen:!1,IKAW:!1,"Archeo Landschappen":!1,Essen:!1,Rijksmonumenten:!1,Werelderfgoed:!1,"WWII Bunkers":!1,Slagvelden:!1,"Militaire Vliegvelden":!1,Verdedigingslinies:!1,Inundatiegebieden:!1,"Militaire Objecten":!1,"Paleokaart 800 n.Chr.":!1,"Paleokaart 100 n.Chr.":!1,"Paleokaart 500 v.Chr.":!1,"Paleokaart 1500 v.Chr.":!1,"Paleokaart 2750 v.Chr.":!1,"Paleokaart 5500 v.Chr.":!1,"Paleokaart 9000 v.Chr.":!1,"Religieus Erfgoed":!1,"UIKAV Punten":!1,"UIKAV Vlakken":!1,"UIKAV Buffer":!1,"UIKAV Expert":!1,"UIKAV Indeling":!1,"AHN4 Hoogtekaart Kleur":!1,"AHN4 Hillshade NL":!1,"AHN4 Multi-Hillshade NL":!1,"AHN 0.5m":!1,"World Hillshade":!1,Veengebieden:!1,Geomorfologie:!1,Bodemkaart:!1,"Fossielen Nederland":!1,"Fossielen Belgi":!1,"Fossielen Duitsland":!1,"Fossielen Frankrijk":!1,Parken:!1,Speeltuinen:!1,Musea:!1,Strandjes:!1,Gewaspercelen:!1,"Kadastrale Grenzen":!1,Scheepswrakken:!1,"Woonheuvels ZH":!1,"Romeinse Forten":!1,Windmolens:!1,Erfgoedlijnen:!1,"Oude Kernen":!1,"Relictenkaart Punten":!1,"Relictenkaart Lijnen":!1,"Relictenkaart Vlakken":!1,"Verdronken Dorpen":!1,"Mijn Vondsten":!0},opacity:{"AHN4 Hoogtekaart Kleur":.85,"AHN4 Hillshade NL":.7,"AHN4 Multi-Hillshade NL":.7,"AHN 0.5m":.7,"World Hillshade":.7,"TMK 1850":.8,"Bonnebladen 1900":.8,Geomorfologie:.5,Bodemkaart:.6,Veengebieden:.6,IKAW:.5,"Archeo Landschappen":.5,Essen:.6,Terpen:.7,"Paleokaart 9000 v.Chr.":.7,"Paleokaart 5500 v.Chr.":.7,"Paleokaart 2750 v.Chr.":.7,"Paleokaart 1500 v.Chr.":.7,"Paleokaart 500 v.Chr.":.7,"Paleokaart 100 n.Chr.":.7,"Paleokaart 800 n.Chr.":.7,Verdedigingslinies:.7,Inundatiegebieden:.5,"Militaire Objecten":.8,"Religieus Erfgoed":.8,Gewaspercelen:.6,"Kadastrale Grenzen":.7,Erfgoedlijnen:.7,"Oude Kernen":.6,"Relictenkaart Vlakken":.5},loadingState:{},layers:{},toggleLayer:t=>{const r=e(),i=!r.visible[t];n(s=>{s.visible[t]=i}),i&&!r.layers[t]?e().loadLayer(t):r.layers[t]&&r.layers[t].setVisible(i)},setLayerVisibility:(t,r)=>{const i=e();n(s=>{s.visible[t]=r;const a=s.layers[t];a&&a.setVisible(r)}),r&&!i.layers[t]&&e().loadLayer(t)},setLayerOpacity:(t,r)=>{n(i=>{i.opacity[t]=r;const s=i.layers[t];s&&s.setOpacity(r)})},registerLayer:(t,r)=>{n(i=>{i.layers[t]=r,i.loadingState[t]="loaded",i.visible[t]!==void 0&&r.setVisible(i.visible[t]),i.opacity[t]!==void 0&&r.setOpacity(i.opacity[t])})},unregisterLayer:t=>{n(r=>{delete r.layers[t],delete r.loadingState[t]})},loadLayer:async t=>{const r=e();if(r.loadingState[t]==="loading"||r.layers[t])return;const i=XD[t];if(!i){console.warn(` Layer "${t}" not found in registry`);return}const s=Hs.getState().map;if(!s){console.warn(` Cannot load layer "${t}": map not initialized`);return}n(a=>{a.loadingState[t]="loading"}),console.log(` Loading layer: ${t}...`);try{const a=await i.factory();if(!a)throw new Error("Factory returned null");const o=e();a.setVisible(o.visible[t]??!1),o.opacity[t]!==void 0&&a.setOpacity(o.opacity[t]),s.addLayer(a),n(l=>{l.layers[t]=a,l.loadingState[t]="loaded"}),console.log(` Layer loaded: ${t}`)}catch(a){console.error(` Failed to load layer "${t}":`,a),n(o=>{o.loadingState[t]="error"})}}}))),ja=Uo()(w0((n,e)=>({layerControlOpen:!1,legendOpen:!1,backgroundsPanelOpen:!1,themesPanelOpen:!1,settingsPanelOpen:!1,infoPanelOpen:!1,presetsPanelOpen:!1,vondstFormOpen:!1,vondstFormLocation:null,vondstDashboardOpen:!1,collapsedCategories:new Set,closeAllPanels:()=>{n(t=>{t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1})},toggleLayerControl:()=>{n(t=>{t.layerControlOpen=!t.layerControlOpen})},toggleLegend:()=>{n(t=>{t.legendOpen=!t.legendOpen})},toggleBackgroundsPanel:()=>{n(t=>{const r=t.backgroundsPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.backgroundsPanelOpen=!0)})},toggleThemesPanel:()=>{n(t=>{const r=t.themesPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.themesPanelOpen=!0)})},toggleSettingsPanel:()=>{n(t=>{const r=t.settingsPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.settingsPanelOpen=!0)})},toggleInfoPanel:()=>{n(t=>{const r=t.infoPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.infoPanelOpen=!0)})},togglePresetsPanel:()=>{n(t=>{const r=t.presetsPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.presetsPanelOpen=!0)})},toggleCategory:t=>{n(r=>{r.collapsedCategories.has(t)?r.collapsedCategories.delete(t):r.collapsedCategories.add(t)})},setLayerControlOpen:t=>{n(r=>{r.layerControlOpen=t})},setLegendOpen:t=>{n(r=>{r.legendOpen=t})},openVondstForm:t=>{n(r=>{r.backgroundsPanelOpen=!1,r.themesPanelOpen=!1,r.settingsPanelOpen=!1,r.infoPanelOpen=!1,r.presetsPanelOpen=!1,r.vondstFormOpen=!0,r.vondstFormLocation=t||null})},closeVondstForm:()=>{n(t=>{t.vondstFormOpen=!1,t.vondstFormLocation=null})},toggleVondstDashboard:()=>{n(t=>{const r=t.vondstDashboardOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,t.vondstDashboardOpen=!r})}}))),qD=Uo()(w0(n=>({user:null,loading:!0,error:null,setUser:e=>{n(t=>{t.user=e,t.loading=!1})},setLoading:e=>{n(t=>{t.loading=e})},setError:e=>{n(t=>{t.error=e})}}))),xH=()=>{};var EM={};const ZD=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},vH=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],o=n[t++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},QD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,o=a?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,f=s>>2,d=(s&3)<<4|o>>4;let g=(o&15)<<2|u>>6,p=u&63;l||(p=64,a||(g=64)),r.push(t[f],t[d],t[g],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ZD(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):vH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],o=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||o==null||u==null||d==null)throw new EH;const g=s<<2|o>>4;if(r.push(g),u!==64){const p=o<<4&240|u>>2;if(r.push(p),d!==64){const v=u<<6&192|d;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class EH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wH=function(n){const e=ZD(n);return QD.encodeByteArray(e,!0)},ix=function(n){return wH(n).replace(/\./g,"")},JD=function(n){try{return QD.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function e5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const SH=()=>e5().__FIREBASE_DEFAULTS__,TH=()=>{if(typeof process>"u"||typeof EM>"u")return;const n=EM.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},IH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&JD(n[1]);return e&&JSON.parse(e)},Fv=()=>{try{return xH()||SH()||TH()||IH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},t5=n=>Fv()?.emulatorHosts?.[n],n5=n=>{const e=t5(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},r5=()=>Fv()?.config,i5=n=>Fv()?.[`_${n}`];class AH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Xh(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fA(n){return(await fetch(n,{credentials:"include"})).ok}function s5(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ix(JSON.stringify(t)),ix(JSON.stringify(a)),""].join(".")}const rm={};function RH(){const n={prod:[],emulator:[]};for(const e of Object.keys(rm))rm[e]?n.emulator.push(e):n.prod.push(e);return n}function CH(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let wM=!1;function dA(n,e){if(typeof window>"u"||typeof document>"u"||!Xh(window.location.host)||rm[n]===e||rm[n]||wM)return;rm[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",s=RH().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,p){g.setAttribute("width","24"),g.setAttribute("id",p),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{wM=!0,a()},g}function f(g,p){g.setAttribute("id",p),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function d(){const g=CH(r),p=t("text"),v=document.getElementById(p)||document.createElement("span"),y=t("learnmore"),E=document.getElementById(y)||document.createElement("a"),T=t("preprendIcon"),R=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const M=g.element;o(M),f(E,y);const k=u();l(R,T),M.append(R,v,E,k),document.body.appendChild(M)}s?(v.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Or(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Or())}function a5(){const n=Fv()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bH(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MH(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function kH(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NH(){const n=Or();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function o5(){return!a5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function l5(){return!a5()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function c5(){try{return typeof indexedDB=="object"}catch{return!1}}function LH(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const OH="FirebaseError";class zo extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=OH,Object.setPrototypeOf(this,zo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zp.prototype.create)}}class zp{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?DH(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new zo(i,o,r)}}function DH(n,e){return n.replace(FH,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const FH=/\{\$([^}]+)}/g;function VH(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Rh(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(SM(s)&&SM(a)){if(!Rh(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function SM(n){return n!==null&&typeof n=="object"}function $p(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function jH(n,e){const t=new GH(n,e);return t.subscribe.bind(t)}class GH{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");BH(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=V2),i.error===void 0&&(i.error=V2),i.complete===void 0&&(i.complete=V2);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BH(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function V2(){}function qr(n){return n&&n._delegate?n._delegate:n}class qc{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Hu="[DEFAULT]";class UH{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new AH;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($H(e))try{this.getOrInitializeService({instanceIdentifier:Hu})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Hu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hu){return this.instances.has(e)}getOptions(e=Hu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zH(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hu){return this.component?this.component.multipleInstances?e:Hu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zH(n){return n===Hu?void 0:n}function $H(n){return n.instantiationMode==="EAGER"}class WH{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new UH(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ut;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ut||(Ut={}));const HH={debug:Ut.DEBUG,verbose:Ut.VERBOSE,info:Ut.INFO,warn:Ut.WARN,error:Ut.ERROR,silent:Ut.SILENT},KH=Ut.INFO,YH={[Ut.DEBUG]:"log",[Ut.VERBOSE]:"log",[Ut.INFO]:"info",[Ut.WARN]:"warn",[Ut.ERROR]:"error"},XH=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=YH[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gA{constructor(e){this.name=e,this._logLevel=KH,this._logHandler=XH,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ut.DEBUG,...e),this._logHandler(this,Ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ut.VERBOSE,...e),this._logHandler(this,Ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ut.INFO,...e),this._logHandler(this,Ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ut.WARN,...e),this._logHandler(this,Ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ut.ERROR,...e),this._logHandler(this,Ut.ERROR,...e)}}const qH=(n,e)=>e.some(t=>n instanceof t);let TM,IM;function ZH(){return TM||(TM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QH(){return IM||(IM=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const u5=new WeakMap,oT=new WeakMap,h5=new WeakMap,j2=new WeakMap,mA=new WeakMap;function JH(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Gc(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&u5.set(t,n)}).catch(()=>{}),mA.set(e,n),e}function eK(n){if(oT.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});oT.set(n,e)}let lT={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return oT.get(n);if(e==="objectStoreNames")return n.objectStoreNames||h5.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gc(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function tK(n){lT=n(lT)}function nK(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(G2(this),e,...t);return h5.set(r,e.sort?e.sort():[e]),Gc(r)}:QH().includes(n)?function(...e){return n.apply(G2(this),e),Gc(u5.get(this))}:function(...e){return Gc(n.apply(G2(this),e))}}function rK(n){return typeof n=="function"?nK(n):(n instanceof IDBTransaction&&eK(n),qH(n,ZH())?new Proxy(n,lT):n)}function Gc(n){if(n instanceof IDBRequest)return JH(n);if(j2.has(n))return j2.get(n);const e=rK(n);return e!==n&&(j2.set(n,e),mA.set(e,n)),e}const G2=n=>mA.get(n);function iK(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),o=Gc(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Gc(a.result),l.oldVersion,l.newVersion,Gc(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const sK=["get","getKey","getAll","getAllKeys","count"],aK=["put","add","delete","clear"],B2=new Map;function AM(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(B2.get(e))return B2.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=aK.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||sK.includes(t)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[t](...o),i&&l.done]))[0]};return B2.set(e,s),s}tK(n=>({...n,get:(e,t,r)=>AM(e,t)||n.get(e,t,r),has:(e,t)=>!!AM(e,t)||n.has(e,t)}));class oK{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(lK(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function lK(n){return n.getComponent()?.type==="VERSION"}const cT="@firebase/app",RM="0.14.6";const Rl=new gA("@firebase/app"),cK="@firebase/app-compat",uK="@firebase/analytics-compat",hK="@firebase/analytics",fK="@firebase/app-check-compat",dK="@firebase/app-check",gK="@firebase/auth",mK="@firebase/auth-compat",pK="@firebase/database",_K="@firebase/data-connect",yK="@firebase/database-compat",xK="@firebase/functions",vK="@firebase/functions-compat",EK="@firebase/installations",wK="@firebase/installations-compat",SK="@firebase/messaging",TK="@firebase/messaging-compat",IK="@firebase/performance",AK="@firebase/performance-compat",RK="@firebase/remote-config",CK="@firebase/remote-config-compat",PK="@firebase/storage",bK="@firebase/storage-compat",MK="@firebase/firestore",kK="@firebase/ai",NK="@firebase/firestore-compat",LK="firebase",OK="12.6.0";const uT="[DEFAULT]",DK={[cT]:"fire-core",[cK]:"fire-core-compat",[hK]:"fire-analytics",[uK]:"fire-analytics-compat",[dK]:"fire-app-check",[fK]:"fire-app-check-compat",[gK]:"fire-auth",[mK]:"fire-auth-compat",[pK]:"fire-rtdb",[_K]:"fire-data-connect",[yK]:"fire-rtdb-compat",[xK]:"fire-fn",[vK]:"fire-fn-compat",[EK]:"fire-iid",[wK]:"fire-iid-compat",[SK]:"fire-fcm",[TK]:"fire-fcm-compat",[IK]:"fire-perf",[AK]:"fire-perf-compat",[RK]:"fire-rc",[CK]:"fire-rc-compat",[PK]:"fire-gcs",[bK]:"fire-gcs-compat",[MK]:"fire-fst",[NK]:"fire-fst-compat",[kK]:"fire-vertex","fire-js":"fire-js",[LK]:"fire-js-all"};const sx=new Map,FK=new Map,hT=new Map;function CM(n,e){try{n.container.addComponent(e)}catch(t){Rl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ch(n){const e=n.name;if(hT.has(e))return Rl.debug(`There were multiple attempts to register component ${e}.`),!1;hT.set(e,n);for(const t of sx.values())CM(t,n);for(const t of FK.values())CM(t,n);return!0}function Vv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function la(n){return n==null?!1:n.settings!==void 0}const VK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bc=new zp("app","Firebase",VK);class jK{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bc.create("app-deleted",{appName:this._name})}}const qh=OK;function f5(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:uT,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Bc.create("bad-app-name",{appName:String(i)});if(t||(t=r5()),!t)throw Bc.create("no-options");const s=sx.get(i);if(s){if(Rh(t,s.options)&&Rh(r,s.config))return s;throw Bc.create("duplicate-app",{appName:i})}const a=new WH(i);for(const l of hT.values())a.addComponent(l);const o=new jK(t,r,a);return sx.set(i,o),o}function pA(n=uT){const e=sx.get(n);if(!e&&n===uT&&r5())return f5();if(!e)throw Bc.create("no-app",{appName:n});return e}function To(n,e,t){let r=DK[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rl.warn(a.join(" "));return}Ch(new qc(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const GK="firebase-heartbeat-database",BK=1,Km="firebase-heartbeat-store";let U2=null;function d5(){return U2||(U2=iK(GK,BK,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Km)}catch(t){console.warn(t)}}}}).catch(n=>{throw Bc.create("idb-open",{originalErrorMessage:n.message})})),U2}async function UK(n){try{const t=(await d5()).transaction(Km),r=await t.objectStore(Km).get(g5(n));return await t.done,r}catch(e){if(e instanceof zo)Rl.warn(e.message);else{const t=Bc.create("idb-get",{originalErrorMessage:e?.message});Rl.warn(t.message)}}}async function PM(n,e){try{const r=(await d5()).transaction(Km,"readwrite");await r.objectStore(Km).put(e,g5(n)),await r.done}catch(t){if(t instanceof zo)Rl.warn(t.message);else{const r=Bc.create("idb-set",{originalErrorMessage:t?.message});Rl.warn(r.message)}}}function g5(n){return`${n.name}!${n.options.appId}`}const zK=1024,$K=30;class WK{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new KK(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=bM();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>$K){const i=YK(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Rl.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=bM(),{heartbeatsToSend:t,unsentEntries:r}=HK(this._heartbeatsCache.heartbeats),i=ix(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Rl.warn(e),""}}}function bM(){return new Date().toISOString().substring(0,10)}function HK(n,e=zK){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),MM(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),MM(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class KK{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return c5()?LH().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await UK(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return PM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return PM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function MM(n){return ix(JSON.stringify({version:2,heartbeats:n})).length}function YK(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function XK(n){Ch(new qc("platform-logger",e=>new oK(e),"PRIVATE")),Ch(new qc("heartbeat",e=>new WK(e),"PRIVATE")),To(cT,RM,n),To(cT,RM,"esm2020"),To("fire-js","")}XK("");var kM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Uc,m5;(function(){var n;function e(P,C){function b(){}b.prototype=C.prototype,P.F=C.prototype,P.prototype=new b,P.prototype.constructor=P,P.D=function(L,F,U){for(var j=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)j[Te-2]=arguments[Te];return C.prototype[F].apply(L,j)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,C,b){b||(b=0);const L=Array(16);if(typeof C=="string")for(var F=0;F<16;++F)L[F]=C.charCodeAt(b++)|C.charCodeAt(b++)<<8|C.charCodeAt(b++)<<16|C.charCodeAt(b++)<<24;else for(F=0;F<16;++F)L[F]=C[b++]|C[b++]<<8|C[b++]<<16|C[b++]<<24;C=P.g[0],b=P.g[1],F=P.g[2];let U=P.g[3],j;j=C+(U^b&(F^U))+L[0]+3614090360&4294967295,C=b+(j<<7&4294967295|j>>>25),j=U+(F^C&(b^F))+L[1]+3905402710&4294967295,U=C+(j<<12&4294967295|j>>>20),j=F+(b^U&(C^b))+L[2]+606105819&4294967295,F=U+(j<<17&4294967295|j>>>15),j=b+(C^F&(U^C))+L[3]+3250441966&4294967295,b=F+(j<<22&4294967295|j>>>10),j=C+(U^b&(F^U))+L[4]+4118548399&4294967295,C=b+(j<<7&4294967295|j>>>25),j=U+(F^C&(b^F))+L[5]+1200080426&4294967295,U=C+(j<<12&4294967295|j>>>20),j=F+(b^U&(C^b))+L[6]+2821735955&4294967295,F=U+(j<<17&4294967295|j>>>15),j=b+(C^F&(U^C))+L[7]+4249261313&4294967295,b=F+(j<<22&4294967295|j>>>10),j=C+(U^b&(F^U))+L[8]+1770035416&4294967295,C=b+(j<<7&4294967295|j>>>25),j=U+(F^C&(b^F))+L[9]+2336552879&4294967295,U=C+(j<<12&4294967295|j>>>20),j=F+(b^U&(C^b))+L[10]+4294925233&4294967295,F=U+(j<<17&4294967295|j>>>15),j=b+(C^F&(U^C))+L[11]+2304563134&4294967295,b=F+(j<<22&4294967295|j>>>10),j=C+(U^b&(F^U))+L[12]+1804603682&4294967295,C=b+(j<<7&4294967295|j>>>25),j=U+(F^C&(b^F))+L[13]+4254626195&4294967295,U=C+(j<<12&4294967295|j>>>20),j=F+(b^U&(C^b))+L[14]+2792965006&4294967295,F=U+(j<<17&4294967295|j>>>15),j=b+(C^F&(U^C))+L[15]+1236535329&4294967295,b=F+(j<<22&4294967295|j>>>10),j=C+(F^U&(b^F))+L[1]+4129170786&4294967295,C=b+(j<<5&4294967295|j>>>27),j=U+(b^F&(C^b))+L[6]+3225465664&4294967295,U=C+(j<<9&4294967295|j>>>23),j=F+(C^b&(U^C))+L[11]+643717713&4294967295,F=U+(j<<14&4294967295|j>>>18),j=b+(U^C&(F^U))+L[0]+3921069994&4294967295,b=F+(j<<20&4294967295|j>>>12),j=C+(F^U&(b^F))+L[5]+3593408605&4294967295,C=b+(j<<5&4294967295|j>>>27),j=U+(b^F&(C^b))+L[10]+38016083&4294967295,U=C+(j<<9&4294967295|j>>>23),j=F+(C^b&(U^C))+L[15]+3634488961&4294967295,F=U+(j<<14&4294967295|j>>>18),j=b+(U^C&(F^U))+L[4]+3889429448&4294967295,b=F+(j<<20&4294967295|j>>>12),j=C+(F^U&(b^F))+L[9]+568446438&4294967295,C=b+(j<<5&4294967295|j>>>27),j=U+(b^F&(C^b))+L[14]+3275163606&4294967295,U=C+(j<<9&4294967295|j>>>23),j=F+(C^b&(U^C))+L[3]+4107603335&4294967295,F=U+(j<<14&4294967295|j>>>18),j=b+(U^C&(F^U))+L[8]+1163531501&4294967295,b=F+(j<<20&4294967295|j>>>12),j=C+(F^U&(b^F))+L[13]+2850285829&4294967295,C=b+(j<<5&4294967295|j>>>27),j=U+(b^F&(C^b))+L[2]+4243563512&4294967295,U=C+(j<<9&4294967295|j>>>23),j=F+(C^b&(U^C))+L[7]+1735328473&4294967295,F=U+(j<<14&4294967295|j>>>18),j=b+(U^C&(F^U))+L[12]+2368359562&4294967295,b=F+(j<<20&4294967295|j>>>12),j=C+(b^F^U)+L[5]+4294588738&4294967295,C=b+(j<<4&4294967295|j>>>28),j=U+(C^b^F)+L[8]+2272392833&4294967295,U=C+(j<<11&4294967295|j>>>21),j=F+(U^C^b)+L[11]+1839030562&4294967295,F=U+(j<<16&4294967295|j>>>16),j=b+(F^U^C)+L[14]+4259657740&4294967295,b=F+(j<<23&4294967295|j>>>9),j=C+(b^F^U)+L[1]+2763975236&4294967295,C=b+(j<<4&4294967295|j>>>28),j=U+(C^b^F)+L[4]+1272893353&4294967295,U=C+(j<<11&4294967295|j>>>21),j=F+(U^C^b)+L[7]+4139469664&4294967295,F=U+(j<<16&4294967295|j>>>16),j=b+(F^U^C)+L[10]+3200236656&4294967295,b=F+(j<<23&4294967295|j>>>9),j=C+(b^F^U)+L[13]+681279174&4294967295,C=b+(j<<4&4294967295|j>>>28),j=U+(C^b^F)+L[0]+3936430074&4294967295,U=C+(j<<11&4294967295|j>>>21),j=F+(U^C^b)+L[3]+3572445317&4294967295,F=U+(j<<16&4294967295|j>>>16),j=b+(F^U^C)+L[6]+76029189&4294967295,b=F+(j<<23&4294967295|j>>>9),j=C+(b^F^U)+L[9]+3654602809&4294967295,C=b+(j<<4&4294967295|j>>>28),j=U+(C^b^F)+L[12]+3873151461&4294967295,U=C+(j<<11&4294967295|j>>>21),j=F+(U^C^b)+L[15]+530742520&4294967295,F=U+(j<<16&4294967295|j>>>16),j=b+(F^U^C)+L[2]+3299628645&4294967295,b=F+(j<<23&4294967295|j>>>9),j=C+(F^(b|~U))+L[0]+4096336452&4294967295,C=b+(j<<6&4294967295|j>>>26),j=U+(b^(C|~F))+L[7]+1126891415&4294967295,U=C+(j<<10&4294967295|j>>>22),j=F+(C^(U|~b))+L[14]+2878612391&4294967295,F=U+(j<<15&4294967295|j>>>17),j=b+(U^(F|~C))+L[5]+4237533241&4294967295,b=F+(j<<21&4294967295|j>>>11),j=C+(F^(b|~U))+L[12]+1700485571&4294967295,C=b+(j<<6&4294967295|j>>>26),j=U+(b^(C|~F))+L[3]+2399980690&4294967295,U=C+(j<<10&4294967295|j>>>22),j=F+(C^(U|~b))+L[10]+4293915773&4294967295,F=U+(j<<15&4294967295|j>>>17),j=b+(U^(F|~C))+L[1]+2240044497&4294967295,b=F+(j<<21&4294967295|j>>>11),j=C+(F^(b|~U))+L[8]+1873313359&4294967295,C=b+(j<<6&4294967295|j>>>26),j=U+(b^(C|~F))+L[15]+4264355552&4294967295,U=C+(j<<10&4294967295|j>>>22),j=F+(C^(U|~b))+L[6]+2734768916&4294967295,F=U+(j<<15&4294967295|j>>>17),j=b+(U^(F|~C))+L[13]+1309151649&4294967295,b=F+(j<<21&4294967295|j>>>11),j=C+(F^(b|~U))+L[4]+4149444226&4294967295,C=b+(j<<6&4294967295|j>>>26),j=U+(b^(C|~F))+L[11]+3174756917&4294967295,U=C+(j<<10&4294967295|j>>>22),j=F+(C^(U|~b))+L[2]+718787259&4294967295,F=U+(j<<15&4294967295|j>>>17),j=b+(U^(F|~C))+L[9]+3951481745&4294967295,P.g[0]=P.g[0]+C&4294967295,P.g[1]=P.g[1]+(F+(j<<21&4294967295|j>>>11))&4294967295,P.g[2]=P.g[2]+F&4294967295,P.g[3]=P.g[3]+U&4294967295}r.prototype.v=function(P,C){C===void 0&&(C=P.length);const b=C-this.blockSize,L=this.C;let F=this.h,U=0;for(;U<C;){if(F==0)for(;U<=b;)i(this,P,U),U+=this.blockSize;if(typeof P=="string"){for(;U<C;)if(L[F++]=P.charCodeAt(U++),F==this.blockSize){i(this,L),F=0;break}}else for(;U<C;)if(L[F++]=P[U++],F==this.blockSize){i(this,L),F=0;break}}this.h=F,this.o+=C},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var C=1;C<P.length-8;++C)P[C]=0;C=this.o*8;for(var b=P.length-8;b<P.length;++b)P[b]=C&255,C/=256;for(this.v(P),P=Array(16),C=0,b=0;b<4;++b)for(let L=0;L<32;L+=8)P[C++]=this.g[b]>>>L&255;return P};function s(P,C){var b=o;return Object.prototype.hasOwnProperty.call(b,P)?b[P]:b[P]=C(P)}function a(P,C){this.h=C;const b=[];let L=!0;for(let F=P.length-1;F>=0;F--){const U=P[F]|0;L&&U==C||(b[F]=U,L=!1)}this.g=b}var o={};function l(P){return-128<=P&&P<128?s(P,function(C){return new a([C|0],C<0?-1:0)}):new a([P|0],P<0?-1:0)}function u(P){if(isNaN(P)||!isFinite(P))return d;if(P<0)return E(u(-P));const C=[];let b=1;for(let L=0;P>=b;L++)C[L]=P/b|0,b*=4294967296;return new a(C,0)}function f(P,C){if(P.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(P.charAt(0)=="-")return E(f(P.substring(1),C));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=u(Math.pow(C,8));let L=d;for(let U=0;U<P.length;U+=8){var F=Math.min(8,P.length-U);const j=parseInt(P.substring(U,U+F),C);F<8?(F=u(Math.pow(C,F)),L=L.j(F).add(u(j))):(L=L.j(b),L=L.add(u(j)))}return L}var d=l(0),g=l(1),p=l(16777216);n=a.prototype,n.m=function(){if(y(this))return-E(this).m();let P=0,C=1;for(let b=0;b<this.g.length;b++){const L=this.i(b);P+=(L>=0?L:4294967296+L)*C,C*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(v(this))return"0";if(y(this))return"-"+E(this).toString(P);const C=u(Math.pow(P,6));var b=this;let L="";for(;;){const F=k(b,C).g;b=T(b,F.j(C));let U=((b.g.length>0?b.g[0]:b.h)>>>0).toString(P);if(b=F,v(b))return U+L;for(;U.length<6;)U="0"+U;L=U+L}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function v(P){if(P.h!=0)return!1;for(let C=0;C<P.g.length;C++)if(P.g[C]!=0)return!1;return!0}function y(P){return P.h==-1}n.l=function(P){return P=T(this,P),y(P)?-1:v(P)?0:1};function E(P){const C=P.g.length,b=[];for(let L=0;L<C;L++)b[L]=~P.g[L];return new a(b,~P.h).add(g)}n.abs=function(){return y(this)?E(this):this},n.add=function(P){const C=Math.max(this.g.length,P.g.length),b=[];let L=0;for(let F=0;F<=C;F++){let U=L+(this.i(F)&65535)+(P.i(F)&65535),j=(U>>>16)+(this.i(F)>>>16)+(P.i(F)>>>16);L=j>>>16,U&=65535,j&=65535,b[F]=j<<16|U}return new a(b,b[b.length-1]&-2147483648?-1:0)};function T(P,C){return P.add(E(C))}n.j=function(P){if(v(this)||v(P))return d;if(y(this))return y(P)?E(this).j(E(P)):E(E(this).j(P));if(y(P))return E(this.j(E(P)));if(this.l(p)<0&&P.l(p)<0)return u(this.m()*P.m());const C=this.g.length+P.g.length,b=[];for(var L=0;L<2*C;L++)b[L]=0;for(L=0;L<this.g.length;L++)for(let F=0;F<P.g.length;F++){const U=this.i(L)>>>16,j=this.i(L)&65535,Te=P.i(F)>>>16,Me=P.i(F)&65535;b[2*L+2*F]+=j*Me,R(b,2*L+2*F),b[2*L+2*F+1]+=U*Me,R(b,2*L+2*F+1),b[2*L+2*F+1]+=j*Te,R(b,2*L+2*F+1),b[2*L+2*F+2]+=U*Te,R(b,2*L+2*F+2)}for(P=0;P<C;P++)b[P]=b[2*P+1]<<16|b[2*P];for(P=C;P<2*C;P++)b[P]=0;return new a(b,0)};function R(P,C){for(;(P[C]&65535)!=P[C];)P[C+1]+=P[C]>>>16,P[C]&=65535,C++}function M(P,C){this.g=P,this.h=C}function k(P,C){if(v(C))throw Error("division by zero");if(v(P))return new M(d,d);if(y(P))return C=k(E(P),C),new M(E(C.g),E(C.h));if(y(C))return C=k(P,E(C)),new M(E(C.g),C.h);if(P.g.length>30){if(y(P)||y(C))throw Error("slowDivide_ only works with positive integers.");for(var b=g,L=C;L.l(P)<=0;)b=V(b),L=V(L);var F=z(b,1),U=z(L,1);for(L=z(L,2),b=z(b,2);!v(L);){var j=U.add(L);j.l(P)<=0&&(F=F.add(b),U=j),L=z(L,1),b=z(b,1)}return C=T(P,F.j(C)),new M(F,C)}for(F=d;P.l(C)>=0;){for(b=Math.max(1,Math.floor(P.m()/C.m())),L=Math.ceil(Math.log(b)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),U=u(b),j=U.j(C);y(j)||j.l(P)>0;)b-=L,U=u(b),j=U.j(C);v(U)&&(U=g),F=F.add(U),P=T(P,j)}return new M(F,P)}n.B=function(P){return k(this,P).h},n.and=function(P){const C=Math.max(this.g.length,P.g.length),b=[];for(let L=0;L<C;L++)b[L]=this.i(L)&P.i(L);return new a(b,this.h&P.h)},n.or=function(P){const C=Math.max(this.g.length,P.g.length),b=[];for(let L=0;L<C;L++)b[L]=this.i(L)|P.i(L);return new a(b,this.h|P.h)},n.xor=function(P){const C=Math.max(this.g.length,P.g.length),b=[];for(let L=0;L<C;L++)b[L]=this.i(L)^P.i(L);return new a(b,this.h^P.h)};function V(P){const C=P.g.length+1,b=[];for(let L=0;L<C;L++)b[L]=P.i(L)<<1|P.i(L-1)>>>31;return new a(b,P.h)}function z(P,C){const b=C>>5;C%=32;const L=P.g.length-b,F=[];for(let U=0;U<L;U++)F[U]=C>0?P.i(U+b)>>>C|P.i(U+b+1)<<32-C:P.i(U+b);return new a(F,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,m5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=f,Uc=a}).apply(typeof kM<"u"?kM:typeof self<"u"?self:typeof window<"u"?window:{});var L1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var p5,zg,_5,hy,fT,y5,x5,v5;(function(){var n,e=Object.defineProperty;function t(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof L1=="object"&&L1];for(var A=0;A<_.length;++A){var N=_[A];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var r=t(this);function i(_,A){if(A)e:{var N=r;_=_.split(".");for(var H=0;H<_.length-1;H++){var ge=_[H];if(!(ge in N))break e;N=N[ge]}_=_[_.length-1],H=N[_],A=A(H),A!=H&&A!=null&&e(N,_,{configurable:!0,writable:!0,value:A})}}i("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(_){return _||function(A){var N=[],H;for(H in A)Object.prototype.hasOwnProperty.call(A,H)&&N.push([H,A[H]]);return N}});var s=s||{},a=this||self;function o(_){var A=typeof _;return A=="object"&&_!=null||A=="function"}function l(_,A,N){return _.call.apply(_.bind,arguments)}function u(_,A,N){return u=l,u.apply(null,arguments)}function f(_,A){var N=Array.prototype.slice.call(arguments,1);return function(){var H=N.slice();return H.push.apply(H,arguments),_.apply(this,H)}}function d(_,A){function N(){}N.prototype=A.prototype,_.Z=A.prototype,_.prototype=new N,_.prototype.constructor=_,_.Ob=function(H,ge,we){for(var Qe=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)Qe[Lt-2]=arguments[Lt];return A.prototype[ge].apply(H,Qe)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function p(_){const A=_.length;if(A>0){const N=Array(A);for(let H=0;H<A;H++)N[H]=_[H];return N}return[]}function v(_,A){for(let H=1;H<arguments.length;H++){const ge=arguments[H];var N=typeof ge;if(N=N!="object"?N:ge?Array.isArray(ge)?"array":N:"null",N=="array"||N=="object"&&typeof ge.length=="number"){N=_.length||0;const we=ge.length||0;_.length=N+we;for(let Qe=0;Qe<we;Qe++)_[N+Qe]=ge[Qe]}else _.push(ge)}}class y{constructor(A,N){this.i=A,this.j=N,this.h=0,this.g=null}get(){let A;return this.h>0?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function E(_){a.setTimeout(()=>{throw _},0)}function T(){var _=P;let A=null;return _.g&&(A=_.g,_.g=_.g.next,_.g||(_.h=null),A.next=null),A}class R{constructor(){this.h=this.g=null}add(A,N){const H=M.get();H.set(A,N),this.h?this.h.next=H:this.g=H,this.h=H}}var M=new y(()=>new k,_=>_.reset());class k{constructor(){this.next=this.g=this.h=null}set(A,N){this.h=A,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let V,z=!1,P=new R,C=()=>{const _=Promise.resolve(void 0);V=()=>{_.then(b)}};function b(){for(var _;_=T();){try{_.h.call(_.g)}catch(N){E(N)}var A=M;A.j(_),A.h<100&&(A.h++,_.next=A.g,A.g=_)}z=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(_,A){this.type=_,this.g=this.target=A,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var _=!1,A=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const N=()=>{};a.addEventListener("test",N,A),a.removeEventListener("test",N,A)}catch{}return _})();function j(_){return/^[\s\xa0]*$/.test(_)}function Te(_,A){F.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,A)}d(Te,F),Te.prototype.init=function(_,A){const N=this.type=_.type,H=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=A,A=_.relatedTarget,A||(N=="mouseover"?A=_.fromElement:N=="mouseout"&&(A=_.toElement)),this.relatedTarget=A,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Me="closure_listenable_"+(Math.random()*1e6|0),Ue=0;function ke(_,A,N,H,ge){this.listener=_,this.proxy=null,this.src=A,this.type=N,this.capture=!!H,this.ha=ge,this.key=++Ue,this.da=this.fa=!1}function le(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function Ae(_,A,N){for(const H in _)A.call(N,_[H],H,_)}function Ie(_,A){for(const N in _)A.call(void 0,_[N],N,_)}function Y(_){const A={};for(const N in _)A[N]=_[N];return A}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(_,A){let N,H;for(let ge=1;ge<arguments.length;ge++){H=arguments[ge];for(N in H)_[N]=H[N];for(let we=0;we<O.length;we++)N=O[we],Object.prototype.hasOwnProperty.call(H,N)&&(_[N]=H[N])}}function ne(_){this.src=_,this.g={},this.h=0}ne.prototype.add=function(_,A,N,H,ge){const we=_.toString();_=this.g[we],_||(_=this.g[we]=[],this.h++);const Qe=me(_,A,H,ge);return Qe>-1?(A=_[Qe],N||(A.fa=!1)):(A=new ke(A,this.src,we,!!H,ge),A.fa=N,_.push(A)),A};function ee(_,A){const N=A.type;if(N in _.g){var H=_.g[N],ge=Array.prototype.indexOf.call(H,A,void 0),we;(we=ge>=0)&&Array.prototype.splice.call(H,ge,1),we&&(le(A),_.g[N].length==0&&(delete _.g[N],_.h--))}}function me(_,A,N,H){for(let ge=0;ge<_.length;++ge){const we=_[ge];if(!we.da&&we.listener==A&&we.capture==!!N&&we.ha==H)return ge}return-1}var Se="closure_lm_"+(Math.random()*1e6|0),Ne={};function se(_,A,N,H,ge){if(Array.isArray(A)){for(let we=0;we<A.length;we++)se(_,A[we],N,H,ge);return null}return N=lt(N),_&&_[Me]?_.J(A,N,o(H)?!!H.capture:!1,ge):re(_,A,N,!1,H,ge)}function re(_,A,N,H,ge,we){if(!A)throw Error("Invalid event type");const Qe=o(ge)?!!ge.capture:!!ge;let Lt=W(_);if(Lt||(_[Se]=Lt=new ne(_)),N=Lt.add(A,N,H,Qe,we),N.proxy)return N;if(H=D(),N.proxy=H,H.src=_,H.listener=N,_.addEventListener)U||(ge=Qe),ge===void 0&&(ge=!1),_.addEventListener(A.toString(),H,ge);else if(_.attachEvent)_.attachEvent(He(A.toString()),H);else if(_.addListener&&_.removeListener)_.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return N}function D(){function _(N){return A.call(_.src,_.listener,N)}const A=ue;return _}function Ye(_,A,N,H,ge){if(Array.isArray(A))for(var we=0;we<A.length;we++)Ye(_,A[we],N,H,ge);else H=o(H)?!!H.capture:!!H,N=lt(N),_&&_[Me]?(_=_.i,we=String(A).toString(),we in _.g&&(A=_.g[we],N=me(A,N,H,ge),N>-1&&(le(A[N]),Array.prototype.splice.call(A,N,1),A.length==0&&(delete _.g[we],_.h--)))):_&&(_=W(_))&&(A=_.g[A.toString()],_=-1,A&&(_=me(A,N,H,ge)),(N=_>-1?A[_]:null)&&he(N))}function he(_){if(typeof _!="number"&&_&&!_.da){var A=_.src;if(A&&A[Me])ee(A.i,_);else{var N=_.type,H=_.proxy;A.removeEventListener?A.removeEventListener(N,H,_.capture):A.detachEvent?A.detachEvent(He(N),H):A.addListener&&A.removeListener&&A.removeListener(H),(N=W(A))?(ee(N,_),N.h==0&&(N.src=null,A[Se]=null)):le(_)}}}function He(_){return _ in Ne?Ne[_]:Ne[_]="on"+_}function ue(_,A){if(_.da)_=!0;else{A=new Te(A,this);const N=_.listener,H=_.ha||_.src;_.fa&&he(_),_=N.call(H,A)}return _}function W(_){return _=_[Se],_ instanceof ne?_:null}var ae="__closure_events_fn_"+(Math.random()*1e9>>>0);function lt(_){return typeof _=="function"?_:(_[ae]||(_[ae]=function(A){return _.handleEvent(A)}),_[ae])}function ot(){L.call(this),this.i=new ne(this),this.M=this,this.G=null}d(ot,L),ot.prototype[Me]=!0,ot.prototype.removeEventListener=function(_,A,N,H){Ye(this,_,A,N,H)};function gt(_,A){var N,H=_.G;if(H)for(N=[];H;H=H.G)N.push(H);if(_=_.M,H=A.type||A,typeof A=="string")A=new F(A,_);else if(A instanceof F)A.target=A.target||_;else{var ge=A;A=new F(H,_),te(A,ge)}ge=!0;let we,Qe;if(N)for(Qe=N.length-1;Qe>=0;Qe--)we=A.g=N[Qe],ge=Ot(we,H,!0,A)&&ge;if(we=A.g=_,ge=Ot(we,H,!0,A)&&ge,ge=Ot(we,H,!1,A)&&ge,N)for(Qe=0;Qe<N.length;Qe++)we=A.g=N[Qe],ge=Ot(we,H,!1,A)&&ge}ot.prototype.N=function(){if(ot.Z.N.call(this),this.i){var _=this.i;for(const A in _.g){const N=_.g[A];for(let H=0;H<N.length;H++)le(N[H]);delete _.g[A],_.h--}}this.G=null},ot.prototype.J=function(_,A,N,H){return this.i.add(String(_),A,!1,N,H)},ot.prototype.K=function(_,A,N,H){return this.i.add(String(_),A,!0,N,H)};function Ot(_,A,N,H){if(A=_.i.g[String(A)],!A)return!0;A=A.concat();let ge=!0;for(let we=0;we<A.length;++we){const Qe=A[we];if(Qe&&!Qe.da&&Qe.capture==N){const Lt=Qe.listener,ur=Qe.ha||Qe.src;Qe.fa&&ee(_.i,Qe),ge=Lt.call(ur,H)!==!1&&ge}}return ge&&!H.defaultPrevented}function Rn(_,A){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=u(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(A)>2147483647?-1:a.setTimeout(_,A||0)}function Yt(_){_.g=Rn(()=>{_.g=null,_.i&&(_.i=!1,Yt(_))},_.l);const A=_.h;_.h=null,_.m.apply(null,A)}class Ln extends L{constructor(A,N){super(),this.m=A,this.l=N,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:Yt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gr(_){L.call(this),this.h=_,this.g={}}d(gr,L);var Wi=[];function Mi(_){Ae(_.g,function(A,N){this.g.hasOwnProperty(N)&&he(A)},_),_.g={}}gr.prototype.N=function(){gr.Z.N.call(this),Mi(this)},gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fr=a.JSON.stringify,Wo=a.JSON.parse,ms=class{stringify(_){return a.JSON.stringify(_,void 0)}parse(_){return a.JSON.parse(_,void 0)}};function ki(){}function Ho(){}var ps={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ks(){F.call(this,"d")}d(Ks,F);function xa(){F.call(this,"c")}d(xa,F);var Zr={},va=null;function _s(){return va=va||new ot}Zr.Ia="serverreachability";function ys(_){F.call(this,Zr.Ia,_)}d(ys,F);function Vr(_){const A=_s();gt(A,new ys(A))}Zr.STAT_EVENT="statevent";function Qr(_,A){F.call(this,Zr.STAT_EVENT,_),this.stat=A}d(Qr,F);function un(_){const A=_s();gt(A,new Qr(A,_))}Zr.Ja="timingevent";function xs(_,A){F.call(this,Zr.Ja,_),this.size=A}d(xs,F);function vs(_,A){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){_()},A)}function Wn(){this.g=!0}Wn.prototype.ua=function(){this.g=!1};function Hi(_,A,N,H,ge,we){_.info(function(){if(_.g)if(we){var Qe="",Lt=we.split("&");for(let yn=0;yn<Lt.length;yn++){var ur=Lt[yn].split("=");if(ur.length>1){const pr=ur[0];ur=ur[1];const Is=pr.split("_");Qe=Is.length>=2&&Is[1]=="type"?Qe+(pr+"="+ur+"&"):Qe+(pr+"=redacted&")}}}else Qe=null;else Qe=we;return"XMLHTTP REQ ("+H+") [attempt "+ge+"]: "+A+`
`+N+`
`+Qe})}function Ir(_,A,N,H,ge,we,Qe){_.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+ge+"]: "+A+`
`+N+`
`+we+" "+Qe})}function Hn(_,A,N,H){_.info(function(){return"XMLHTTP TEXT ("+A+"): "+Rr(_,N)+(H?" "+H:"")})}function Ar(_,A){_.info(function(){return"TIMEOUT: "+A})}Wn.prototype.info=function(){};function Rr(_,A){if(!_.g)return A;if(!A)return null;try{const we=JSON.parse(A);if(we){for(_=0;_<we.length;_++)if(Array.isArray(we[_])){var N=we[_];if(!(N.length<2)){var H=N[1];if(Array.isArray(H)&&!(H.length<1)){var ge=H[0];if(ge!="noop"&&ge!="stop"&&ge!="close")for(let Qe=1;Qe<H.length;Qe++)H[Qe]=""}}}}return Fr(we)}catch{return A}}var mr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Wt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Jn;function lr(){}d(lr,ki),lr.prototype.g=function(){return new XMLHttpRequest},Jn=new lr;function Ki(_){return encodeURIComponent(String(_))}function B(_){var A=1;_=_.split(":");const N=[];for(;A>0&&_.length;)N.push(_.shift()),A--;return _.length&&N.push(_.join(":")),N}function q(_,A,N,H){this.j=_,this.i=A,this.l=N,this.S=H||1,this.V=new gr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new K}function K(){this.i=null,this.g="",this.h=!1}var X={},Z={};function Q(_,A,N){_.M=1,_.A=Ko(Xs(A)),_.u=N,_.R=!0,_e(_,null)}function _e(_,A){_.F=Date.now(),ve(_),_.B=Xs(_.A);var N=_.B,H=_.S;Array.isArray(H)||(H=[String(H)]),$0(N.i,"t",H),_.C=0,N=_.j.L,_.h=new K,_.g=I_(_.j,N?A:null,!_.u),_.P>0&&(_.O=new Ln(u(_.Y,_,_.g),_.P)),A=_.V,N=_.g,H=_.ba;var ge="readystatechange";Array.isArray(ge)||(ge&&(Wi[0]=ge.toString()),ge=Wi);for(let we=0;we<ge.length;we++){const Qe=se(N,ge[we],H||A.handleEvent,!1,A.h||A);if(!Qe)break;A.g[Qe.key]=Qe}A=_.J?Y(_.J):{},_.u?(_.v||(_.v="POST"),A["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,A)):(_.v="GET",_.g.ea(_.B,_.v,null,A)),Vr(),Hi(_.i,_.v,_.B,_.l,_.S,_.u)}q.prototype.ba=function(_){_=_.target;const A=this.O;A&&io(_)==3?A.j():this.Y(_)},q.prototype.Y=function(_){try{if(_==this.g)e:{const Lt=io(this.g),ur=this.g.ya(),yn=this.g.ca();if(!(Lt<3)&&(Lt!=3||this.g&&(this.h.h||this.g.la()||S_(this.g)))){this.K||Lt!=4||ur==7||(ur==8||yn<=0?Vr(3):Vr(2)),Xe(this);var A=this.g.ca();this.X=A;var N=Ce(this);if(this.o=A==200,Ir(this.i,this.v,this.B,this.l,this.S,Lt,A),this.o){if(this.U&&!this.L){t:{if(this.g){var H,ge=this.g;if((H=ge.g?ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(H)){var we=H;break t}}we=null}if(_=we)Hn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Be(this,_);else{this.o=!1,this.m=3,un(12),Ge(this),it(this);break e}}if(this.R){_=!0;let pr;for(;!this.K&&this.C<N.length;)if(pr=xe(this,N),pr==Z){Lt==4&&(this.m=4,un(14),_=!1),Hn(this.i,this.l,null,"[Incomplete Response]");break}else if(pr==X){this.m=4,un(15),Hn(this.i,this.l,N,"[Invalid Chunk]"),_=!1;break}else Hn(this.i,this.l,pr,null),Be(this,pr);if(pe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||N.length!=0||this.h.h||(this.m=1,un(16),_=!1),this.o=this.o&&_,!_)Hn(this.i,this.l,N,"[Invalid Chunked Response]"),Ge(this),it(this);else if(N.length>0&&!this.W){this.W=!0;var Qe=this.j;Qe.g==this&&Qe.aa&&!Qe.P&&(Qe.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),Iu(Qe),Qe.P=!0,un(11))}}else Hn(this.i,this.l,N,null),Be(this,N);Lt==4&&Ge(this),this.o&&!this.K&&(Lt==4?gf(this.j,this):(this.o=!1,ve(this)))}else H0(this.g),A==400&&N.indexOf("Unknown SID")>0?(this.m=3,un(12)):(this.m=0,un(13)),Ge(this),it(this)}}}catch{}};function Ce(_){if(!pe(_))return _.g.la();const A=S_(_.g);if(A==="")return"";let N="";const H=A.length,ge=io(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return Ge(_),it(_),"";_.h.i=new a.TextDecoder}for(let we=0;we<H;we++)_.h.h=!0,N+=_.h.i.decode(A[we],{stream:!(ge&&we==H-1)});return A.length=0,_.h.g+=N,_.C=0,_.h.g}function pe(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function xe(_,A){var N=_.C,H=A.indexOf(`
`,N);return H==-1?Z:(N=Number(A.substring(N,H)),isNaN(N)?X:(H+=1,H+N>A.length?Z:(A=A.slice(H,H+N),_.C=H+N,A)))}q.prototype.cancel=function(){this.K=!0,Ge(this)};function ve(_){_.T=Date.now()+_.H,je(_,_.H)}function je(_,A){if(_.D!=null)throw Error("WatchDog timer not null");_.D=vs(u(_.aa,_),A)}function Xe(_){_.D&&(a.clearTimeout(_.D),_.D=null)}q.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?(Ar(this.i,this.B),this.M!=2&&(Vr(),un(17)),Ge(this),this.m=2,it(this)):je(this,this.T-_)};function it(_){_.j.I==0||_.K||gf(_.j,_)}function Ge(_){Xe(_);var A=_.O;A&&typeof A.dispose=="function"&&A.dispose(),_.O=null,Mi(_.V),_.g&&(A=_.g,_.g=null,A.abort(),A.dispose())}function Be(_,A){try{var N=_.j;if(N.I!=0&&(N.g==_||Ea(N.h,_))){if(!_.L&&Ea(N.h,_)&&N.I==3){try{var H=N.Ba.g.parse(A)}catch{H=null}if(Array.isArray(H)&&H.length==3){var ge=H;if(ge[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<_.F)df(N),Ss(N);else break e;oo(N),un(18)}}else N.xa=ge[1],0<N.xa-N.K&&ge[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=vs(u(N.Va,N),6e3));Bn(N.h)<=1&&N.ta&&(N.ta=void 0)}else Ts(N,11)}else if((_.L||N.g==_)&&df(N),!j(A))for(ge=N.Ba.g.parse(A),A=0;A<ge.length;A++){let yn=ge[A];const pr=yn[0];if(!(pr<=N.K))if(N.K=pr,yn=yn[1],N.I==2)if(yn[0]=="c"){N.M=yn[1],N.ba=yn[2];const Is=yn[3];Is!=null&&(N.ka=Is,N.j.info("VER="+N.ka));const Qo=yn[4];Qo!=null&&(N.za=Qo,N.j.info("SVER="+N.za));const lo=yn[5];lo!=null&&typeof lo=="number"&&lo>0&&(H=1.5*lo,N.O=H,N.j.info("backChannelRequestTimeoutMs_="+H)),H=N;const co=_.g;if(co){const _f=co.g?co.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_f){var we=H.h;we.g||_f.indexOf("spdy")==-1&&_f.indexOf("quic")==-1&&_f.indexOf("h2")==-1||(we.j=we.l,we.g=new Set,we.h&&(Ys(we,we.h),we.h=null))}if(H.G){const X0=co.g?co.g.getResponseHeader("X-HTTP-Session-Id"):null;X0&&(H.wa=X0,sn(H.J,H.G,X0))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-_.F,N.j.info("Handshake RTT: "+N.T+"ms")),H=N;var Qe=_;if(H.na=Y0(H,H.L?H.ba:null,H.W),Qe.L){Es(H.h,Qe);var Lt=Qe,ur=H.O;ur&&(Lt.H=ur),Lt.D&&(Xe(Lt),ve(Lt)),H.g=Qe}else gi(H);N.i.length>0&&Zo(N)}else yn[0]!="stop"&&yn[0]!="close"||Ts(N,7);else N.I==3&&(yn[0]=="stop"||yn[0]=="close"?yn[0]=="stop"?Ts(N,7):hf(N):yn[0]!="noop"&&N.l&&N.l.qa(yn),N.A=0)}}Vr(4)}catch{}}var Rt=class{constructor(_,A){this.g=_,this.map=A}};function hn(_){this.l=_||10,a.PerformanceNavigationTiming?(_=a.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _n(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Bn(_){return _.h?1:_.g?_.g.size:0}function Ea(_,A){return _.h?_.h==A:_.g?_.g.has(A):!1}function Ys(_,A){_.g?_.g.add(A):_.h=A}function Es(_,A){_.h&&_.h==A?_.h=null:_.g&&_.g.has(A)&&_.g.delete(A)}hn.prototype.cancel=function(){if(this.i=cr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function cr(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let A=_.i;for(const N of _.g.values())A=A.concat(N.G);return A}return p(_.i)}var Bl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kn(_,A){if(_){_=_.split("&");for(let N=0;N<_.length;N++){const H=_[N].indexOf("=");let ge,we=null;H>=0?(ge=_[N].substring(0,H),we=_[N].substring(H+1)):ge=_[N],A(ge,we?decodeURIComponent(we.replace(/\+/g," ")):"")}}}function Qa(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let A;_ instanceof Qa?(this.l=_.l,xu(this,_.j),this.o=_.o,this.g=_.g,Ja(this,_.u),this.h=_.h,Ul(this,W0(_.i)),this.m=_.m):_&&(A=String(_).match(Bl))?(this.l=!1,xu(this,A[1]||"",!0),this.o=vu(A[2]||""),this.g=vu(A[3]||"",!0),Ja(this,A[4]),this.h=vu(A[5]||"",!0),Ul(this,A[6]||"",!0),this.m=vu(A[7]||"")):(this.l=!1,this.i=new Ht(null,this.l))}Qa.prototype.toString=function(){const _=[];var A=this.j;A&&_.push(Eu(A,j0,!0),":");var N=this.g;return(N||A=="file")&&(_.push("//"),(A=this.o)&&_.push(Eu(A,j0,!0),"@"),_.push(Ki(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&_.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&_.push("/"),_.push(Eu(N,N.charAt(0)=="/"?wu:G0,!0))),(N=this.i.toString())&&_.push("?",N),(N=this.m)&&_.push("#",Eu(N,B0)),_.join("")},Qa.prototype.resolve=function(_){const A=Xs(this);let N=!!_.j;N?xu(A,_.j):N=!!_.o,N?A.o=_.o:N=!!_.g,N?A.g=_.g:N=_.u!=null;var H=_.h;if(N)Ja(A,_.u);else if(N=!!_.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var ge=A.h.lastIndexOf("/");ge!=-1&&(H=A.h.slice(0,ge+1)+H)}if(ge=H,ge==".."||ge==".")H="";else if(ge.indexOf("./")!=-1||ge.indexOf("/.")!=-1){H=ge.lastIndexOf("/",0)==0,ge=ge.split("/");const we=[];for(let Qe=0;Qe<ge.length;){const Lt=ge[Qe++];Lt=="."?H&&Qe==ge.length&&we.push(""):Lt==".."?((we.length>1||we.length==1&&we[0]!="")&&we.pop(),H&&Qe==ge.length&&we.push("")):(we.push(Lt),H=!0)}H=we.join("/")}else H=ge}return N?A.h=H:N=_.i.toString()!=="",N?Ul(A,W0(_.i)):N=!!_.m,N&&(A.m=_.m),A};function Xs(_){return new Qa(_)}function xu(_,A,N){_.j=N?vu(A,!0):A,_.j&&(_.j=_.j.replace(/:$/,""))}function Ja(_,A){if(A){if(A=Number(A),isNaN(A)||A<0)throw Error("Bad port number "+A);_.u=A}else _.u=null}function Ul(_,A,N){A instanceof Ht?(_.i=A,lf(_.i,_.l)):(N||(A=Eu(A,NE)),_.i=new Ht(A,_.l))}function sn(_,A,N){_.i.set(A,N)}function Ko(_){return sn(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function vu(_,A){return _?A?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Eu(_,A,N){return typeof _=="string"?(_=encodeURI(_).replace(A,V0),N&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function V0(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var j0=/[#\/\?@]/g,G0=/[#\?:]/g,wu=/[#\?]/g,NE=/[#\?@]/g,B0=/#/g;function Ht(_,A){this.h=this.g=null,this.i=_||null,this.j=!!A}function eo(_){_.g||(_.g=new Map,_.h=0,_.i&&Kn(_.i,function(A,N){_.add(decodeURIComponent(A.replace(/\+/g," ")),N)}))}n=Ht.prototype,n.add=function(_,A){eo(this),this.i=null,_=to(this,_);let N=this.g.get(_);return N||this.g.set(_,N=[]),N.push(A),this.h+=1,this};function U0(_,A){eo(_),A=to(_,A),_.g.has(A)&&(_.i=null,_.h-=_.g.get(A).length,_.g.delete(A))}function of(_,A){return eo(_),A=to(_,A),_.g.has(A)}n.forEach=function(_,A){eo(this),this.g.forEach(function(N,H){N.forEach(function(ge){_.call(A,ge,H,this)},this)},this)};function z0(_,A){eo(_);let N=[];if(typeof A=="string")of(_,A)&&(N=N.concat(_.g.get(to(_,A))));else for(_=Array.from(_.g.values()),A=0;A<_.length;A++)N=N.concat(_[A]);return N}n.set=function(_,A){return eo(this),this.i=null,_=to(this,_),of(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[A]),this.h+=1,this},n.get=function(_,A){return _?(_=z0(this,_),_.length>0?String(_[0]):A):A};function $0(_,A,N){U0(_,A),N.length>0&&(_.i=null,_.g.set(to(_,A),p(N)),_.h+=N.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],A=Array.from(this.g.keys());for(let H=0;H<A.length;H++){var N=A[H];const ge=Ki(N);N=z0(this,N);for(let we=0;we<N.length;we++){let Qe=ge;N[we]!==""&&(Qe+="="+Ki(N[we])),_.push(Qe)}}return this.i=_.join("&")};function W0(_){const A=new Ht;return A.i=_.i,_.g&&(A.g=new Map(_.g),A.h=_.h),A}function to(_,A){return A=String(A),_.j&&(A=A.toLowerCase()),A}function lf(_,A){A&&!_.j&&(eo(_),_.i=null,_.g.forEach(function(N,H){const ge=H.toLowerCase();H!=ge&&(U0(this,H),$0(this,ge,N))},_)),_.j=A}function no(_,A){const N=new Wn;if(a.Image){const H=new Image;H.onload=f(Jr,N,"TestLoadImage: loaded",!0,A,H),H.onerror=f(Jr,N,"TestLoadImage: error",!1,A,H),H.onabort=f(Jr,N,"TestLoadImage: abort",!1,A,H),H.ontimeout=f(Jr,N,"TestLoadImage: timeout",!1,A,H),a.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=_}else A(!1)}function ro(_,A){const N=new Wn,H=new AbortController,ge=setTimeout(()=>{H.abort(),Jr(N,"TestPingServer: timeout",!1,A)},1e4);fetch(_,{signal:H.signal}).then(we=>{clearTimeout(ge),we.ok?Jr(N,"TestPingServer: ok",!0,A):Jr(N,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(ge),Jr(N,"TestPingServer: error",!1,A)})}function Jr(_,A,N,H,ge){try{ge&&(ge.onload=null,ge.onerror=null,ge.onabort=null,ge.ontimeout=null),H(N)}catch{}}function Su(){this.g=new ms}function Yo(_){this.i=_.Sb||null,this.h=_.ab||!1}d(Yo,ki),Yo.prototype.g=function(){return new ws(this.i,this.h)};function ws(_,A){ot.call(this),this.H=_,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(ws,ot),n=ws.prototype,n.open=function(_,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=A,this.readyState=1,wa(this)},n.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const A={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(A.body=_),(this.H||a).fetch(new Request(this.D,A)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,zl(this)),this.readyState=0},n.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,wa(this)),this.g&&(this.readyState=3,wa(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;v_(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function v_(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}n.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var A=_.value?_.value:new Uint8Array(0);(A=this.B.decode(A,{stream:!_.done}))&&(this.response=this.responseText+=A)}_.done?zl(this):wa(this),this.readyState==3&&v_(this)}},n.Oa=function(_){this.g&&(this.response=this.responseText=_,zl(this))},n.Na=function(_){this.g&&(this.response=_,zl(this))},n.ga=function(){this.g&&zl(this)};function zl(_){_.readyState=4,_.l=null,_.j=null,_.B=null,wa(_)}n.setRequestHeader=function(_,A){this.A.append(_,A)},n.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],A=this.h.entries();for(var N=A.next();!N.done;)N=N.value,_.push(N[0]+": "+N[1]),N=A.next();return _.join(`\r
`)};function wa(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(ws.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function E_(_){let A="";return Ae(_,function(N,H){A+=H,A+=":",A+=N,A+=`\r
`}),A}function cf(_,A,N){e:{for(H in N){var H=!1;break e}H=!0}H||(N=E_(N),typeof _=="string"?N!=null&&Ki(N):sn(_,A,N))}function bn(_){ot.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(bn,ot);var w_=/^https?$/i,LE=["POST","PUT"];n=bn.prototype,n.Fa=function(_){this.H=_},n.ea=function(_,A,N,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);A=A?A.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Jn.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(A,String(_),!0),this.B=!1}catch(we){$l(this,we);return}if(_=N||"",N=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var ge in H)N.set(ge,H[ge]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const we of H.keys())N.set(we,H.get(we));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(N.keys()).find(we=>we.toLowerCase()=="content-type"),ge=a.FormData&&_ instanceof a.FormData,!(Array.prototype.indexOf.call(LE,A,void 0)>=0)||H||ge||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[we,Qe]of N)this.g.setRequestHeader(we,Qe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(we){$l(this,we)}};function $l(_,A){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=A,_.o=5,Wl(_),qo(_)}function Wl(_){_.A||(_.A=!0,gt(_,"complete"),gt(_,"error"))}n.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,gt(this,"complete"),gt(this,"abort"),qo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qo(this,!0)),bn.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Xo(this):this.Xa())},n.Xa=function(){Xo(this)};function Xo(_){if(_.h&&typeof s<"u"){if(_.v&&io(_)==4)setTimeout(_.Ca.bind(_),0);else if(gt(_,"readystatechange"),io(_)==4){_.h=!1;try{const we=_.ca();e:switch(we){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var N;if(!(N=A)){var H;if(H=we===0){let Qe=String(_.D).match(Bl)[1]||null;!Qe&&a.self&&a.self.location&&(Qe=a.self.location.protocol.slice(0,-1)),H=!w_.test(Qe?Qe.toLowerCase():"")}N=H}if(N)gt(_,"complete"),gt(_,"success");else{_.o=6;try{var ge=io(_)>2?_.g.statusText:""}catch{ge=""}_.l=ge+" ["+_.ca()+"]",Wl(_)}}finally{qo(_)}}}}function qo(_,A){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const N=_.g;_.g=null,A||gt(_,"ready");try{N.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function io(_){return _.g?_.g.readyState:0}n.ca=function(){try{return io(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(_){if(this.g){var A=this.g.responseText;return _&&A.indexOf(_)==0&&(A=A.substring(_.length)),Wo(A)}};function S_(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function H0(_){const A={};_=(_.g&&io(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<_.length;H++){if(j(_[H]))continue;var N=B(_[H]);const ge=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const we=A[ge]||[];A[ge]=we,we.push(N)}Ie(A,function(H){return H.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function so(_,A,N){return N&&N.internalChannelParams&&N.internalChannelParams[_]||A}function uf(_){this.za=0,this.i=[],this.j=new Wn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=so("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=so("baseRetryDelayMs",5e3,_),this.Za=so("retryDelaySeedMs",1e4,_),this.Ta=so("forwardChannelMaxRetries",2,_),this.va=so("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new hn(_&&_.concurrentRequestLimit),this.Ba=new Su,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=uf.prototype,n.ka=8,n.I=1,n.connect=function(_,A,N,H){un(0),this.W=_,this.H=A||{},N&&H!==void 0&&(this.H.OSID=N,this.H.OAID=H),this.F=this.X,this.J=Y0(this,null,this.W),Zo(this)};function hf(_){if(ff(_),_.I==3){var A=_.V++,N=Xs(_.J);if(sn(N,"SID",_.M),sn(N,"RID",A),sn(N,"TYPE","terminate"),ao(_,N),A=new q(_,_.j,A),A.M=2,A.A=Ko(Xs(N)),N=!1,a.navigator&&a.navigator.sendBeacon)try{N=a.navigator.sendBeacon(A.A.toString(),"")}catch{}!N&&a.Image&&(new Image().src=A.A,N=!0),N||(A.g=I_(A.j,null),A.g.ea(A.A)),A.F=Date.now(),ve(A)}Au(_)}function Ss(_){_.g&&(Iu(_),_.g.cancel(),_.g=null)}function ff(_){Ss(_),_.v&&(a.clearTimeout(_.v),_.v=null),df(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&a.clearTimeout(_.m),_.m=null)}function Zo(_){if(!_n(_.h)&&!_.m){_.m=!0;var A=_.Ea;V||C(),z||(V(),z=!0),P.add(A,_),_.D=0}}function T_(_,A){return Bn(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=A.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=vs(u(_.Ea,_,A),mf(_,_.D)),_.D++,!0)}n.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const ge=new q(this,this.j,_);let we=this.o;if(this.U&&(we?(we=Y(we),te(we,this.U)):we=this.U),this.u!==null||this.R||(ge.J=we,we=null),this.S)e:{for(var A=0,N=0;N<this.i.length;N++){t:{var H=this.i[N];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(A+=H,A>4096){A=N;break e}if(A===4096||N===this.i.length-1){A=N+1;break e}}A=1e3}else A=1e3;A=K0(this,ge,A),N=Xs(this.J),sn(N,"RID",_),sn(N,"CVER",22),this.G&&sn(N,"X-HTTP-Session-Id",this.G),ao(this,N),we&&(this.R?A="headers="+Ki(E_(we))+"&"+A:this.u&&cf(N,this.u,we)),Ys(this.h,ge),this.Ra&&sn(N,"TYPE","init"),this.S?(sn(N,"$req",A),sn(N,"SID","null"),ge.U=!0,Q(ge,N,null)):Q(ge,N,A),this.I=2}}else this.I==3&&(_?Tu(this,_):this.i.length==0||_n(this.h)||Tu(this))};function Tu(_,A){var N;A?N=A.l:N=_.V++;const H=Xs(_.J);sn(H,"SID",_.M),sn(H,"RID",N),sn(H,"AID",_.K),ao(_,H),_.u&&_.o&&cf(H,_.u,_.o),N=new q(_,_.j,N,_.D+1),_.u===null&&(N.J=_.o),A&&(_.i=A.G.concat(_.i)),A=K0(_,N,1e3),N.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),Ys(_.h,N),Q(N,H,A)}function ao(_,A){_.H&&Ae(_.H,function(N,H){sn(A,H,N)}),_.l&&Ae({},function(N,H){sn(A,H,N)})}function K0(_,A,N){N=Math.min(_.i.length,N);const H=_.l?u(_.l.Ka,_.l,_):null;e:{var ge=_.i;let Lt=-1;for(;;){const ur=["count="+N];Lt==-1?N>0?(Lt=ge[0].g,ur.push("ofs="+Lt)):Lt=0:ur.push("ofs="+Lt);let yn=!0;for(let pr=0;pr<N;pr++){var we=ge[pr].g;const Is=ge[pr].map;if(we-=Lt,we<0)Lt=Math.max(0,ge[pr].g-100),yn=!1;else try{we="req"+we+"_"||"";try{var Qe=Is instanceof Map?Is:Object.entries(Is);for(const[Qo,lo]of Qe){let co=lo;o(lo)&&(co=Fr(lo)),ur.push(we+Qo+"="+encodeURIComponent(co))}}catch(Qo){throw ur.push(we+"type="+encodeURIComponent("_badmap")),Qo}}catch{H&&H(Is)}}if(yn){Qe=ur.join("&");break e}}Qe=void 0}return _=_.i.splice(0,N),A.G=_,Qe}function gi(_){if(!_.g&&!_.v){_.Y=1;var A=_.Da;V||C(),z||(V(),z=!0),P.add(A,_),_.A=0}}function oo(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=vs(u(_.Da,_),mf(_,_.A)),_.A++,!0)}n.Da=function(){if(this.v=null,Hl(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=vs(u(this.Wa,this),_)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,un(10),Ss(this),Hl(this))};function Iu(_){_.B!=null&&(a.clearTimeout(_.B),_.B=null)}function Hl(_){_.g=new q(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var A=Xs(_.na);sn(A,"RID","rpc"),sn(A,"SID",_.M),sn(A,"AID",_.K),sn(A,"CI",_.F?"0":"1"),!_.F&&_.ia&&sn(A,"TO",_.ia),sn(A,"TYPE","xmlhttp"),ao(_,A),_.u&&_.o&&cf(A,_.u,_.o),_.O&&(_.g.H=_.O);var N=_.g;_=_.ba,N.M=1,N.A=Ko(Xs(A)),N.u=null,N.R=!0,_e(N,_)}n.Va=function(){this.C!=null&&(this.C=null,Ss(this),oo(this),un(19))};function df(_){_.C!=null&&(a.clearTimeout(_.C),_.C=null)}function gf(_,A){var N=null;if(_.g==A){df(_),Iu(_),_.g=null;var H=2}else if(Ea(_.h,A))N=A.G,Es(_.h,A),H=1;else return;if(_.I!=0){if(A.o)if(H==1){N=A.u?A.u.length:0,A=Date.now()-A.F;var ge=_.D;H=_s(),gt(H,new xs(H,N)),Zo(_)}else gi(_);else if(ge=A.m,ge==3||ge==0&&A.X>0||!(H==1&&T_(_,A)||H==2&&oo(_)))switch(N&&N.length>0&&(A=_.h,A.i=A.i.concat(N)),ge){case 1:Ts(_,5);break;case 4:Ts(_,10);break;case 3:Ts(_,6);break;default:Ts(_,2)}}}function mf(_,A){let N=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(N*=2),N*A}function Ts(_,A){if(_.j.info("Error code "+A),A==2){var N=u(_.bb,_),H=_.Ua;const ge=!H;H=new Qa(H||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||xu(H,"https"),Ko(H),ge?no(H.toString(),N):ro(H.toString(),N)}else un(2);_.I=0,_.l&&_.l.pa(A),Au(_),ff(_)}n.bb=function(_){_?(this.j.info("Successfully pinged google.com"),un(2)):(this.j.info("Failed to ping google.com"),un(1))};function Au(_){if(_.I=0,_.ja=[],_.l){const A=cr(_.h);(A.length!=0||_.i.length!=0)&&(v(_.ja,A),v(_.ja,_.i),_.h.i.length=0,p(_.i),_.i.length=0),_.l.oa()}}function Y0(_,A,N){var H=N instanceof Qa?Xs(N):new Qa(N);if(H.g!="")A&&(H.g=A+"."+H.g),Ja(H,H.u);else{var ge=a.location;H=ge.protocol,A=A?A+"."+ge.hostname:ge.hostname,ge=+ge.port;const we=new Qa(null);H&&xu(we,H),A&&(we.g=A),ge&&Ja(we,ge),N&&(we.h=N),H=we}return N=_.G,A=_.wa,N&&A&&sn(H,N,A),sn(H,"VER",_.ka),ao(_,H),H}function I_(_,A,N){if(A&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return A=_.Aa&&!_.ma?new bn(new Yo({ab:N})):new bn(_.ma),A.Fa(_.L),A}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function A_(){}n=A_.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function pf(){}pf.prototype.g=function(_,A){return new ei(_,A)};function ei(_,A){ot.call(this),this.g=new uf(A),this.l=_,this.h=A&&A.messageUrlParams||null,_=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(_?_["X-WebChannel-Content-Type"]=A.messageContentType:_={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.sa&&(_?_["X-WebChannel-Client-Profile"]=A.sa:_={"X-WebChannel-Client-Profile":A.sa}),this.g.U=_,(_=A&&A.Qb)&&!j(_)&&(this.g.u=_),this.A=A&&A.supportsCrossDomainXhr||!1,this.v=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!j(A)&&(this.g.G=A,_=this.h,_!==null&&A in _&&(_=this.h,A in _&&delete _[A])),this.j=new Kl(this)}d(ei,ot),ei.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ei.prototype.close=function(){hf(this.g)},ei.prototype.o=function(_){var A=this.g;if(typeof _=="string"){var N={};N.__data__=_,_=N}else this.v&&(N={},N.__data__=Fr(_),_=N);A.i.push(new Rt(A.Ya++,_)),A.I==3&&Zo(A)},ei.prototype.N=function(){this.g.l=null,delete this.j,hf(this.g),delete this.g,ei.Z.N.call(this)};function R_(_){Ks.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var A=_.__sm__;if(A){e:{for(const N in A){_=N;break e}_=void 0}(this.i=_)&&(_=this.i,A=A!==null&&_ in A?A[_]:void 0),this.data=A}else this.data=_}d(R_,Ks);function C_(){xa.call(this),this.status=1}d(C_,xa);function Kl(_){this.g=_}d(Kl,A_),Kl.prototype.ra=function(){gt(this.g,"a")},Kl.prototype.qa=function(_){gt(this.g,new R_(_))},Kl.prototype.pa=function(_){gt(this.g,new C_)},Kl.prototype.oa=function(){gt(this.g,"b")},pf.prototype.createWebChannel=pf.prototype.g,ei.prototype.send=ei.prototype.o,ei.prototype.open=ei.prototype.m,ei.prototype.close=ei.prototype.close,v5=function(){return new pf},x5=function(){return _s()},y5=Zr,fT={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},mr.NO_ERROR=0,mr.TIMEOUT=8,mr.HTTP_ERROR=6,hy=mr,Wt.COMPLETE="complete",_5=Wt,Ho.EventType=ps,ps.OPEN="a",ps.CLOSE="b",ps.ERROR="c",ps.MESSAGE="d",ot.prototype.listen=ot.prototype.J,zg=Ho,bn.prototype.listenOnce=bn.prototype.K,bn.prototype.getLastError=bn.prototype.Ha,bn.prototype.getLastErrorCode=bn.prototype.ya,bn.prototype.getStatus=bn.prototype.ca,bn.prototype.getResponseJson=bn.prototype.La,bn.prototype.getResponseText=bn.prototype.la,bn.prototype.send=bn.prototype.ea,bn.prototype.setWithCredentials=bn.prototype.Fa,p5=bn}).apply(typeof L1<"u"?L1:typeof self<"u"?self:typeof window<"u"?window:{});const NM="@firebase/firestore",LM="4.9.3";class oi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}oi.UNAUTHENTICATED=new oi(null),oi.GOOGLE_CREDENTIALS=new oi("google-credentials-uid"),oi.FIRST_PARTY=new oi("first-party-uid"),oi.MOCK_USER=new oi("mock-user");let S0="12.7.0";const Ph=new gA("@firebase/firestore");function ad(){return Ph.logLevel}function $e(n,...e){if(Ph.logLevel<=Ut.DEBUG){const t=e.map(_A);Ph.debug(`Firestore (${S0}): ${n}`,...t)}}function Gi(n,...e){if(Ph.logLevel<=Ut.ERROR){const t=e.map(_A);Ph.error(`Firestore (${S0}): ${n}`,...t)}}function bh(n,...e){if(Ph.logLevel<=Ut.WARN){const t=e.map(_A);Ph.warn(`Firestore (${S0}): ${n}`,...t)}}function _A(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function dt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,E5(n,r,t)}function E5(n,e,t){let r=`FIRESTORE (${S0}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Gi(r),new Error(r)}function yt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||E5(e,i,r)}function Nt(n,e){return n}const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class et extends zo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class El{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class w5{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(oi.UNAUTHENTICATED)))}shutdown(){}}class ZK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class QK{constructor(e){this.t=e,this.currentUser=oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){yt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new El;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new El,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const l=s;e.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},o=l=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((l=>o(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new El)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt(typeof r.accessToken=="string",31837,{l:r}),new w5(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return yt(e===null||typeof e=="string",2055,{h:e}),new oi(e)}}class JK{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=oi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class eY{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new JK(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(oi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class OM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tY{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,la(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){yt(this.o===void 0,3512);const r=s=>{s.error!=null&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,$e("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new OM(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(yt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new OM(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function nY(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class yA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=nY(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function kt(n,e){return n<e?-1:n>e?1:0}function dT(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return z2(i)===z2(s)?kt(i,s):z2(i)?1:-1}return kt(n.length,e.length)}const rY=55296,iY=57343;function z2(n){const e=n.charCodeAt(0);return e>=rY&&e<=iY}function Qd(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function S5(n){return n+"\0"}const DM="__name__";class _o{constructor(e,t,r){t===void 0?t=0:t>e.length&&dt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&dt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return _o.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _o?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=_o.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return kt(e.length,t.length)}static compareSegments(e,t){const r=_o.isNumericId(e),i=_o.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?_o.extractNumericId(e).compare(_o.extractNumericId(t)):dT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Uc.fromString(e.substring(4,e.length-2))}}class cn extends _o{construct(e,t,r){return new cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new et(Pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new cn(t)}static emptyPath(){return new cn([])}}const sY=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zn extends _o{construct(e,t,r){return new Zn(e,t,r)}static isValidIdentifier(e){return sY.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===DM}static keyField(){return new Zn([DM])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new et(Pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new et(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new et(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new et(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zn(t)}static emptyPath(){return new Zn([])}}class tt{constructor(e){this.path=e}static fromPath(e){return new tt(cn.fromString(e))}static fromName(e){return new tt(cn.fromString(e).popFirst(5))}static empty(){return new tt(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&cn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new cn(e.slice()))}}function T5(n,e,t){if(!t)throw new et(Pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function aY(n,e,t,r){if(e===!0&&r===!0)throw new et(Pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function FM(n){if(!tt.isDocumentKey(n))throw new et(Pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function VM(n){if(tt.isDocumentKey(n))throw new et(Pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function I5(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function jv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":dt(12329,{type:typeof n})}function Zc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new et(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jv(n);throw new et(Pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Er(n,e){const t={typeString:n};return e&&(t.value=e),t}function Wp(n,e){if(!I5(n))throw new et(Pe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new et(Pe.INVALID_ARGUMENT,t);return!0}const jM=-62135596800,GM=1e6;class wn{static now(){return wn.fromMillis(Date.now())}static fromDate(e){return wn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*GM);return new wn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new et(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new et(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<jM)throw new et(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new et(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GM}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wp(e,wn._jsonSchema))return new wn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-jM;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wn._jsonSchemaVersion="firestore/timestamp/1.0",wn._jsonSchema={type:Er("string",wn._jsonSchemaVersion),seconds:Er("number"),nanoseconds:Er("number")};class xt{static fromTimestamp(e){return new xt(e)}static min(){return new xt(new wn(0,0))}static max(){return new xt(new wn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ym=-1;class ax{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function gT(n){return n.fields.find((e=>e.kind===2))}function Ku(n){return n.fields.filter((e=>e.kind!==2))}ax.UNKNOWN_ID=-1;class fy{constructor(e,t){this.fieldPath=e,this.kind=t}}class Xm{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Xm(0,Us.min())}}function oY(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=xt.fromTimestamp(r===1e9?new wn(t+1,0):new wn(t,r));return new Us(i,tt.empty(),e)}function A5(n){return new Us(n.readTime,n.key,Ym)}class Us{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Us(xt.min(),tt.empty(),Ym)}static max(){return new Us(xt.max(),tt.empty(),Ym)}}function xA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=tt.comparator(n.documentKey,e.documentKey),t!==0?t:kt(n.largestBatchId,e.largestBatchId))}const R5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class C5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Zh(n){if(n.code!==Pe.FAILED_PRECONDITION||n.message!==R5)throw n;$e("LocalStore","Unexpectedly lost primary lease")}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.reject(t)}static resolve(e){return new fe(((t,r)=>{t(e)}))}static reject(e){return new fe(((t,r)=>{r(e)}))}static waitFor(e){return new fe(((t,r)=>{let i=0,s=0,a=!1;e.forEach((o=>{++i,o.next((()=>{++s,a&&s===i&&t()}),(l=>r(l)))})),a=!0,s===i&&t()}))}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next((i=>i?fe.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new fe(((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next((f=>{a[u]=f,++o,o===s&&r(a)}),(f=>i(f)))}}))}static doWhile(e,t){return new fe(((r,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}}const bs="SimpleDb";class Gv{static open(e,t,r,i){try{return new Gv(t,e.transaction(i,r))}catch(s){throw new im(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new El,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new im(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=vA(r.target.error);this.S.reject(new im(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||($e(bs,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new cY(t)}}class zc{static delete(e){return $e(bs,"Removing database:",e),Ju(e5().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!c5())return!1;if(zc.F())return!0;const e=Or(),t=zc.M(e),r=0<t&&t<10,i=P5(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,zc.M(Or())===12.2&&Gi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||($e(bs,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new im(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new et(Pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new et(Pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new im(e,a))},i.onupgradeneeded=s=>{$e(bs,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next((()=>{$e(bs,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const o=Gv.open(this.db,e,s?"readonly":"readwrite",r),l=i(o).next((u=>(o.C(),u))).catch((u=>(o.abort(u),fe.reject(u)))).toPromise();return l.catch((()=>{})),await o.D,l}catch(o){const l=o,u=l.name!=="FirebaseError"&&a<3;if($e(bs,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function P5(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class lY{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ju(this.U.delete())}}class im extends et{constructor(e,t){super(Pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function fu(n){return n.name==="IndexedDbTransactionError"}class cY{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?($e(bs,"PUT",this.store.name,e,t),r=this.store.put(t,e)):($e(bs,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ju(r)}add(e){return $e(bs,"ADD",this.store.name,e,e),Ju(this.store.add(e))}get(e){return Ju(this.store.get(e)).next((t=>(t===void 0&&(t=null),$e(bs,"GET",this.store.name,e,t),t)))}delete(e){return $e(bs,"DELETE",this.store.name,e),Ju(this.store.delete(e))}count(){return $e(bs,"COUNT",this.store.name),Ju(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new fe(((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}}))}{const s=this.cursor(r),a=[];return this.H(s,((o,l)=>{a.push(l)})).next((()=>a))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new fe(((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}}))}Z(e,t){$e(bs,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((s,a,o)=>o.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new fe(((r,i)=>{t.onerror=s=>{const a=vA(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((o=>{o?a.continue():r()})):r()}}))}H(e,t){const r=[];return new fe(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const l=new lY(o),u=t(o.primaryKey,o.value,l);if(u instanceof fe){const f=u.catch((d=>(l.done(),fe.reject(d))));r.push(f)}l.isDone?i():l.G===null?o.continue():o.continue(l.G)}})).next((()=>fe.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ju(n){return new fe(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=vA(r.target.error);t(i)}}))}let BM=!1;function vA(n){const e=zc.M(Or());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new et("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return BM||(BM=!0,setTimeout((()=>{throw r}),0)),r}}return n}const sm="IndexBackfiller";class uY{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){$e(sm,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();$e(sm,`Documents written: ${t}`)}catch(t){fu(t)?$e(sm,"Ignoring IndexedDB error during index backfill: ",t):await Zh(t)}await this.re(6e4)}))}}class hY{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,s=!0;return fe.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!r.has(a))return $e(sm,`Processing collection: ${a}`),this.oe(e,a,i).next((o=>{i-=o,r.add(a)}));s=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this._e(i,s))).next((o=>($e(sm,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,t,o)))).next((()=>a.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,s)=>{const a=A5(s);xA(a,r)>0&&(r=a)})),new Us(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class da{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}da.ce=-1;const gh=-1;function Bv(n){return n==null}function qm(n){return n===0&&1/n==-1/0}function fY(n){return typeof n=="number"&&Number.isInteger(n)&&!qm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const ox="";function Ri(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=UM(e)),e=dY(n.get(t),e);return UM(e)}function dY(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case ox:t+="";break;default:t+=s}}return t}function UM(n){return n+ox+""}function wo(n){const e=n.length;if(yt(e>=2,64408,{path:n}),e===2)return yt(n.charAt(0)===ox&&n.charAt(1)==="",56145,{path:n}),cn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf(ox,s);switch((a<0||a>t)&&dt(50515,{path:n}),n.charAt(a+1)){case"":const o=n.substring(s,a);let l;i.length===0?l=o:(i+=o,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:dt(61167,{path:n})}s=a+2}return new cn(r)}const Yu="remoteDocuments",Hp="owner",Wf="owner",Zm="mutationQueues",gY="userId",La="mutations",zM="batchId",lh="userMutationsIndex",$M=["userId","batchId"];function dy(n,e){return[n,Ri(e)]}function b5(n,e,t){return[n,Ri(e),t]}const mY={},Jd="documentMutations",lx="remoteDocumentsV14",pY=["prefixPath","collectionGroup","readTime","documentId"],gy="documentKeyIndex",_Y=["prefixPath","collectionGroup","documentId"],M5="collectionGroupIndex",yY=["collectionGroup","readTime","prefixPath","documentId"],Qm="remoteDocumentGlobal",mT="remoteDocumentGlobalKey",e0="targets",k5="queryTargetsIndex",xY=["canonicalId","targetId"],t0="targetDocuments",vY=["targetId","path"],EA="documentTargetsIndex",EY=["path","targetId"],cx="targetGlobalKey",mh="targetGlobal",Jm="collectionParents",wY=["collectionId","parent"],n0="clientMetadata",SY="clientId",Uv="bundles",TY="bundleId",zv="namedQueries",IY="name",wA="indexConfiguration",AY="indexId",pT="collectionGroupIndex",RY="collectionGroup",am="indexState",CY=["indexId","uid"],N5="sequenceNumberIndex",PY=["uid","sequenceNumber"],om="indexEntries",bY=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],L5="documentKeyIndex",MY=["indexId","uid","orderedDocumentKey"],$v="documentOverlays",kY=["userId","collectionPath","documentId"],_T="collectionPathOverlayIndex",NY=["userId","collectionPath","largestBatchId"],O5="collectionGroupOverlayIndex",LY=["userId","collectionGroup","largestBatchId"],SA="globals",OY="name",D5=[Zm,La,Jd,Yu,e0,Hp,mh,t0,n0,Qm,Jm,Uv,zv],DY=[...D5,$v],F5=[Zm,La,Jd,lx,e0,Hp,mh,t0,n0,Qm,Jm,Uv,zv,$v],V5=F5,TA=[...V5,wA,am,om],FY=TA,j5=[...TA,SA],VY=j5;class yT extends C5{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Dr(n,e){const t=Nt(n);return zc.O(t.le,e)}function WM(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function du(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function G5(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class $n{constructor(e,t){this.comparator=e,this.root=t||li.EMPTY}insert(e,t){return new $n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,li.BLACK,null,null))}remove(e){return new $n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,li.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new O1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new O1(this.root,e,this.comparator,!1)}getReverseIterator(){return new O1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new O1(this.root,e,this.comparator,!0)}}class O1{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class li{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??li.RED,this.left=i??li.EMPTY,this.right=s??li.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new li(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return li.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return li.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,li.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,li.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw dt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw dt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw dt(27949);return e+(this.isRed()?0:1)}}li.EMPTY=null,li.RED=!0,li.BLACK=!1;li.EMPTY=new class{constructor(){this.size=0}get key(){throw dt(57766)}get value(){throw dt(16141)}get color(){throw dt(16727)}get left(){throw dt(29726)}get right(){throw dt(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new li(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class In{constructor(e){this.comparator=e,this.data=new $n(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new HM(this.data.getIterator())}getIteratorFrom(e){return new HM(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof In)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new In(this.comparator);return t.data=e,t}}class HM{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Hf(n){return n.hasNext()?n.getNext():void 0}class ls{constructor(e){this.fields=e,e.sort(Zn.comparator)}static empty(){return new ls([])}unionWith(e){let t=new In(Zn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ls(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qd(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class B5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Sr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new B5("Invalid base64 string: "+s):s}})(e);return new Sr(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new Sr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sr.EMPTY_BYTE_STRING=new Sr("");const jY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cl(n){if(yt(!!n,39018),typeof n=="string"){let e=0;const t=jY.exec(n);if(yt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zn(n.seconds),nanos:zn(n.nanos)}}function zn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Pl(n){return typeof n=="string"?Sr.fromBase64String(n):Sr.fromUint8Array(n)}const U5="server_timestamp",z5="__type__",$5="__previous_value__",W5="__local_write_time__";function IA(n){return(n?.mapValue?.fields||{})[z5]?.stringValue===U5}function Wv(n){const e=n.mapValue.fields[$5];return IA(e)?Wv(e):e}function ep(n){const e=Cl(n.mapValue.fields[W5].timestampValue);return new wn(e.seconds,e.nanos)}class GY{constructor(e,t,r,i,s,a,o,l,u,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=f}}const ux="(default)";class Mh{constructor(e,t){this.projectId=e,this.database=t||ux}static empty(){return new Mh("","")}get isDefaultDatabase(){return this.database===ux}isEqual(e){return e instanceof Mh&&e.projectId===this.projectId&&e.database===this.database}}const AA="__type__",H5="__max__",Lc={mapValue:{fields:{__type__:{stringValue:H5}}}},RA="__vector__",r0="value",my={nullValue:"NULL_VALUE"};function Qc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?IA(n)?4:K5(n)?9007199254740991:Hv(n)?10:11:dt(28295,{value:n})}function Do(n,e){if(n===e)return!0;const t=Qc(n);if(t!==Qc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ep(n).isEqual(ep(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Cl(i.timestampValue),o=Cl(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Pl(i.bytesValue).isEqual(Pl(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return zn(i.geoPointValue.latitude)===zn(s.geoPointValue.latitude)&&zn(i.geoPointValue.longitude)===zn(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return zn(i.integerValue)===zn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=zn(i.doubleValue),o=zn(s.doubleValue);return a===o?qm(a)===qm(o):isNaN(a)&&isNaN(o)}return!1})(n,e);case 9:return Qd(n.arrayValue.values||[],e.arrayValue.values||[],Do);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(WM(a)!==WM(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Do(a[l],o[l])))return!1;return!0})(n,e);default:return dt(52216,{left:n})}}function tp(n,e){return(n.values||[]).find((t=>Do(t,e)))!==void 0}function Jc(n,e){if(n===e)return 0;const t=Qc(n),r=Qc(e);if(t!==r)return kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return kt(n.booleanValue,e.booleanValue);case 2:return(function(s,a){const o=zn(s.integerValue||s.doubleValue),l=zn(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1})(n,e);case 3:return KM(n.timestampValue,e.timestampValue);case 4:return KM(ep(n),ep(e));case 5:return dT(n.stringValue,e.stringValue);case 6:return(function(s,a){const o=Pl(s),l=Pl(a);return o.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){const o=s.split("/"),l=a.split("/");for(let u=0;u<o.length&&u<l.length;u++){const f=kt(o[u],l[u]);if(f!==0)return f}return kt(o.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){const o=kt(zn(s.latitude),zn(a.latitude));return o!==0?o:kt(zn(s.longitude),zn(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return YM(n.arrayValue,e.arrayValue);case 10:return(function(s,a){const o=s.fields||{},l=a.fields||{},u=o[r0]?.arrayValue,f=l[r0]?.arrayValue,d=kt(u?.values?.length||0,f?.values?.length||0);return d!==0?d:YM(u,f)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===Lc.mapValue&&a===Lc.mapValue)return 0;if(s===Lc.mapValue)return 1;if(a===Lc.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=a.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let d=0;d<l.length&&d<f.length;++d){const g=dT(l[d],f[d]);if(g!==0)return g;const p=Jc(o[l[d]],u[f[d]]);if(p!==0)return p}return kt(l.length,f.length)})(n.mapValue,e.mapValue);default:throw dt(23264,{he:t})}}function KM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return kt(n,e);const t=Cl(n),r=Cl(e),i=kt(t.seconds,r.seconds);return i!==0?i:kt(t.nanos,r.nanos)}function YM(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Jc(t[i],r[i]);if(s)return s}return kt(t.length,r.length)}function i0(n){return xT(n)}function xT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Cl(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Pl(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return tt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=xT(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${xT(t.fields[a])}`;return i+"}"})(n.mapValue):dt(61005,{value:n})}function py(n){switch(Qc(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wv(n);return e?16+py(e):16;case 5:return 2*n.stringValue.length;case 6:return Pl(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+py(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return du(r.fields,((s,a)=>{i+=s.length+py(a)})),i})(n.mapValue);default:throw dt(13486,{value:n})}}function np(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function vT(n){return!!n&&"integerValue"in n}function rp(n){return!!n&&"arrayValue"in n}function XM(n){return!!n&&"nullValue"in n}function qM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _y(n){return!!n&&"mapValue"in n}function Hv(n){return(n?.mapValue?.fields||{})[AA]?.stringValue===RA}function lm(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return du(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=lm(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lm(n.arrayValue.values[t]);return e}return{...n}}function K5(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===H5}const Y5={mapValue:{fields:{[AA]:{stringValue:RA},[r0]:{arrayValue:{}}}}};function BY(n){return"nullValue"in n?my:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?np(Mh.empty(),tt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Hv(n)?Y5:{mapValue:{}}:dt(35942,{value:n})}function UY(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?np(Mh.empty(),tt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?Y5:"mapValue"in n?Hv(n)?{mapValue:{}}:Lc:dt(61959,{value:n})}function ZM(n,e){const t=Jc(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function QM(n,e){const t=Jc(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ti{constructor(e){this.value=e}static empty(){return new Ti({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!_y(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lm(t)}setAll(e){let t=Zn.emptyPath(),r={},i=[];e.forEach(((a,o)=>{if(!t.isImmediateParentOf(o)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=o.popLast()}a?r[o.lastSegment()]=lm(a):i.push(o.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());_y(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Do(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];_y(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){du(t,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new Ti(lm(this.value))}}function X5(n){const e=[];return du(n.fields,((t,r)=>{const i=new Zn([t]);if(_y(r)){const s=X5(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new ls(e)}class sr{constructor(e,t,r,i,s,a,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new sr(e,0,xt.min(),xt.min(),xt.min(),Ti.empty(),0)}static newFoundDocument(e,t,r,i){return new sr(e,1,t,xt.min(),r,i,0)}static newNoDocument(e,t){return new sr(e,2,t,xt.min(),xt.min(),Ti.empty(),0)}static newUnknownDocument(e,t){return new sr(e,3,t,xt.min(),xt.min(),Ti.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ti.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class s0{constructor(e,t){this.position=e,this.inclusive=t}}function JM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=tt.comparator(tt.fromName(a.referenceValue),t.key):r=Jc(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ek(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Do(n.position[t],e.position[t]))return!1;return!0}class hx{constructor(e,t="asc"){this.field=e,this.dir=t}}function zY(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class q5{}class zt extends q5{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new $Y(e,t,r):t==="array-contains"?new KY(e,r):t==="in"?new nF(e,r):t==="not-in"?new YY(e,r):t==="array-contains-any"?new XY(e,r):new zt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new WY(e,r):new HY(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Jc(t,this.value)):t!==null&&Qc(this.value)===Qc(t)&&this.matchesComparison(Jc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return dt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sn extends q5{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Sn(e,t)}matches(e){return a0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function a0(n){return n.op==="and"}function ET(n){return n.op==="or"}function CA(n){return Z5(n)&&a0(n)}function Z5(n){for(const e of n.filters)if(e instanceof Sn)return!1;return!0}function wT(n){if(n instanceof zt)return n.field.canonicalString()+n.op.toString()+i0(n.value);if(CA(n))return n.filters.map((e=>wT(e))).join(",");{const e=n.filters.map((t=>wT(t))).join(",");return`${n.op}(${e})`}}function Q5(n,e){return n instanceof zt?(function(r,i){return i instanceof zt&&r.op===i.op&&r.field.isEqual(i.field)&&Do(r.value,i.value)})(n,e):n instanceof Sn?(function(r,i){return i instanceof Sn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,o)=>s&&Q5(a,i.filters[o])),!0):!1})(n,e):void dt(19439)}function J5(n,e){const t=n.filters.concat(e);return Sn.create(t,n.op)}function eF(n){return n instanceof zt?(function(t){return`${t.field.canonicalString()} ${t.op} ${i0(t.value)}`})(n):n instanceof Sn?(function(t){return t.op.toString()+" {"+t.getFilters().map(eF).join(" ,")+"}"})(n):"Filter"}class $Y extends zt{constructor(e,t,r){super(e,t,r),this.key=tt.fromName(r.referenceValue)}matches(e){const t=tt.comparator(e.key,this.key);return this.matchesComparison(t)}}class WY extends zt{constructor(e,t){super(e,"in",t),this.keys=tF("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class HY extends zt{constructor(e,t){super(e,"not-in",t),this.keys=tF("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function tF(n,e){return(e.arrayValue?.values||[]).map((t=>tt.fromName(t.referenceValue)))}class KY extends zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return rp(t)&&tp(t.arrayValue,this.value)}}class nF extends zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&tp(this.value.arrayValue,t)}}class YY extends zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(tp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!tp(this.value.arrayValue,t)}}class XY extends zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!rp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>tp(this.value.arrayValue,r)))}}class qY{constructor(e,t=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function ST(n,e=null,t=[],r=[],i=null,s=null,a=null){return new qY(n,e,t,r,i,s,a)}function kh(n){const e=Nt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>wT(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),Bv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>i0(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>i0(r))).join(",")),e.Te=t}return e.Te}function Kp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!zY(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Q5(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ek(n.startAt,e.startAt)&&ek(n.endAt,e.endAt)}function fx(n){return tt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function dx(n,e){return n.filters.filter((t=>t instanceof zt&&t.field.isEqual(e)))}function tk(n,e,t){let r=my,i=!0;for(const s of dx(n,e)){let a=my,o=!0;switch(s.op){case"<":case"<=":a=BY(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=my}ZM({value:r,inclusive:i},{value:a,inclusive:o})<0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];ZM({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function nk(n,e,t){let r=Lc,i=!0;for(const s of dx(n,e)){let a=Lc,o=!0;switch(s.op){case">=":case">":a=UY(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=Lc}QM({value:r,inclusive:i},{value:a,inclusive:o})>0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];QM({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}class Yp{constructor(e,t=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ZY(n,e,t,r,i,s,a,o){return new Yp(n,e,t,r,i,s,a,o)}function PA(n){return new Yp(n)}function rk(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function rF(n){return n.collectionGroup!==null}function cm(n){const e=Nt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new In(Zn.comparator);return a.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(o=o.add(u.field))}))})),o})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new hx(s,r))})),t.has(Zn.keyField().canonicalString())||e.Ie.push(new hx(Zn.keyField(),r))}return e.Ie}function ma(n){const e=Nt(n);return e.Ee||(e.Ee=QY(e,cm(n))),e.Ee}function QY(n,e){if(n.limitType==="F")return ST(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new hx(i.field,s)}));const t=n.endAt?new s0(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new s0(n.startAt.position,n.startAt.inclusive):null;return ST(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function TT(n,e){const t=n.filters.concat([e]);return new Yp(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function IT(n,e,t){return new Yp(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kv(n,e){return Kp(ma(n),ma(e))&&n.limitType===e.limitType}function iF(n){return`${kh(ma(n))}|lt:${n.limitType}`}function od(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>eF(i))).join(", ")}]`),Bv(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>i0(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>i0(i))).join(",")),`Target(${r})`})(ma(n))}; limitType=${n.limitType})`}function Xp(n,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):tt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(const s of cm(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,o,l){const u=JM(a,o,l);return a.inclusive?u<=0:u<0})(r.startAt,cm(r),i)||r.endAt&&!(function(a,o,l){const u=JM(a,o,l);return a.inclusive?u>=0:u>0})(r.endAt,cm(r),i))})(n,e)}function JY(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function sF(n){return(e,t)=>{let r=!1;for(const i of cm(n)){const s=eX(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function eX(n,e,t){const r=n.field.isKeyField()?tt.comparator(e.key,t.key):(function(s,a,o){const l=a.data.field(s),u=o.data.field(s);return l!==null&&u!==null?Jc(l,u):dt(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt(19790,{direction:n.dir})}}class Dl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){du(this.inner,((t,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return G5(this.inner)}size(){return this.innerSize}}const tX=new $n(tt.comparator);function Vs(){return tX}const aF=new $n(tt.comparator);function $g(...n){let e=aF;for(const t of n)e=e.insert(t.key,t);return e}function oF(n){let e=aF;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function So(){return um()}function lF(){return um()}function um(){return new Dl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const nX=new $n(tt.comparator),rX=new In(tt.comparator);function jt(...n){let e=rX;for(const t of n)e=e.add(t);return e}const iX=new In(kt);function sX(){return iX}function bA(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qm(e)?"-0":e}}function cF(n){return{integerValue:""+n}}function aX(n,e){return fY(e)?cF(e):bA(n,e)}class Yv{constructor(){this._=void 0}}function oX(n,e,t){return n instanceof ip?(function(i,s){const a={fields:{[z5]:{stringValue:U5},[W5]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&IA(s)&&(s=Wv(s)),s&&(a.fields[$5]=s),{mapValue:a}})(t,e):n instanceof o0?hF(n,e):n instanceof l0?fF(n,e):(function(i,s){const a=uF(i,s),o=ik(a)+ik(i.Ae);return vT(a)&&vT(i.Ae)?cF(o):bA(i.serializer,o)})(n,e)}function lX(n,e,t){return n instanceof o0?hF(n,e):n instanceof l0?fF(n,e):t}function uF(n,e){return n instanceof sp?(function(r){return vT(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class ip extends Yv{}class o0 extends Yv{constructor(e){super(),this.elements=e}}function hF(n,e){const t=dF(e);for(const r of n.elements)t.some((i=>Do(i,r)))||t.push(r);return{arrayValue:{values:t}}}class l0 extends Yv{constructor(e){super(),this.elements=e}}function fF(n,e){let t=dF(e);for(const r of n.elements)t=t.filter((i=>!Do(i,r)));return{arrayValue:{values:t}}}class sp extends Yv{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ik(n){return zn(n.integerValue||n.doubleValue)}function dF(n){return rp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class cX{constructor(e,t){this.field=e,this.transform=t}}function uX(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof o0&&i instanceof o0||r instanceof l0&&i instanceof l0?Qd(r.elements,i.elements,Do):r instanceof sp&&i instanceof sp?Do(r.Ae,i.Ae):r instanceof ip&&i instanceof ip})(n.transform,e.transform)}class hX{constructor(e,t){this.version=e,this.transformResults=t}}class Bi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bi}static exists(e){return new Bi(void 0,e)}static updateTime(e){return new Bi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yy(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Xv{}function gF(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new qv(n.key,Bi.none()):new T0(n.key,n.data,Bi.none());{const t=n.data,r=Ti.empty();let i=new In(Zn.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Fl(n.key,r,new ls(i.toArray()),Bi.none())}}function fX(n,e,t){n instanceof T0?(function(i,s,a){const o=i.value.clone(),l=ak(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()})(n,e,t):n instanceof Fl?(function(i,s,a){if(!yy(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=ak(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(mF(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function hm(n,e,t,r){return n instanceof T0?(function(s,a,o,l){if(!yy(s.precondition,a))return o;const u=s.value.clone(),f=ok(s.fieldTransforms,l,a);return u.setAll(f),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof Fl?(function(s,a,o,l){if(!yy(s.precondition,a))return o;const u=ok(s.fieldTransforms,l,a),f=a.data;return f.setAll(mF(s)),f.setAll(u),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((d=>d.field)))})(n,e,t,r):(function(s,a,o){return yy(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o})(n,e,t)}function dX(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=uF(r.transform,i||null);s!=null&&(t===null&&(t=Ti.empty()),t.set(r.field,s))}return t||null}function sk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Qd(r,i,((s,a)=>uX(s,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class T0 extends Xv{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Fl extends Xv{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function mF(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function ak(n,e,t){const r=new Map;yt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,lX(a,o,t[i]))}return r}function ok(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,oX(s,a,e))}return r}class qv extends Xv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pF extends Xv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class MA{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&fX(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=hm(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=hm(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=lF();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=t.has(i.key)?null:o;const l=gF(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(xt.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),jt())}isEqual(e){return this.batchId===e.batchId&&Qd(this.mutations,e.mutations,((t,r)=>sk(t,r)))&&Qd(this.baseMutations,e.baseMutations,((t,r)=>sk(t,r)))}}class kA{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){yt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return nX})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new kA(e,t,r,i)}}class NA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class gX{constructor(e,t){this.count=e,this.unchangedNames=t}}var xr,Xt;function mX(n){switch(n){case Pe.OK:return dt(64938);case Pe.CANCELLED:case Pe.UNKNOWN:case Pe.DEADLINE_EXCEEDED:case Pe.RESOURCE_EXHAUSTED:case Pe.INTERNAL:case Pe.UNAVAILABLE:case Pe.UNAUTHENTICATED:return!1;case Pe.INVALID_ARGUMENT:case Pe.NOT_FOUND:case Pe.ALREADY_EXISTS:case Pe.PERMISSION_DENIED:case Pe.FAILED_PRECONDITION:case Pe.ABORTED:case Pe.OUT_OF_RANGE:case Pe.UNIMPLEMENTED:case Pe.DATA_LOSS:return!0;default:return dt(15467,{code:n})}}function _F(n){if(n===void 0)return Gi("GRPC error has no .code"),Pe.UNKNOWN;switch(n){case xr.OK:return Pe.OK;case xr.CANCELLED:return Pe.CANCELLED;case xr.UNKNOWN:return Pe.UNKNOWN;case xr.DEADLINE_EXCEEDED:return Pe.DEADLINE_EXCEEDED;case xr.RESOURCE_EXHAUSTED:return Pe.RESOURCE_EXHAUSTED;case xr.INTERNAL:return Pe.INTERNAL;case xr.UNAVAILABLE:return Pe.UNAVAILABLE;case xr.UNAUTHENTICATED:return Pe.UNAUTHENTICATED;case xr.INVALID_ARGUMENT:return Pe.INVALID_ARGUMENT;case xr.NOT_FOUND:return Pe.NOT_FOUND;case xr.ALREADY_EXISTS:return Pe.ALREADY_EXISTS;case xr.PERMISSION_DENIED:return Pe.PERMISSION_DENIED;case xr.FAILED_PRECONDITION:return Pe.FAILED_PRECONDITION;case xr.ABORTED:return Pe.ABORTED;case xr.OUT_OF_RANGE:return Pe.OUT_OF_RANGE;case xr.UNIMPLEMENTED:return Pe.UNIMPLEMENTED;case xr.DATA_LOSS:return Pe.DATA_LOSS;default:return dt(39323,{code:n})}}(Xt=xr||(xr={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";function pX(){return new TextEncoder}const _X=new Uc([4294967295,4294967295],0);function lk(n){const e=pX().encode(n),t=new m5;return t.update(e),new Uint8Array(t.digest())}function ck(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Uc([t,r],0),new Uc([i,s],0)]}class LA{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Wg(`Invalid padding: ${t}`);if(r<0)throw new Wg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wg(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Wg(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Uc.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Uc.fromNumber(r)));return i.compare(_X)===1&&(i=new Uc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=lk(e),[r,i]=ck(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new LA(s,i,t);return r.forEach((o=>a.insert(o))),a}insert(e){if(this.ge===0)return;const t=lk(e),[r,i]=ck(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Wg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Zv{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,qp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Zv(xt.min(),i,new $n(kt),Vs(),jt())}}class qp{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new qp(r,t,jt(),jt(),jt())}}class xy{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class yF{constructor(e,t){this.targetId=e,this.Ce=t}}class xF{constructor(e,t,r=Sr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class uk{constructor(){this.ve=0,this.Fe=hk(),this.Me=Sr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=jt(),t=jt(),r=jt();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:dt(38017,{changeType:s})}})),new qp(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=hk()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,yt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class yX{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vs(),this.Je=D1(),this.He=D1(),this.Ye=new $n(kt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:dt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(fx(s))if(r===0){const a=new tt(s.path);this.et(t,a,sr.newNoDocument(a,xt.min()))}else yt(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,o;try{a=Pl(r).toUint8Array()}catch(l){if(l instanceof B5)return bh("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new LA(a,i,s)}catch(l){return bh(l instanceof Wg?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,a)=>{const o=this.ot(a);if(o){if(s.current&&fx(o.target)){const l=new tt(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,sr.newNoDocument(l,e))}s.Be&&(t.set(a,s.ke()),s.qe())}}));let r=jt();this.He.forEach(((s,a)=>{let o=!0;a.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(r=r.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new Zv(e,t,this.Ye,this.je,r);return this.je=Vs(),this.Je=D1(),this.He=D1(),this.Ye=new $n(kt),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new uk,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new In(kt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new In(kt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||$e("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new uk),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function D1(){return new $n(tt.comparator)}function hk(){return new $n(tt.comparator)}const xX={asc:"ASCENDING",desc:"DESCENDING"},vX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EX={and:"AND",or:"OR"};class wX{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function AT(n,e){return n.useProto3Json||Bv(e)?e:{value:e}}function c0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function SX(n,e){return c0(n,e.toTimestamp())}function zi(n){return yt(!!n,49232),xt.fromTimestamp((function(t){const r=Cl(t);return new wn(r.seconds,r.nanos)})(n))}function OA(n,e){return RT(n,e).canonicalString()}function RT(n,e){const t=(function(i){return new cn(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function EF(n){const e=cn.fromString(n);return yt(bF(e),10190,{key:e.toString()}),e}function gx(n,e){return OA(n.databaseId,e.path)}function ph(n,e){const t=EF(e);if(t.get(1)!==n.databaseId.projectId)throw new et(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new et(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new tt(TF(t))}function wF(n,e){return OA(n.databaseId,e)}function SF(n){const e=EF(n);return e.length===4?cn.emptyPath():TF(e)}function CT(n){return new cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function TF(n){return yt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function fk(n,e,t){return{name:gx(n,e),fields:t.value.mapValue.fields}}function TX(n,e,t){const r=ph(n,e.name),i=zi(e.updateTime),s=e.createTime?zi(e.createTime):xt.min(),a=new Ti({mapValue:{fields:e.fields}}),o=sr.newFoundDocument(r,i,s,a);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function IX(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:dt(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(u,f){return u.useProto3Json?(yt(f===void 0||typeof f=="string",58123),Sr.fromBase64String(f||"")):(yt(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Sr.fromUint8Array(f||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&(function(u){const f=u.code===void 0?Pe.UNKNOWN:_F(u.code);return new et(f,u.message||"")})(a);t=new xF(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ph(n,r.document.name),s=zi(r.document.updateTime),a=r.document.createTime?zi(r.document.createTime):xt.min(),o=new Ti({mapValue:{fields:r.document.fields}}),l=sr.newFoundDocument(i,s,a,o),u=r.targetIds||[],f=r.removedTargetIds||[];t=new xy(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ph(n,r.document),s=r.readTime?zi(r.readTime):xt.min(),a=sr.newNoDocument(i,s),o=r.removedTargetIds||[];t=new xy([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ph(n,r.document),s=r.removedTargetIds||[];t=new xy([],s,i,null)}else{if(!("filter"in e))return dt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new gX(i,s),o=r.targetId;t=new yF(o,a)}}return t}function mx(n,e){let t;if(e instanceof T0)t={update:fk(n,e.key,e.value)};else if(e instanceof qv)t={delete:gx(n,e.key)};else if(e instanceof Fl)t={update:fk(n,e.key,e.data),updateMask:MX(e.fieldMask)};else{if(!(e instanceof pF))return dt(16599,{Vt:e.type});t={verify:gx(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const o=a.transform;if(o instanceof ip)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof o0)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof l0)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof sp)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw dt(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:SX(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:dt(27497)})(n,e.precondition)),t}function PT(n,e){const t=e.currentDocument?(function(s){return s.updateTime!==void 0?Bi.updateTime(zi(s.updateTime)):s.exists!==void 0?Bi.exists(s.exists):Bi.none()})(e.currentDocument):Bi.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(a,o){let l=null;if("setToServerValue"in o)yt(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),l=new ip;else if("appendMissingElements"in o){const f=o.appendMissingElements.values||[];l=new o0(f)}else if("removeAllFromArray"in o){const f=o.removeAllFromArray.values||[];l=new l0(f)}else"increment"in o?l=new sp(a,o.increment):dt(16584,{proto:o});const u=Zn.fromServerFormat(o.fieldPath);return new cX(u,l)})(n,i))):[];if(e.update){e.update.name;const i=ph(n,e.update.name),s=new Ti({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(l){const u=l.fieldPaths||[];return new ls(u.map((f=>Zn.fromServerFormat(f))))})(e.updateMask);return new Fl(i,s,a,t,r)}return new T0(i,s,t,r)}if(e.delete){const i=ph(n,e.delete);return new qv(i,t)}if(e.verify){const i=ph(n,e.verify);return new pF(i,t)}return dt(1463,{proto:e})}function AX(n,e){return n&&n.length>0?(yt(e!==void 0,14353),n.map((t=>(function(i,s){let a=i.updateTime?zi(i.updateTime):zi(s);return a.isEqual(xt.min())&&(a=zi(s)),new hX(a,i.transformResults||[])})(t,e)))):[]}function IF(n,e){return{documents:[wF(n,e.path)]}}function AF(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=wF(n,i);const s=(function(u){if(u.length!==0)return PF(Sn.create(u,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(u){if(u.length!==0)return u.map((f=>(function(g){return{field:ld(g.field),direction:CX(g.dir)}})(f)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const o=AT(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:t,parent:i}}function RF(n){let e=SF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){yt(r===1,65062);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=(function(d){const g=CF(d);return g instanceof Sn&&CA(g)?g.getFilters():[g]})(t.where));let a=[];t.orderBy&&(a=(function(d){return d.map((g=>(function(v){return new hx(cd(v.field),(function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(v.direction))})(g)))})(t.orderBy));let o=null;t.limit&&(o=(function(d){let g;return g=typeof d=="object"?d.value:d,Bv(g)?null:g})(t.limit));let l=null;t.startAt&&(l=(function(d){const g=!!d.before,p=d.values||[];return new s0(p,g)})(t.startAt));let u=null;return t.endAt&&(u=(function(d){const g=!d.before,p=d.values||[];return new s0(p,g)})(t.endAt)),ZY(e,i,a,s,o,"F",l,u)}function RX(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return dt(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function CF(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=cd(t.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=cd(t.unaryFilter.field);return zt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=cd(t.unaryFilter.field);return zt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=cd(t.unaryFilter.field);return zt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return dt(61313);default:return dt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return zt.create(cd(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return dt(58110);default:return dt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Sn.create(t.compositeFilter.filters.map((r=>CF(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return dt(1026)}})(t.compositeFilter.op))})(n):dt(30097,{filter:n})}function CX(n){return xX[n]}function PX(n){return vX[n]}function bX(n){return EX[n]}function ld(n){return{fieldPath:n.canonicalString()}}function cd(n){return Zn.fromServerFormat(n.fieldPath)}function PF(n){return n instanceof zt?(function(t){if(t.op==="=="){if(qM(t.value))return{unaryFilter:{field:ld(t.field),op:"IS_NAN"}};if(XM(t.value))return{unaryFilter:{field:ld(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(qM(t.value))return{unaryFilter:{field:ld(t.field),op:"IS_NOT_NAN"}};if(XM(t.value))return{unaryFilter:{field:ld(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ld(t.field),op:PX(t.op),value:t.value}}})(n):n instanceof Sn?(function(t){const r=t.getFilters().map((i=>PF(i)));return r.length===1?r[0]:{compositeFilter:{op:bX(t.op),filters:r}}})(n):dt(54877,{filter:n})}function MX(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function bF(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class hl{constructor(e,t,r,i,s=xt.min(),a=xt.min(),o=Sr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new hl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class MF{constructor(e){this.yt=e}}function kX(n,e){let t;if(e.document)t=TX(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=tt.fromSegments(e.noDocument.path),i=Lh(e.noDocument.readTime);t=sr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt(56709);{const r=tt.fromSegments(e.unknownDocument.path),i=Lh(e.unknownDocument.version);t=sr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const s=new wn(i[0],i[1]);return xt.fromTimestamp(s)})(e.readTime)),t}function dk(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:px(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,a){return{name:gx(s,a.key),fields:a.data.value.mapValue.fields,updateTime:c0(s,a.version.toTimestamp()),createTime:c0(s,a.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Nh(e.version)};else{if(!e.isUnknownDocument())return dt(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Nh(e.version)}}return r}function px(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Nh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Lh(n){const e=new wn(n.seconds,n.nanoseconds);return xt.fromTimestamp(e)}function eh(n,e){const t=(e.baseMutations||[]).map((s=>PT(n.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>PT(n.yt,s))),i=wn.fromMillis(e.localWriteTimeMs);return new MA(e.batchId,i,t,r)}function Hg(n){const e=Lh(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Lh(n.lastLimboFreeSnapshotVersion):xt.min();let r;return r=(function(s){return s.documents!==void 0})(n.query)?(function(s){const a=s.documents.length;return yt(a===1,1966,{count:a}),ma(PA(SF(s.documents[0])))})(n.query):(function(s){return ma(RF(s))})(n.query),new hl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Sr.fromBase64String(n.resumeToken))}function kF(n,e){const t=Nh(e.snapshotVersion),r=Nh(e.lastLimboFreeSnapshotVersion);let i;i=fx(e.target)?IF(n.yt,e.target):AF(n.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:kh(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function NF(n){const e=RF({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?IT(e,e.limit,"L"):e}function $2(n,e){return new NA(e.largestBatchId,PT(n.yt,e.overlayMutation))}function gk(n,e){const t=e.path.lastSegment();return[n,Ri(e.path.popLast()),t]}function mk(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Nh(r.readTime),documentKey:Ri(r.documentKey.path),largestBatchId:r.largestBatchId}}class NX{getBundleMetadata(e,t){return pk(e).get(t).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:Lh(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,t){return pk(e).put((function(i){return{bundleId:i.id,createTime:Nh(zi(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return _k(e).get(t).next((r=>{if(r)return(function(s){return{name:s.name,query:NF(s.bundledQuery),readTime:Lh(s.readTime)}})(r)}))}saveNamedQuery(e,t){return _k(e).put((function(i){return{name:i.name,readTime:Nh(zi(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function pk(n){return Dr(n,Uv)}function _k(n){return Dr(n,zv)}class Qv{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Qv(e,r)}getOverlay(e,t){return Cg(e).get(gk(this.userId,t)).next((r=>r?$2(this.serializer,r):null))}getOverlays(e,t){const r=So();return fe.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((s,a)=>{const o=new NA(t,a);i.push(this.St(e,o))})),fe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((a=>i.add(Ri(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(Cg(e).Z(_T,o))})),fe.waitFor(s)}getOverlaysForCollection(e,t,r){const i=So(),s=Ri(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Cg(e).J(_T,a).next((o=>{for(const l of o){const u=$2(this.serializer,l);i.set(u.getKey(),u)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const s=So();let a;const o=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cg(e).ee({index:O5,range:o},((l,u,f)=>{const d=$2(this.serializer,u);s.size()<i||d.largestBatchId===a?(s.set(d.getKey(),d),a=d.largestBatchId):f.done()})).next((()=>s))}St(e,t){return Cg(e).put((function(i,s,a){const[o,l,u]=gk(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:mx(i.yt,a.mutation)}})(this.serializer,this.userId,t))}}function Cg(n){return Dr(n,$v)}class LX{bt(e){return Dr(e,SA)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?Sr.fromUint8Array(r):Sr.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class th{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(zn(e.integerValue));else if("doubleValue"in e){const r=zn(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),qm(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Cl(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Pl(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?K5(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Hv(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):dt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=r0,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(zn(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),tt.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}th.Kt=new th;const Kf=255;function OX(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function yk(n){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const a=OX(255&r[s]);if(i+=a,a!==8)break}return i})(n);return Math.ceil(e/8)}class DX{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=yk(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=yk(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Kf),this.sn(255)}_n(){this.an(Kf),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Kf?(this.sn(Kf),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Kf?(this.an(Kf),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class FX{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class VX{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Pg{constructor(){this.cn=new DX,this.ln=new FX(this.cn),this.hn=new VX(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class nh{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new nh(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:vy(this.En),directionalValue:vy(this.dn),orderedDocumentKey:vy(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function gc(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=xk(n.En,e.En),t!==0?t:(t=xk(n.dn,e.dn),t!==0?t:tt.comparator(n.In,e.In)))}function xk(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function vy(n){return l5()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function vk(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class Ek{constructor(e){this.mn=new In(((t,r)=>Zn.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(yt(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=gT(e);if(t!==void 0&&!this.wn(t))return!1;const r=Ku(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const l=r[s];if(!this.Sn(o,l)||!this.bn(this.fn[a++],l))return!1}++s}for(;s<r.length;++s){const o=r[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new In(Zn.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new fy(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new fy(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new fy(r.field,r.dir==="asc"?0:1)));return new ax(ax.UNKNOWN_ID,this.collectionId,t,Xm.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function LF(n){if(yt(n instanceof zt||n instanceof Sn,20012),n instanceof zt){if(n instanceof nF){const t=n.value.arrayValue?.values?.map((r=>zt.create(n.field,"==",r)))||[];return Sn.create(t,"or")}return n}const e=n.filters.map((t=>LF(t)));return Sn.create(e,n.op)}function jX(n){if(n.getFilters().length===0)return[];const e=kT(LF(n));return yt(OF(e),7391),bT(e)||MT(e)?[e]:e.getFilters()}function bT(n){return n instanceof zt}function MT(n){return n instanceof Sn&&CA(n)}function OF(n){return bT(n)||MT(n)||(function(t){if(t instanceof Sn&&ET(t)){for(const r of t.getFilters())if(!bT(r)&&!MT(r))return!1;return!0}return!1})(n)}function kT(n){if(yt(n instanceof zt||n instanceof Sn,34018),n instanceof zt)return n;if(n.filters.length===1)return kT(n.filters[0]);const e=n.filters.map((r=>kT(r)));let t=Sn.create(e,n.op);return t=_x(t),OF(t)?t:(yt(t instanceof Sn,64498),yt(a0(t),40251),yt(t.filters.length>1,57927),t.filters.reduce(((r,i)=>DA(r,i))))}function DA(n,e){let t;return yt(n instanceof zt||n instanceof Sn,38388),yt(e instanceof zt||e instanceof Sn,25473),t=n instanceof zt?e instanceof zt?(function(i,s){return Sn.create([i,s],"and")})(n,e):wk(n,e):e instanceof zt?wk(e,n):(function(i,s){if(yt(i.filters.length>0&&s.filters.length>0,48005),a0(i)&&a0(s))return J5(i,s.getFilters());const a=ET(i)?i:s,o=ET(i)?s:i,l=a.filters.map((u=>DA(u,o)));return Sn.create(l,"or")})(n,e),_x(t)}function wk(n,e){if(a0(e))return J5(e,n.getFilters());{const t=e.filters.map((r=>DA(n,r)));return Sn.create(t,"or")}}function _x(n){if(yt(n instanceof zt||n instanceof Sn,11850),n instanceof zt)return n;const e=n.getFilters();if(e.length===1)return _x(e[0]);if(Z5(n))return n;const t=e.map((i=>_x(i))),r=[];return t.forEach((i=>{i instanceof zt?r.push(i):i instanceof Sn&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Sn.create(r,n.op)}class GX{constructor(){this.Cn=new FA}addToCollectionParentIndex(e,t){return this.Cn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(Us.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(Us.min())}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class FA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new In(cn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new In(cn.comparator)).toArray()}}const Sk="IndexedDbIndexManager",F1=new Uint8Array(0);class BX{constructor(e,t){this.databaseId=t,this.vn=new FA,this.Fn=new Dl((r=>kh(r)),((r,i)=>Kp(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const s={collectionId:r,parent:Ri(i)};return Tk(e).put(s)}return fe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[S5(t),""],!1,!0);return Tk(e).J(i).next((s=>{for(const a of s){if(a.collectionId!==t)break;r.push(wo(a.parent))}return r}))}addFieldIndex(e,t){const r=bg(e),i=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((l=>[l.fieldPath.canonicalString(),l.kind]))}})(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=Xf(e);return s.next((o=>{a.put(mk(o,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const r=bg(e),i=Xf(e),s=Yf(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=bg(e),r=Yf(e),i=Xf(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return fe.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new Ek(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,t){const r=Yf(e);let i=!0;const s=new Map;return fe.forEach(this.Mn(t),(a=>this.xn(e,a).next((o=>{i&&(i=!!o),s.set(a,o)})))).next((()=>{if(i){let a=jt();const o=[];return fe.forEach(s,((l,u)=>{$e(Sk,`Using index ${(function(M){return`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map((k=>`${k.fieldPath}:${k.kind}`)).join(",")}`})(l)} to execute ${kh(t)}`);const f=(function(M,k){const V=gT(k);if(V===void 0)return null;for(const z of dx(M,V.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null})(u,l),d=(function(M,k){const V=new Map;for(const z of Ku(k))for(const P of dx(M,z.fieldPath))switch(P.op){case"==":case"in":V.set(z.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return V.set(z.fieldPath.canonicalString(),P.value),Array.from(V.values())}return null})(u,l),g=(function(M,k){const V=[];let z=!0;for(const P of Ku(k)){const C=P.kind===0?tk(M,P.fieldPath,M.startAt):nk(M,P.fieldPath,M.startAt);V.push(C.value),z&&(z=C.inclusive)}return new s0(V,z)})(u,l),p=(function(M,k){const V=[];let z=!0;for(const P of Ku(k)){const C=P.kind===0?nk(M,P.fieldPath,M.endAt):tk(M,P.fieldPath,M.endAt);V.push(C.value),z&&(z=C.inclusive)}return new s0(V,z)})(u,l),v=this.On(l,u,g),y=this.On(l,u,p),E=this.Nn(l,u,d),T=this.Bn(l.indexId,f,v,g.inclusive,y,p.inclusive,E);return fe.forEach(T,(R=>r.Y(R,t.limit).next((M=>{M.forEach((k=>{const V=tt.fromSegments(k.documentKey);a.has(V)||(a=a.add(V),o.push(V))}))}))))})).next((()=>o))}return fe.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=jX(Sn.create(e.filters,"and")).map((r=>ST(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,s,a,o){const l=(t!=null?t.length:1)*Math.max(r.length,s.length),u=l/(t!=null?t.length:1),f=[];for(let d=0;d<l;++d){const g=t?this.Ln(t[d/u]):F1,p=this.kn(e,g,r[d%u],i),v=this.qn(e,g,s[d%u],a),y=o.map((E=>this.kn(e,g,E,!0)));f.push(...this.createRange(p,v,y))}return f}kn(e,t,r,i){const s=new nh(e,tt.empty(),t,r);return i?s:s.An()}qn(e,t,r,i){const s=new nh(e,tt.empty(),t,r);return i?s.An():s}xn(e,t){const r=new Ek(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const o of s)r.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return fe.forEach(i,(s=>this.xn(e,s).next((a=>{a?r!==0&&a.fields.length<(function(l){let u=new In(Zn.comparator),f=!1;for(const d of l.filters)for(const g of d.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?f=!0:u=u.add(g.field));for(const d of l.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(f?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(a){return a.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new Pg;for(const i of Ku(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Pn(i.kind);th.Kt.Dt(s,a)}return r.un()}Ln(e){const t=new Pg;return th.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Pg;return th.Kt.Dt(np(this.databaseId,t),r.Pn((function(s){const a=Ku(s);return a.length===0?0:a[a.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Pg);let s=0;for(const a of Ku(e)){const o=r[s++];for(const l of i)if(this.Un(t,a.fieldPath)&&rp(o))i=this.Kn(i,a,o);else{const u=l.Pn(a.kind);th.Kt.Dt(o,u)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const o of i){const l=new Pg;l.seed(o.un()),th.Kt.Dt(a,l.Pn(t.kind)),s.push(l)}return s}Un(e,t){return!!e.filters.find((r=>r instanceof zt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=bg(e),i=Xf(e);return(t?r.J(pT,IDBKeyRange.bound(t,t)):r.J()).next((s=>{const a=[];return fe.forEach(s,(o=>i.get([o.indexId,this.uid]).next((l=>{a.push((function(f,d){const g=d?new Xm(d.sequenceNumber,new Us(Lh(d.readTime),new tt(wo(d.documentKey)),d.largestBatchId)):Xm.empty(),p=f.fields.map((([v,y])=>new fy(Zn.fromServerFormat(v),y)));return new ax(f.indexId,f.collectionGroup,p,g)})(o,l))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:kt(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=bg(e),s=Xf(e);return this.Gn(e).next((a=>i.J(pT,IDBKeyRange.bound(t,t)).next((o=>fe.forEach(o,(l=>s.put(mk(l.indexId,this.uid,a,r))))))))}updateIndexEntries(e,t){const r=new Map;return fe.forEach(t,((i,s)=>{const a=r.get(i.collectionGroup);return(a?fe.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((o=>(r.set(i.collectionGroup,o),fe.forEach(o,(l=>this.zn(e,i,l).next((u=>{const f=this.jn(s,l);return u.isEqual(f)?fe.resolve():this.Jn(e,s,l,u,f)})))))))}))}Hn(e,t,r,i){return Yf(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return Yf(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=Yf(e);let s=new In(gc);return i.ee({index:L5,range:IDBKeyRange.only([r.indexId,this.uid,vy(this.$n(r,t))])},((a,o)=>{s=s.add(new nh(r.indexId,t,vk(o.arrayValue),vk(o.directionalValue)))})).next((()=>s))}jn(e,t){let r=new In(gc);const i=this.Qn(t,e);if(i==null)return r;const s=gT(t);if(s!=null){const a=e.data.field(s.fieldPath);if(rp(a))for(const o of a.arrayValue.values||[])r=r.add(new nh(t.indexId,e.key,this.Ln(o),i))}else r=r.add(new nh(t.indexId,e.key,F1,i));return r}Jn(e,t,r,i,s){$e(Sk,"Updating index entries for document '%s'",t.key);const a=[];return(function(l,u,f,d,g){const p=l.getIterator(),v=u.getIterator();let y=Hf(p),E=Hf(v);for(;y||E;){let T=!1,R=!1;if(y&&E){const M=f(y,E);M<0?R=!0:M>0&&(T=!0)}else y!=null?R=!0:T=!0;T?(d(E),E=Hf(v)):R?(g(y),y=Hf(p)):(y=Hf(p),E=Hf(v))}})(i,s,gc,(o=>{a.push(this.Hn(e,t,r,o))}),(o=>{a.push(this.Yn(e,t,r,o))})),fe.waitFor(a)}Gn(e){let t=1;return Xf(e).ee({index:N5,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((a,o)=>gc(a,o))).filter(((a,o,l)=>!o||gc(a,l[o-1])!==0));const i=[];i.push(e);for(const a of r){const o=gc(a,e),l=gc(a,t);if(o===0)i[0]=e.An();else if(o>0&&l<0)i.push(a),i.push(a.An());else if(l>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const o=i[a].Vn(this.uid,F1,tt.empty()),l=i[a+1].Vn(this.uid,F1,tt.empty());s.push(IDBKeyRange.bound(o,l))}return s}Zn(e,t){return gc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ik)}getMinOffset(e,t){return fe.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||dt(44426))))).next(Ik)}}function Tk(n){return Dr(n,Jm)}function Yf(n){return Dr(n,om)}function bg(n){return Dr(n,wA)}function Xf(n){return Dr(n,am)}function Ik(n){yt(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;xA(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Us(e.readTime,e.documentKey,t)}const Ak={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},DF=41943040;class wi{static withCacheSize(e){return new wi(e,wi.DEFAULT_COLLECTION_PERCENTILE,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function FF(n,e,t){const r=n.store(La),i=n.store(Jd),s=[],a=IDBKeyRange.only(t.batchId);let o=0;const l=r.ee({range:a},((f,d,g)=>(o++,g.delete())));s.push(l.next((()=>{yt(o===1,47070,{batchId:t.batchId})})));const u=[];for(const f of t.mutations){const d=b5(e,f.key.path,t.batchId);s.push(i.delete(d)),u.push(f.key)}return fe.waitFor(s).next((()=>u))}function yx(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt(14731);e=n.noDocument}return JSON.stringify(e).length}wi.DEFAULT_COLLECTION_PERCENTILE=10,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wi.DEFAULT=new wi(DF,wi.DEFAULT_COLLECTION_PERCENTILE,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wi.DISABLED=new wi(-1,0,0);class Jv{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){yt(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new Jv(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mc(e).ee({index:lh,range:r},((i,s,a)=>{t=!1,a.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const s=ud(e),a=mc(e);return a.add({}).next((o=>{yt(typeof o=="number",49019);const l=new MA(o,t,r,i),u=(function(p,v,y){const E=y.baseMutations.map((R=>mx(p.yt,R))),T=y.mutations.map((R=>mx(p.yt,R)));return{userId:v,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:E,mutations:T}})(this.serializer,this.userId,l),f=[];let d=new In(((g,p)=>kt(g.canonicalString(),p.canonicalString())));for(const g of i){const p=b5(this.userId,g.key.path,o);d=d.add(g.key.path.popLast()),f.push(a.put(u)),f.push(s.put(p,mY))}return d.forEach((g=>{f.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Xn[o]=l.keys()})),fe.waitFor(f).next((()=>l))}))}lookupMutationBatch(e,t){return mc(e).get(t).next((r=>r?(yt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),eh(this.serializer,r)):null))}er(e,t){return this.Xn[t]?fe.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return mc(e).ee({index:lh,range:i},((a,o,l)=>{o.userId===this.userId&&(yt(o.batchId>=r,47524,{tr:r}),s=eh(this.serializer,o)),l.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=gh;return mc(e).ee({index:lh,range:t,reverse:!0},((i,s,a)=>{r=s.batchId,a.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,gh],[this.userId,Number.POSITIVE_INFINITY]);return mc(e).J(lh,t).next((r=>r.map((i=>eh(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=dy(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return ud(e).ee({range:i},((a,o,l)=>{const[u,f,d]=a,g=wo(f);if(u===this.userId&&t.path.isEqual(g))return mc(e).get(d).next((p=>{if(!p)throw dt(61480,{nr:a,batchId:d});yt(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:d}),s.push(eh(this.serializer,p))}));l.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(kt);const i=[];return t.forEach((s=>{const a=dy(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=ud(e).ee({range:o},((u,f,d)=>{const[g,p,v]=u,y=wo(p);g===this.userId&&s.path.isEqual(y)?r=r.add(v):d.done()}));i.push(l)})),fe.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=dy(this.userId,r),a=IDBKeyRange.lowerBound(s);let o=new In(kt);return ud(e).ee({range:a},((l,u,f)=>{const[d,g,p]=l,v=wo(g);d===this.userId&&r.isPrefixOf(v)?v.length===i&&(o=o.add(p)):f.done()})).next((()=>this.rr(e,o)))}rr(e,t){const r=[],i=[];return t.forEach((s=>{i.push(mc(e).get(s).next((a=>{if(a===null)throw dt(35274,{batchId:s});yt(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),r.push(eh(this.serializer,a))})))})),fe.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return FF(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),fe.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return fe.resolve();const r=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return ud(e).ee({range:r},((s,a,o)=>{if(s[0]===this.userId){const l=wo(s[1]);i.push(l)}else o.done()})).next((()=>{yt(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,t){return VF(e,this.userId,t)}_r(e){return jF(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:gh,lastStreamToken:""}))}}function VF(n,e,t){const r=dy(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return ud(n).ee({range:s,X:!0},((o,l,u)=>{const[f,d,g]=o;f===e&&d===i&&(a=!0),u.done()})).next((()=>a))}function mc(n){return Dr(n,La)}function ud(n){return Dr(n,Jd)}function jF(n){return Dr(n,Zm)}class Oh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Oh(0)}static cr(){return new Oh(-1)}}class UX{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Oh(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>xt.fromTimestamp(new wn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>qf(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(yt(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const s=[];return qf(e).ee(((a,o)=>{const l=Hg(o);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))})).next((()=>fe.waitFor(s))).next((()=>i))}forEachTarget(e,t){return qf(e).ee(((r,i)=>{const s=Hg(i);t(s)}))}lr(e){return Rk(e).get(cx).next((t=>(yt(t!==null,2888),t)))}hr(e,t){return Rk(e).put(cx,t)}Pr(e,t){return qf(e).put(kF(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=kh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return qf(e).ee({range:i,index:k5},((a,o,l)=>{const u=Hg(o);Kp(t,u.target)&&(s=u,l.done())})).next((()=>s))}addMatchingKeys(e,t,r){const i=[],s=Sc(e);return t.forEach((a=>{const o=Ri(a.path);i.push(s.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,a))})),fe.waitFor(i)}removeMatchingKeys(e,t,r){const i=Sc(e);return fe.forEach(t,(s=>{const a=Ri(s.path);return fe.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,t){const r=Sc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Sc(e);let s=jt();return i.ee({range:r,X:!0},((a,o,l)=>{const u=wo(a[1]),f=new tt(u);s=s.add(f)})).next((()=>s))}containsKey(e,t){const r=Ri(t.path),i=IDBKeyRange.bound([r],[S5(r)],!1,!0);let s=0;return Sc(e).ee({index:EA,X:!0,range:i},(([a,o],l,u)=>{a!==0&&(s++,u.done())})).next((()=>s>0))}At(e,t){return qf(e).get(t).next((r=>r?Hg(r):null))}}function qf(n){return Dr(n,e0)}function Rk(n){return Dr(n,mh)}function Sc(n){return Dr(n,t0)}const Ck="LruGarbageCollector",zX=1048576;function Pk([n,e],[t,r]){const i=kt(n,t);return i===0?kt(e,r):i}class $X{constructor(e){this.Ir=e,this.buffer=new In(Pk),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Pk(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class GF{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$e(Ck,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){fu(t)?$e(Ck,"Ignoring IndexedDB error during garbage collection: ",t):await Zh(t)}await this.Vr(3e5)}))}}class WX{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return fe.resolve(da.ce);const r=new $X(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?($e("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(Ak)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ak):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,a,o,l,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,a=Date.now(),this.nthSequenceNumber(e,i)))).next((d=>(r=d,o=Date.now(),this.removeTargets(e,r,t)))).next((d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((d=>(u=Date.now(),ad()<=Ut.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d}))))}}function BF(n,e){return new WX(n,e)}class HX{constructor(e,t){this.db=e,this.garbageCollector=BF(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return V1(e,r)}removeReference(e,t,r){return V1(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return V1(e,t)}br(e,t){return(function(i,s){let a=!1;return jF(i).te((o=>VF(i,o,s).next((l=>(l&&(a=!0),fe.resolve(!l)))))).next((()=>a))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((a,o)=>{if(o<=t){const l=this.br(e,a).next((u=>{if(!u)return s++,r.getEntry(e,a).next((()=>(r.removeEntry(a,xt.min()),Sc(e).delete((function(d){return[0,Ri(d.path)]})(a)))))}));i.push(l)}})).next((()=>fe.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return V1(e,t)}Sr(e,t){const r=Sc(e);let i,s=da.ce;return r.ee({index:EA},(([a,o],{path:l,sequenceNumber:u})=>{a===0?(s!==da.ce&&t(new tt(wo(i)),s),s=u,i=l):s=da.ce})).next((()=>{s!==da.ce&&t(new tt(wo(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function V1(n,e){return Sc(n).put((function(r,i){return{targetId:0,path:Ri(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class UF{constructor(){this.changes=new Dl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class KX{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Bu(e).put(r)}removeEntry(e,t,r){return Bu(e).delete((function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],px(a),o[o.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=sr.newInvalidDocument(t);return Bu(e).ee({index:gy,range:IDBKeyRange.only(Mg(t))},((i,s)=>{r=this.Cr(t,s)})).next((()=>r))}vr(e,t){let r={size:0,document:sr.newInvalidDocument(t)};return Bu(e).ee({index:gy,range:IDBKeyRange.only(Mg(t))},((i,s)=>{r={document:this.Cr(t,s),size:yx(s)}})).next((()=>r))}getEntries(e,t){let r=Vs();return this.Fr(e,t,((i,s)=>{const a=this.Cr(i,s);r=r.insert(i,a)})).next((()=>r))}Mr(e,t){let r=Vs(),i=new $n(tt.comparator);return this.Fr(e,t,((s,a)=>{const o=this.Cr(s,a);r=r.insert(s,o),i=i.insert(s,yx(a))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return fe.resolve();let i=new In(kk);t.forEach((l=>i=i.add(l)));const s=IDBKeyRange.bound(Mg(i.first()),Mg(i.last())),a=i.getIterator();let o=a.getNext();return Bu(e).ee({index:gy,range:s},((l,u,f)=>{const d=tt.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&kk(o,d)<0;)r(o,null),o=a.getNext();o&&o.isEqual(d)&&(r(o,u),o=a.hasNext()?a.getNext():null),o?f.j(Mg(o)):f.done()})).next((()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,o=[a.popLast().toArray(),a.lastSegment(),px(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bu(e).J(IDBKeyRange.bound(o,l,!0)).next((u=>{s?.incrementDocumentReadCount(u.length);let f=Vs();for(const d of u){const g=this.Cr(tt.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);g.isFoundDocument()&&(Xp(t,g)||i.has(g.key))&&(f=f.insert(g.key,g))}return f}))}getAllFromCollectionGroup(e,t,r,i){let s=Vs();const a=Mk(t,r),o=Mk(t,Us.max());return Bu(e).ee({index:M5,range:IDBKeyRange.bound(a,o,!0)},((l,u,f)=>{const d=this.Cr(tt.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&f.done()})).next((()=>s))}newChangeBuffer(e){return new YX(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return bk(e).get(mT).next((t=>(yt(!!t,20021),t)))}Dr(e,t){return bk(e).put(mT,t)}Cr(e,t){if(t){const r=kX(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(xt.min())))return r}return sr.newInvalidDocument(e)}}function zF(n){return new KX(n)}class YX extends UF{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Dl((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new In(((s,a)=>kt(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const o=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const l=dk(this.Nr.serializer,a);i=i.add(s.path.popLast());const u=yx(l);r+=u-o.size,t.push(this.Nr.addEntry(e,s,l))}else if(r-=o.size,this.trackRemovals){const l=dk(this.Nr.serializer,a.convertToNoDocument(xt.min()));t.push(this.Nr.addEntry(e,s,l))}})),i.forEach((s=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),t.push(this.Nr.updateMetadata(e,r)),fe.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((s,a)=>{this.Br.set(s,{size:a,readTime:r.get(s).readTime})})),r)))}}function bk(n){return Dr(n,Qm)}function Bu(n){return Dr(n,lx)}function Mg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Mk(n,e){const t=e.documentKey.path.toArray();return[n,px(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function kk(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=kt(t[s],r[s]),i)return i;return i=kt(t.length,r.length),i||(i=kt(t[t.length-2],r[r.length-2]),i||kt(t[t.length-1],r[r.length-1]))}class XX{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class $F{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&hm(r.mutation,i,ls.empty(),wn.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,jt()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=jt()){const i=So();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let a=$g();return s.forEach(((o,l)=>{a=a.insert(o,l.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=So();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,jt())))}populateOverlays(e,t,r){const i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,o)=>{t.set(a,o)}))}))}computeViews(e,t,r,i){let s=Vs();const a=um(),o=(function(){return um()})();return t.forEach(((l,u)=>{const f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof Fl)?s=s.insert(u.key,u):f!==void 0?(a.set(u.key,f.mutation.getFieldMask()),hm(f.mutation,u,f.mutation.getFieldMask(),wn.now())):a.set(u.key,ls.empty())})),this.recalculateAndSaveOverlays(e,s).next((l=>(l.forEach(((u,f)=>a.set(u,f))),t.forEach(((u,f)=>o.set(u,new XX(f,a.get(u)??null)))),o)))}recalculateAndSaveOverlays(e,t){const r=um();let i=new $n(((a,o)=>a-o)),s=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const o of a)o.keys().forEach((l=>{const u=t.get(l);if(u===null)return;let f=r.get(l)||ls.empty();f=o.applyToLocalView(u,f),r.set(l,f);const d=(i.get(o.batchId)||jt()).add(l);i=i.insert(o.batchId,d)}))})).next((()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,f=l.value,d=lF();f.forEach((g=>{if(!s.has(g)){const p=gF(t.get(g),r.get(g));p!==null&&d.set(g,p),s=s.add(g)}})),a.push(this.documentOverlayCache.saveOverlays(e,u,d))}return fe.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return tt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):rF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):fe.resolve(So());let o=Ym,l=s;return a.next((u=>fe.forEach(u,((f,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),s.get(f)?fe.resolve():this.remoteDocumentCache.getEntry(e,f).next((g=>{l=l.insert(f,g)}))))).next((()=>this.populateOverlays(e,u,s))).next((()=>this.computeViews(e,l,u,jt()))).next((f=>({batchId:o,changes:oF(f)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tt(t)).next((r=>{let i=$g();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=$g();return this.indexManager.getCollectionParents(e,s).next((o=>fe.forEach(o,(l=>{const u=(function(d,g){return new Yp(g,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((f=>{f.forEach(((d,g)=>{a=a.insert(d,g)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((a=>{s.forEach(((l,u)=>{const f=u.getKey();a.get(f)===null&&(a=a.insert(f,sr.newInvalidDocument(f)))}));let o=$g();return a.forEach(((l,u)=>{const f=s.get(l);f!==void 0&&hm(f.mutation,u,ls.empty(),wn.now()),Xp(t,u)&&(o=o.insert(l,u))})),o}))}}class qX{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return fe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:zi(i.createTime)}})(t)),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:NF(i.bundledQuery),readTime:zi(i.readTime)}})(t)),fe.resolve()}}class ZX{constructor(){this.overlays=new $n(tt.comparator),this.qr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=So();return fe.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.St(e,t,s)})),fe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const i=So(),s=t.length+1,a=new tt(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return fe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new $n(((u,f)=>u-f));const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let f=s.get(u.largestBatchId);f===null&&(f=So(),s=s.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const o=So(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,f)=>o.set(u,f))),!(o.size()>=i)););return fe.resolve(o)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new NA(t,r));let s=this.qr.get(t);s===void 0&&(s=jt(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}}class QX{constructor(){this.sessionToken=Sr.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fe.resolve()}}class VA{constructor(){this.Qr=new In($r.$r),this.Ur=new In($r.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new $r(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new $r(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new tt(new cn([])),r=new $r(t,e),i=new $r(t,e+1),s=[];return this.Ur.forEachInRange([r,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new tt(new cn([])),r=new $r(t,e),i=new $r(t,e+1);let s=jt();return this.Ur.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new $r(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class $r{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return tt.comparator(e.key,t.key)||kt(e.Yr,t.Yr)}static Kr(e,t){return kt(e.Yr,t.Yr)||tt.comparator(e.key,t.key)}}class JX{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new In($r.$r)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new MA(s,t,r,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new $r(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return fe.resolve(a)}lookupMutationBatch(e,t){return fe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),s=i<0?0:i;return fe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?gh:this.tr-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new $r(t,0),i=new $r(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(a=>{const o=this.Xr(a.Yr);s.push(o)})),fe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(kt);return t.forEach((i=>{const s=new $r(i,0),a=new $r(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(o=>{r=r.add(o.Yr)}))})),fe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;tt.isDocumentKey(s)||(s=s.child(""));const a=new $r(new tt(s),0);let o=new In(kt);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(l.Yr)),!0)}),a),fe.resolve(this.ti(o))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){yt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return fe.forEach(t.mutations,(i=>{const s=new $r(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new $r(t,0),i=this.Zr.firstAfterOrEqual(r);return fe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class eq{constructor(e){this.ri=e,this.docs=(function(){return new $n(tt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():sr.newInvalidDocument(t))}getEntries(e,t){let r=Vs();return t.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():sr.newInvalidDocument(i))})),fe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Vs();const a=t.path,o=new tt(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||xA(A5(f),r)<=0||(i.has(f.key)||Xp(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return fe.resolve(s)}getAllFromCollectionGroup(e,t,r,i){dt(9500)}ii(e,t){return fe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new tq(this)}getSize(e){return fe.resolve(this.size)}}class tq extends UF{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),fe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class nq{constructor(e){this.persistence=e,this.si=new Dl((t=>kh(t)),Kp),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.oi=0,this._i=new VA,this.targetCount=0,this.ai=Oh.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),fe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Oh(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Pr(t),fe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=t&&r.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),fe.waitFor(s).next((()=>i))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),fe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this._i.containsKey(t))}}class jA{constructor(e,t){this.ui={},this.overlays={},this.ci=new da(0),this.li=!1,this.li=!0,this.hi=new QX,this.referenceDelegate=e(this),this.Pi=new nq(this),this.indexManager=new GX,this.remoteDocumentCache=(function(i){return new eq(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new MF(t),this.Ii=new qX(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ZX,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new JX(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){$e("MemoryPersistence","Starting transaction:",e);const i=new rq(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,t){return fe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class rq extends C5{constructor(e){super(),this.currentSequenceNumber=e}}class eE{constructor(e){this.persistence=e,this.Ri=new VA,this.Vi=null}static mi(e){return new eE(e)}get fi(){if(this.Vi)return this.Vi;throw dt(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.fi,(r=>{const i=tt.fromPath(r);return this.gi(e,i).next((s=>{s||t.removeEntry(i,xt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return fe.or([()=>fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class xx{constructor(e,t){this.persistence=e,this.pi=new Dl((r=>Ri(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=BF(this,t)}static mi(e,t){return new xx(e,t)}Ei(){}di(e){return fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return fe.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?fe.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,t).next((o=>{o||(r++,s.removeEntry(a,xt.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),fe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),fe.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),fe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=py(e.data.value)),t}br(e,t,r){return fe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return fe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class iq{constructor(e){this.serializer=e}k(e,t,r,i){const s=new Gv("createOrUpgrade",t);r<1&&i>=1&&((function(l){l.createObjectStore(Hp)})(e),(function(l){l.createObjectStore(Zm,{keyPath:gY}),l.createObjectStore(La,{keyPath:zM,autoIncrement:!0}).createIndex(lh,$M,{unique:!0}),l.createObjectStore(Jd)})(e),Nk(e),(function(l){l.createObjectStore(Yu)})(e));let a=fe.resolve();return r<3&&i>=3&&(r!==0&&((function(l){l.deleteObjectStore(t0),l.deleteObjectStore(e0),l.deleteObjectStore(mh)})(e),Nk(e)),a=a.next((()=>(function(l){const u=l.store(mh),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xt.min().toTimestamp(),targetCount:0};return u.put(cx,f)})(s)))),r<4&&i>=4&&(r!==0&&(a=a.next((()=>(function(l,u){return u.store(La).J().next((d=>{l.deleteObjectStore(La),l.createObjectStore(La,{keyPath:zM,autoIncrement:!0}).createIndex(lh,$M,{unique:!0});const g=u.store(La),p=d.map((v=>g.put(v)));return fe.waitFor(p)}))})(e,s)))),a=a.next((()=>{(function(l){l.createObjectStore(n0,{keyPath:SY})})(e)}))),r<5&&i>=5&&(a=a.next((()=>this.yi(s)))),r<6&&i>=6&&(a=a.next((()=>((function(l){l.createObjectStore(Qm)})(e),this.wi(s))))),r<7&&i>=7&&(a=a.next((()=>this.Si(s)))),r<8&&i>=8&&(a=a.next((()=>this.bi(e,s)))),r<9&&i>=9&&(a=a.next((()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(a=a.next((()=>this.Di(s)))),r<11&&i>=11&&(a=a.next((()=>{(function(l){l.createObjectStore(Uv,{keyPath:TY})})(e),(function(l){l.createObjectStore(zv,{keyPath:IY})})(e)}))),r<12&&i>=12&&(a=a.next((()=>{(function(l){const u=l.createObjectStore($v,{keyPath:kY});u.createIndex(_T,NY,{unique:!1}),u.createIndex(O5,LY,{unique:!1})})(e)}))),r<13&&i>=13&&(a=a.next((()=>(function(l){const u=l.createObjectStore(lx,{keyPath:pY});u.createIndex(gy,_Y),u.createIndex(M5,yY)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(Yu)))),r<14&&i>=14&&(a=a.next((()=>this.Fi(e,s)))),r<15&&i>=15&&(a=a.next((()=>(function(l){l.createObjectStore(wA,{keyPath:AY,autoIncrement:!0}).createIndex(pT,RY,{unique:!1}),l.createObjectStore(am,{keyPath:CY}).createIndex(N5,PY,{unique:!1}),l.createObjectStore(om,{keyPath:bY}).createIndex(L5,MY,{unique:!1})})(e)))),r<16&&i>=16&&(a=a.next((()=>{t.objectStore(am).clear()})).next((()=>{t.objectStore(om).clear()}))),r<17&&i>=17&&(a=a.next((()=>{(function(l){l.createObjectStore(SA,{keyPath:OY})})(e)}))),r<18&&i>=18&&l5()&&(a=a.next((()=>{t.objectStore(am).clear()})).next((()=>{t.objectStore(om).clear()}))),a}wi(e){let t=0;return e.store(Yu).ee(((r,i)=>{t+=yx(i)})).next((()=>{const r={byteSize:t};return e.store(Qm).put(mT,r)}))}yi(e){const t=e.store(Zm),r=e.store(La);return t.J().next((i=>fe.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,gh],[s.userId,s.lastAcknowledgedBatchId]);return r.J(lh,a).next((o=>fe.forEach(o,(l=>{yt(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=eh(this.serializer,l);return FF(e,s.userId,u).next((()=>{}))}))))}))))}Si(e){const t=e.store(t0),r=e.store(Yu);return e.store(mh).get(cx).next((i=>{const s=[];return r.ee(((a,o)=>{const l=new cn(a),u=(function(d){return[0,Ri(d)]})(l);s.push(t.get(u).next((f=>f?fe.resolve():(d=>t.put({targetId:0,path:Ri(d),sequenceNumber:i.highestListenSequenceNumber}))(l))))})).next((()=>fe.waitFor(s)))}))}bi(e,t){e.createObjectStore(Jm,{keyPath:wY});const r=t.store(Jm),i=new FA,s=a=>{if(i.add(a)){const o=a.lastSegment(),l=a.popLast();return r.put({collectionId:o,parent:Ri(l)})}};return t.store(Yu).ee({X:!0},((a,o)=>{const l=new cn(a);return s(l.popLast())})).next((()=>t.store(Jd).ee({X:!0},(([a,o,l],u)=>{const f=wo(o);return s(f.popLast())}))))}Di(e){const t=e.store(e0);return t.ee(((r,i)=>{const s=Hg(i),a=kF(this.serializer,s);return t.put(a)}))}Ci(e,t){const r=t.store(Yu),i=[];return r.ee(((s,a)=>{const o=t.store(lx),l=(function(d){return d.document?new tt(cn.fromString(d.document.name).popFirst(5)):d.noDocument?tt.fromSegments(d.noDocument.path):d.unknownDocument?tt.fromSegments(d.unknownDocument.path):dt(36783)})(a).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(u))})).next((()=>fe.waitFor(i)))}Fi(e,t){const r=t.store(La),i=zF(this.serializer),s=new jA(eE.mi,this.serializer.yt);return r.J().next((a=>{const o=new Map;return a.forEach((l=>{let u=o.get(l.userId)??jt();eh(this.serializer,l).keys().forEach((f=>u=u.add(f))),o.set(l.userId,u)})),fe.forEach(o,((l,u)=>{const f=new oi(u),d=Qv.wt(this.serializer,f),g=s.getIndexManager(f),p=Jv.wt(f,this.serializer,g,s.referenceDelegate);return new $F(i,p,d,g).recalculateAndSaveOverlaysForDocumentKeys(new yT(t,da.ce),l).next()}))}))}}function Nk(n){n.createObjectStore(t0,{keyPath:vY}).createIndex(EA,EY,{unique:!0}),n.createObjectStore(e0,{keyPath:"targetId"}).createIndex(k5,xY,{unique:!0}),n.createObjectStore(mh)}const pc="IndexedDbPersistence",W2=18e5,H2=5e3,K2="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sq="main";class GA{constructor(e,t,r,i,s,a,o,l,u,f,d=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=s,this.window=a,this.document=o,this.xi=u,this.Oi=f,this.Ni=d,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=g=>Promise.resolve(),!GA.v())throw new et(Pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new HX(this,i),this.$i=t+sq,this.serializer=new MF(l),this.Ui=new zc(this.$i,this.Ni,new iq(this.serializer)),this.hi=new LX,this.Pi=new UX(this.referenceDelegate,this.serializer),this.remoteDocumentCache=zF(this.serializer),this.Ii=new NX,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,f===!1&&Gi(pc,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new et(Pe.FAILED_PRECONDITION,K2);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new da(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>j1(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(fu(e))return $e(pc,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e(pc,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return kg(e).get(Wf).next((t=>fe.resolve(this.es(t))))}ts(e){return j1(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,W2)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Dr(t,n0);return r.J().next((i=>{const s=this.ss(i,W2),a=i.filter((o=>s.indexOf(o)===-1));return fe.forEach(a,(o=>r.delete(o.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?fe.resolve(!0):kg(e).get(Wf).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,H2)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new et(Pe.FAILED_PRECONDITION,K2);return!1}}return!(!this.networkEnabled||!this.inForeground)||j1(e).J().next((r=>this.ss(r,H2).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&$e(pc,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Hp,n0],(e=>{const t=new yT(e,da.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>j1(e).J().next((t=>this.ss(t,W2).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Jv.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new BX(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Qv.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){$e(pc,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=(function(l){return l===18?VY:l===17?j5:l===16?FY:l===15?TA:l===14?V5:l===13?F5:l===12?DY:l===11?D5:void dt(60245)})(this.Ni);let a;return this.Ui.runTransaction(e,i,s,(o=>(a=new yT(o,this.ci?this.ci.next():da.ce),t==="readwrite-primary"?this.Hi(a).next((l=>!!l||this.Yi(a))).next((l=>{if(!l)throw Gi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new et(Pe.FAILED_PRECONDITION,R5);return r(a)})).next((l=>this.Xi(a).next((()=>l)))):this.Is(a).next((()=>r(a)))))).then((o=>(a.raiseOnCommittedEvent(),o)))}Is(e){return kg(e).get(Wf).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,H2)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new et(Pe.FAILED_PRECONDITION,K2)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kg(e).put(Wf,t)}static v(){return zc.v()}Zi(e){const t=kg(e);return t.get(Wf).next((r=>this.es(r)?($e(pc,"Releasing primary lease."),t.delete(Wf)):fe.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Gi(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;o5()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return $e(pc,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Gi(pc,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Gi("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kg(n){return Dr(n,Hp)}function j1(n){return Dr(n,n0)}function aq(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class BA{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=jt(),i=jt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new BA(e,t.fromCache,r,i)}}class oq{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class WF{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return o5()?8:P5(Or())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ys(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,t,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new oq;return this.Ss(e,t,a).next((o=>{if(s.result=o,this.Vs)return this.bs(e,t,a,o.size)}))})).next((()=>s.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(ad()<=Ut.DEBUG&&$e("QueryEngine","SDK will not create cache indexes for query:",od(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),fe.resolve()):(ad()<=Ut.DEBUG&&$e("QueryEngine","Query:",od(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ad()<=Ut.DEBUG&&$e("QueryEngine","The SDK decides to create cache indexes for query:",od(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ma(t))):fe.resolve())}ys(e,t){if(rk(t))return fe.resolve(null);let r=ma(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=IT(t,null,"F"),r=ma(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=jt(...s);return this.ps.getDocuments(e,a).next((o=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(t,o);return this.Cs(t,u,a,l.readTime)?this.ys(e,IT(t,null,"F")):this.vs(e,u,t,l)}))))})))))}ws(e,t,r,i){return rk(t)||i.isEqual(xt.min())?fe.resolve(null):this.ps.getDocuments(e,r).next((s=>{const a=this.Ds(t,s);return this.Cs(t,a,r,i)?fe.resolve(null):(ad()<=Ut.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),od(t)),this.vs(e,a,t,oY(i,Ym)).next((o=>o)))}))}Ds(e,t){let r=new In(sF(e));return t.forEach(((i,s)=>{Xp(e,s)&&(r=r.add(s))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return ad()<=Ut.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",od(t)),this.ps.getDocumentsMatchingQuery(e,t,Us.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}const UA="LocalStore",lq=3e8;class cq{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new $n(kt),this.xs=new Dl((s=>kh(s)),Kp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $F(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function HF(n,e,t,r){return new cq(n,e,t,r)}async function KF(n,e){const t=Nt(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],o=[];let l=jt();for(const u of i){a.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of s){o.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:a,addedBatchIds:o})))}))}))}function uq(n,e){const t=Nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(o,l,u,f){const d=u.batch,g=d.keys();let p=fe.resolve();return g.forEach((v=>{p=p.next((()=>f.getEntry(l,v))).next((y=>{const E=u.docVersions.get(v);yt(E!==null,48541),y.version.compareTo(E)<0&&(d.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),f.addEntry(y)))}))})),p.next((()=>o.mutationQueue.removeMutationBatch(l,d)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(o){let l=jt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function YF(n){const e=Nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function hq(n,e){const t=Nt(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const o=[];e.targetChanges.forEach(((f,d)=>{const g=i.get(d);if(!g)return;o.push(t.Pi.removeMatchingKeys(s,f.removedDocuments,d).next((()=>t.Pi.addMatchingKeys(s,f.addedDocuments,d))));let p=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(Sr.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):f.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(f.resumeToken,r)),i=i.insert(d,p),(function(y,E,T){return y.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=lq?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(g,p,f)&&o.push(t.Pi.updateTargetData(s,p))}));let l=Vs(),u=jt();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))})),o.push(fq(s,a,e.documentUpdates).next((f=>{l=f.ks,u=f.qs}))),!r.isEqual(xt.min())){const f=t.Pi.getLastRemoteSnapshotVersion(s).next((d=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));o.push(f)}return fe.waitFor(o).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,l,u))).next((()=>l))})).then((s=>(t.Ms=i,s)))}function fq(n,e,t){let r=jt(),i=jt();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let a=Vs();return t.forEach(((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(xt.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):$e(UA,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)})),{ks:a,qs:i}}))}function dq(n,e){const t=Nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=gh),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function gq(n,e){const t=Nt(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((s=>s?(i=s,fe.resolve(i)):t.Pi.allocateTargetId(r).next((a=>(i=new hl(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function NT(n,e,t){const r=Nt(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!fu(a))throw a;$e(UA,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Lk(n,e,t){const r=Nt(n);let i=xt.min(),s=jt();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(l,u,f){const d=Nt(l),g=d.xs.get(f);return g!==void 0?fe.resolve(d.Ms.get(g)):d.Pi.getTargetData(u,f)})(r,a,ma(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,o.targetId).next((l=>{s=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,t?i:xt.min(),t?s:jt()))).next((o=>(mq(r,JY(e),o),{documents:o,Qs:s})))))}function mq(n,e,t){let r=n.Os.get(e)||xt.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.Os.set(e,r)}class Ok{constructor(){this.activeTargetIds=sX()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XF{constructor(){this.Mo=new Ok,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ok,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pq{Oo(e){}shutdown(){}}const Dk="ConnectivityMonitor";class Fk{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$e(Dk,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$e(Dk,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let G1=null;function LT(){return G1===null?G1=(function(){return 268435456+Math.round(2147483648*Math.random())})():G1++,"0x"+G1.toString(16)}const Y2="RestConnection",_q={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yq{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===ux?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){const a=LT(),o=this.zo(e,t.toUriEncodedString());$e(Y2,`Sending RPC '${e}' ${a}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(o),f=Xh(u);return this.Jo(e,o,l,r,f).then((d=>($e(Y2,`Received RPC '${e}' ${a}: `,d),d)),(d=>{throw bh(Y2,`RPC '${e}' ${a} failed with error: `,d,"url: ",o,"request:",r),d}))}Ho(e,t,r,i,s,a){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+S0})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,t){const r=_q[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class xq{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const xi="WebChannelConnection";class vq extends yq{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const a=LT();return new Promise(((o,l)=>{const u=new p5;u.setWithCredentials(!0),u.listenOnce(_5.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case hy.NO_ERROR:const d=u.getResponseJson();$e(xi,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case hy.TIMEOUT:$e(xi,`RPC '${e}' ${a} timed out`),l(new et(Pe.DEADLINE_EXCEEDED,"Request time out"));break;case hy.HTTP_ERROR:const g=u.getStatus();if($e(xi,`RPC '${e}' ${a} failed with status:`,g,"response text:",u.getResponseText()),g>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const v=p?.error;if(v&&v.status&&v.message){const y=(function(T){const R=T.toLowerCase().replace(/_/g,"-");return Object.values(Pe).indexOf(R)>=0?R:Pe.UNKNOWN})(v.status);l(new et(y,v.message))}else l(new et(Pe.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new et(Pe.UNAVAILABLE,"Connection failed."));break;default:dt(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{$e(xi,`RPC '${e}' ${a} completed.`)}}));const f=JSON.stringify(i);$e(xi,`RPC '${e}' ${a} sending request:`,i),u.send(t,"POST",f,r,15)}))}T_(e,t,r){const i=LT(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=v5(),o=x5(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const f=s.join("");$e(xi,`Creating RPC '${e}' stream ${i}: ${f}`,l);const d=a.createWebChannel(f,l);this.I_(d);let g=!1,p=!1;const v=new xq({Yo:E=>{p?$e(xi,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(g||($e(xi,`Opening RPC '${e}' stream ${i} transport.`),d.open(),g=!0),$e(xi,`RPC '${e}' stream ${i} sending:`,E),d.send(E))},Zo:()=>d.close()}),y=(E,T,R)=>{E.listen(T,(M=>{try{R(M)}catch(k){setTimeout((()=>{throw k}),0)}}))};return y(d,zg.EventType.OPEN,(()=>{p||($e(xi,`RPC '${e}' stream ${i} transport opened.`),v.o_())})),y(d,zg.EventType.CLOSE,(()=>{p||(p=!0,$e(xi,`RPC '${e}' stream ${i} transport closed`),v.a_(),this.E_(d))})),y(d,zg.EventType.ERROR,(E=>{p||(p=!0,bh(xi,`RPC '${e}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),v.a_(new et(Pe.UNAVAILABLE,"The operation could not be completed")))})),y(d,zg.EventType.MESSAGE,(E=>{if(!p){const T=E.data[0];yt(!!T,16349);const R=T,M=R?.error||R[0]?.error;if(M){$e(xi,`RPC '${e}' stream ${i} received error:`,M);const k=M.status;let V=(function(C){const b=xr[C];if(b!==void 0)return _F(b)})(k),z=M.message;V===void 0&&(V=Pe.INTERNAL,z="Unknown error status: "+k+" with message "+M.message),p=!0,v.a_(new et(V,z)),d.close()}else $e(xi,`RPC '${e}' stream ${i} received:`,T),v.u_(T)}})),y(o,y5.STAT_EVENT,(E=>{E.stat===fT.PROXY?$e(xi,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===fT.NOPROXY&&$e(xi,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{v.__()}),0),v}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Eq(){return typeof window<"u"?window:null}function Ey(){return typeof document<"u"?document:null}function tE(n){return new wX(n,!0)}class qF{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Vk="PersistentStream";class ZF{constructor(e,t,r,i,s,a,o,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qF(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Pe.RESOURCE_EXHAUSTED?(Gi(t.toString()),Gi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new et(Pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return $e(Vk,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():($e(Vk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class wq extends ZF{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=IX(this.serializer,e),r=(function(s){if(!("targetChange"in s))return xt.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?xt.min():a.readTime?zi(a.readTime):xt.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=CT(this.serializer),t.addTarget=(function(s,a){let o;const l=a.target;if(o=fx(l)?{documents:IF(s,l)}:{query:AF(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=vF(s,a.resumeToken);const u=AT(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(xt.min())>0){o.readTime=c0(s,a.snapshotVersion.toTimestamp());const u=AT(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o})(this.serializer,e);const r=RX(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=CT(this.serializer),t.removeTarget=e,this.q_(t)}}class Sq extends ZF{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return yt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,yt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){yt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=AX(e.writeResults,e.commitTime),r=zi(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=CT(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>mx(this.serializer,r)))};this.q_(t)}}class Tq{}class Iq extends Tq{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new et(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,RT(t,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new et(Pe.UNKNOWN,s.toString())}))}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(e,RT(t,r),i,a,o,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new et(Pe.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Aq{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gi(t),this.aa=!1):$e("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Dh="RemoteStore";class Rq{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{Qh(this)&&($e(Dh,"Restarting streams for network reachability change."),await(async function(l){const u=Nt(l);u.Ea.add(4),await Zp(u),u.Ra.set("Unknown"),u.Ea.delete(4),await nE(u)})(this))}))})),this.Ra=new Aq(r,i)}}async function nE(n){if(Qh(n))for(const e of n.da)await e(!0)}async function Zp(n){for(const e of n.da)await e(!1)}function QF(n,e){const t=Nt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),HA(t)?WA(t):I0(t).O_()&&$A(t,e))}function zA(n,e){const t=Nt(n),r=I0(t);t.Ia.delete(e),r.O_()&&JF(t,e),t.Ia.size===0&&(r.O_()?r.L_():Qh(t)&&t.Ra.set("Unknown"))}function $A(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}I0(n).Y_(e)}function JF(n,e){n.Va.Ue(e),I0(n).Z_(e)}function WA(n){n.Va=new yX({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),I0(n).start(),n.Ra.ua()}function HA(n){return Qh(n)&&!I0(n).x_()&&n.Ia.size>0}function Qh(n){return Nt(n).Ea.size===0}function e6(n){n.Va=void 0}async function Cq(n){n.Ra.set("Online")}async function Pq(n){n.Ia.forEach(((e,t)=>{$A(n,e)}))}async function bq(n,e){e6(n),HA(n)?(n.Ra.ha(e),WA(n)):n.Ra.set("Unknown")}async function Mq(n,e,t){if(n.Ra.set("Online"),e instanceof xF&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))})(n,e)}catch(r){$e(Dh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await vx(n,r)}else if(e instanceof xy?n.Va.Ze(e):e instanceof yF?n.Va.st(e):n.Va.tt(e),!t.isEqual(xt.min()))try{const r=await YF(n.localStore);t.compareTo(r)>=0&&await(function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=s.Ia.get(u);f&&s.Ia.set(u,f.withResumeToken(l.resumeToken,a))}})),o.targetMismatches.forEach(((l,u)=>{const f=s.Ia.get(l);if(!f)return;s.Ia.set(l,f.withResumeToken(Sr.EMPTY_BYTE_STRING,f.snapshotVersion)),JF(s,l);const d=new hl(f.target,l,u,f.sequenceNumber);$A(s,d)})),s.remoteSyncer.applyRemoteEvent(o)})(n,t)}catch(r){$e(Dh,"Failed to raise snapshot:",r),await vx(n,r)}}async function vx(n,e,t){if(!fu(e))throw e;n.Ea.add(1),await Zp(n),n.Ra.set("Offline"),t||(t=()=>YF(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{$e(Dh,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await nE(n)}))}function t6(n,e){return e().catch((t=>vx(n,t,e)))}async function Qp(n){const e=Nt(n),t=eu(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gh;for(;kq(e);)try{const i=await dq(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,Nq(e,i)}catch(i){await vx(e,i)}n6(e)&&r6(e)}function kq(n){return Qh(n)&&n.Ta.length<10}function Nq(n,e){n.Ta.push(e);const t=eu(n);t.O_()&&t.X_&&t.ea(e.mutations)}function n6(n){return Qh(n)&&!eu(n).x_()&&n.Ta.length>0}function r6(n){eu(n).start()}async function Lq(n){eu(n).ra()}async function Oq(n){const e=eu(n);for(const t of n.Ta)e.ea(t.mutations)}async function Dq(n,e,t){const r=n.Ta.shift(),i=kA.from(r,e,t);await t6(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Qp(n)}async function Fq(n,e){e&&eu(n).X_&&await(async function(r,i){if((function(a){return mX(a)&&a!==Pe.ABORTED})(i.code)){const s=r.Ta.shift();eu(r).B_(),await t6(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await Qp(r)}})(n,e),n6(n)&&r6(n)}async function jk(n,e){const t=Nt(n);t.asyncQueue.verifyOperationInProgress(),$e(Dh,"RemoteStore received new credentials");const r=Qh(t);t.Ea.add(3),await Zp(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await nE(t)}async function Vq(n,e){const t=Nt(n);e?(t.Ea.delete(2),await nE(t)):e||(t.Ea.add(2),await Zp(t),t.Ra.set("Unknown"))}function I0(n){return n.ma||(n.ma=(function(t,r,i){const s=Nt(t);return s.sa(),new wq(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:Cq.bind(null,n),t_:Pq.bind(null,n),r_:bq.bind(null,n),H_:Mq.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),HA(n)?WA(n):n.Ra.set("Unknown")):(await n.ma.stop(),e6(n))}))),n.ma}function eu(n){return n.fa||(n.fa=(function(t,r,i){const s=Nt(t);return s.sa(),new Sq(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Lq.bind(null,n),r_:Fq.bind(null,n),ta:Oq.bind(null,n),na:Dq.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Qp(n)):(await n.fa.stop(),n.Ta.length>0&&($e(Dh,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class KA{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new El,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,o=new KA(e,t,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new et(Pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function YA(n,e){if(Gi("AsyncQueue",`${e}: ${n}`),fu(n))return new et(Pe.UNAVAILABLE,`${e}: ${n}`);throw n}class Pd{static emptySet(e){return new Pd(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||tt.comparator(t.key,r.key):(t,r)=>tt.comparator(t.key,r.key),this.keyedMap=$g(),this.sortedSet=new $n(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Pd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Gk{constructor(){this.ga=new $n(tt.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):dt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class u0{constructor(e,t,r,i,s,a,o,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach((o=>{a.push({type:0,doc:o})})),new u0(e,t,Pd.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class jq{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Gq{constructor(){this.queries=Bk(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Nt(t),s=i.queries;i.queries=Bk(),s.forEach(((a,o)=>{for(const l of o.Sa)l.onError(r)}))})(this,new et(Pe.ABORTED,"Firestore shutting down"))}}function Bk(){return new Dl((n=>iF(n)),Kv)}async function Bq(n,e){const t=Nt(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new jq,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const o=YA(a,`Initialization of query '${od(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&XA(t)}async function Uq(n,e){const t=Nt(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function zq(n,e){const t=Nt(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(r=!0);a.wa=i}}r&&XA(t)}function $q(n,e,t){const r=Nt(n),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);r.queries.delete(e)}function XA(n){n.Ca.forEach((e=>{e.next()}))}var OT,Uk;(Uk=OT||(OT={})).Ma="default",Uk.Cache="cache";class Wq{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new u0(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=u0.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==OT.Cache}}class i6{constructor(e){this.key=e}}class s6{constructor(e){this.key=e}}class Hq{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=jt(),this.mutatedKeys=jt(),this.eu=sF(e),this.tu=new Pd(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Gk,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((f,d)=>{const g=i.get(f),p=Xp(this.query,d)?d:null,v=!!g&&this.mutatedKeys.has(g.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let E=!1;g&&p?g.data.isEqual(p.data)?v!==y&&(r.track({type:3,doc:p}),E=!0):this.su(g,p)||(r.track({type:2,doc:p}),E=!0,(l&&this.eu(p,l)>0||u&&this.eu(p,u)<0)&&(o=!0)):!g&&p?(r.track({type:0,doc:p}),E=!0):g&&!p&&(r.track({type:1,doc:g}),E=!0,(l||u)&&(o=!0)),E&&(p?(a=a.add(p),s=y?s.add(f):s.delete(f)):(a=a.delete(f),s=s.delete(f)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{tu:a,iu:r,Cs:o,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((f,d)=>(function(p,v){const y=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt(20277,{Rt:E})}};return y(p)-y(v)})(f.type,d.type)||this.eu(f.doc,d.doc))),this.ou(r),i=i??!1;const o=t&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,a.length!==0||u?{snapshot:new u0(this.query,e.tu,s,a,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Gk,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=jt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new s6(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new i6(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=jt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return u0.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const qA="SyncEngine";class Kq{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Yq{constructor(e){this.key=e,this.hu=!1}}class Xq{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Dl((o=>iF(o)),Kv),this.Iu=new Map,this.Eu=new Set,this.du=new $n(tt.comparator),this.Au=new Map,this.Ru=new VA,this.Vu={},this.mu=new Map,this.fu=Oh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function qq(n,e,t=!0){const r=h6(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await a6(r,e,t,!0),i}async function Zq(n,e){const t=h6(n);await a6(t,e,!0,!1)}async function a6(n,e,t,r){const i=await gq(n.localStore,ma(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let o;return r&&(o=await Qq(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&QF(n.remoteStore,i),o}async function Qq(n,e,t,r,i){n.pu=(d,g,p)=>(async function(y,E,T,R){let M=E.view.ru(T);M.Cs&&(M=await Lk(y.localStore,E.query,!1).then((({documents:P})=>E.view.ru(P,M))));const k=R&&R.targetChanges.get(E.targetId),V=R&&R.targetMismatches.get(E.targetId)!=null,z=E.view.applyChanges(M,y.isPrimaryClient,k,V);return $k(y,E.targetId,z.au),z.snapshot})(n,d,g,p);const s=await Lk(n.localStore,e,!0),a=new Hq(e,s.Qs),o=a.ru(s.documents),l=qp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=a.applyChanges(o,n.isPrimaryClient,l);$k(n,t,u.au);const f=new Kq(e,t,a);return n.Tu.set(e,f),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot}async function Jq(n,e,t){const r=Nt(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((a=>!Kv(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await NT(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&zA(r.remoteStore,i.targetId),DT(r,i.targetId)})).catch(Zh)):(DT(r,i.targetId),await NT(r.localStore,i.targetId,!0))}async function eZ(n,e){const t=Nt(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),zA(t.remoteStore,r.targetId))}async function tZ(n,e,t){const r=f6(n);try{const i=await(function(a,o){const l=Nt(a),u=wn.now(),f=o.reduce(((p,v)=>p.add(v.key)),jt());let d,g;return l.persistence.runTransaction("Locally write mutations","readwrite",(p=>{let v=Vs(),y=jt();return l.Ns.getEntries(p,f).next((E=>{v=E,v.forEach(((T,R)=>{R.isValidDocument()||(y=y.add(T))}))})).next((()=>l.localDocuments.getOverlayedDocuments(p,v))).next((E=>{d=E;const T=[];for(const R of o){const M=dX(R,d.get(R.key).overlayedDocument);M!=null&&T.push(new Fl(R.key,M,X5(M.value.mapValue),Bi.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,T,o)})).next((E=>{g=E;const T=E.applyToLocalDocumentSet(d,y);return l.documentOverlayCache.saveOverlays(p,E.batchId,T)}))})).then((()=>({batchId:g.batchId,changes:oF(d)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,o,l){let u=a.Vu[a.currentUser.toKey()];u||(u=new $n(kt)),u=u.insert(o,l),a.Vu[a.currentUser.toKey()]=u})(r,i.batchId,t),await Jp(r,i.changes),await Qp(r.remoteStore)}catch(i){const s=YA(i,"Failed to persist write");t.reject(s)}}async function o6(n,e){const t=Nt(n);try{const r=await hq(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Au.get(s);a&&(yt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?yt(a.hu,14607):i.removedDocuments.size>0&&(yt(a.hu,42227),a.hu=!1))})),await Jp(t,r,e)}catch(r){await Zh(r)}}function zk(n,e,t){const r=Nt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((s,a)=>{const o=a.view.va(e);o.snapshot&&i.push(o.snapshot)})),(function(a,o){const l=Nt(a);l.onlineState=o;let u=!1;l.queries.forEach(((f,d)=>{for(const g of d.Sa)g.va(o)&&(u=!0)})),u&&XA(l)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function nZ(n,e,t){const r=Nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new $n(tt.comparator);a=a.insert(s,sr.newNoDocument(s,xt.min()));const o=jt().add(s),l=new Zv(xt.min(),new Map,new $n(kt),a,o);await o6(r,l),r.du=r.du.remove(s),r.Au.delete(e),ZA(r)}else await NT(r.localStore,e,!1).then((()=>DT(r,e,t))).catch(Zh)}async function rZ(n,e){const t=Nt(n),r=e.batch.batchId;try{const i=await uq(t.localStore,e);c6(t,r,null),l6(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Jp(t,i)}catch(i){await Zh(i)}}async function iZ(n,e,t){const r=Nt(n);try{const i=await(function(a,o){const l=Nt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return l.mutationQueue.lookupMutationBatch(u,o).next((d=>(yt(d!==null,37113),f=d.keys(),l.mutationQueue.removeMutationBatch(u,d)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,o))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>l.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);c6(r,e,t),l6(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Jp(r,i)}catch(i){await Zh(i)}}function l6(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function c6(n,e,t){const r=Nt(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function DT(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||u6(n,r)}))}function u6(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(zA(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),ZA(n))}function $k(n,e,t){for(const r of t)r instanceof i6?(n.Ru.addReference(r.key,e),sZ(n,r)):r instanceof s6?($e(qA,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||u6(n,r.key)):dt(19791,{wu:r})}function sZ(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||($e(qA,"New document in limbo: "+t),n.Eu.add(r),ZA(n))}function ZA(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new tt(cn.fromString(e)),r=n.fu.next();n.Au.set(r,new Yq(t)),n.du=n.du.insert(t,r),QF(n.remoteStore,new hl(ma(PA(t.path)),r,"TargetPurposeLimboResolution",da.ce))}}async function Jp(n,e,t){const r=Nt(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((o,l)=>{a.push(r.pu(l,e,t).then((u=>{if((u||t)&&r.isPrimaryClient){const f=u?!u.fromCache:t?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=BA.As(l.targetId,u);s.push(f)}})))})),await Promise.all(a),r.Pu.H_(i),await(async function(l,u){const f=Nt(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>fe.forEach(u,(g=>fe.forEach(g.Es,(p=>f.persistence.referenceDelegate.addReference(d,g.targetId,p))).next((()=>fe.forEach(g.ds,(p=>f.persistence.referenceDelegate.removeReference(d,g.targetId,p)))))))))}catch(d){if(!fu(d))throw d;$e(UA,"Failed to update sequence numbers: "+d)}for(const d of u){const g=d.targetId;if(!d.fromCache){const p=f.Ms.get(g),v=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(v);f.Ms=f.Ms.insert(g,y)}}})(r.localStore,s))}async function aZ(n,e){const t=Nt(n);if(!t.currentUser.isEqual(e)){$e(qA,"User change. New user:",e.toKey());const r=await KF(t.localStore,e);t.currentUser=e,(function(s,a){s.mu.forEach((o=>{o.forEach((l=>{l.reject(new et(Pe.CANCELLED,a))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jp(t,r.Ls)}}function oZ(n,e){const t=Nt(n),r=t.Au.get(e);if(r&&r.hu)return jt().add(r.key);{let i=jt();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const o=t.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}function h6(n){const e=Nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=o6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nZ.bind(null,e),e.Pu.H_=zq.bind(null,e.eventManager),e.Pu.yu=$q.bind(null,e.eventManager),e}function f6(n){const e=Nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rZ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iZ.bind(null,e),e}class ap{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=tE(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return HF(this.persistence,new WF,e.initialUser,this.serializer)}Cu(e){return new jA(eE.mi,this.serializer)}Du(e){return new XF}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ap.provider={build:()=>new ap};class lZ extends ap{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){yt(this.persistence.referenceDelegate instanceof xx,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new GF(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?wi.withCacheSize(this.cacheSizeBytes):wi.DEFAULT;return new jA((r=>xx.mi(r,t)),this.serializer)}}class cZ extends ap{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await f6(this.xu.syncEngine),await Qp(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return HF(this.persistence,new WF,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new GF(r,e.asyncQueue,t)}Mu(e,t){const r=new hY(t,this.persistence);return new uY(e.asyncQueue,r)}Cu(e){const t=aq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?wi.withCacheSize(this.cacheSizeBytes):wi.DEFAULT;return new GA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Eq(),Ey(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new XF}}class Ex{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>zk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=aZ.bind(null,this.syncEngine),await Vq(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Gq})()}createDatastore(e){const t=tE(e.databaseInfo.databaseId),r=(function(s){return new vq(s)})(e.databaseInfo);return(function(s,a,o,l){return new Iq(s,a,o,l)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,a,o){return new Rq(r,i,s,a,o)})(this.localStore,this.datastore,e.asyncQueue,(t=>zk(this.syncEngine,t,0)),(function(){return Fk.v()?new Fk:new pq})())}createSyncEngine(e,t){return(function(i,s,a,o,l,u,f){const d=new Xq(i,s,a,o,l,u);return f&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Nt(t);$e(Dh,"RemoteStore shutting down."),r.Ea.add(5),await Zp(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ex.provider={build:()=>new Ex};class uZ{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const tu="FirestoreClient";class hZ{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=oi.UNAUTHENTICATED,this.clientId=yA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{$e(tu,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>($e(tu,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new El;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=YA(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function X2(n,e){n.asyncQueue.verifyOperationInProgress(),$e(tu,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await KF(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Wk(n,e){n.asyncQueue.verifyOperationInProgress();const t=await fZ(n);$e(tu,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>jk(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>jk(e.remoteStore,i))),n._onlineComponents=e}async function fZ(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){$e(tu,"Using user provided OfflineComponentProvider");try{await X2(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Pe.FAILED_PRECONDITION||i.code===Pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;bh("Error using user provided cache. Falling back to memory cache: "+t),await X2(n,new ap)}}else $e(tu,"Using default OfflineComponentProvider"),await X2(n,new lZ(void 0));return n._offlineComponents}async function d6(n){return n._onlineComponents||(n._uninitializedComponentsProvider?($e(tu,"Using user provided OnlineComponentProvider"),await Wk(n,n._uninitializedComponentsProvider._online)):($e(tu,"Using default OnlineComponentProvider"),await Wk(n,new Ex))),n._onlineComponents}function dZ(n){return d6(n).then((e=>e.syncEngine))}async function gZ(n){const e=await d6(n),t=e.eventManager;return t.onListen=qq.bind(null,e.syncEngine),t.onUnlisten=Jq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Zq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=eZ.bind(null,e.syncEngine),t}function mZ(n,e,t={}){const r=new El;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,o,l,u){const f=new uZ({next:g=>{f.Nu(),a.enqueueAndForget((()=>Uq(s,d))),g.fromCache&&l.source==="server"?u.reject(new et(Pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),d=new Wq(o,f,{includeMetadataChanges:!0,qa:!0});return Bq(s,d)})(await gZ(n),n.asyncQueue,e,t,r))),r.promise}function g6(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Hk=new Map;const m6="firestore.googleapis.com",Kk=!0;class Yk{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new et(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=m6,this.ssl=Kk}else this.host=e.host,this.ssl=e.ssl??Kk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=DF;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zX)throw new et(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aY("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=g6(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new et(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new et(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new et(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yk({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new et(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new et(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yk(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new qK;switch(r.type){case"firstParty":return new eY(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new et(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Hk.get(t);r&&($e("ComponentProvider","Removing Datastore"),Hk.delete(t),r.terminate())})(this),Promise.resolve()}}function pZ(n,e,t,r={}){n=Zc(n,rE);const i=Xh(e),s=n._getSettings(),a={...s,emulatorOptions:n._getEmulatorOptions()},o=`${e}:${t}`;i&&(fA(`https://${o}`),dA("Firestore",!0)),s.host!==m6&&s.host!==o&&bh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:i,emulatorOptions:r};if(!Rh(l,a)&&(n._setSettings(l),r.mockUserToken)){let u,f;if(typeof r.mockUserToken=="string")u=r.mockUserToken,f=oi.MOCK_USER;else{u=s5(r.mockUserToken,n._app?.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new et(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new oi(d)}n._authCredentials=new ZK(new w5(u,f))}}class A0{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new A0(this.firestore,e,this._query)}}class Nr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $c(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nr(this.firestore,e,this._key)}toJSON(){return{type:Nr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Wp(t,Nr._jsonSchema))return new Nr(e,r||null,new tt(cn.fromString(t.referencePath)))}}Nr._jsonSchemaVersion="firestore/documentReference/1.0",Nr._jsonSchema={type:Er("string",Nr._jsonSchemaVersion),referencePath:Er("string")};class $c extends A0{constructor(e,t,r){super(e,t,PA(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nr(this.firestore,null,new tt(e))}withConverter(e){return new $c(this.firestore,e,this._path)}}function Xk(n,e,...t){if(n=qr(n),T5("collection","path",e),n instanceof rE){const r=cn.fromString(e,...t);return VM(r),new $c(n,null,r)}{if(!(n instanceof Nr||n instanceof $c))throw new et(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return VM(r),new $c(n.firestore,null,r)}}function FT(n,e,...t){if(n=qr(n),arguments.length===1&&(e=yA.newId()),T5("doc","path",e),n instanceof rE){const r=cn.fromString(e,...t);return FM(r),new Nr(n,null,new tt(r))}{if(!(n instanceof Nr||n instanceof $c))throw new et(Pe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return FM(r),new Nr(n.firestore,n instanceof $c?n.converter:null,new tt(r))}}const qk="AsyncQueue";class Zk{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qF(this,"async_queue_retry"),this._c=()=>{const r=Ey();r&&$e(qk,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Ey();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ey();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new El;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!fu(e))throw e;$e(qk,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Gi("INTERNAL UNHANDLED ERROR: ",Qk(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=KA.createAndSchedule(this,e,t,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&dt(47125,{Pc:Qk(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Qk(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class R0 extends rE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Zk,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zk(e),this._firestoreClient=void 0,await e}}}function _Z(n,e){const t=typeof n=="object"?n:pA(),r=typeof n=="string"?n:ux,i=Vv(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=n5("firestore");s&&pZ(i,...s)}return i}function p6(n){if(n._terminated)throw new et(Pe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_6(n),n._firestoreClient}function _6(n){const e=n._freezeSettings(),t=(function(i,s,a,o){return new GY(i,s,a,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,g6(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new hZ(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}function yZ(n,e){bh("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return xZ(n,Ex.provider,{build:r=>new cZ(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function xZ(n,e,t){if((n=Zc(n,R0))._firestoreClient||n._terminated)throw new et(Pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new et(Pe.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},_6(n)}class ca{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ca(Sr.fromBase64String(e))}catch(t){throw new et(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ca(Sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ca._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wp(e,ca._jsonSchema))return ca.fromBase64String(e.bytes)}}ca._jsonSchemaVersion="firestore/bytes/1.0",ca._jsonSchema={type:Er("string",ca._jsonSchemaVersion),bytes:Er("string")};class iE{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new et(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class QA{constructor(e){this._methodName=e}}class Io{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new et(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new et(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Io._jsonSchemaVersion}}static fromJSON(e){if(Wp(e,Io._jsonSchema))return new Io(e.latitude,e.longitude)}}Io._jsonSchemaVersion="firestore/geoPoint/1.0",Io._jsonSchema={type:Er("string",Io._jsonSchemaVersion),latitude:Er("number"),longitude:Er("number")};class Ao{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ao._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wp(e,Ao._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ao(e.vectorValues);throw new et(Pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ao._jsonSchemaVersion="firestore/vectorValue/1.0",Ao._jsonSchema={type:Er("string",Ao._jsonSchemaVersion),vectorValues:Er("object")};const vZ=/^__.*__$/;class EZ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Fl(e,this.data,this.fieldMask,t,this.fieldTransforms):new T0(e,this.data,t,this.fieldTransforms)}}class y6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Fl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function x6(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt(40011,{Ac:n})}}class JA{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new JA({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return wx(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(x6(this.Ac)&&vZ.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class wZ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||tE(e)}Cc(e,t,r,i=!1){return new JA({Ac:e,methodName:t,Dc:r,path:Zn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eR(n){const e=n._freezeSettings(),t=tE(n._databaseId);return new wZ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function SZ(n,e,t,r,i,s={}){const a=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);tR("Data must be an object, but it was:",a,r);const o=v6(r,a);let l,u;if(s.merge)l=new ls(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const f=[];for(const d of s.mergeFields){const g=VT(e,d,t);if(!a.contains(g))throw new et(Pe.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);w6(f,g)||f.push(g)}l=new ls(f),u=a.fieldTransforms.filter((d=>l.covers(d.field)))}else l=null,u=a.fieldTransforms;return new EZ(new Ti(o),l,u)}class sE extends QA{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sE}}function TZ(n,e,t,r){const i=n.Cc(1,e,t);tR("Data must be an object, but it was:",i,r);const s=[],a=Ti.empty();du(r,((l,u)=>{const f=nR(e,l,t);u=qr(u);const d=i.yc(f);if(u instanceof sE)s.push(f);else{const g=e_(u,d);g!=null&&(s.push(f),a.set(f,g))}}));const o=new ls(s);return new y6(a,o,i.fieldTransforms)}function IZ(n,e,t,r,i,s){const a=n.Cc(1,e,t),o=[VT(e,r,t)],l=[i];if(s.length%2!=0)throw new et(Pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)o.push(VT(e,s[g])),l.push(s[g+1]);const u=[],f=Ti.empty();for(let g=o.length-1;g>=0;--g)if(!w6(u,o[g])){const p=o[g];let v=l[g];v=qr(v);const y=a.yc(p);if(v instanceof sE)u.push(p);else{const E=e_(v,y);E!=null&&(u.push(p),f.set(p,E))}}const d=new ls(u);return new y6(f,d,a.fieldTransforms)}function AZ(n,e,t,r=!1){return e_(t,n.Cc(r?4:3,e))}function e_(n,e){if(E6(n=qr(n)))return tR("Unsupported field value:",e,n),v6(n,e);if(n instanceof QA)return(function(r,i){if(!x6(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const o of r){let l=e_(o,i.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=qr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aX(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=wn.fromDate(r);return{timestampValue:c0(i.serializer,s)}}if(r instanceof wn){const s=new wn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:c0(i.serializer,s)}}if(r instanceof Io)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ca)return{bytesValue:vF(i.serializer,r._byteString)};if(r instanceof Nr){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:OA(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ao)return(function(a,o){return{mapValue:{fields:{[AA]:{stringValue:RA},[r0]:{arrayValue:{values:a.toArray().map((u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return bA(o.serializer,u)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${jv(r)}`)})(n,e)}function v6(n,e){const t={};return G5(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):du(n,((r,i)=>{const s=e_(i,e.mc(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function E6(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof wn||n instanceof Io||n instanceof ca||n instanceof Nr||n instanceof QA||n instanceof Ao)}function tR(n,e,t){if(!E6(t)||!I5(t)){const r=jv(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function VT(n,e,t){if((e=qr(e))instanceof iE)return e._internalPath;if(typeof e=="string")return nR(n,e);throw wx("Field path arguments must be of type string or ",n,!1,void 0,t)}const RZ=new RegExp("[~\\*/\\[\\]]");function nR(n,e,t){if(e.search(RZ)>=0)throw wx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new iE(...e.split("."))._internalPath}catch{throw wx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wx(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new et(Pe.INVALID_ARGUMENT,o+n+l)}function w6(n,e){return n.some((t=>t.isEqual(e)))}class S6{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Nr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rR("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class CZ extends S6{data(){return super.data()}}function rR(n,e){return typeof e=="string"?nR(n,e):e instanceof iE?e._internalPath:e._delegate._internalPath}function PZ(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new et(Pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iR{}class bZ extends iR{}function MZ(n,e,...t){let r=[];e instanceof iR&&r.push(e),r=r.concat(t),(function(s){const a=s.filter((l=>l instanceof sR)).length,o=s.filter((l=>l instanceof aE)).length;if(a>1||a>0&&o>0)throw new et(Pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class aE extends bZ{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new aE(e,t,r)}_apply(e){const t=this._parse(e);return T6(e._query,t),new A0(e.firestore,e.converter,TT(e._query,t))}_parse(e){const t=eR(e.firestore);return(function(s,a,o,l,u,f,d){let g;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new et(Pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){e3(d,f);const v=[];for(const y of d)v.push(Jk(l,s,y));g={arrayValue:{values:v}}}else g=Jk(l,s,d)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||e3(d,f),g=AZ(o,a,d,f==="in"||f==="not-in");return zt.create(u,f,g)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function kZ(n,e,t){const r=e,i=rR("where",n);return aE._create(i,r,t)}class sR extends iR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sR(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Sn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)T6(a,l),a=TT(a,l)})(e._query,t),new A0(e.firestore,e.converter,TT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Jk(n,e,t){if(typeof(t=qr(t))=="string"){if(t==="")throw new et(Pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rF(e)&&t.indexOf("/")!==-1)throw new et(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(cn.fromString(t));if(!tt.isDocumentKey(r))throw new et(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return np(n,new tt(r))}if(t instanceof Nr)return np(n,t._key);throw new et(Pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jv(t)}.`)}function e3(n,e){if(!Array.isArray(n)||n.length===0)throw new et(Pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function T6(n,e){const t=(function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new et(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new et(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class NZ{convertValue(e,t="none"){switch(Qc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw dt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return du(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){const t=e.fields?.[r0].arrayValue?.values?.map((r=>zn(r.doubleValue)));return new Ao(t)}convertGeoPoint(e){return new Io(zn(e.latitude),zn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Wv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ep(e));default:return null}}convertTimestamp(e){const t=Cl(e);return new wn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=cn.fromString(e);yt(bF(r),9688,{name:e});const i=new Mh(r.get(1),r.get(3)),s=new tt(r.popFirst(5));return i.isEqual(t)||Gi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function LZ(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class B1{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bd extends S6{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(rR("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new et(Pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=bd._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}bd._jsonSchemaVersion="firestore/documentSnapshot/1.0",bd._jsonSchema={type:Er("string",bd._jsonSchemaVersion),bundleSource:Er("string","DocumentSnapshot"),bundleName:Er("string"),bundle:Er("string")};class wy extends bd{data(e={}){return super.data(e)}}class Md{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new B1(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new wy(this._firestore,this._userDataWriter,r.key,r,new B1(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new et(Pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((o=>{const l=new wy(i._firestore,i._userDataWriter,o.doc.key,o.doc,new B1(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>s||o.type!==3)).map((o=>{const l=new wy(i._firestore,i._userDataWriter,o.doc.key,o.doc,new B1(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),f=a.indexOf(o.doc.key)),{type:OZ(o.type),doc:l,oldIndex:u,newIndex:f}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new et(Pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Md._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yA.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function OZ(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt(61501,{type:n})}}Md._jsonSchemaVersion="firestore/querySnapshot/1.0",Md._jsonSchema={type:Er("string",Md._jsonSchemaVersion),bundleSource:Er("string","QuerySnapshot"),bundleName:Er("string"),bundle:Er("string")};class DZ extends NZ{constructor(e){super(),this.firestore=e}convertBytes(e){return new ca(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nr(this.firestore,null,t)}}function FZ(n){n=Zc(n,A0);const e=Zc(n.firestore,R0),t=p6(e),r=new DZ(e);return PZ(n._query),mZ(t,n._query).then((i=>new Md(e,r,n,i)))}function VZ(n,e,t,...r){n=Zc(n,Nr);const i=Zc(n.firestore,R0),s=eR(i);let a;return a=typeof(e=qr(e))=="string"||e instanceof iE?IZ(s,"updateDoc",n._key,e,t,r):TZ(s,"updateDoc",n._key,e),aR(i,[a.toMutation(n._key,Bi.exists(!0))])}function jZ(n){return aR(Zc(n.firestore,R0),[new qv(n._key,Bi.none())])}function GZ(n,e){const t=Zc(n.firestore,R0),r=FT(n),i=LZ(n.converter,e);return aR(t,[SZ(eR(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Bi.exists(!1))]).then((()=>r))}function aR(n,e){return(function(r,i){const s=new El;return r.asyncQueue.enqueueAndForget((async()=>tZ(await dZ(r),i,s))),s.promise})(p6(n),e)}(function(e,t=!0){(function(i){S0=i})(qh),Ch(new qc("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new R0(new QK(r.getProvider("auth-internal")),new tY(a,r.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new et(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mh(u.options.projectId,f)})(a,i),a);return s={useFetchStreams:t,...s},o._setSettings(s),o}),"PUBLIC").setMultipleInstances(!0)),To(NM,LM,e),To(NM,LM,"esm2020")})();var BZ="firebase",UZ="12.7.0";To(BZ,UZ,"app");function I6(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zZ=I6,A6=new zp("auth","Firebase",I6());const Sx=new gA("@firebase/auth");function $Z(n,...e){Sx.logLevel<=Ut.WARN&&Sx.warn(`Auth (${qh}): ${n}`,...e)}function Sy(n,...e){Sx.logLevel<=Ut.ERROR&&Sx.error(`Auth (${qh}): ${n}`,...e)}function bl(n,...e){throw oR(n,...e)}function Ro(n,...e){return oR(n,...e)}function R6(n,e,t){const r={...zZ(),[e]:t};return new zp("auth","Firebase",r).create(e,{appName:n.name})}function Wc(n){return R6(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oR(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return A6.create(n,...e)}function bt(n,e,...t){if(!n)throw oR(e,...t)}function fl(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Sy(e),new Error(e)}function Ml(n,e){n||fl(e)}function jT(){return typeof self<"u"&&self.location?.href||""}function WZ(){return t3()==="http:"||t3()==="https:"}function t3(){return typeof self<"u"&&self.location?.protocol||null}function HZ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WZ()||MH()||"connection"in navigator)?navigator.onLine:!0}function KZ(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class t_{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ml(t>e,"Short delay should be less than long delay!"),this.isMobile=PH()||kH()}get(){return HZ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function lR(n,e){Ml(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class C6{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const YZ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const XZ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qZ=new t_(3e4,6e4);function oE(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function C0(n,e,t,r,i={}){return P6(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=$p({key:n.config.apiKey,...a}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u={method:e,headers:l,...s};return bH()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&Xh(n.emulatorConfig.host)&&(u.credentials="include"),C6.fetch()(await M6(n,n.config.apiHost,t,o),u)})}async function P6(n,e,t){n._canInitEmulator=!1;const r={...YZ,...e};try{const i=new ZZ(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw U1(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw U1(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw U1(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw U1(n,"user-disabled",a);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw R6(n,f,u);bl(n,f)}}catch(i){if(i instanceof zo)throw i;bl(n,"network-request-failed",{message:String(i)})}}async function b6(n,e,t,r,i={}){const s=await C0(n,e,t,r,i);return"mfaPendingCredential"in s&&bl(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function M6(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?lR(n.config,i):`${n.config.apiScheme}://${i}`;return XZ.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class ZZ{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ro(this.auth,"network-request-failed")),qZ.get())})}}function U1(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ro(n,e,r);return i.customData._tokenResponse=t,i}async function QZ(n,e){return C0(n,"POST","/v1/accounts:delete",e)}async function Tx(n,e){return C0(n,"POST","/v1/accounts:lookup",e)}function fm(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JZ(n,e=!1){const t=qr(n),r=await t.getIdToken(e),i=cR(r);bt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:fm(q2(i.auth_time)),issuedAtTime:fm(q2(i.iat)),expirationTime:fm(q2(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function q2(n){return Number(n)*1e3}function cR(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Sy("JWT malformed, contained fewer than 3 sections"),null;try{const i=JD(t);return i?JSON.parse(i):(Sy("Failed to decode base64 JWT payload"),null)}catch(i){return Sy("Caught error parsing JWT payload as JSON",i?.toString()),null}}function n3(n){const e=cR(n);return bt(e,"internal-error"),bt(typeof e.exp<"u","internal-error"),bt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function op(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof zo&&eQ(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function eQ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class tQ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class GT{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fm(this.lastLoginAt),this.creationTime=fm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ix(n){const e=n.auth,t=await n.getIdToken(),r=await op(n,Tx(e,{idToken:t}));bt(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=i.providerUserInfo?.length?k6(i.providerUserInfo):[],a=rQ(n.providerData,s),o=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!a?.length,u=o?l:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new GT(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,f)}async function nQ(n){const e=qr(n);await Ix(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rQ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function k6(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function iQ(n,e){const t=await P6(n,{},async()=>{const r=$p({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await M6(n,i,"/v1/token",`key=${s}`),o=await n._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return n.emulatorConfig&&Xh(n.emulatorConfig.host)&&(l.credentials="include"),C6.fetch()(a,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function sQ(n,e){return C0(n,"POST","/v2/accounts:revokeToken",oE(n,e))}class kd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){bt(e.idToken,"internal-error"),bt(typeof e.idToken<"u","internal-error"),bt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):n3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){bt(e.length!==0,"internal-error");const t=n3(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(bt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await iQ(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new kd;return r&&(bt(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(bt(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(bt(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new kd,this.toJSON())}_performRefresh(){return fl("not implemented")}}function _c(n,e){bt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ga{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new tQ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new GT(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await op(this,this.stsTokenManager.getToken(this.auth,e));return bt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return JZ(this,e)}reload(){return nQ(this)}_assign(e){this!==e&&(bt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ga({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ix(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(la(this.auth.app))return Promise.reject(Wc(this.auth));const e=await this.getIdToken();return await op(this,QZ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,o=t.tenantId??void 0,l=t._redirectEventId??void 0,u=t.createdAt??void 0,f=t.lastLoginAt??void 0,{uid:d,emailVerified:g,isAnonymous:p,providerData:v,stsTokenManager:y}=t;bt(d&&y,e,"internal-error");const E=kd.fromJSON(this.name,y);bt(typeof d=="string",e,"internal-error"),_c(r,e.name),_c(i,e.name),bt(typeof g=="boolean",e,"internal-error"),bt(typeof p=="boolean",e,"internal-error"),_c(s,e.name),_c(a,e.name),_c(o,e.name),_c(l,e.name),_c(u,e.name),_c(f,e.name);const T=new Ga({uid:d,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:p,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:E,createdAt:u,lastLoginAt:f});return v&&Array.isArray(v)&&(T.providerData=v.map(R=>({...R}))),l&&(T._redirectEventId=l),T}static async _fromIdTokenResponse(e,t,r=!1){const i=new kd;i.updateFromServerResponse(t);const s=new Ga({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ix(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];bt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?k6(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,o=new kd;o.updateFromIdToken(r);const l=new Ga({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new GT(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,u),l}}const r3=new Map;function dl(n){Ml(n instanceof Function,"Expected a class definition");let e=r3.get(n);return e?(Ml(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,r3.set(n,e),e)}class N6{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}N6.type="NONE";const i3=N6;function Ty(n,e,t){return`firebase:${n}:${e}:${t}`}class Nd{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ty(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ty("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Tx(this.auth,{idToken:e}).catch(()=>{});return t?Ga._fromGetAccountInfoResponse(this.auth,t,e):null}return Ga._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Nd(dl(i3),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||dl(i3);const a=Ty(r,e.config.apiKey,e.name);let o=null;for(const u of t)try{const f=await u._get(a);if(f){let d;if(typeof f=="string"){const g=await Tx(e,{idToken:f}).catch(()=>{});if(!g)break;d=await Ga._fromGetAccountInfoResponse(e,g,f)}else d=Ga._fromJSON(e,f);u!==s&&(o=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Nd(s,e,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new Nd(s,e,r))}}function s3(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(F6(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(L6(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(j6(e))return"Blackberry";if(G6(e))return"Webos";if(O6(e))return"Safari";if((e.includes("chrome/")||D6(e))&&!e.includes("edge/"))return"Chrome";if(V6(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function L6(n=Or()){return/firefox\//i.test(n)}function O6(n=Or()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function D6(n=Or()){return/crios\//i.test(n)}function F6(n=Or()){return/iemobile/i.test(n)}function V6(n=Or()){return/android/i.test(n)}function j6(n=Or()){return/blackberry/i.test(n)}function G6(n=Or()){return/webos/i.test(n)}function uR(n=Or()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function aQ(n=Or()){return uR(n)&&!!window.navigator?.standalone}function oQ(){return NH()&&document.documentMode===10}function B6(n=Or()){return uR(n)||V6(n)||G6(n)||j6(n)||/windows phone/i.test(n)||F6(n)}function U6(n,e=[]){let t;switch(n){case"Browser":t=s3(Or());break;case"Worker":t=`${s3(Or())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${qh}/${r}`}class lQ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function cQ(n,e={}){return C0(n,"GET","/v2/passwordPolicy",oE(n,e))}const uQ=6;class hQ{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??uQ,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class fQ{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new a3(this),this.idTokenSubscription=new a3(this),this.beforeStateQueue=new lQ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=A6,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=dl(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Nd.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Tx(this,{idToken:e}),r=await Ga._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(la(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=r?._redirectEventId,o=await this.tryRedirectSignIn(e);(!s||s===a)&&o?.user&&(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ix(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KZ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(la(this.app))return Promise.reject(Wc(this));const t=e?qr(e):null;return t&&bt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&bt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return la(this.app)?Promise.reject(Wc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return la(this.app)?Promise.reject(Wc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(dl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cQ(this),t=new hQ(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zp("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await sQ(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&dl(e)||this._popupRedirectResolver;bt(t,this,"argument-error"),this.redirectPersistenceManager=await Nd.create(this,[dl(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(bt(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{a=!0,l()}}else{const l=e.addObserver(t);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=U6(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(la(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&$Z(`Error while retrieving App Check token: ${e.error}`),e?.token}}function lE(n){return qr(n)}class a3{constructor(e){this.auth=e,this.observer=null,this.addObserver=jH(t=>this.observer=t)}get next(){return bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let hR={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dQ(n){hR=n}function gQ(n){return hR.loadJS(n)}function mQ(){return hR.gapiScript}function pQ(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function _Q(n,e){const t=Vv(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Rh(s,e??{}))return i;bl(i,"already-initialized")}return t.initialize({options:e})}function yQ(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(dl);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function xQ(n,e,t){const r=lE(n);bt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=z6(e),{host:a,port:o}=vQ(e),l=o===null?"":`:${o}`,u={url:`${s}//${a}${l}/`},f=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){bt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),bt(Rh(u,r.config.emulator)&&Rh(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Xh(a)?(fA(`${s}//${a}${l}`),dA("Auth",!0)):EQ()}function z6(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function vQ(n){const e=z6(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:o3(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:o3(a)}}}function o3(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function EQ(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class $6{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return fl("not implemented")}_getIdTokenResponse(e){return fl("not implemented")}_linkToIdToken(e,t){return fl("not implemented")}_getReauthenticationResolver(e){return fl("not implemented")}}async function Ld(n,e){return b6(n,"POST","/v1/accounts:signInWithIdp",oE(n,e))}const wQ="http://localhost";class Fh extends $6{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Fh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):bl("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const a=new Fh(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Ld(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ld(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ld(e,t)}buildRequest(){const e={requestUri:wQ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$p(t)}return e}}class W6{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class n_ extends W6{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Tc extends n_{constructor(){super("facebook.com")}static credential(e){return Fh._fromParams({providerId:Tc.PROVIDER_ID,signInMethod:Tc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tc.credentialFromTaggedObject(e)}static credentialFromError(e){return Tc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tc.credential(e.oauthAccessToken)}catch{return null}}}Tc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Tc.PROVIDER_ID="facebook.com";class Ic extends n_{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Fh._fromParams({providerId:Ic.PROVIDER_ID,signInMethod:Ic.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ic.credentialFromTaggedObject(e)}static credentialFromError(e){return Ic.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ic.credential(t,r)}catch{return null}}}Ic.GOOGLE_SIGN_IN_METHOD="google.com";Ic.PROVIDER_ID="google.com";class Ac extends n_{constructor(){super("github.com")}static credential(e){return Fh._fromParams({providerId:Ac.PROVIDER_ID,signInMethod:Ac.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ac.credentialFromTaggedObject(e)}static credentialFromError(e){return Ac.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ac.credential(e.oauthAccessToken)}catch{return null}}}Ac.GITHUB_SIGN_IN_METHOD="github.com";Ac.PROVIDER_ID="github.com";class Rc extends n_{constructor(){super("twitter.com")}static credential(e,t){return Fh._fromParams({providerId:Rc.PROVIDER_ID,signInMethod:Rc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Rc.credentialFromTaggedObject(e)}static credentialFromError(e){return Rc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Rc.credential(t,r)}catch{return null}}}Rc.TWITTER_SIGN_IN_METHOD="twitter.com";Rc.PROVIDER_ID="twitter.com";async function SQ(n,e){return b6(n,"POST","/v1/accounts:signUp",oE(n,e))}class nu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Ga._fromIdTokenResponse(e,r,i),a=l3(r);return new nu({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=l3(r);return new nu({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function l3(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function TQ(n){if(la(n.app))return Promise.reject(Wc(n));const e=lE(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new nu({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await SQ(e,{returnSecureToken:!0}),r=await nu._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class Ax extends zo{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ax.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Ax(e,t,r,i)}}function H6(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ax._fromErrorAndOperation(n,s,e,r):s})}async function IQ(n,e,t=!1){const r=await op(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return nu._forOperation(n,"link",r)}async function AQ(n,e,t=!1){const{auth:r}=n;if(la(r.app))return Promise.reject(Wc(r));const i="reauthenticate";try{const s=await op(n,H6(r,i,e,n),t);bt(s.idToken,r,"internal-error");const a=cR(s.idToken);bt(a,r,"internal-error");const{sub:o}=a;return bt(n.uid===o,r,"user-mismatch"),nu._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&bl(r,"user-mismatch"),s}}async function RQ(n,e,t=!1){if(la(n.app))return Promise.reject(Wc(n));const r="signIn",i=await H6(n,r,e),s=await nu._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function CQ(n,e,t,r){return qr(n).onIdTokenChanged(e,t,r)}function PQ(n,e,t){return qr(n).beforeAuthStateChanged(e,t)}function bQ(n,e,t,r){return qr(n).onAuthStateChanged(e,t,r)}function MQ(n){return qr(n).signOut()}const Rx="__sak";class K6{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Rx,"1"),this.storage.removeItem(Rx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const kQ=1e3,NQ=10;class Y6 extends K6{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=B6(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);oQ()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,NQ):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},kQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Y6.type="LOCAL";const LQ=Y6;class X6 extends K6{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}X6.type="SESSION";const q6=X6;function OQ(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class cE{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new cE(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async u=>u(t.origin,s)),l=await OQ(o);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cE.receivers=[];function fR(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class DQ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const u=fR("",20);i.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(d){const g=d;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(g.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function Co(){return window}function FQ(n){Co().location.href=n}function Z6(){return typeof Co().WorkerGlobalScope<"u"&&typeof Co().importScripts=="function"}async function VQ(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jQ(){return navigator?.serviceWorker?.controller||null}function GQ(){return Z6()?self:null}const Q6="firebaseLocalStorageDb",BQ=1,Cx="firebaseLocalStorage",J6="fbase_key";class r_{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function uE(n,e){return n.transaction([Cx],e?"readwrite":"readonly").objectStore(Cx)}function UQ(){const n=indexedDB.deleteDatabase(Q6);return new r_(n).toPromise()}function BT(){const n=indexedDB.open(Q6,BQ);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Cx,{keyPath:J6})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Cx)?e(r):(r.close(),await UQ(),e(await BT()))})})}async function c3(n,e,t){const r=uE(n,!0).put({[J6]:e,value:t});return new r_(r).toPromise()}async function zQ(n,e){const t=uE(n,!1).get(e),r=await new r_(t).toPromise();return r===void 0?null:r.value}function u3(n,e){const t=uE(n,!0).delete(e);return new r_(t).toPromise()}const $Q=800,WQ=3;class e8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await BT(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>WQ)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Z6()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cE._getInstance(GQ()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await VQ(),!this.activeServiceWorker)return;this.sender=new DQ(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jQ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await BT();return await c3(e,Rx,"1"),await u3(e,Rx),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>c3(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>zQ(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>u3(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=uE(i,!1).getAll();return new r_(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$Q)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}e8.type="LOCAL";const HQ=e8;new t_(3e4,6e4);function KQ(n,e){return e?dl(e):(bt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class dR extends $6{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ld(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ld(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ld(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function YQ(n){return RQ(n.auth,new dR(n),n.bypassAuthState)}function XQ(n){const{auth:e,user:t}=n;return bt(t,e,"internal-error"),AQ(t,new dR(n),n.bypassAuthState)}async function qQ(n){const{auth:e,user:t}=n;return bt(t,e,"internal-error"),IQ(t,new dR(n),n.bypassAuthState)}class t8{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YQ;case"linkViaPopup":case"linkViaRedirect":return qQ;case"reauthViaPopup":case"reauthViaRedirect":return XQ;default:bl(this.auth,"internal-error")}}resolve(e){Ml(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ml(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ZQ=new t_(2e3,1e4);class md extends t8{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,md.currentPopupAction&&md.currentPopupAction.cancel(),md.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return bt(e,this.auth,"internal-error"),e}async onExecution(){Ml(this.filter.length===1,"Popup operations only handle one event");const e=fR();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ro(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ro(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,md.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ro(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZQ.get())};e()}}md.currentPopupAction=null;const QQ="pendingRedirect",Iy=new Map;class JQ extends t8{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Iy.get(this.auth._key());if(!e){try{const r=await eJ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Iy.set(this.auth._key(),e)}return this.bypassAuthState||Iy.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eJ(n,e){const t=rJ(e),r=nJ(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function tJ(n,e){Iy.set(n._key(),e)}function nJ(n){return dl(n._redirectPersistence)}function rJ(n){return Ty(QQ,n.config.apiKey,n.name)}async function iJ(n,e,t=!1){if(la(n.app))return Promise.reject(Wc(n));const r=lE(n),i=KQ(r,e),a=await new JQ(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const sJ=600*1e3;class aJ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oJ(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!n8(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ro(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sJ&&this.cachedEventUids.clear(),this.cachedEventUids.has(h3(e))}saveEventToCache(e){this.cachedEventUids.add(h3(e)),this.lastProcessedEventTime=Date.now()}}function h3(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function n8({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function oJ(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return n8(n);default:return!1}}async function lJ(n,e={}){return C0(n,"GET","/v1/projects",e)}const cJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uJ=/^https?/;async function hJ(n){if(n.config.emulator)return;const{authorizedDomains:e}=await lJ(n);for(const t of e)try{if(fJ(t))return}catch{}bl(n,"unauthorized-domain")}function fJ(n){const e=jT(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!uJ.test(t))return!1;if(cJ.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const dJ=new t_(3e4,6e4);function f3(){const n=Co().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function gJ(n){return new Promise((e,t)=>{function r(){f3(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{f3(),t(Ro(n,"network-request-failed"))},timeout:dJ.get()})}if(Co().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Co().gapi?.load)r();else{const i=pQ("iframefcb");return Co()[i]=()=>{gapi.load?r():t(Ro(n,"network-request-failed"))},gQ(`${mQ()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw Ay=null,e})}let Ay=null;function mJ(n){return Ay=Ay||gJ(n),Ay}const pJ=new t_(5e3,15e3),_J="__/auth/iframe",yJ="emulator/auth/iframe",xJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function EJ(n){const e=n.config;bt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?lR(e,yJ):`https://${n.config.authDomain}/${_J}`,r={apiKey:e.apiKey,appName:n.name,v:qh},i=vJ.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${$p(r).slice(1)}`}async function wJ(n){const e=await mJ(n),t=Co().gapi;return bt(t,n,"internal-error"),e.open({where:document.body,url:EJ(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xJ,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Ro(n,"network-request-failed"),o=Co().setTimeout(()=>{s(a)},pJ.get());function l(){Co().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}const SJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TJ=500,IJ=600,AJ="_blank",RJ="http://localhost";class d3{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CJ(n,e,t,r=TJ,i=IJ){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...SJ,width:r.toString(),height:i.toString(),top:s,left:a},u=Or().toLowerCase();t&&(o=D6(u)?AJ:t),L6(u)&&(e=e||RJ,l.scrollbars="yes");const f=Object.entries(l).reduce((g,[p,v])=>`${g}${p}=${v},`,"");if(aQ(u)&&o!=="_self")return PJ(e||"",o),new d3(null);const d=window.open(e||"",o,f);bt(d,n,"popup-blocked");try{d.focus()}catch{}return new d3(d)}function PJ(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const bJ="__/auth/handler",MJ="emulator/auth/handler",kJ=encodeURIComponent("fac");async function g3(n,e,t,r,i,s){bt(n.config.authDomain,n,"auth-domain-config-required"),bt(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:qh,eventId:i};if(e instanceof W6){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",VH(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,d]of Object.entries({}))a[f]=d}if(e instanceof n_){const f=e.getScopes().filter(d=>d!=="");f.length>0&&(a.scopes=f.join(","))}n.tenantId&&(a.tid=n.tenantId);const o=a;for(const f of Object.keys(o))o[f]===void 0&&delete o[f];const l=await n._getAppCheckToken(),u=l?`#${kJ}=${encodeURIComponent(l)}`:"";return`${NJ(n)}?${$p(o).slice(1)}${u}`}function NJ({config:n}){return n.emulator?lR(n,MJ):`https://${n.authDomain}/${bJ}`}const Z2="webStorageSupport";class LJ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=q6,this._completeRedirectFn=iJ,this._overrideRedirectResult=tJ}async _openPopup(e,t,r,i){Ml(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await g3(e,t,r,jT(),i);return CJ(e,s,fR())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await g3(e,t,r,jT(),i);return FQ(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ml(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await wJ(e),r=new aJ(e);return t.register("authEvent",i=>(bt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Z2,{type:Z2},i=>{const s=i?.[0]?.[Z2];s!==void 0&&t(!!s),bl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hJ(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return B6()||O6()||uR()}}const OJ=LJ;var m3="@firebase/auth",p3="1.12.0";class DJ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function FJ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VJ(n){Ch(new qc("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;bt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:U6(n)},u=new fQ(r,i,s,l);return yQ(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ch(new qc("auth-internal",e=>{const t=lE(e.getProvider("auth").getImmediate());return(r=>new DJ(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),To(m3,p3,FJ(n)),To(m3,p3,"esm2020")}const jJ=300,GJ=i5("authIdTokenMaxAge")||jJ;let _3=null;const BJ=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>GJ)return;const i=t?.token;_3!==i&&(_3=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function UJ(n=pA()){const e=Vv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=_Q(n,{popupRedirectResolver:OJ,persistence:[HQ,LQ,q6]}),r=i5("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=BJ(s.toString());PQ(t,a,()=>a(t.currentUser)),CQ(t,o=>a(o))}}const i=t5("auth");return i&&xQ(t,`http://${i}`),t}function zJ(){return document.getElementsByTagName("head")?.[0]??document}dQ({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Ro("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",zJ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VJ("Browser");const r8="firebasestorage.googleapis.com",$J="storageBucket",WJ=120*1e3,HJ=600*1e3;class $o extends zo{constructor(e,t,r=0){super(Q2(e),`Firebase Storage: ${t} (${Q2(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$o.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Q2(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Fo;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Fo||(Fo={}));function Q2(n){return"storage/"+n}function KJ(){const n="An unknown error occurred, please check the error payload for server response.";return new $o(Fo.UNKNOWN,n)}function YJ(){return new $o(Fo.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function XJ(){return new $o(Fo.CANCELED,"User canceled the upload/download.")}function qJ(n){return new $o(Fo.INVALID_URL,"Invalid URL '"+n+"'.")}function ZJ(n){return new $o(Fo.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function y3(n){return new $o(Fo.INVALID_ARGUMENT,n)}function i8(){return new $o(Fo.APP_DELETED,"The Firebase app was deleted.")}function QJ(n){return new $o(Fo.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Ba{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ba.makeFromUrl(e,t)}catch{return new Ba(e,"")}if(r.path==="")return r;throw ZJ(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function u(k){k.path_=decodeURIComponent(k.path)}const f="v[A-Za-z0-9_]+",d=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${f}/b/${i}/o${g}`,"i"),v={bucket:1,path:3},y=t===r8?"(?:storage.googleapis.com|storage.cloud.google.com)":t,E="([^?#]*)",T=new RegExp(`^https?://${y}/${i}/${E}`,"i"),M=[{regex:o,indices:l,postModify:s},{regex:p,indices:v,postModify:u},{regex:T,indices:{bucket:1,path:2},postModify:u}];for(let k=0;k<M.length;k++){const V=M[k],z=V.regex.exec(e);if(z){const P=z[V.indices.bucket];let C=z[V.indices.path];C||(C=""),r=new Ba(P,C),V.postModify(r);break}}if(r==null)throw qJ(e);return r}}class JJ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function eee(n,e,t){let r=1,i=null,s=null,a=!1,o=0;function l(){return o===2}let u=!1;function f(...E){u||(u=!0,e.apply(null,E))}function d(E){i=setTimeout(()=>{i=null,n(p,l())},E)}function g(){s&&clearTimeout(s)}function p(E,...T){if(u){g();return}if(E){g(),f.call(null,E,...T);return}if(l()||a){g(),f.call(null,E,...T);return}r<64&&(r*=2);let M;o===1?(o=2,M=0):M=(r+Math.random())*1e3,d(M)}let v=!1;function y(E){v||(v=!0,g(),!u&&(i!==null?(E||(o=2),clearTimeout(i),d(0)):E||(o=1)))}return d(0),s=setTimeout(()=>{a=!0,y(!0)},t),y}function tee(n){n(!1)}function nee(n){return n!==void 0}function x3(n,e,t,r){if(r<e)throw y3(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw y3(`Invalid value for '${n}'. Expected ${t} or less.`)}function ree(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Px;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Px||(Px={}));function iee(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}class see{constructor(e,t,r,i,s,a,o,l,u,f,d,g=!0,p=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=d,this.retry=g,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,y)=>{this.resolve_=v,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new z1(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===Px.NO_ERROR,l=s.getStatus();if(!o||iee(l,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Px.ABORT;r(!1,new z1(!1,null,f));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new z1(u,s))})},t=(r,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());nee(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=KJ();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(i.canceled){const l=this.appDelete_?i8():XJ();a(l)}else{const l=YJ();a(l)}};this.canceled_?t(!1,new z1(!1,null,!0)):this.backoffId_=eee(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&tee(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class z1{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function aee(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function oee(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lee(n,e){e&&(n["X-Firebase-GMPID"]=e)}function cee(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function uee(n,e,t,r,i,s,a=!0,o=!1){const l=ree(n.urlParams),u=n.url+l,f=Object.assign({},n.headers);return lee(f,e),aee(f,t),oee(f,s),cee(f,r),new see(u,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a,o)}function hee(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function fee(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}class bx{constructor(e,t){this._service=e,t instanceof Ba?this._location=t:this._location=Ba.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new bx(e,t)}get root(){const e=new Ba(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fee(this._location.path)}get storage(){return this._service}get parent(){const e=hee(this._location.path);if(e===null)return null;const t=new Ba(this._location.bucket,e);return new bx(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw QJ(e)}}function v3(n,e){const t=e?.[$J];return t==null?null:Ba.makeFromBucketSpec(t,n)}function dee(n,e,t,r={}){n.host=`${e}:${t}`;const i=Xh(e);i&&(fA(`https://${n.host}/b`),dA("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:s5(s,n.app.options.projectId))}class gee{constructor(e,t,r,i,s,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=r8,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=WJ,this._maxUploadRetryTime=HJ,this._requests=new Set,i!=null?this._bucket=Ba.makeFromBucketSpec(i,this._host):this._bucket=v3(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ba.makeFromBucketSpec(this._url,e):this._bucket=v3(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){x3("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){x3("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(la(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new bx(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new JJ(i8());{const a=uee(e,this._appId,r,i,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const E3="@firebase/storage",w3="0.14.0";const s8="storage";function mee(n=pA(),e){n=qr(n);const r=Vv(n,s8).getImmediate({identifier:e}),i=n5("storage");return i&&pee(r,...i),r}function pee(n,e,t,r={}){dee(n,e,t,r)}function _ee(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new gee(t,r,i,e,qh)}function yee(){Ch(new qc(s8,_ee,"PUBLIC").setMultipleInstances(!0)),To(E3,w3,""),To(E3,w3,"esm2020")}yee();const xee={apiKey:"REPLACE_WITH_YOUR_API_KEY",authDomain:"your-project.firebaseapp.com",projectId:"your-project-id",storageBucket:"your-project.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:abcdef"},gR=f5(xee),J2=UJ(gR),Kg=_Z(gR);mee(gR);yZ(Kg).catch(n=>{n.code==="failed-precondition"?console.warn("Offline persistence failed: Multiple tabs open"):n.code==="unimplemented"&&console.warn("Offline persistence not available in this browser")});const vee=Uo()(w0((n,e)=>({vondsten:[],loading:!1,error:null,loadVondsten:async t=>{n(r=>{r.loading=!0});try{const r=MZ(Xk(Kg,"vondsten"),kZ("userId","==",t)),s=(await FZ(r)).docs.map(a=>({id:a.id,...a.data()}));n(a=>{a.vondsten=s,a.loading=!1})}catch(r){n(i=>{i.error=r.message,i.loading=!1})}},addVondst:async t=>{const r=new Date().toISOString(),i={...t,createdAt:r,updatedAt:r},s=await GZ(Xk(Kg,"vondsten"),i);return n(a=>{a.vondsten.push({...i,id:s.id})}),s.id},updateVondst:async(t,r)=>{const i=FT(Kg,"vondsten",t);await VZ(i,{...r,updatedAt:new Date().toISOString()}),n(s=>{const a=s.vondsten.findIndex(o=>o.id===t);a!==-1&&(s.vondsten[a]={...s.vondsten[a],...r})})},deleteVondst:async t=>{await jZ(FT(Kg,"vondsten",t)),n(r=>{r.vondsten=r.vondsten.filter(i=>i.id!==t)})}}))),Eee={};function wee(n,e){let t;try{t=n()}catch{return}return{getItem:i=>{var s;const a=l=>l===null?null:JSON.parse(l,void 0),o=(s=t.getItem(i))!=null?s:null;return o instanceof Promise?o.then(a):a(o)},setItem:(i,s)=>t.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>t.removeItem(i)}}const lp=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return lp(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return lp(r)(t)}}}},See=(n,e)=>(t,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:E=>E,version:0,merge:(E,T)=>({...T,...E}),...e},a=!1;const o=new Set,l=new Set;let u;try{u=s.getStorage()}catch{}if(!u)return n((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...E)},r,i);const f=lp(s.serialize),d=()=>{const E=s.partialize({...r()});let T;const R=f({state:E,version:s.version}).then(M=>u.setItem(s.name,M)).catch(M=>{T=M});if(T)throw T;return R},g=i.setState;i.setState=(E,T)=>{g(E,T),d()};const p=n((...E)=>{t(...E),d()},r,i);let v;const y=()=>{var E;if(!u)return;a=!1,o.forEach(R=>R(r()));const T=((E=s.onRehydrateStorage)==null?void 0:E.call(s,r()))||void 0;return lp(u.getItem.bind(u))(s.name).then(R=>{if(R)return s.deserialize(R)}).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==s.version){if(s.migrate)return s.migrate(R.state,R.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return R.state}).then(R=>{var M;return v=s.merge(R,(M=r())!=null?M:p),t(v,!0),d()}).then(()=>{T?.(v,void 0),a=!0,l.forEach(R=>R(v))}).catch(R=>{T?.(void 0,R)})};return i.persist={setOptions:E=>{s={...s,...E},E.getStorage&&(u=E.getStorage())},clearStorage:()=>{u?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>y(),hasHydrated:()=>a,onHydrate:E=>(o.add(E),()=>{o.delete(E)}),onFinishHydration:E=>(l.add(E),()=>{l.delete(E)})},y(),v||p},Tee=(n,e)=>(t,r,i)=>{let s={storage:wee(()=>localStorage),partialize:y=>y,version:0,merge:(y,E)=>({...E,...y}),...e},a=!1;const o=new Set,l=new Set;let u=s.storage;if(!u)return n((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...y)},r,i);const f=()=>{const y=s.partialize({...r()});return u.setItem(s.name,{state:y,version:s.version})},d=i.setState;i.setState=(y,E)=>{d(y,E),f()};const g=n((...y)=>{t(...y),f()},r,i);i.getInitialState=()=>g;let p;const v=()=>{var y,E;if(!u)return;a=!1,o.forEach(R=>{var M;return R((M=r())!=null?M:g)});const T=((E=s.onRehydrateStorage)==null?void 0:E.call(s,(y=r())!=null?y:g))||void 0;return lp(u.getItem.bind(u))(s.name).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==s.version){if(s.migrate)return[!0,s.migrate(R.state,R.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,R.state];return[!1,void 0]}).then(R=>{var M;const[k,V]=R;if(p=s.merge(V,(M=r())!=null?M:g),t(p,!0),k)return f()}).then(()=>{T?.(p,void 0),p=r(),a=!0,l.forEach(R=>R(p))}).catch(R=>{T?.(void 0,R)})};return i.persist={setOptions:y=>{s={...s,...y},y.storage&&(u=y.storage)},clearStorage:()=>{u?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>v(),hasHydrated:()=>a,onHydrate:y=>(o.add(y),()=>{o.delete(y)}),onFinishHydration:y=>(l.add(y),()=>{l.delete(y)})},s.skipHydration||v(),p||g},Iee=(n,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Eee?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),See(n,e)):Tee(n,e),hE=Iee,zs=Uo()(hE(n=>({defaultBackground:"CartoDB (licht)",showScaleBar:!0,gpsAutoStart:!1,showAccuracyCircle:!0,hapticFeedback:!0,vondstenLocalOnly:!0,showVondstButton:!0,fontScale:100,layerPanelFontScale:100,presetPanelFontScale:100,setDefaultBackground:e=>n({defaultBackground:e}),setShowScaleBar:e=>n({showScaleBar:e}),setGpsAutoStart:e=>n({gpsAutoStart:e}),setShowAccuracyCircle:e=>n({showAccuracyCircle:e}),setHapticFeedback:e=>n({hapticFeedback:e}),setVondstenLocalOnly:e=>n({vondstenLocalOnly:e}),setShowVondstButton:e=>n({showVondstButton:e}),setFontScale:e=>n({fontScale:e}),setLayerPanelFontScale:e=>n({layerPanelFontScale:e}),setPresetPanelFontScale:e=>n({presetPanelFontScale:e})}),{name:"detectorapp-settings",version:2,migrate:(n,e)=>e<2?{...n,showScaleBar:!0}:n})),eS=[{id:"detectie",name:"Detectie",icon:"Compass",layers:["AMK Monumenten","Gewaspercelen","IKAW"],baseLayer:"CartoDB (licht)",isBuiltIn:!1},{id:"steentijd",name:"Steentijd",icon:"Mountain",layers:["Hunebedden","Grafheuvels","Terpen","FAMKE Steentijd","AMK Steentijd","AHN4 Multi-Hillshade NL","Labels Overlay"],baseLayer:"Luchtfoto",isBuiltIn:!1},{id:"romeins-midvroeg",name:"Romeins - Vroege ME",icon:"Layers",layers:["Romeinse wegen","Romeinse Forten","AMK Romeins","AMK Vroege ME","Gewaspercelen","Kadastrale Grenzen"],isBuiltIn:!1},{id:"midlaat-nieuwetijd",name:"Late ME - Nieuw",icon:"Grid",layers:["AMK Late ME","Kastelen","Essen","Rijksmonumenten","Kadastrale Grenzen","Oude Kernen"],isBuiltIn:!1},{id:"woii-militair",name:"WOII & Militair",icon:"Target",layers:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten"],isBuiltIn:!1},{id:"analyse",name:"Terrein Analyse",icon:"Search",layers:["IKAW","Geomorfologie","Bodemkaart","Archeo Landschappen","AHN4 Multi-Hillshade NL","AHN4 Hoogtekaart Kleur"],isBuiltIn:!1}],S3=["Labels Overlay","TMK 1850","Bonnebladen 1900","Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen","Romeinse wegen (Wereld)","Kastelen","IKAW","Archeo Landschappen","Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Essen","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","World Hillshade","Veengebieden","Geomorfologie","Bodemkaart","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],a8=Uo()(hE((n,e)=>({presets:[...eS],applyPreset:t=>{const r=e().presets.find(s=>s.id===t);if(!r)return;const i=Kr.getState();S3.forEach(s=>i.setLayerVisibility(s,!1)),r.layers.forEach(s=>i.setLayerVisibility(s,!0)),r.baseLayer&&["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"].forEach(a=>{i.setLayerVisibility(a,a===r.baseLayer)}),console.log(` Preset toegepast: ${r.name}${r.baseLayer?` (${r.baseLayer})`:""}`)},createPreset:(t,r)=>{const i=Kr.getState(),s=Object.entries(i.visible).filter(([o,l])=>l&&S3.includes(o)).map(([o])=>o),a={id:`custom-${Date.now()}`,name:t,icon:r,layers:s,isBuiltIn:!1};n(o=>({presets:[...o.presets,a]})),console.log(` Preset aangemaakt: ${t} met ${s.length} lagen`)},updatePreset:(t,r)=>{n(i=>({presets:i.presets.map(s=>s.id===t?{...s,...r}:s)}))},deletePreset:t=>{n(r=>({presets:r.presets.filter(i=>i.id!==t||i.isBuiltIn)}))},resetToDefaults:()=>{n({presets:[...eS]})}}),{name:"detectorapp-presets",version:7,migrate:(n,e)=>e<7?{presets:[...eS]}:n})),T3=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"],fE=Uo()(hE((n,e)=>({layers:[],addLayer:t=>{const r=crypto.randomUUID(),i=e().layers.length,s=T3[i%T3.length];return n(a=>({layers:[...a.layers,{...t,id:r,createdAt:new Date().toISOString(),color:t.color||s,visible:t.visible??!0,opacity:t.opacity??1}]})),r},removeLayer:t=>n(r=>({layers:r.layers.filter(i=>i.id!==t)})),updateLayer:(t,r)=>n(i=>({layers:i.layers.map(s=>s.id===t?{...s,...r}:s)})),toggleVisibility:t=>n(r=>({layers:r.layers.map(i=>i.id===t?{...i,visible:!i.visible}:i)})),setOpacity:(t,r)=>n(i=>({layers:i.layers.map(s=>s.id===t?{...s,opacity:r}:s)})),setColor:(t,r)=>n(i=>({layers:i.layers.map(s=>s.id===t?{...s,color:r}:s)})),clearAll:()=>n({layers:[]})}),{name:"detectorapp-custom-layers",version:1}));function Aee({target:n,viewOptions:e}){const t=ce.useRef(null),r=ce.useRef(null),i=Hs(a=>a.setMap),s=zs(a=>a.showScaleBar);return ce.useEffect(()=>{if(!t.current){const a={center:[5.1214,52.0907],zoom:8,rotation:0,minZoom:3,maxZoom:19,...e},o=new UW({target:n,controls:[],view:new xo({center:Kd(a.center),zoom:a.zoom,rotation:a.rotation,minZoom:a.minZoom,maxZoom:a.maxZoom})});t.current=o,i(o),window.__olMap=o}return()=>{t.current&&(t.current.setTarget(void 0),i(null),window.__olMap=null)}},[n,e,i]),ce.useEffect(()=>{const a=t.current;a&&(s?r.current||(r.current=new WW({units:"metric",bar:!1,text:!0,minWidth:80}),a.addControl(r.current)):r.current&&(a.removeControl(r.current),r.current=null))},[s]),t.current}const I3=["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"];function Ree(){const n=ce.useRef(null),e=ce.useRef(!1);Aee({target:"map"});const t=Hs(d=>d.map),r=Kr(d=>d.registerLayer),i=Kr(d=>d.setLayerVisibility),s=zs(d=>d.defaultBackground);ce.useEffect(()=>{if(!t){console.warn(" Map not initialized yet");return}console.log(" Initializing map layers...");const d=new $u({properties:{title:"OpenStreetMap",type:"base"},visible:!1,source:new oW}),g=new $u({properties:{title:"CartoDB (licht)",type:"base"},visible:!0,source:new id({url:"https://{a-d}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO"})}),p=new $u({properties:{title:"Luchtfoto",type:"base"},visible:!1,source:new id({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attributions:" Esri, Maxar, Earthstar Geographics",maxZoom:19})}),v=new $u({properties:{title:"Labels Overlay",type:"overlay"},visible:!1,source:new id({url:"https://{a-d}.basemaps.cartocdn.com/rastertiles/voyager_only_labels/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO",maxZoom:20}),zIndex:100}),y=new $u({properties:{title:"TMK 1850",type:"base"},visible:!1,source:new id({url:"https://s.map5.nl/map/gast/tiles/tmk_1850/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})}),E=new $u({properties:{title:"Bonnebladen 1900",type:"base"},visible:!1,source:new id({url:"https://s.map5.nl/map/gast/tiles/bonne_1900/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})});t.addLayer(d),t.addLayer(g),t.addLayer(p),t.addLayer(v),t.addLayer(y),t.addLayer(E),console.log(" Base layers added:",{osm:d.getVisible(),cartodb:g.getVisible(),satellite:p.getVisible()}),r("OpenStreetMap",d),r("CartoDB (licht)",g),r("Luchtfoto",p),r("Labels Overlay",v),r("TMK 1850",y),r("Bonnebladen 1900",E),t.updateSize(),console.log(" Map size:",t.getSize()),console.log(" Map center:",t.getView().getCenter()),console.log(" Map zoom:",t.getView().getZoom()),a()},[t,r]);async function a(){if(!t){console.error(" Cannot load layers: map is null");return}const d=yH();console.log(` Loading ${d.length} immediate-load layers (WMS/Tile)...`);const g=await Promise.allSettled(d.map(async v=>{try{const y=await v.factory();return y?{name:v.name,layer:y}:null}catch(y){return console.warn(` Failed to create ${v.name}:`,y),null}}));let p=0;g.forEach(v=>{if(v.status==="fulfilled"&&v.value){const{name:y,layer:E}=v.value;t.addLayer(E),r(y,E),p++,console.log(`   ${y}`)}}),console.log(` Immediate layers loaded: ${p}/${d.length}`),console.log(` Total layers on map: ${t.getLayers().getLength()}`),console.log(" Vector layers will load on first toggle (lazy loading enabled)")}ce.useEffect(()=>{if(!t||e.current)return;const d=setTimeout(()=>{const g=s||"CartoDB (licht)";I3.forEach(p=>{i(p,!1)}),I3.includes(g)?i(g,!0):i("CartoDB (licht)",!0),e.current=!0,console.log(` Default background: ${g}`)},100);return()=>clearTimeout(d)},[t,s,i]);const o=zs(d=>d.gpsAutoStart),l=Fi(d=>d.startTracking),u=ce.useRef(!1);ce.useEffect(()=>{if(!(!t||u.current)&&o){const d=setTimeout(()=>{l(),u.current=!0,console.log(" GPS autostart enabled - tracking started")},500);return()=>clearTimeout(d)}},[t,o,l]);const f={width:"100%",height:"100vh"};return w.jsx("div",{id:"map",ref:n,style:f})}const mR=ce.createContext({});function pR(n){const e=ce.useRef(null);return e.current===null&&(e.current=n()),e.current}const dE=ce.createContext(null),_R=ce.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class Cee extends ce.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Pee({children:n,isPresent:e}){const t=ce.useId(),r=ce.useRef(null),i=ce.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=ce.useContext(_R);return ce.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:u}=i.current;if(e||!r.current||!a||!o)return;r.current.dataset.motionPopId=t;const f=document.createElement("style");return s&&(f.nonce=s),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),w.jsx(Cee,{isPresent:e,childRef:r,sizeRef:i,children:ce.cloneElement(n,{ref:r})})}const bee=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a})=>{const o=pR(Mee),l=ce.useId(),u=ce.useCallback(d=>{o.set(d,!0);for(const g of o.values())if(!g)return;r&&r()},[o,r]),f=ce.useMemo(()=>({id:l,initial:e,isPresent:t,custom:i,onExitComplete:u,register:d=>(o.set(d,!1),()=>o.delete(d))}),s?[Math.random(),u]:[t,u]);return ce.useMemo(()=>{o.forEach((d,g)=>o.set(g,!1))},[t]),ce.useEffect(()=>{!t&&!o.size&&r&&r()},[t]),a==="popLayout"&&(n=w.jsx(Pee,{isPresent:t,children:n})),w.jsx(dE.Provider,{value:f,children:n})};function Mee(){return new Map}function o8(n=!0){const e=ce.useContext(dE);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,s=ce.useId();ce.useEffect(()=>{n&&i(s)},[n]);const a=ce.useCallback(()=>n&&r&&r(s),[s,r,n]);return!t&&r?[!1,a]:[!0]}const $1=n=>n.key||"";function A3(n){const e=[];return ce.Children.forEach(n,t=>{ce.isValidElement(t)&&e.push(t)}),e}const yR=typeof window<"u",l8=yR?ce.useLayoutEffect:ce.useEffect,_a=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1})=>{const[o,l]=o8(a),u=ce.useMemo(()=>A3(n),[n]),f=a&&!o?[]:u.map($1),d=ce.useRef(!0),g=ce.useRef(u),p=pR(()=>new Map),[v,y]=ce.useState(u),[E,T]=ce.useState(u);l8(()=>{d.current=!1,g.current=u;for(let k=0;k<E.length;k++){const V=$1(E[k]);f.includes(V)?p.delete(V):p.get(V)!==!0&&p.set(V,!1)}},[E,f.length,f.join("-")]);const R=[];if(u!==v){let k=[...u];for(let V=0;V<E.length;V++){const z=E[V],P=$1(z);f.includes(P)||(k.splice(V,0,z),R.push(z))}s==="wait"&&R.length&&(k=R),T(A3(k)),y(u);return}const{forceRender:M}=ce.useContext(mR);return w.jsx(w.Fragment,{children:E.map(k=>{const V=$1(k),z=a&&!o?!1:u===E||f.includes(V),P=()=>{if(p.has(V))p.set(V,!0);else return;let C=!0;p.forEach(b=>{b||(C=!1)}),C&&(M?.(),T(g.current),a&&l?.(),r&&r())};return w.jsx(bee,{isPresent:z,initial:!d.current||t?void 0:!1,custom:z?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:z?void 0:P,children:k},V)})})},js=n=>n;let c8=js;function xR(n){let e;return()=>(e===void 0&&(e=n()),e)}const h0=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},wl=n=>n*1e3,Sl=n=>n/1e3,kee={useManualTiming:!1};function Nee(n){let e=new Set,t=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(u){s.has(u)&&(l.schedule(u),n()),u(a)}const l={schedule:(u,f=!1,d=!1)=>{const p=d&&r?e:t;return f&&s.add(u),p.has(u)||p.add(u),u},cancel:u=>{t.delete(u),s.delete(u)},process:u=>{if(a=u,r){i=!0;return}r=!0,[e,t]=[t,e],e.forEach(o),e.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const W1=["read","resolveKeyframes","update","preRender","render","postRender"],Lee=40;function u8(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,a=W1.reduce((T,R)=>(T[R]=Nee(s),T),{}),{read:o,resolveKeyframes:l,update:u,preRender:f,render:d,postRender:g}=a,p=()=>{const T=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(T-i.timestamp,Lee),1),i.timestamp=T,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),f.process(i),d.process(i),g.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(p))},v=()=>{t=!0,r=!0,i.isProcessing||n(p)};return{schedule:W1.reduce((T,R)=>{const M=a[R];return T[R]=(k,V=!1,z=!1)=>(t||v(),M.schedule(k,V,z)),T},{}),cancel:T=>{for(let R=0;R<W1.length;R++)a[W1[R]].cancel(T)},state:i,steps:a}}const{schedule:jn,cancel:ru,state:si,steps:tS}=u8(typeof requestAnimationFrame<"u"?requestAnimationFrame:js,!0),h8=ce.createContext({strict:!1}),R3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},f0={};for(const n in R3)f0[n]={isEnabled:e=>R3[n].some(t=>!!e[t])};function Oee(n){for(const e in n)f0[e]={...f0[e],...n[e]}}const Dee=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Mx(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||Dee.has(n)}let f8=n=>!Mx(n);function Fee(n){n&&(f8=e=>e.startsWith("on")?!Mx(e):n(e))}try{Fee(require("@emotion/is-prop-valid").default)}catch{}function Vee(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(f8(i)||t===!0&&Mx(i)||!e&&!Mx(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function jee(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,i)=>i==="create"?n:(e.has(i)||e.set(i,n(i)),e.get(i))})}const gE=ce.createContext({});function cp(n){return typeof n=="string"||Array.isArray(n)}function mE(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const vR=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ER=["initial",...vR];function pE(n){return mE(n.animate)||ER.some(e=>cp(n[e]))}function d8(n){return!!(pE(n)||n.variants)}function Gee(n,e){if(pE(n)){const{initial:t,animate:r}=n;return{initial:t===!1||cp(t)?t:void 0,animate:cp(r)?r:void 0}}return n.inherit!==!1?e:{}}function Bee(n){const{initial:e,animate:t}=Gee(n,ce.useContext(gE));return ce.useMemo(()=>({initial:e,animate:t}),[C3(e),C3(t)])}function C3(n){return Array.isArray(n)?n.join(" "):n}const Uee=Symbol.for("motionComponentSymbol");function pd(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function zee(n,e,t){return ce.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):pd(t)&&(t.current=r))},[e])}const wR=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),$ee="framerAppearId",g8="data-"+wR($ee),{schedule:SR}=u8(queueMicrotask,!1),m8=ce.createContext({});function Wee(n,e,t,r,i){var s,a;const{visualElement:o}=ce.useContext(gE),l=ce.useContext(h8),u=ce.useContext(dE),f=ce.useContext(_R).reducedMotion,d=ce.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:o,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:f}));const g=d.current,p=ce.useContext(m8);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&Hee(d.current,t,i,p);const v=ce.useRef(!1);ce.useInsertionEffect(()=>{g&&v.current&&g.update(t,u)});const y=t[g8],E=ce.useRef(!!y&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,y))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,y)));return l8(()=>{g&&(v.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),SR.render(g.render),E.current&&g.animationState&&g.animationState.animateChanges())}),ce.useEffect(()=>{g&&(!E.current&&g.animationState&&g.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)===null||T===void 0||T.call(window,y)}),E.current=!1))}),g}function Hee(n,e,t,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:p8(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&pd(o),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function p8(n){if(n)return n.options.allowProjection!==!1?n.projection:p8(n.parent)}function Kee({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){var s,a;n&&Oee(n);function o(u,f){let d;const g={...ce.useContext(_R),...u,layoutId:Yee(u)},{isStatic:p}=g,v=Bee(u),y=r(u,p);if(!p&&yR){Xee();const E=qee(g);d=E.MeasureLayout,v.visualElement=Wee(i,y,g,e,E.ProjectionNode)}return w.jsxs(gE.Provider,{value:v,children:[d&&v.visualElement?w.jsx(d,{visualElement:v.visualElement,...g}):null,t(i,u,zee(y,v.visualElement,f),y,p,v.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(a=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&a!==void 0?a:""})`}`;const l=ce.forwardRef(o);return l[Uee]=i,l}function Yee({layoutId:n}){const e=ce.useContext(mR).id;return e&&n!==void 0?e+"-"+n:n}function Xee(n,e){ce.useContext(h8).strict}function qee(n){const{drag:e,layout:t}=f0;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Zee=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function TR(n){return typeof n!="string"||n.includes("-")?!1:!!(Zee.indexOf(n)>-1||/[A-Z]/u.test(n))}function P3(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function IR(n,e,t,r){if(typeof e=="function"){const[i,s]=P3(r);e=e(t!==void 0?t:n.custom,i,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,s]=P3(r);e=e(t!==void 0?t:n.custom,i,s)}return e}const UT=n=>Array.isArray(n),Qee=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),Jee=n=>UT(n)?n[n.length-1]||0:n,Ii=n=>!!(n&&n.getVelocity);function Ry(n){const e=Ii(n)?n.get():n;return Qee(e)?e.toValue():e}function ete({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},r,i,s){const a={latestValues:tte(r,i,s,n),renderState:e()};return t&&(a.onMount=o=>t({props:r,current:o,...a}),a.onUpdate=o=>t(o)),a}const _8=n=>(e,t)=>{const r=ce.useContext(gE),i=ce.useContext(dE),s=()=>ete(n,e,r,i);return t?s():pR(s)};function tte(n,e,t,r){const i={},s=r(n,{});for(const g in s)i[g]=Ry(s[g]);let{initial:a,animate:o}=n;const l=pE(n),u=d8(n);e&&u&&!l&&n.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let f=t?t.initial===!1:!1;f=f||a===!1;const d=f?o:a;if(d&&typeof d!="boolean"&&!mE(d)){const g=Array.isArray(d)?d:[d];for(let p=0;p<g.length;p++){const v=IR(n,g[p]);if(v){const{transitionEnd:y,transition:E,...T}=v;for(const R in T){let M=T[R];if(Array.isArray(M)){const k=f?M.length-1:0;M=M[k]}M!==null&&(i[R]=M)}for(const R in y)i[R]=y[R]}}}return i}const P0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Jh=new Set(P0),y8=n=>e=>typeof e=="string"&&e.startsWith(n),x8=y8("--"),nte=y8("var(--"),AR=n=>nte(n)?rte.test(n.split("/*")[0].trim()):!1,rte=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,v8=(n,e)=>e&&typeof n=="number"?e.transform(n):n,kl=(n,e,t)=>t>e?e:t<n?n:t,b0={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},up={...b0,transform:n=>kl(0,1,n)},H1={...b0,default:1},i_=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Ec=i_("deg"),Po=i_("%"),It=i_("px"),ite=i_("vh"),ste=i_("vw"),b3={...Po,parse:n=>Po.parse(n)/100,transform:n=>Po.transform(n*100)},ate={borderWidth:It,borderTopWidth:It,borderRightWidth:It,borderBottomWidth:It,borderLeftWidth:It,borderRadius:It,radius:It,borderTopLeftRadius:It,borderTopRightRadius:It,borderBottomRightRadius:It,borderBottomLeftRadius:It,width:It,maxWidth:It,height:It,maxHeight:It,top:It,right:It,bottom:It,left:It,padding:It,paddingTop:It,paddingRight:It,paddingBottom:It,paddingLeft:It,margin:It,marginTop:It,marginRight:It,marginBottom:It,marginLeft:It,backgroundPositionX:It,backgroundPositionY:It},ote={rotate:Ec,rotateX:Ec,rotateY:Ec,rotateZ:Ec,scale:H1,scaleX:H1,scaleY:H1,scaleZ:H1,skew:Ec,skewX:Ec,skewY:Ec,distance:It,translateX:It,translateY:It,translateZ:It,x:It,y:It,z:It,perspective:It,transformPerspective:It,opacity:up,originX:b3,originY:b3,originZ:It},M3={...b0,transform:Math.round},RR={...ate,...ote,zIndex:M3,size:It,fillOpacity:up,strokeOpacity:up,numOctaves:M3},lte={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cte=P0.length;function ute(n,e,t){let r="",i=!0;for(let s=0;s<cte;s++){const a=P0[s],o=n[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||t){const u=v8(o,RR[a]);if(!l){i=!1;const f=lte[a]||a;r+=`${f}(${u}) `}t&&(e[a]=u)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function CR(n,e,t){const{style:r,vars:i,transformOrigin:s}=n;let a=!1,o=!1;for(const l in e){const u=e[l];if(Jh.has(l)){a=!0;continue}else if(x8(l)){i[l]=u;continue}else{const f=v8(u,RR[l]);l.startsWith("origin")?(o=!0,s[l]=f):r[l]=f}}if(e.transform||(a||t?r.transform=ute(e,n.transform,t):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:f=0}=s;r.transformOrigin=`${l} ${u} ${f}`}}const hte={offset:"stroke-dashoffset",array:"stroke-dasharray"},fte={offset:"strokeDashoffset",array:"strokeDasharray"};function dte(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?hte:fte;n[s.offset]=It.transform(-r);const a=It.transform(e),o=It.transform(t);n[s.array]=`${a} ${o}`}function k3(n,e,t){return typeof n=="string"?n:It.transform(e+t*n)}function gte(n,e,t){const r=k3(e,n.x,n.width),i=k3(t,n.y,n.height);return`${r} ${i}`}function PR(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...u},f,d){if(CR(n,u,d),f){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:p,dimensions:v}=n;g.transform&&(v&&(p.transform=g.transform),delete g.transform),v&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=gte(v,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(g.x=e),t!==void 0&&(g.y=t),r!==void 0&&(g.scale=r),a!==void 0&&dte(g,a,o,l,!1)}const bR=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),E8=()=>({...bR(),attrs:{}}),MR=n=>typeof n=="string"&&n.toLowerCase()==="svg";function w8(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const S8=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function T8(n,e,t,r){w8(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(S8.has(i)?i:wR(i),e.attrs[i])}const kx={};function mte(n){Object.assign(kx,n)}function I8(n,{layout:e,layoutId:t}){return Jh.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!kx[n]||n==="opacity")}function kR(n,e,t){var r;const{style:i}=n,s={};for(const a in i)(Ii(i[a])||e.style&&Ii(e.style[a])||I8(a,n)||((r=t?.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function A8(n,e,t){const r=kR(n,e,t);for(const i in n)if(Ii(n[i])||Ii(e[i])){const s=P0.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}function pte(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const N3=["x","y","width","height","cx","cy","r"],_te={useVisualState:_8({scrapeMotionValuesFromProps:A8,createRenderState:E8,onUpdate:({props:n,prevProps:e,current:t,renderState:r,latestValues:i})=>{if(!t)return;let s=!!n.drag;if(!s){for(const o in i)if(Jh.has(o)){s=!0;break}}if(!s)return;let a=!e;if(e)for(let o=0;o<N3.length;o++){const l=N3[o];n[l]!==e[l]&&(a=!0)}a&&jn.read(()=>{pte(t,r),jn.render(()=>{PR(r,i,MR(t.tagName),n.transformTemplate),T8(t,r)})})}})},yte={useVisualState:_8({scrapeMotionValuesFromProps:kR,createRenderState:bR})};function R8(n,e,t){for(const r in e)!Ii(e[r])&&!I8(r,t)&&(n[r]=e[r])}function xte({transformTemplate:n},e){return ce.useMemo(()=>{const t=bR();return CR(t,e,n),Object.assign({},t.vars,t.style)},[e])}function vte(n,e){const t=n.style||{},r={};return R8(r,t,n),Object.assign(r,xte(n,e)),r}function Ete(n,e){const t={},r=vte(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}function wte(n,e,t,r){const i=ce.useMemo(()=>{const s=E8();return PR(s,e,MR(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};R8(s,n.style,n),i.style={...s,...i.style}}return i}function Ste(n=!1){return(t,r,i,{latestValues:s},a)=>{const l=(TR(t)?wte:Ete)(r,s,a,t),u=Vee(r,typeof t=="string",n),f=t!==ce.Fragment?{...u,...l,ref:i}:{},{children:d}=r,g=ce.useMemo(()=>Ii(d)?d.get():d,[d]);return ce.createElement(t,{...f,children:g})}}function Tte(n,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...TR(r)?_te:yte,preloadedFeatures:n,useRender:Ste(i),createVisualElement:e,Component:r};return Kee(a)}}function C8(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function _E(n,e,t){const r=n.getProps();return IR(r,e,t!==void 0?t:r.custom,n)}const Ite=xR(()=>window.ScrollTimeline!==void 0);class Ate{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(i=>{if(Ite()&&i.attachTimeline)return i.attachTimeline(e);if(typeof t=="function")return t(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Rte extends Ate{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function NR(n,e){return n?n[e]||n.default||n:void 0}const zT=2e4;function P8(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<zT;)e+=t,r=n.next(e);return e>=zT?1/0:e}function LR(n){return typeof n=="function"}function L3(n,e){n.timeline=e,n.onfinish=null}const OR=n=>Array.isArray(n)&&typeof n[0]=="number",Cte={linearEasing:void 0};function Pte(n,e){const t=xR(n);return()=>{var r;return(r=Cte[e])!==null&&r!==void 0?r:t()}}const Nx=Pte(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),b8=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)r+=n(h0(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function M8(n){return!!(typeof n=="function"&&Nx()||!n||typeof n=="string"&&(n in $T||Nx())||OR(n)||Array.isArray(n)&&n.every(M8))}const Yg=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,$T={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yg([0,.65,.55,1]),circOut:Yg([.55,0,1,.45]),backIn:Yg([.31,.01,.66,-.59]),backOut:Yg([.33,1.53,.69,.99])};function k8(n,e){if(n)return typeof n=="function"&&Nx()?b8(n,e):OR(n)?Yg(n):Array.isArray(n)?n.map(t=>k8(t,e)||$T.easeOut):$T[n]}const ka={x:!1,y:!1};function N8(){return ka.x||ka.y}function bte(n,e,t){var r;if(n instanceof Element)return[n];if(typeof n=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function L8(n,e){const t=bte(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function O3(n){return e=>{e.pointerType==="touch"||N8()||n(e)}}function Mte(n,e,t={}){const[r,i,s]=L8(n,t),a=O3(o=>{const{target:l}=o,u=e(o);if(typeof u!="function"||!l)return;const f=O3(d=>{u(d),l.removeEventListener("pointerleave",f)});l.addEventListener("pointerleave",f,i)});return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const O8=(n,e)=>e?n===e?!0:O8(n,e.parentElement):!1,DR=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,kte=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Nte(n){return kte.has(n.tagName)||n.tabIndex!==-1}const Xg=new WeakSet;function D3(n){return e=>{e.key==="Enter"&&n(e)}}function nS(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Lte=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=D3(()=>{if(Xg.has(t))return;nS(t,"down");const i=D3(()=>{nS(t,"up")}),s=()=>nS(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function F3(n){return DR(n)&&!N8()}function Ote(n,e,t={}){const[r,i,s]=L8(n,t),a=o=>{const l=o.currentTarget;if(!F3(o)||Xg.has(l))return;Xg.add(l);const u=e(o),f=(p,v)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",g),!(!F3(p)||!Xg.has(l))&&(Xg.delete(l),typeof u=="function"&&u(p,{success:v}))},d=p=>{f(p,t.useGlobalTarget||O8(l,p.target))},g=p=>{f(p,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",g,i)};return r.forEach(o=>{!Nte(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(t.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),o.addEventListener("focus",u=>Lte(u,i),i)}),s}function Dte(n){return n==="x"||n==="y"?ka[n]?null:(ka[n]=!0,()=>{ka[n]=!1}):ka.x||ka.y?null:(ka.x=ka.y=!0,()=>{ka.x=ka.y=!1})}const D8=new Set(["width","height","top","left","right","bottom",...P0]);let Cy;function Fte(){Cy=void 0}const bo={now:()=>(Cy===void 0&&bo.set(si.isProcessing||kee.useManualTiming?si.timestamp:performance.now()),Cy),set:n=>{Cy=n,queueMicrotask(Fte)}};function FR(n,e){n.indexOf(e)===-1&&n.push(e)}function VR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class jR{constructor(){this.subscriptions=[]}add(e){return FR(this.subscriptions,e),()=>VR(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function F8(n,e){return e?n*(1e3/e):0}const V3=30,Vte=n=>!isNaN(parseFloat(n));class jte{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=bo.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=bo.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Vte(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new jR);const r=this.events[e].add(t);return e==="change"?()=>{r(),jn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=bo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>V3)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,V3);return F8(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function hp(n,e){return new jte(n,e)}function Gte(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,hp(t))}function Bte(n,e){const t=_E(n,e);let{transitionEnd:r={},transition:i={},...s}=t||{};s={...s,...r};for(const a in s){const o=Jee(s[a]);Gte(n,a,o)}}function Ute(n){return!!(Ii(n)&&n.add)}function WT(n,e){const t=n.getValue("willChange");if(Ute(t))return t.add(e)}function V8(n){return n.props[g8]}const j8=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,zte=1e-7,$te=12;function Wte(n,e,t,r,i){let s,a,o=0;do a=e+(t-e)/2,s=j8(a,r,i)-n,s>0?t=a:e=a;while(Math.abs(s)>zte&&++o<$te);return a}function s_(n,e,t,r){if(n===e&&t===r)return js;const i=s=>Wte(s,0,1,n,t);return s=>s===0||s===1?s:j8(i(s),e,r)}const G8=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,B8=n=>e=>1-n(1-e),U8=s_(.33,1.53,.69,.99),GR=B8(U8),z8=G8(GR),$8=n=>(n*=2)<1?.5*GR(n):.5*(2-Math.pow(2,-10*(n-1))),BR=n=>1-Math.sin(Math.acos(n)),W8=B8(BR),H8=G8(BR),K8=n=>/^0[^.\s]+$/u.test(n);function Hte(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||K8(n):!0}const dm=n=>Math.round(n*1e5)/1e5,UR=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Kte(n){return n==null}const Yte=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,zR=(n,e)=>t=>!!(typeof t=="string"&&Yte.test(t)&&t.startsWith(n)||e&&!Kte(t)&&Object.prototype.hasOwnProperty.call(t,e)),Y8=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(UR);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},Xte=n=>kl(0,255,n),rS={...b0,transform:n=>Math.round(Xte(n))},ch={test:zR("rgb","red"),parse:Y8("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+rS.transform(n)+", "+rS.transform(e)+", "+rS.transform(t)+", "+dm(up.transform(r))+")"};function qte(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const HT={test:zR("#"),parse:qte,transform:ch.transform},_d={test:zR("hsl","hue"),parse:Y8("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Po.transform(dm(e))+", "+Po.transform(dm(t))+", "+dm(up.transform(r))+")"},Ei={test:n=>ch.test(n)||HT.test(n)||_d.test(n),parse:n=>ch.test(n)?ch.parse(n):_d.test(n)?_d.parse(n):HT.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?ch.transform(n):_d.transform(n)},Zte=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Qte(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(UR))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(Zte))===null||t===void 0?void 0:t.length)||0)>0}const X8="number",q8="color",Jte="var",ene="var(",j3="${}",tne=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function fp(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(tne,l=>(Ei.test(l)?(r.color.push(s),i.push(q8),t.push(Ei.parse(l))):l.startsWith(ene)?(r.var.push(s),i.push(Jte),t.push(l)):(r.number.push(s),i.push(X8),t.push(parseFloat(l))),++s,j3)).split(j3);return{values:t,split:o,indexes:r,types:i}}function Z8(n){return fp(n).values}function Q8(n){const{split:e,types:t}=fp(n),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const o=t[a];o===X8?s+=dm(i[a]):o===q8?s+=Ei.transform(i[a]):s+=i[a]}return s}}const nne=n=>typeof n=="number"?0:n;function rne(n){const e=Z8(n);return Q8(n)(e.map(nne))}const iu={test:Qte,parse:Z8,createTransformer:Q8,getAnimatableNone:rne},ine=new Set(["brightness","contrast","saturate","opacity"]);function sne(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(UR)||[];if(!r)return n;const i=t.replace(r,"");let s=ine.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const ane=/\b([a-z-]*)\(.*?\)/gu,KT={...iu,getAnimatableNone:n=>{const e=n.match(ane);return e?e.map(sne).join(" "):n}},one={...RR,color:Ei,backgroundColor:Ei,outlineColor:Ei,fill:Ei,stroke:Ei,borderColor:Ei,borderTopColor:Ei,borderRightColor:Ei,borderBottomColor:Ei,borderLeftColor:Ei,filter:KT,WebkitFilter:KT},$R=n=>one[n];function J8(n,e){let t=$R(n);return t!==KT&&(t=iu),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const lne=new Set(["auto","none","0"]);function cne(n,e,t){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!lne.has(s)&&fp(s).values.length&&(i=n[r]),r++}if(i&&t)for(const s of e)n[s]=J8(t,i)}const G3=n=>n===b0||n===It,B3=(n,e)=>parseFloat(n.split(", ")[e]),U3=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return B3(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?B3(s[1],n):0}},une=new Set(["x","y","z"]),hne=P0.filter(n=>!une.has(n));function fne(n){const e=[];return hne.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const d0={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:U3(4,13),y:U3(5,14)};d0.translateX=d0.x;d0.translateY=d0.y;const _h=new Set;let YT=!1,XT=!1;function e9(){if(XT){const n=Array.from(_h).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=fne(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))===null||o===void 0||o.set(a)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}XT=!1,YT=!1,_h.forEach(n=>n.complete()),_h.clear()}function t9(){_h.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(XT=!0)})}function dne(){t9(),e9()}class WR{constructor(e,t,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(_h.add(this),YT||(YT=!0,jn.read(t9),jn.resolveKeyframes(e9))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=i?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const l=r.readValue(t,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),_h.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,_h.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const n9=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),gne=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function mne(n){const e=gne.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function r9(n,e,t=1){const[r,i]=mne(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return n9(a)?parseFloat(a):a}return AR(i)?r9(i,e,t+1):i}const i9=n=>e=>e.test(n),pne={test:n=>n==="auto",parse:n=>n},s9=[b0,It,Po,Ec,ste,ite,pne],z3=n=>s9.find(i9(n));class a9 extends WR{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),AR(u))){const f=r9(u,t.current);f!==void 0&&(e[l]=f),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!D8.has(r)||e.length!==2)return;const[i,s]=e,a=z3(i),o=z3(s);if(a!==o)if(G3(a)&&G3(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)Hte(e[i])&&r.push(i);r.length&&cne(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=d0[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=d0[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const $3=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(iu.test(n)||n==="0")&&!n.startsWith("url("));function _ne(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function yne(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],a=$3(i,e),o=$3(s,e);return!a||!o?!1:_ne(n)||(t==="spring"||LR(t))&&r}const xne=n=>n!==null;function yE(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(xne),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const vne=40;class o9{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=bo.now(),this.options={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>vne?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&dne(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=bo.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!yne(e,r,i,s))if(a)this.options.duration=0;else{l&&l(yE(e,this.options,t)),o&&o(),this.resolveFinishedPromise();return}const f=this.initPlayback(e,t);f!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...f},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Qn=(n,e,t)=>n+(e-n)*t;function iS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Ene({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;i=iS(l,o,n+1/3),s=iS(l,o,n),a=iS(l,o,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function Lx(n,e){return t=>t>0?e:n}const sS=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},wne=[HT,ch,_d],Sne=n=>wne.find(e=>e.test(n));function W3(n){const e=Sne(n);if(!e)return!1;let t=e.parse(n);return e===_d&&(t=Ene(t)),t}const H3=(n,e)=>{const t=W3(n),r=W3(e);if(!t||!r)return Lx(n,e);const i={...t};return s=>(i.red=sS(t.red,r.red,s),i.green=sS(t.green,r.green,s),i.blue=sS(t.blue,r.blue,s),i.alpha=Qn(t.alpha,r.alpha,s),ch.transform(i))},Tne=(n,e)=>t=>e(n(t)),a_=(...n)=>n.reduce(Tne),qT=new Set(["none","hidden"]);function Ine(n,e){return qT.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Ane(n,e){return t=>Qn(n,e,t)}function HR(n){return typeof n=="number"?Ane:typeof n=="string"?AR(n)?Lx:Ei.test(n)?H3:Pne:Array.isArray(n)?l9:typeof n=="object"?Ei.test(n)?H3:Rne:Lx}function l9(n,e){const t=[...n],r=t.length,i=n.map((s,a)=>HR(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)t[a]=i[a](s);return t}}function Rne(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=HR(n[i])(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}}function Cne(n,e){var t;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=n.indexes[a][i[a]],l=(t=n.values[o])!==null&&t!==void 0?t:0;r[s]=l,i[a]++}return r}const Pne=(n,e)=>{const t=iu.createTransformer(e),r=fp(n),i=fp(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?qT.has(n)&&!i.values.length||qT.has(e)&&!r.values.length?Ine(n,e):a_(l9(Cne(r,i),i.values),t):Lx(n,e)};function c9(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Qn(n,e,t):HR(n)(n,e)}const bne=5;function u9(n,e,t){const r=Math.max(e-bne,0);return F8(t-n(r),e-r)}const rr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},aS=.001;function Mne({duration:n=rr.duration,bounce:e=rr.bounce,velocity:t=rr.velocity,mass:r=rr.mass}){let i,s,a=1-e;a=kl(rr.minDamping,rr.maxDamping,a),n=kl(rr.minDuration,rr.maxDuration,Sl(n)),a<1?(i=u=>{const f=u*a,d=f*n,g=f-t,p=ZT(u,a),v=Math.exp(-d);return aS-g/p*v},s=u=>{const d=u*a*n,g=d*t+t,p=Math.pow(a,2)*Math.pow(u,2)*n,v=Math.exp(-d),y=ZT(Math.pow(u,2),a);return(-i(u)+aS>0?-1:1)*((g-p)*v)/y}):(i=u=>{const f=Math.exp(-u*n),d=(u-t)*n+1;return-aS+f*d},s=u=>{const f=Math.exp(-u*n),d=(t-u)*(n*n);return f*d});const o=5/n,l=Nne(i,s,o);if(n=wl(n),isNaN(l))return{stiffness:rr.stiffness,damping:rr.damping,duration:n};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:n}}}const kne=12;function Nne(n,e,t){let r=t;for(let i=1;i<kne;i++)r=r-n(r)/e(r);return r}function ZT(n,e){return n*Math.sqrt(1-e*e)}const Lne=["duration","bounce"],One=["stiffness","damping","mass"];function K3(n,e){return e.some(t=>n[t]!==void 0)}function Dne(n){let e={velocity:rr.velocity,stiffness:rr.stiffness,damping:rr.damping,mass:rr.mass,isResolvedFromDuration:!1,...n};if(!K3(n,One)&&K3(n,Lne))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,s=2*kl(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:rr.mass,stiffness:i,damping:s}}else{const t=Mne(n);e={...e,...t,mass:rr.mass},e.isResolvedFromDuration=!0}return e}function h9(n=rr.visualDuration,e=rr.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const s=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:u,mass:f,duration:d,velocity:g,isResolvedFromDuration:p}=Dne({...t,velocity:-Sl(t.velocity||0)}),v=g||0,y=u/(2*Math.sqrt(l*f)),E=a-s,T=Sl(Math.sqrt(l/f)),R=Math.abs(E)<5;r||(r=R?rr.restSpeed.granular:rr.restSpeed.default),i||(i=R?rr.restDelta.granular:rr.restDelta.default);let M;if(y<1){const V=ZT(T,y);M=z=>{const P=Math.exp(-y*T*z);return a-P*((v+y*T*E)/V*Math.sin(V*z)+E*Math.cos(V*z))}}else if(y===1)M=V=>a-Math.exp(-T*V)*(E+(v+T*E)*V);else{const V=T*Math.sqrt(y*y-1);M=z=>{const P=Math.exp(-y*T*z),C=Math.min(V*z,300);return a-P*((v+y*T*E)*Math.sinh(C)+V*E*Math.cosh(C))/V}}const k={calculatedDuration:p&&d||null,next:V=>{const z=M(V);if(p)o.done=V>=d;else{let P=0;y<1&&(P=V===0?wl(v):u9(M,V,z));const C=Math.abs(P)<=r,b=Math.abs(a-z)<=i;o.done=C&&b}return o.value=o.done?a:z,o},toString:()=>{const V=Math.min(P8(k),zT),z=b8(P=>k.next(V*P).value,V,30);return V+"ms "+z}};return k}function Y3({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:f}){const d=n[0],g={done:!1,value:d},p=C=>o!==void 0&&C<o||l!==void 0&&C>l,v=C=>o===void 0?l:l===void 0||Math.abs(o-C)<Math.abs(l-C)?o:l;let y=t*e;const E=d+y,T=a===void 0?E:a(E);T!==E&&(y=T-d);const R=C=>-y*Math.exp(-C/r),M=C=>T+R(C),k=C=>{const b=R(C),L=M(C);g.done=Math.abs(b)<=u,g.value=g.done?T:L};let V,z;const P=C=>{p(g.value)&&(V=C,z=h9({keyframes:[g.value,v(g.value)],velocity:u9(M,C,g.value),damping:i,stiffness:s,restDelta:u,restSpeed:f}))};return P(0),{calculatedDuration:null,next:C=>{let b=!1;return!z&&V===void 0&&(b=!0,k(C),P(C)),V!==void 0&&C>=V?z.next(C-V):(!b&&k(C),g)}}}const Fne=s_(.42,0,1,1),Vne=s_(0,0,.58,1),f9=s_(.42,0,.58,1),jne=n=>Array.isArray(n)&&typeof n[0]!="number",Gne={linear:js,easeIn:Fne,easeInOut:f9,easeOut:Vne,circIn:BR,circInOut:H8,circOut:W8,backIn:GR,backInOut:z8,backOut:U8,anticipate:$8},X3=n=>{if(OR(n)){c8(n.length===4);const[e,t,r,i]=n;return s_(e,t,r,i)}else if(typeof n=="string")return Gne[n];return n};function Bne(n,e,t){const r=[],i=t||c9,s=n.length-1;for(let a=0;a<s;a++){let o=i(n[a],n[a+1]);if(e){const l=Array.isArray(e)?e[a]||js:e;o=a_(l,o)}r.push(o)}return r}function Une(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(c8(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=Bne(e,r,i),l=o.length,u=f=>{if(a&&f<n[0])return e[0];let d=0;if(l>1)for(;d<n.length-2&&!(f<n[d+1]);d++);const g=h0(n[d],n[d+1],f);return o[d](g)};return t?f=>u(kl(n[0],n[s-1],f)):u}function zne(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=h0(0,e,r);n.push(Qn(t,1,i))}}function $ne(n){const e=[0];return zne(e,n.length-1),e}function Wne(n,e){return n.map(t=>t*e)}function Hne(n,e){return n.map(()=>e||f9).splice(0,n.length-1)}function Ox({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=jne(r)?r.map(X3):X3(r),s={done:!1,value:e[0]},a=Wne(t&&t.length===e.length?t:$ne(e),n),o=Une(a,e,{ease:Array.isArray(i)?i:Hne(e,i)});return{calculatedDuration:n,next:l=>(s.value=o(l),s.done=l>=n,s)}}const Kne=n=>{const e=({timestamp:t})=>n(t);return{start:()=>jn.update(e,!0),stop:()=>ru(e),now:()=>si.isProcessing?si.timestamp:bo.now()}},Yne={decay:Y3,inertia:Y3,tween:Ox,keyframes:Ox,spring:h9},Xne=n=>n/100;class KR extends o9{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:r,element:i,keyframes:s}=this.options,a=i?.KeyframeResolver||WR,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new a(s,o,t,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,o=LR(t)?t:Yne[t]||Ox;let l,u;o!==Ox&&typeof e[0]!="number"&&(l=a_(Xne,c9(e[0],e[1])),e=[0,100]);const f=o({...this.options,keyframes:e});s==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=P8(f));const{calculatedDuration:d}=f,g=d+i,p=g*(r+1)-i;return{generator:f,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:g,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:f,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:g,repeat:p,repeatType:v,repeatDelay:y,onUpdate:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-f/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const T=this.currentTime-g*(this.speed>=0?1:-1),R=this.speed>=0?T<0:T>f;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let M=this.currentTime,k=s;if(p){const C=Math.min(this.currentTime,f)/d;let b=Math.floor(C),L=C%1;!L&&C>=1&&(L=1),L===1&&b--,b=Math.min(b,p+1),b%2&&(v==="reverse"?(L=1-L,y&&(L-=y/d)):v==="mirror"&&(k=a)),M=kl(0,1,L)*d}const V=R?{done:!1,value:l[0]}:k.next(M);o&&(V.value=o(V.value));let{done:z}=V;!R&&u!==null&&(z=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&z);return P&&i!==void 0&&(V.value=yE(l,this.options,i)),E&&E(V.value),P&&this.finish(),V}get duration(){const{resolved:e}=this;return e?Sl(e.calculatedDuration):0}get time(){return Sl(this.currentTime)}set time(e){e=wl(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Sl(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Kne,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const qne=new Set(["opacity","clipPath","filter","transform"]);function Zne(n,e,t,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const u={[e]:t};l&&(u.offset=l);const f=k8(o,i);return Array.isArray(f)&&(u.easing=f),n.animate(u,{delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const Qne=xR(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Dx=10,Jne=2e4;function ere(n){return LR(n.type)||n.type==="spring"||!M8(n.ease)}function tre(n,e){const t=new KR({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const i=[];let s=0;for(;!r.done&&s<Jne;)r=t.sample(s),i.push(r.value),s+=Dx;return{times:void 0,keyframes:i,duration:s-Dx,ease:"linear"}}const d9={anticipate:$8,backInOut:z8,circInOut:H8};function nre(n){return n in d9}class q3 extends o9{constructor(e){super(e);const{name:t,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new a9(s,(a,o)=>this.onKeyframesResolved(a,o),t,r,i),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:i,ease:s,type:a,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&Nx()&&nre(s)&&(s=d9[s]),ere(this.options)){const{onComplete:d,onUpdate:g,motionValue:p,element:v,...y}=this.options,E=tre(e,y);e=E.keyframes,e.length===1&&(e[1]=e[0]),r=E.duration,i=E.times,s=E.ease,a="keyframes"}const f=Zne(o.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return f.startTime=u??this.calcStartTime(),this.pendingTimeline?(L3(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:d}=this.options;o.set(yE(e,this.options,t)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:r,times:i,type:a,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Sl(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Sl(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=wl(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return js;const{animation:r}=t;L3(r,e)}return js}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:i,type:s,ease:a,times:o}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:f,onComplete:d,element:g,...p}=this.options,v=new KR({...p,keyframes:r,duration:i,type:s,ease:a,times:o,isGenerator:!0}),y=wl(this.time);u.setWithVelocity(v.sample(y-Dx).value,v.sample(y).value,Dx)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:i,repeatType:s,damping:a,type:o}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return Qne()&&r&&qne.has(r)&&!l&&!u&&!i&&s!=="mirror"&&a!==0&&o!=="inertia"}}const rre={type:"spring",stiffness:500,damping:25,restSpeed:10},ire=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),sre={type:"keyframes",duration:.8},are={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ore=(n,{keyframes:e})=>e.length>2?sre:Jh.has(n)?n.startsWith("scale")?ire(e[1]):rre:are;function lre({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:u,...f}){return!!Object.keys(f).length}const YR=(n,e,t,r={},i,s)=>a=>{const o=NR(r,n)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-wl(l);let f={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:n,motionValue:e,element:s?void 0:i};lre(o)||(f={...f,...ore(n,f)}),f.duration&&(f.duration=wl(f.duration)),f.repeatDelay&&(f.repeatDelay=wl(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let d=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const g=yE(f.keyframes,o);if(g!==void 0)return jn.update(()=>{f.onUpdate(g),f.onComplete()}),new Rte([])}return!s&&q3.supports(f)?new q3(f):new KR(f)};function cre({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function g9(n,e,{delay:t=0,transitionOverride:r,type:i}={}){var s;let{transition:a=n.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(a=r);const u=[],f=i&&n.animationState&&n.animationState.getState()[i];for(const d in l){const g=n.getValue(d,(s=n.latestValues[d])!==null&&s!==void 0?s:null),p=l[d];if(p===void 0||f&&cre(f,d))continue;const v={delay:t,...NR(a||{},d)};let y=!1;if(window.MotionHandoffAnimation){const T=V8(n);if(T){const R=window.MotionHandoffAnimation(T,d,jn);R!==null&&(v.startTime=R,y=!0)}}WT(n,d),g.start(YR(d,g,p,n.shouldReduceMotion&&D8.has(d)?{type:!1}:v,n,y));const E=g.animation;E&&u.push(E)}return o&&Promise.all(u).then(()=>{jn.update(()=>{o&&Bte(n,o)})}),u}function QT(n,e,t={}){var r;const i=_E(n,e,t.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const a=i?()=>Promise.all(g9(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:f=0,staggerChildren:d,staggerDirection:g}=s;return ure(n,e,f+u,d,g,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,f]=l==="beforeChildren"?[a,o]:[o,a];return u().then(()=>f())}else return Promise.all([a(),o(t.delay)])}function ure(n,e,t=0,r=0,i=1,s){const a=[],o=(n.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(n.variantChildren).sort(hre).forEach((u,f)=>{u.notify("AnimationStart",e),a.push(QT(u,e,{...s,delay:t+l(f)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(a)}function hre(n,e){return n.sortNodePosition(e)}function fre(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>QT(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=QT(n,e,t);else{const i=typeof e=="function"?_E(n,e,t.custom):e;r=Promise.all(g9(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const dre=ER.length;function m9(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?m9(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<dre;t++){const r=ER[t],i=n.props[r];(cp(i)||i===!1)&&(e[r]=i)}return e}const gre=[...vR].reverse(),mre=vR.length;function pre(n){return e=>Promise.all(e.map(({animation:t,options:r})=>fre(n,t,r)))}function _re(n){let e=pre(n),t=Z3(),r=!0;const i=l=>(u,f)=>{var d;const g=_E(n,f,l==="exit"?(d=n.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(g){const{transition:p,transitionEnd:v,...y}=g;u={...u,...y,...v}}return u};function s(l){e=l(n)}function a(l){const{props:u}=n,f=m9(n.parent)||{},d=[],g=new Set;let p={},v=1/0;for(let E=0;E<mre;E++){const T=gre[E],R=t[T],M=u[T]!==void 0?u[T]:f[T],k=cp(M),V=T===l?R.isActive:null;V===!1&&(v=E);let z=M===f[T]&&M!==u[T]&&k;if(z&&r&&n.manuallyAnimateOnMount&&(z=!1),R.protectedKeys={...p},!R.isActive&&V===null||!M&&!R.prevProp||mE(M)||typeof M=="boolean")continue;const P=yre(R.prevProp,M);let C=P||T===l&&R.isActive&&!z&&k||E>v&&k,b=!1;const L=Array.isArray(M)?M:[M];let F=L.reduce(i(T),{});V===!1&&(F={});const{prevResolvedValues:U={}}=R,j={...U,...F},Te=ke=>{C=!0,g.has(ke)&&(b=!0,g.delete(ke)),R.needsAnimating[ke]=!0;const le=n.getValue(ke);le&&(le.liveStyle=!1)};for(const ke in j){const le=F[ke],Ae=U[ke];if(p.hasOwnProperty(ke))continue;let Ie=!1;UT(le)&&UT(Ae)?Ie=!C8(le,Ae):Ie=le!==Ae,Ie?le!=null?Te(ke):g.add(ke):le!==void 0&&g.has(ke)?Te(ke):R.protectedKeys[ke]=!0}R.prevProp=M,R.prevResolvedValues=F,R.isActive&&(p={...p,...F}),r&&n.blockInitialAnimation&&(C=!1),C&&(!(z&&P)||b)&&d.push(...L.map(ke=>({animation:ke,options:{type:T}})))}if(g.size){const E={};g.forEach(T=>{const R=n.getBaseTarget(T),M=n.getValue(T);M&&(M.liveStyle=!0),E[T]=R??null}),d.push({animation:E})}let y=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(y=!1),r=!1,y?e(d):Promise.resolve()}function o(l,u){var f;if(t[l].isActive===u)return Promise.resolve();(f=n.variantChildren)===null||f===void 0||f.forEach(g=>{var p;return(p=g.animationState)===null||p===void 0?void 0:p.setActive(l,u)}),t[l].isActive=u;const d=a(l);for(const g in t)t[g].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>t,reset:()=>{t=Z3(),r=!0}}}function yre(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!C8(e,n):!1}function Uu(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Z3(){return{animate:Uu(!0),whileInView:Uu(),whileHover:Uu(),whileTap:Uu(),whileDrag:Uu(),whileFocus:Uu(),exit:Uu()}}class gu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class xre extends gu{constructor(e){super(e),e.animationState||(e.animationState=_re(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();mE(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let vre=0;class Ere extends gu{constructor(){super(...arguments),this.id=vre++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const wre={animation:{Feature:xre},exit:{Feature:Ere}};function dp(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function o_(n){return{point:{x:n.pageX,y:n.pageY}}}const Sre=n=>e=>DR(e)&&n(e,o_(e));function gm(n,e,t,r){return dp(n,e,Sre(t),r)}const Q3=(n,e)=>Math.abs(n-e);function Tre(n,e){const t=Q3(n.x,e.x),r=Q3(n.y,e.y);return Math.sqrt(t**2+r**2)}class p9{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=lS(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,p=Tre(d.offset,{x:0,y:0})>=3;if(!g&&!p)return;const{point:v}=d,{timestamp:y}=si;this.history.push({...v,timestamp:y});const{onStart:E,onMove:T}=this.handlers;g||(E&&E(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,d)},this.handlePointerMove=(d,g)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=oS(g,this.transformPagePoint),jn.update(this.updatePoint,!0)},this.handlePointerUp=(d,g)=>{this.end();const{onEnd:p,onSessionEnd:v,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=lS(d.type==="pointercancel"?this.lastMoveEventInfo:oS(g,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,E),v&&v(d,E)},!DR(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const a=o_(e),o=oS(a,this.transformPagePoint),{point:l}=o,{timestamp:u}=si;this.history=[{...l,timestamp:u}];const{onSessionStart:f}=t;f&&f(e,lS(o,this.history)),this.removeListeners=a_(gm(this.contextWindow,"pointermove",this.handlePointerMove),gm(this.contextWindow,"pointerup",this.handlePointerUp),gm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ru(this.updatePoint)}}function oS(n,e){return e?{point:e(n.point)}:n}function J3(n,e){return{x:n.x-e.x,y:n.y-e.y}}function lS({point:n},e){return{point:n,delta:J3(n,_9(e)),offset:J3(n,Ire(e)),velocity:Are(e,.1)}}function Ire(n){return n[0]}function _9(n){return n[n.length-1]}function Are(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=_9(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>wl(e)));)t--;if(!r)return{x:0,y:0};const s=Sl(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const y9=1e-4,Rre=1-y9,Cre=1+y9,x9=.01,Pre=0-x9,bre=0+x9;function $s(n){return n.max-n.min}function Mre(n,e,t){return Math.abs(n-e)<=t}function eN(n,e,t,r=.5){n.origin=r,n.originPoint=Qn(e.min,e.max,n.origin),n.scale=$s(t)/$s(e),n.translate=Qn(t.min,t.max,n.origin)-n.originPoint,(n.scale>=Rre&&n.scale<=Cre||isNaN(n.scale))&&(n.scale=1),(n.translate>=Pre&&n.translate<=bre||isNaN(n.translate))&&(n.translate=0)}function mm(n,e,t,r){eN(n.x,e.x,t.x,r?r.originX:void 0),eN(n.y,e.y,t.y,r?r.originY:void 0)}function tN(n,e,t){n.min=t.min+e.min,n.max=n.min+$s(e)}function kre(n,e,t){tN(n.x,e.x,t.x),tN(n.y,e.y,t.y)}function nN(n,e,t){n.min=e.min-t.min,n.max=n.min+$s(e)}function pm(n,e,t){nN(n.x,e.x,t.x),nN(n.y,e.y,t.y)}function Nre(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?Qn(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?Qn(t,n,r.max):Math.min(n,t)),n}function rN(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Lre(n,{top:e,left:t,bottom:r,right:i}){return{x:rN(n.x,t,i),y:rN(n.y,e,r)}}function iN(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function Ore(n,e){return{x:iN(n.x,e.x),y:iN(n.y,e.y)}}function Dre(n,e){let t=.5;const r=$s(n),i=$s(e);return i>r?t=h0(e.min,e.max-r,n.min):r>i&&(t=h0(n.min,n.max-i,e.min)),kl(0,1,t)}function Fre(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const JT=.35;function Vre(n=JT){return n===!1?n=0:n===!0&&(n=JT),{x:sN(n,"left","right"),y:sN(n,"top","bottom")}}function sN(n,e,t){return{min:aN(n,e),max:aN(n,t)}}function aN(n,e){return typeof n=="number"?n:n[e]||0}const oN=()=>({translate:0,scale:1,origin:0,originPoint:0}),yd=()=>({x:oN(),y:oN()}),lN=()=>({min:0,max:0}),fr=()=>({x:lN(),y:lN()});function sa(n){return[n("x"),n("y")]}function v9({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function jre({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Gre(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function cS(n){return n===void 0||n===1}function eI({scale:n,scaleX:e,scaleY:t}){return!cS(n)||!cS(e)||!cS(t)}function Xu(n){return eI(n)||E9(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function E9(n){return cN(n.x)||cN(n.y)}function cN(n){return n&&n!=="0%"}function Fx(n,e,t){const r=n-t,i=e*r;return t+i}function uN(n,e,t,r,i){return i!==void 0&&(n=Fx(n,i,r)),Fx(n,t,r)+e}function tI(n,e=0,t=1,r,i){n.min=uN(n.min,e,t,r,i),n.max=uN(n.max,e,t,r,i)}function w9(n,{x:e,y:t}){tI(n.x,e.translate,e.scale,e.originPoint),tI(n.y,t.translate,t.scale,t.originPoint)}const hN=.999999999999,fN=1.0000000000001;function Bre(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=t[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&vd(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,w9(n,a)),r&&Xu(s.latestValues)&&vd(n,s.latestValues))}e.x<fN&&e.x>hN&&(e.x=1),e.y<fN&&e.y>hN&&(e.y=1)}function xd(n,e){n.min=n.min+e,n.max=n.max+e}function dN(n,e,t,r,i=.5){const s=Qn(n.min,n.max,i);tI(n,e,t,s,r)}function vd(n,e){dN(n.x,e.x,e.scaleX,e.scale,e.originX),dN(n.y,e.y,e.scaleY,e.scale,e.originY)}function S9(n,e){return v9(Gre(n.getBoundingClientRect(),e))}function Ure(n,e,t){const r=S9(n,t),{scroll:i}=e;return i&&(xd(r.x,i.offset.x),xd(r.y,i.offset.y)),r}const T9=({current:n})=>n?n.ownerDocument.defaultView:null,zre=new WeakMap;class $re{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=fr(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(o_(f).point)},s=(f,d)=>{const{drag:g,dragPropagation:p,onDragStart:v}=this.getProps();if(g&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Dte(g),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),sa(E=>{let T=this.getAxisMotionValue(E).get()||0;if(Po.test(T)){const{projection:R}=this.visualElement;if(R&&R.layout){const M=R.layout.layoutBox[E];M&&(T=$s(M)*(parseFloat(T)/100))}}this.originPoint[E]=T}),v&&jn.postRender(()=>v(f,d)),WT(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},a=(f,d)=>{const{dragPropagation:g,dragDirectionLock:p,onDirectionLock:v,onDrag:y}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:E}=d;if(p&&this.currentDirection===null){this.currentDirection=Wre(E),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",d.point,E),this.updateAxis("y",d.point,E),this.visualElement.render(),y&&y(f,d)},o=(f,d)=>this.stop(f,d),l=()=>sa(f=>{var d;return this.getAnimationState(f)==="paused"&&((d=this.getAxisMotionValue(f).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new p9(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:T9(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&jn.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!K1(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=Nre(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&pd(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=Lre(i.layoutBox,t):this.constraints=!1,this.elastic=Vre(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&sa(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Fre(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!pd(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Ure(r,i.root,this.visualElement.getTransformPagePoint());let a=Ore(i.layout.layoutBox,s);if(t){const o=t(jre(a));this.hasMutatedConstraints=!!o,o&&(a=v9(o))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=sa(f=>{if(!K1(f,t,this.currentDirection))return;let d=l&&l[f]||{};a&&(d={min:0,max:0});const g=i?200:1e6,p=i?40:1e7,v={type:"inertia",velocity:r?e[f]:0,bounceStiffness:g,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(f,v)});return Promise.all(u).then(o)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return WT(this.visualElement,e),r.start(YR(e,r,0,t,this.visualElement,!1))}stopAnimation(){sa(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){sa(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){sa(t=>{const{drag:r}=this.getProps();if(!K1(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[t];s.set(e[t]-Qn(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!pd(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};sa(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=Dre({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),sa(a=>{if(!K1(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(Qn(l,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;zre.set(this.visualElement,this);const e=this.visualElement.current,t=gm(e,"pointerdown",l=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();pd(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),jn.read(r);const a=dp(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(sa(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=l[f].translate,d.set(d.get()+l[f].translate))}),this.visualElement.render())}));return()=>{a(),t(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=JT,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function K1(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Wre(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class Hre extends gu{constructor(e){super(e),this.removeGroupControls=js,this.removeListeners=js,this.controls=new $re(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||js}unmount(){this.removeGroupControls(),this.removeListeners()}}const gN=n=>(e,t)=>{n&&jn.postRender(()=>n(e,t))};class Kre extends gu{constructor(){super(...arguments),this.removePointerDownListener=js}onPointerDown(e){this.session=new p9(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:T9(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:gN(e),onStart:gN(t),onMove:r,onEnd:(s,a)=>{delete this.session,i&&jn.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=gm(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Py={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function mN(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Ng={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(It.test(n))n=parseFloat(n);else return n;const t=mN(n,e.target.x),r=mN(n,e.target.y);return`${t}% ${r}%`}},Yre={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=iu.parse(n);if(i.length>5)return r;const s=iu.createTransformer(n),a=typeof i[0]!="number"?1:0,o=t.x.scale*e.x,l=t.y.scale*e.y;i[0+a]/=o,i[1+a]/=l;const u=Qn(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),s(i)}};class Xre extends ce.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;mte(qre),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Py.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==t||t===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||jn.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),SR.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function I9(n){const[e,t]=o8(),r=ce.useContext(mR);return w.jsx(Xre,{...n,layoutGroup:r,switchLayoutGroup:ce.useContext(m8),isPresent:e,safeToRemove:t})}const qre={borderRadius:{...Ng,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ng,borderTopRightRadius:Ng,borderBottomLeftRadius:Ng,borderBottomRightRadius:Ng,boxShadow:Yre};function Zre(n,e,t){const r=Ii(n)?n:hp(n);return r.start(YR("",r,e,t)),r.animation}function Qre(n){return n instanceof SVGElement&&n.tagName!=="svg"}const Jre=(n,e)=>n.depth-e.depth;class eie{constructor(){this.children=[],this.isDirty=!1}add(e){FR(this.children,e),this.isDirty=!0}remove(e){VR(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Jre),this.isDirty=!1,this.children.forEach(e)}}function tie(n,e){const t=bo.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(ru(r),n(s-e))};return jn.read(r,!0),()=>ru(r)}const A9=["TopLeft","TopRight","BottomLeft","BottomRight"],nie=A9.length,pN=n=>typeof n=="string"?parseFloat(n):n,_N=n=>typeof n=="number"||It.test(n);function rie(n,e,t,r,i,s){i?(n.opacity=Qn(0,t.opacity!==void 0?t.opacity:1,iie(r)),n.opacityExit=Qn(e.opacity!==void 0?e.opacity:1,0,sie(r))):s&&(n.opacity=Qn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let a=0;a<nie;a++){const o=`border${A9[a]}Radius`;let l=yN(e,o),u=yN(t,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||_N(l)===_N(u)?(n[o]=Math.max(Qn(pN(l),pN(u),r),0),(Po.test(u)||Po.test(l))&&(n[o]+="%")):n[o]=u}(e.rotate||t.rotate)&&(n.rotate=Qn(e.rotate||0,t.rotate||0,r))}function yN(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const iie=R9(0,.5,W8),sie=R9(.5,.95,js);function R9(n,e,t){return r=>r<n?0:r>e?1:t(h0(n,e,r))}function xN(n,e){n.min=e.min,n.max=e.max}function ra(n,e){xN(n.x,e.x),xN(n.y,e.y)}function vN(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function EN(n,e,t,r,i){return n-=e,n=Fx(n,1/t,r),i!==void 0&&(n=Fx(n,1/i,r)),n}function aie(n,e=0,t=1,r=.5,i,s=n,a=n){if(Po.test(e)&&(e=parseFloat(e),e=Qn(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=Qn(s.min,s.max,r);n===s&&(o-=e),n.min=EN(n.min,e,t,o,i),n.max=EN(n.max,e,t,o,i)}function wN(n,e,[t,r,i],s,a){aie(n,e[t],e[r],e[i],e.scale,s,a)}const oie=["x","scaleX","originX"],lie=["y","scaleY","originY"];function SN(n,e,t,r){wN(n.x,e,oie,t?t.x:void 0,r?r.x:void 0),wN(n.y,e,lie,t?t.y:void 0,r?r.y:void 0)}function TN(n){return n.translate===0&&n.scale===1}function C9(n){return TN(n.x)&&TN(n.y)}function IN(n,e){return n.min===e.min&&n.max===e.max}function cie(n,e){return IN(n.x,e.x)&&IN(n.y,e.y)}function AN(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function P9(n,e){return AN(n.x,e.x)&&AN(n.y,e.y)}function RN(n){return $s(n.x)/$s(n.y)}function CN(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class uie{constructor(){this.members=[]}add(e){FR(this.members,e),e.scheduleRender()}remove(e){if(VR(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function hie(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y,a=t?.z||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:f,rotateX:d,rotateY:g,skewX:p,skewY:v}=t;u&&(r=`perspective(${u}px) ${r}`),f&&(r+=`rotate(${f}deg) `),d&&(r+=`rotateX(${d}deg) `),g&&(r+=`rotateY(${g}deg) `),p&&(r+=`skewX(${p}deg) `),v&&(r+=`skewY(${v}deg) `)}const o=n.x.scale*e.x,l=n.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const qu={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},qg=typeof window<"u"&&window.MotionDebug!==void 0,uS=["","X","Y","Z"],fie={visibility:"hidden"},PN=1e3;let die=0;function hS(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function b9(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=V8(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",jn,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&b9(r)}function M9({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=e?.()){this.id=die++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,qg&&(qu.totalNodes=qu.resolvedTargetDeltas=qu.recalculatedProjection=0),this.nodes.forEach(pie),this.nodes.forEach(Eie),this.nodes.forEach(wie),this.nodes.forEach(_ie),qg&&window.MotionDebug.record(qu)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new eie)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new jR),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Qre(a),this.instance=a;const{layoutId:l,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),n){let d;const g=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=tie(g,250),Py.hasAnimatedSinceResize&&(Py.hasAnimatedSinceResize=!1,this.nodes.forEach(MN))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:g,hasRelativeTargetChanged:p,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||f.getDefaultTransition()||Rie,{onLayoutAnimationStart:E,onLayoutAnimationComplete:T}=f.getProps(),R=!this.targetLayout||!P9(this.targetLayout,v)||p,M=!g&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||M||g&&(R||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,M);const k={...NR(y,"layout"),onPlay:E,onComplete:T};(f.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else g||MN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ru(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Sie),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&b9(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(bN);return}this.isUpdating||this.nodes.forEach(xie),this.isUpdating=!1,this.nodes.forEach(vie),this.nodes.forEach(gie),this.nodes.forEach(mie),this.clearAllSnapshots();const o=bo.now();si.delta=kl(0,1e3/60,o-si.timestamp),si.timestamp=o,si.isProcessing=!0,tS.update.process(si),tS.preRender.process(si),tS.render.process(si),si.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,SR.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(yie),this.sharedNodes.forEach(Tie)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,jn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){jn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=fr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!C9(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;a&&(o||Xu(this.latestValues)||f)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),Cie(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return fr();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(Pie))){const{scroll:f}=this.root;f&&(xd(l.x,f.offset.x),xd(l.y,f.offset.y))}return l}removeElementScroll(a){var o;const l=fr();if(ra(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const f=this.path[u],{scroll:d,options:g}=f;f!==this.root&&d&&g.layoutScroll&&(d.wasRoot&&ra(l,a),xd(l.x,d.offset.x),xd(l.y,d.offset.y))}return l}applyTransform(a,o=!1){const l=fr();ra(l,a);for(let u=0;u<this.path.length;u++){const f=this.path[u];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&vd(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Xu(f.latestValues)&&vd(l,f.latestValues)}return Xu(this.latestValues)&&vd(l,this.latestValues),l}removeTransform(a){const o=fr();ra(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Xu(u.latestValues))continue;eI(u.latestValues)&&u.updateSnapshot();const f=fr(),d=u.measurePageBox();ra(f,d),SN(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return Xu(this.latestValues)&&SN(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==si.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:g}=this.options;if(!(!this.layout||!(d||g))){if(this.resolvedRelativeTargetAt=si.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fr(),this.relativeTargetOrigin=fr(),pm(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),ra(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=fr(),this.targetWithTransforms=fr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),kre(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ra(this.target,this.layout.layoutBox),w9(this.target,this.targetDelta)):ra(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fr(),this.relativeTargetOrigin=fr(),pm(this.relativeTargetOrigin,this.target,p.target),ra(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}qg&&qu.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||eI(this.parent.latestValues)||E9(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===si.timestamp&&(u=!1),u)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;ra(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,p=this.treeScale.y;Bre(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=fr());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(vN(this.prevProjectionDelta.x,this.projectionDelta.x),vN(this.prevProjectionDelta.y,this.projectionDelta.y)),mm(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==p||!CN(this.projectionDelta.x,this.prevProjectionDelta.x)||!CN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),qg&&qu.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=yd(),this.projectionDelta=yd(),this.projectionDeltaWithTransform=yd()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},f={...this.latestValues},d=yd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=fr(),p=l?l.source:void 0,v=this.layout?this.layout.source:void 0,y=p!==v,E=this.getStack(),T=!E||E.members.length<=1,R=!!(y&&!T&&this.options.crossfade===!0&&!this.path.some(Aie));this.animationProgress=0;let M;this.mixTargetDelta=k=>{const V=k/1e3;kN(d.x,a.x,V),kN(d.y,a.y,V),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pm(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Iie(this.relativeTarget,this.relativeTargetOrigin,g,V),M&&cie(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=fr()),ra(M,this.relativeTarget)),y&&(this.animationValues=f,rie(f,u,this.latestValues,V,R,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ru(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=jn.update(()=>{Py.hasAnimatedSinceResize=!0,this.currentAnimation=Zre(0,PN,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(PN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:f}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&k9(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||fr();const d=$s(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const g=$s(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+g}ra(o,l),vd(o,f),mm(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new uie),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&hS("z",a,u,this.animationValues);for(let f=0;f<uS.length;f++)hS(`rotate${uS[f]}`,a,u,this.animationValues),hS(`skew${uS[f]}`,a,u,this.animationValues);a.render();for(const f in u)a.setStaticValue(f,u[f]),this.animationValues&&(this.animationValues[f]=u[f]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return fie;const u={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Ry(a?.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Ry(a?.pointerEvents)||""),this.hasProjected&&!Xu(this.latestValues)&&(y.transform=f?f({},""):"none",this.hasProjected=!1),y}const g=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=hie(this.projectionDeltaWithTransform,this.treeScale,g),f&&(u.transform=f(g,u.transform));const{x:p,y:v}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${v.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(o=g.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=d===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const y in kx){if(g[y]===void 0)continue;const{correct:E,applyTo:T}=kx[y],R=u.transform==="none"?g[y]:E(g[y],d);if(T){const M=T.length;for(let k=0;k<M;k++)u[T[k]]=R}else u[y]=R}return this.options.layoutId&&(u.pointerEvents=d===this?Ry(a?.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(bN),this.root.sharedNodes.clear()}}}function gie(n){n.updateLayout()}function mie(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,a=t.source!==n.layout.source;s==="size"?sa(d=>{const g=a?t.measuredBox[d]:t.layoutBox[d],p=$s(g);g.min=r[d].min,g.max=g.min+p}):k9(s,t.layoutBox,r)&&sa(d=>{const g=a?t.measuredBox[d]:t.layoutBox[d],p=$s(r[d]);g.max=g.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+p)});const o=yd();mm(o,r,t.layoutBox);const l=yd();a?mm(l,n.applyTransform(i,!0),t.measuredBox):mm(l,r,t.layoutBox);const u=!C9(o);let f=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:g,layout:p}=d;if(g&&p){const v=fr();pm(v,t.layoutBox,g.layoutBox);const y=fr();pm(y,r,p.layoutBox),P9(v,y)||(f=!0),d.options.layoutRoot&&(n.relativeTarget=y,n.relativeTargetOrigin=v,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:f})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function pie(n){qg&&qu.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function _ie(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function yie(n){n.clearSnapshot()}function bN(n){n.clearMeasurements()}function xie(n){n.isLayoutDirty=!1}function vie(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function MN(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Eie(n){n.resolveTargetDelta()}function wie(n){n.calcProjection()}function Sie(n){n.resetSkewAndRotation()}function Tie(n){n.removeLeadSnapshot()}function kN(n,e,t){n.translate=Qn(e.translate,0,t),n.scale=Qn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function NN(n,e,t,r){n.min=Qn(e.min,t.min,r),n.max=Qn(e.max,t.max,r)}function Iie(n,e,t,r){NN(n.x,e.x,t.x,r),NN(n.y,e.y,t.y,r)}function Aie(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Rie={duration:.45,ease:[.4,0,.1,1]},LN=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),ON=LN("applewebkit/")&&!LN("chrome/")?Math.round:js;function DN(n){n.min=ON(n.min),n.max=ON(n.max)}function Cie(n){DN(n.x),DN(n.y)}function k9(n,e,t){return n==="position"||n==="preserve-aspect"&&!Mre(RN(e),RN(t),.2)}function Pie(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const bie=M9({attachResizeListener:(n,e)=>dp(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),fS={current:void 0},N9=M9({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!fS.current){const n=new bie({});n.mount(window),n.setOptions({layoutScroll:!0}),fS.current=n}return fS.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Mie={pan:{Feature:Kre},drag:{Feature:Hre,ProjectionNode:N9,MeasureLayout:I9}};function FN(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=r[i];s&&jn.postRender(()=>s(e,o_(e)))}class kie extends gu{mount(){const{current:e}=this.node;e&&(this.unmount=Mte(e,t=>(FN(this.node,t,"Start"),r=>FN(this.node,r,"End"))))}unmount(){}}class Nie extends gu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=a_(dp(this.node.current,"focus",()=>this.onFocus()),dp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function VN(n,e,t){const{props:r}=n;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=r[i];s&&jn.postRender(()=>s(e,o_(e)))}class Lie extends gu{mount(){const{current:e}=this.node;e&&(this.unmount=Ote(e,t=>(VN(this.node,t,"Start"),(r,{success:i})=>VN(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const nI=new WeakMap,dS=new WeakMap,Oie=n=>{const e=nI.get(n.target);e&&e(n)},Die=n=>{n.forEach(Oie)};function Fie({root:n,...e}){const t=n||document;dS.has(t)||dS.set(t,{});const r=dS.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Die,{root:n,...e})),r[i]}function Vie(n,e,t){const r=Fie(e);return nI.set(n,t),r.observe(n),()=>{nI.delete(n),r.unobserve(n)}}const jie={some:0,all:1};class Gie extends gu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:jie[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),g=u?f:d;g&&g(l)};return Vie(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Bie(e,t))&&this.startObserver()}unmount(){}}function Bie({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const Uie={inView:{Feature:Gie},tap:{Feature:Lie},focus:{Feature:Nie},hover:{Feature:kie}},zie={layout:{ProjectionNode:N9,MeasureLayout:I9}},rI={current:null},L9={current:!1};function $ie(){if(L9.current=!0,!!yR)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>rI.current=n.matches;n.addListener(e),e()}else rI.current=!1}const Wie=[...s9,Ei,iu],Hie=n=>Wie.find(i9(n)),jN=new WeakMap;function Kie(n,e,t){for(const r in e){const i=e[r],s=t[r];if(Ii(i))n.addValue(r,i);else if(Ii(s))n.addValue(r,hp(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const a=n.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=n.getStaticValue(r);n.addValue(r,hp(a!==void 0?a:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const GN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Yie{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=WR,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=bo.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,jn.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:f}=a;this.onUpdate=f,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=pE(t),this.isVariantNode=d8(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...g}=this.scrapeMotionValuesFromProps(t,{},this);for(const p in g){const v=g[p];l[p]!==void 0&&Ii(v)&&v.set(l[p],!1)}}mount(e){this.current=e,jN.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),L9.current||$ie(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:rI.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){jN.delete(this.current),this.projection&&this.projection.unmount(),ru(this.notifyUpdate),ru(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Jh.has(e),i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&jn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in f0){const t=f0[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):fr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<GN.length;r++){const i=GN[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=Kie(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=hp(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(n9(i)||K8(i))?i=parseFloat(i):!Hie(i)&&iu.test(t)&&(i=J8(e,t)),this.setBaseTarget(e,Ii(i)?i.get():i)),Ii(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=IR(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ii(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new jR),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class O9 extends Yie{constructor(){super(...arguments),this.KeyframeResolver=a9}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ii(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function Xie(n){return window.getComputedStyle(n)}class qie extends O9{constructor(){super(...arguments),this.type="html",this.renderInstance=w8}readValueFromInstance(e,t){if(Jh.has(t)){const r=$R(t);return r&&r.default||0}else{const r=Xie(e),i=(x8(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return S9(e,t)}build(e,t,r){CR(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return kR(e,t,r)}}class Zie extends O9{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=fr}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Jh.has(t)){const r=$R(t);return r&&r.default||0}return t=S8.has(t)?t:wR(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return A8(e,t,r)}build(e,t,r){PR(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,i){T8(e,t,r,i)}mount(e){this.isSVGTag=MR(e.tagName),super.mount(e)}}const Qie=(n,e)=>TR(n)?new Zie(e):new qie(e,{allowProjection:n!==ce.Fragment}),Jie=Tte({...wre,...Uie,...Mie,...zie},Qie),rn=jee(Jie);const ese=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tse=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),BN=n=>{const e=tse(n);return e.charAt(0).toUpperCase()+e.slice(1)},D9=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),nse=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var rse={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ise=ce.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},l)=>ce.createElement("svg",{ref:l,...rse,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:D9("lucide",i),...!s&&!nse(o)&&{"aria-hidden":"true"},...o},[...a.map(([u,f])=>ce.createElement(u,f)),...Array.isArray(s)?s:[s]]));const Tt=(n,e)=>{const t=ce.forwardRef(({className:r,...i},s)=>ce.createElement(ise,{ref:s,iconNode:e,className:D9(`lucide-${ese(BN(n))}`,`lucide-${n}`,r),...i}));return t.displayName=BN(n),t};const sse=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ase=Tt("book-open",sse);const ose=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],F9=Tt("bug",ose);const lse=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],cse=Tt("calendar",lse);const use=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],V9=Tt("chart-column",use);const hse=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],fse=Tt("check",hse);const dse=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],j9=Tt("chevron-down",dse);const gse=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],mse=Tt("chevron-left",gse);const pse=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],G9=Tt("chevron-right",pse);const _se=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],B9=Tt("chevron-up",_se);const yse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],U9=Tt("circle-alert",yse);const xse=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],vse=Tt("circle-check-big",xse);const Ese=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],wse=Tt("compass",Ese);const Sse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],UN=Tt("crosshair",Sse);const Tse=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],zN=Tt("download",Tse);const Ise=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],z9=Tt("external-link",Ise);const Ase=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],$9=Tt("eye-off",Ase);const Rse=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],W9=Tt("eye",Rse);const Cse=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],XR=Tt("file-text",Cse);const Pse=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],bse=Tt("folder-open",Pse);const Mse=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],kse=Tt("folder",Mse);const Nse=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Lse=Tt("grid-3x3",Nse);const Ose=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],$N=Tt("info",Ose);const Dse=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],g0=Tt("layers",Dse);const Fse=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Vse=Tt("link",Fse);const jse=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],qR=Tt("loader-circle",jse);const Gse=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Bse=Tt("locate-fixed",Gse);const Use=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],zse=Tt("lock",Use);const $se=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Wse=Tt("log-out",$se);const Hse=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Vh=Tt("map-pin",Hse);const Kse=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],ZR=Tt("map",Kse);const Yse=[["path",{d:"M5 12h14",key:"1ays0h"}]],Xse=Tt("minus",Yse);const qse=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],iI=Tt("mountain",qse);const Zse=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Qse=Tt("mouse-pointer",Zse);const Jse=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Vx=Tt("navigation",Jse);const eae=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],tae=Tt("pencil",eae);const nae=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],jx=Tt("plus",nae);const rae=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],iae=Tt("rotate-ccw",rae);const sae=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],aae=Tt("ruler",sae);const oae=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],lae=Tt("save",oae);const cae=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],uae=Tt("scale",cae);const hae=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],H9=Tt("search",hae);const fae=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],K9=Tt("settings",fae);const dae=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],gae=Tt("sliders-horizontal",dae);const mae=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],pae=Tt("smartphone",mae);const _ae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],yae=Tt("target",_ae);const xae=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],QR=Tt("trash-2",xae);const vae=[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]],Eae=Tt("tree-palm",vae);const wae=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Sae=Tt("type",wae);const Tae=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Y9=Tt("upload",Tae);const Iae=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],Aae=Tt("waves",Iae);const Rae=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],mu=Tt("x",Rae);function Cae(){const{tracking:n,startTracking:e,stopTracking:t,updatePosition:r,setWatchId:i,resetFirstFix:s}=Fi(),a=ce.useCallback(l=>{r(l)},[r]),o=ce.useCallback(l=>{console.error("GPS error:",l),alert(`GPS fout: ${l.message}`),t()},[t]);return ce.useEffect(()=>{if(!n)return;if(!navigator.geolocation){alert("Geolocation wordt niet ondersteund door deze browser"),t();return}const l=navigator.geolocation.watchPosition(a,o,{enableHighAccuracy:!0,maximumAge:1e3,timeout:15e3});return i(l),()=>{navigator.geolocation.clearWatch(l)}},[n,a,o,i,t]),{tracking:n,start:e,stop:t,toggle:()=>n?t():e()}}function Pae(){const{tracking:n,toggle:e}=Cae();return w.jsx(rn.button,{className:`
        fixed bottom-2 right-2 z-[1000]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${n?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},animate:n?{scale:[1,1.02,1]}:{},transition:n?{scale:{duration:2,repeat:1/0,ease:"easeInOut"}}:{},"aria-label":n?"GPS tracking actief":"GPS tracking starten",title:n?"GPS tracking actief":"GPS tracking starten",children:w.jsx(Bse,{size:22,strokeWidth:2})})}const bae="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
    <polygon points="24,6 38,38 24,30 10,38" fill="#4285F4" stroke="white" stroke-width="3" stroke-linejoin="round"/>
  </svg>`);function Mae(){const n=Hs(p=>p.map),e=Fi(p=>p.position),t=Fi(p=>p.accuracy),r=Fi(p=>p.tracking),i=Fi(p=>p.smoothHeading),s=zs(p=>p.showAccuracyCircle),a=Fi(p=>p.firstFix),o=Fi(p=>p.resetFirstFix),l=Fi(p=>p.config.centerOnUser),u=ce.useRef(null),f=ce.useRef(null),d=ce.useRef(null),g=ce.useMemo(()=>p=>new ar({image:new Fp({src:bae,scale:.9,rotation:p,rotateWithView:!1,anchor:[.5,.5]})}),[]);return ce.useEffect(()=>{if(!n||!r&&!e)return;const p=Kd([5.1214,52.0907]);return u.current=new Mo({geometry:new Oo(p)}),u.current.setStyle(g(0)),f.current=new Mo({geometry:new Oo(p)}),d.current=new Mv({source:new Av({features:[f.current,u.current]}),zIndex:1e3}),n.addLayer(d.current),()=>{d.current&&n&&n.removeLayer(d.current)}},[n,r,e,g]),ce.useEffect(()=>{if(!n||!e||!u.current||!f.current)return;const p=Kd([e.lng,e.lat]);if(u.current.getGeometry()?.setCoordinates(p),f.current.getGeometry()?.setCoordinates(p),s&&t){const v=n.getView().getResolution()||1,y=Math.min(t/v,80);f.current.setStyle(new ar({image:new Xc({radius:y,fill:new Ai({color:"rgba(66, 133, 244, 0.12)"})})}))}else f.current.setStyle(new ar({}));if(a&&r){n.getView().setCenter(p),n.getView().setZoom(17),o();return}r&&l&&!a&&n.getView().animate({center:p,duration:150})},[n,r,e,t,a,o,l,s]),ce.useEffect(()=>{if(!u.current)return;const p=i!==null?i*Math.PI/180:0;u.current.setStyle(g(p))},[i,g]),null}function kae(){const n=ja(t=>t.themesPanelOpen),e=ja(t=>t.toggleThemesPanel);return w.jsx(rn.button,{className:`
        fixed bottom-[60px] right-2 z-[1000]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${n?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":n?"Kaartlagen sluiten":"Kaartlagen openen",title:"Kaartlagen",children:w.jsx(ZR,{size:22,strokeWidth:2})})}function Nae(){return w.jsx(kae,{})}function Ur({title:n,children:e,defaultExpanded:t=!0,layerNames:r}){const[i,s]=ce.useState(t),a=Kr(p=>p.visible),o=Kr(p=>p.setLayerVisibility),l=r?.filter(p=>a[p]).length||0,u=r?.length||0,f=u>0&&l===u,d=l>0&&l<u,g=p=>{if(p.stopPropagation(),!r)return;const v=!f;r.forEach(y=>{o(y,v)})};return w.jsxs("div",{className:"mb-0.5",children:[w.jsxs("div",{className:"flex items-center gap-1 py-1 px-1 hover:bg-blue-50 transition-colors",children:[w.jsxs("button",{onClick:p=>{p.stopPropagation(),s(!i)},className:"flex-1 flex items-center gap-1 bg-transparent border-0 outline-none text-left",style:{fontSize:"inherit"},children:[w.jsx(rn.span,{animate:{rotate:i?90:0},transition:{duration:.15},className:"text-gray-400",children:w.jsx(G9,{size:14})}),i?w.jsx(bse,{size:16,className:"text-blue-500"}):w.jsx(kse,{size:16,className:"text-blue-500"}),w.jsx("span",{className:"text-gray-700 font-medium",style:{fontSize:"1em"},children:n}),l>0&&w.jsx("span",{className:"ml-1 px-1.5 py-0.5 font-medium bg-blue-100 text-blue-600 rounded-full",style:{fontSize:"0.7em"},children:l})]}),r&&r.length>0&&w.jsx("button",{onClick:g,className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:f?"#3b82f6":d?"#93c5fd":"white",border:f?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:(f||d)&&w.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",children:w.jsx("path",{d:"M2 5 L4 7 L8 3",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),w.jsx(_a,{initial:!1,children:i&&w.jsx(rn.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15},style:{overflow:"hidden"},className:"ml-5",children:e})})]})}function st({name:n,type:e}){const t=Kr(f=>f.visible[n]),r=Kr(f=>f.loadingState[n]),i=Kr(f=>f.toggleLayer),s=Kr(f=>f.setLayerVisibility),a=r==="loading",o=r==="error",l=f=>{f.stopPropagation(),!a&&(e==="overlay"?i(n):["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"].forEach(g=>{s(g,g===n)}))},u=t??!1;return w.jsxs("button",{onClick:l,disabled:a,className:`w-full flex items-center justify-between py-1 pl-3 pr-2 border-0 outline-none transition-colors text-left ${a?"opacity-70 cursor-wait bg-transparent":u?"bg-blue-50 hover:bg-blue-100":"bg-transparent hover:bg-blue-50"}`,style:{fontSize:"inherit"},children:[w.jsxs("span",{className:o?"text-red-500":"text-gray-600",children:[n,o&&w.jsx(U9,{size:12,className:"inline ml-1 text-red-500"})]}),w.jsx("div",{className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:a?"#93c5fd":u?"#3b82f6":"white",border:a?"2px solid #93c5fd":u?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:a?w.jsx(qR,{size:10,strokeWidth:3,className:"animate-spin"}):u?w.jsx(fse,{size:12,strokeWidth:3}):null})]})}function Lae(){const{themesPanelOpen:n,toggleThemesPanel:e}=ja(),t=ce.useRef(null),r=zs(a=>a.layerPanelFontScale),i=zs(a=>a.setLayerPanelFontScale),s=13*r/100;return ce.useEffect(()=>{if(!n)return;const a=l=>{t.current&&!t.current.contains(l.target)&&e()},o=setTimeout(()=>{document.addEventListener("click",a)},100);return()=>{clearTimeout(o),document.removeEventListener("click",a)}},[n,e]),w.jsx(_a,{children:n&&w.jsxs(rn.div,{ref:t,className:"fixed top-2.5 right-2 z-[1101] bg-white rounded-lg shadow-lg overflow-hidden w-[300px] max-h-[calc(100vh-200px)] flex flex-col",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{duration:.15},children:[w.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(g0,{size:14}),w.jsx("span",{className:"font-medium text-sm",children:"Kaartlagen"})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),w.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:r,onInput:a=>{i(parseInt(a.target.value))},onChange:a=>i(parseInt(a.target.value)),className:"header-slider w-20 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${r}%`}),w.jsx("span",{className:"text-xs opacity-70",children:"T"}),w.jsx("button",{onClick:e,className:"p-0.5 rounded border-0 outline-none hover:bg-white/20 transition-colors ml-1",children:w.jsx(mu,{size:16})})]})]}),w.jsxs("div",{className:"p-2 overflow-y-auto flex-1",style:{fontSize:`${s}px`},children:[w.jsx("div",{className:"mb-2 pb-1 border-b border-gray-100",children:w.jsx(st,{name:"Mijn Vondsten",type:"overlay"})}),w.jsxs(Ur,{title:"Achtergronden",defaultExpanded:!0,children:[w.jsx(st,{name:"CartoDB (licht)",type:"base"}),w.jsx(st,{name:"OpenStreetMap",type:"base"}),w.jsx(st,{name:"Luchtfoto",type:"base"}),w.jsx(st,{name:"Labels Overlay",type:"overlay"}),w.jsx(st,{name:"TMK 1850",type:"base"}),w.jsx(st,{name:"Bonnebladen 1900",type:"base"})]}),w.jsxs(Ur,{title:"Thema's",defaultExpanded:!0,children:[w.jsxs(Ur,{title:"Steentijd & Prehistorie",defaultExpanded:!1,layerNames:["Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen"],children:[w.jsx(st,{name:"Hunebedden",type:"overlay"}),w.jsx(st,{name:"FAMKE Steentijd",type:"overlay"}),w.jsx(st,{name:"Grafheuvels",type:"overlay"}),w.jsx(st,{name:"Terpen",type:"overlay"})]}),w.jsxs(Ur,{title:"Archeologische lagen",defaultExpanded:!1,layerNames:["AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen","Romeinse wegen (Wereld)","IKAW","Archeo Landschappen"],children:[w.jsx(st,{name:"AMK Monumenten",type:"overlay"}),w.jsxs(Ur,{title:"AMK per periode",defaultExpanded:!1,layerNames:["AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig"],children:[w.jsx(st,{name:"AMK Romeins",type:"overlay"}),w.jsx(st,{name:"AMK Steentijd",type:"overlay"}),w.jsx(st,{name:"AMK Vroege ME",type:"overlay"}),w.jsx(st,{name:"AMK Late ME",type:"overlay"}),w.jsx(st,{name:"AMK Overig",type:"overlay"})]}),w.jsx(st,{name:"Romeinse wegen",type:"overlay"}),w.jsx(st,{name:"Romeinse wegen (Wereld)",type:"overlay"}),w.jsx(st,{name:"IKAW",type:"overlay"}),w.jsx(st,{name:"Archeo Landschappen",type:"overlay"})]}),w.jsxs(Ur,{title:"Erfgoed & Monumenten",defaultExpanded:!1,layerNames:["Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Kastelen","Essen"],children:[w.jsx(st,{name:"Rijksmonumenten",type:"overlay"}),w.jsx(st,{name:"Werelderfgoed",type:"overlay"}),w.jsx(st,{name:"Religieus Erfgoed",type:"overlay"}),w.jsx(st,{name:"Kastelen",type:"overlay"}),w.jsx(st,{name:"Essen",type:"overlay"})]}),w.jsxs(Ur,{title:"WOII & Militair",defaultExpanded:!1,layerNames:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Militaire Objecten","Inundatiegebieden"],children:[w.jsx(st,{name:"WWII Bunkers",type:"overlay"}),w.jsx(st,{name:"Slagvelden",type:"overlay"}),w.jsx(st,{name:"Militaire Vliegvelden",type:"overlay"}),w.jsx(st,{name:"Verdedigingslinies",type:"overlay"}),w.jsx(st,{name:"Militaire Objecten",type:"overlay"}),w.jsx(st,{name:"Inundatiegebieden",type:"overlay"})]}),w.jsxs(Ur,{title:"Paleokaarten (tijdreizen)",defaultExpanded:!1,layerNames:["Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr."],children:[w.jsx(st,{name:"Paleokaart 800 n.Chr.",type:"overlay"}),w.jsx(st,{name:"Paleokaart 100 n.Chr.",type:"overlay"}),w.jsx(st,{name:"Paleokaart 500 v.Chr.",type:"overlay"}),w.jsx(st,{name:"Paleokaart 1500 v.Chr.",type:"overlay"}),w.jsx(st,{name:"Paleokaart 2750 v.Chr.",type:"overlay"}),w.jsx(st,{name:"Paleokaart 5500 v.Chr.",type:"overlay"}),w.jsx(st,{name:"Paleokaart 9000 v.Chr.",type:"overlay"})]}),w.jsxs(Ur,{title:"Uiterwaarden (UIKAV)",defaultExpanded:!1,layerNames:["UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling"],children:[w.jsx(st,{name:"UIKAV Punten",type:"overlay"}),w.jsx(st,{name:"UIKAV Vlakken",type:"overlay"}),w.jsx(st,{name:"UIKAV Expert",type:"overlay"}),w.jsx(st,{name:"UIKAV Buffer",type:"overlay"}),w.jsx(st,{name:"UIKAV Indeling",type:"overlay"})]}),w.jsxs(Ur,{title:"Hillshade & LiDAR",defaultExpanded:!1,layerNames:["AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","World Hillshade"],children:[w.jsx(st,{name:"AHN4 Hoogtekaart Kleur",type:"overlay"}),w.jsx(st,{name:"AHN4 Hillshade NL",type:"overlay"}),w.jsx(st,{name:"AHN4 Multi-Hillshade NL",type:"overlay"}),w.jsx(st,{name:"AHN 0.5m",type:"overlay"}),w.jsx(st,{name:"World Hillshade",type:"overlay"})]}),w.jsxs(Ur,{title:"Terrein & Bodem",defaultExpanded:!1,layerNames:["Veengebieden","Geomorfologie","Bodemkaart"],children:[w.jsx(st,{name:"Veengebieden",type:"overlay"}),w.jsx(st,{name:"Geomorfologie",type:"overlay"}),w.jsx(st,{name:"Bodemkaart",type:"overlay"})]}),w.jsxs(Ur,{title:"Percelen",defaultExpanded:!1,layerNames:["Gewaspercelen","Kadastrale Grenzen"],children:[w.jsx(st,{name:"Gewaspercelen",type:"overlay"}),w.jsx(st,{name:"Kadastrale Grenzen",type:"overlay"})]}),w.jsxs(Ur,{title:"Provinciale Kaarten",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],children:[w.jsxs(Ur,{title:"Zuid-Holland",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen"],children:[w.jsx(st,{name:"Scheepswrakken",type:"overlay"}),w.jsx(st,{name:"Woonheuvels ZH",type:"overlay"}),w.jsx(st,{name:"Romeinse Forten",type:"overlay"}),w.jsx(st,{name:"Windmolens",type:"overlay"}),w.jsx(st,{name:"Erfgoedlijnen",type:"overlay"}),w.jsx(st,{name:"Oude Kernen",type:"overlay"})]}),w.jsxs(Ur,{title:"Gelderland",defaultExpanded:!1,layerNames:["Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken"],children:[w.jsx(st,{name:"Relictenkaart Punten",type:"overlay"}),w.jsx(st,{name:"Relictenkaart Lijnen",type:"overlay"}),w.jsx(st,{name:"Relictenkaart Vlakken",type:"overlay"})]}),w.jsx(Ur,{title:"Zeeland",defaultExpanded:!1,layerNames:["Verdronken Dorpen"],children:w.jsx(st,{name:"Verdronken Dorpen",type:"overlay"})})]}),w.jsxs(Ur,{title:"Fossielen (vondsten)",defaultExpanded:!1,layerNames:["Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk"],children:[w.jsx(st,{name:"Fossielen Nederland",type:"overlay"}),w.jsx(st,{name:"Fossielen Belgi",type:"overlay"}),w.jsx(st,{name:"Fossielen Duitsland",type:"overlay"}),w.jsx(st,{name:"Fossielen Frankrijk",type:"overlay"})]}),w.jsxs(Ur,{title:"Recreatie",defaultExpanded:!1,layerNames:["Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels"],children:[w.jsx(st,{name:"Parken",type:"overlay"}),w.jsx(st,{name:"Speeltuinen",type:"overlay"}),w.jsx(st,{name:"Musea",type:"overlay"}),w.jsx(st,{name:"Strandjes",type:"overlay"}),w.jsx(st,{name:"Kringloopwinkels",type:"overlay"})]})]})]})]})})}function Oae(n){n("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),n("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)n("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),n("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");n("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),n("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),n.WGS84=n["EPSG:4326"],n["EPSG:3785"]=n["EPSG:3857"],n.GOOGLE=n["EPSG:3857"],n["EPSG:900913"]=n["EPSG:3857"],n["EPSG:102113"]=n["EPSG:3857"]}var jh=1,Gh=2,Od=3,Dae=4,sI=5,WN=6378137,Fae=6356752314e-3,HN=.0066943799901413165,_m=484813681109536e-20,Fe=Math.PI/2,Vae=.16666666666666666,jae=.04722222222222222,Gae=.022156084656084655,Je=1e-10,nr=.017453292519943295,cs=57.29577951308232,gn=Math.PI/4,gp=Math.PI*2,dr=3.14159265359,gs={};gs.greenwich=0;gs.lisbon=-9.131906111111;gs.paris=2.337229166667;gs.bogota=-74.080916666667;gs.madrid=-3.687938888889;gs.rome=12.452333333333;gs.bern=7.439583333333;gs.jakarta=106.807719444444;gs.ferro=-17.666666666667;gs.brussels=4.367975;gs.stockholm=18.058277777778;gs.athens=23.7163375;gs.oslo=10.722916666667;const Bae={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var KN=/[\s_\-\/\(\)]/g;function su(n,e){if(n[e])return n[e];for(var t=Object.keys(n),r=e.toLowerCase().replace(KN,""),i=-1,s,a;++i<t.length;)if(s=t[i],a=s.toLowerCase().replace(KN,""),a===r)return n[s]}function aI(n){var e={},t=n.split("+").map(function(o){return o.trim()}).filter(function(o){return o}).reduce(function(o,l){var u=l.split("=");return u.push(!0),o[u[0].toLowerCase()]=u[1],o},{}),r,i,s,a={proj:"projName",datum:"datumCode",rf:function(o){e.rf=parseFloat(o)},lat_0:function(o){e.lat0=o*nr},lat_1:function(o){e.lat1=o*nr},lat_2:function(o){e.lat2=o*nr},lat_ts:function(o){e.lat_ts=o*nr},lon_0:function(o){e.long0=o*nr},lon_1:function(o){e.long1=o*nr},lon_2:function(o){e.long2=o*nr},alpha:function(o){e.alpha=parseFloat(o)*nr},gamma:function(o){e.rectified_grid_angle=parseFloat(o)*nr},lonc:function(o){e.longc=o*nr},x_0:function(o){e.x0=parseFloat(o)},y_0:function(o){e.y0=parseFloat(o)},k_0:function(o){e.k0=parseFloat(o)},k:function(o){e.k0=parseFloat(o)},a:function(o){e.a=parseFloat(o)},b:function(o){e.b=parseFloat(o)},r:function(o){e.a=e.b=parseFloat(o)},r_a:function(){e.R_A=!0},zone:function(o){e.zone=parseInt(o,10)},south:function(){e.utmSouth=!0},towgs84:function(o){e.datum_params=o.split(",").map(function(l){return parseFloat(l)})},to_meter:function(o){e.to_meter=parseFloat(o)},units:function(o){e.units=o;var l=su(Bae,o);l&&(e.to_meter=l.to_meter)},from_greenwich:function(o){e.from_greenwich=o*nr},pm:function(o){var l=su(gs,o);e.from_greenwich=(l||parseFloat(o))*nr},nadgrids:function(o){o==="@null"?e.datumCode="none":e.nadgrids=o},axis:function(o){var l="ewnsud";o.length===3&&l.indexOf(o.substr(0,1))!==-1&&l.indexOf(o.substr(1,1))!==-1&&l.indexOf(o.substr(2,1))!==-1&&(e.axis=o)},approx:function(){e.approx=!0},over:function(){e.over=!0}};for(r in t)i=t[r],r in a?(s=a[r],typeof s=="function"?s(i):e[s]=i):e[r]=i;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e.projStr=n,e}class X9{static getId(e){const t=e.find(r=>Array.isArray(r)&&r[0]==="ID");return t&&t.length>=3?{authority:t[1],code:parseInt(t[2],10)}:null}static convertUnit(e,t="unit"){if(!e||e.length<3)return{type:t,name:"unknown",conversion_factor:null};const r=e[1],i=parseFloat(e[2])||null,s=e.find(o=>Array.isArray(o)&&o[0]==="ID"),a=s?{authority:s[1],code:parseInt(s[2],10)}:null;return{type:t,name:r,conversion_factor:i,id:a}}static convertAxis(e){const t=e[1]||"Unknown";let r;const i=t.match(/^\((.)\)$/);if(i){const u=i[1].toUpperCase();if(u==="E")r="east";else if(u==="N")r="north";else if(u==="U")r="up";else throw new Error(`Unknown axis abbreviation: ${u}`)}else r=e[2]?e[2].toLowerCase():"unknown";const s=e.find(u=>Array.isArray(u)&&u[0]==="ORDER"),a=s?parseInt(s[1],10):null,o=e.find(u=>Array.isArray(u)&&(u[0]==="LENGTHUNIT"||u[0]==="ANGLEUNIT"||u[0]==="SCALEUNIT")),l=this.convertUnit(o);return{name:t,direction:r,unit:l,order:a}}static extractAxes(e){return e.filter(t=>Array.isArray(t)&&t[0]==="AXIS").map(t=>this.convertAxis(t)).sort((t,r)=>(t.order||0)-(r.order||0))}static convert(e,t={}){switch(e[0]){case"PROJCRS":t.type="ProjectedCRS",t.name=e[1],t.base_crs=e.find(g=>Array.isArray(g)&&g[0]==="BASEGEOGCRS")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="BASEGEOGCRS")):null,t.conversion=e.find(g=>Array.isArray(g)&&g[0]==="CONVERSION")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="CONVERSION")):null;const r=e.find(g=>Array.isArray(g)&&g[0]==="CS");r&&(t.coordinate_system={type:r[1],axis:this.extractAxes(e)});const i=e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT");if(i){const g=this.convertUnit(i);t.coordinate_system.unit=g}t.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":t.type="GeographicCRS",t.name=e[1];const s=e.find(g=>Array.isArray(g)&&(g[0]==="DATUM"||g[0]==="ENSEMBLE"));if(s){const g=this.convert(s);s[0]==="ENSEMBLE"?t.datum_ensemble=g:t.datum=g;const p=e.find(v=>Array.isArray(v)&&v[0]==="PRIMEM");p&&p[1]!=="Greenwich"&&(g.prime_meridian={name:p[1],longitude:parseFloat(p[2])})}t.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},t.id=this.getId(e);break;case"DATUM":t.type="GeodeticReferenceFrame",t.name=e[1],t.ellipsoid=e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":t.type="DatumEnsemble",t.name=e[1],t.members=e.filter(g=>Array.isArray(g)&&g[0]==="MEMBER").map(g=>({type:"DatumEnsembleMember",name:g[1],id:this.getId(g)}));const a=e.find(g=>Array.isArray(g)&&g[0]==="ENSEMBLEACCURACY");a&&(t.accuracy=parseFloat(a[1]));const o=e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID");o&&(t.ellipsoid=this.convert(o)),t.id=this.getId(e);break;case"ELLIPSOID":t.type="Ellipsoid",t.name=e[1],t.semi_major_axis=parseFloat(e[2]),t.inverse_flattening=parseFloat(e[3]),e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT")&&this.convert(e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT"),t);break;case"CONVERSION":t.type="Conversion",t.name=e[1],t.method=e.find(g=>Array.isArray(g)&&g[0]==="METHOD")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="METHOD")):null,t.parameters=e.filter(g=>Array.isArray(g)&&g[0]==="PARAMETER").map(g=>this.convert(g));break;case"METHOD":t.type="Method",t.name=e[1],t.id=this.getId(e);break;case"PARAMETER":t.type="Parameter",t.name=e[1],t.value=parseFloat(e[2]),t.unit=this.convertUnit(e.find(g=>Array.isArray(g)&&(g[0]==="LENGTHUNIT"||g[0]==="ANGLEUNIT"||g[0]==="SCALEUNIT"))),t.id=this.getId(e);break;case"BOUNDCRS":t.type="BoundCRS";const l=e.find(g=>Array.isArray(g)&&g[0]==="SOURCECRS");if(l){const g=l.find(p=>Array.isArray(p));t.source_crs=g?this.convert(g):null}const u=e.find(g=>Array.isArray(g)&&g[0]==="TARGETCRS");if(u){const g=u.find(p=>Array.isArray(p));t.target_crs=g?this.convert(g):null}const f=e.find(g=>Array.isArray(g)&&g[0]==="ABRIDGEDTRANSFORMATION");f?t.transformation=this.convert(f):t.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(t.type="Transformation",t.name=e[1],t.method=e.find(g=>Array.isArray(g)&&g[0]==="METHOD")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="METHOD")):null,t.parameters=e.filter(g=>Array.isArray(g)&&(g[0]==="PARAMETER"||g[0]==="PARAMETERFILE")).map(g=>{if(g[0]==="PARAMETER")return this.convert(g);if(g[0]==="PARAMETERFILE")return{name:g[1],value:g[2],id:{authority:"EPSG",code:8656}}}),t.parameters.length===7){const g=t.parameters[6];g.name==="Scale difference"&&(g.value=Math.round((g.value-1)*1e12)/1e6)}t.id=this.getId(e);break;case"AXIS":t.coordinate_system||(t.coordinate_system={type:"unspecified",axis:[]}),t.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":const d=this.convertUnit(e,"LinearUnit");t.coordinate_system&&t.coordinate_system.axis&&t.coordinate_system.axis.forEach(g=>{g.unit||(g.unit=d)}),d.conversion_factor&&d.conversion_factor!==1&&t.semi_major_axis&&(t.semi_major_axis={value:t.semi_major_axis,unit:d});break;default:t.keyword=e[0];break}return t}}class Uae extends X9{static convert(e,t={}){return super.convert(e,t),t.coordinate_system&&t.coordinate_system.subtype==="Cartesian"&&delete t.coordinate_system,t.usage&&delete t.usage,t}}class zae extends X9{static convert(e,t={}){super.convert(e,t);const r=e.find(s=>Array.isArray(s)&&s[0]==="CS");r&&(t.coordinate_system={subtype:r[1],axis:this.extractAxes(e)});const i=e.find(s=>Array.isArray(s)&&s[0]==="USAGE");if(i){const s=i.find(l=>Array.isArray(l)&&l[0]==="SCOPE"),a=i.find(l=>Array.isArray(l)&&l[0]==="AREA"),o=i.find(l=>Array.isArray(l)&&l[0]==="BBOX");t.usage={},s&&(t.usage.scope=s[1]),a&&(t.usage.area=a[1]),o&&(t.usage.bbox=o.slice(1))}return t}}function $ae(n){return n.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(n.find(e=>Array.isArray(e)&&e[0]==="CS")||n[0]==="BOUNDCRS"||n[0]==="PROJCRS"||n[0]==="GEOGCRS","2015")}function Wae(n){return($ae(n)==="2019"?zae:Uae).convert(n)}function Hae(n){const e=n.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var mp=1,q9=2,Z9=3,Gx=4,Q9=5,JR=-1,Kae=/\s/,Yae=/[A-Za-z]/,Xae=/[A-Za-z84_]/,xE=/[,\]]/,J9=/[\d\.E\-\+]/;function Vl(n){if(typeof n!="string")throw new Error("not a string");this.text=n.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=mp}Vl.prototype.readCharicter=function(){var n=this.text[this.place++];if(this.state!==Gx)for(;Kae.test(n);){if(this.place>=this.text.length)return;n=this.text[this.place++]}switch(this.state){case mp:return this.neutral(n);case q9:return this.keyword(n);case Gx:return this.quoted(n);case Q9:return this.afterquote(n);case Z9:return this.number(n);case JR:return}};Vl.prototype.afterquote=function(n){if(n==='"'){this.word+='"',this.state=Gx;return}if(xE.test(n)){this.word=this.word.trim(),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in afterquote yet, index '+this.place)};Vl.prototype.afterItem=function(n){if(n===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=mp;return}if(n==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=mp,this.currentObject=this.stack.pop(),this.currentObject||(this.state=JR);return}};Vl.prototype.number=function(n){if(J9.test(n)){this.word+=n;return}if(xE.test(n)){this.word=parseFloat(this.word),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in number yet, index '+this.place)};Vl.prototype.quoted=function(n){if(n==='"'){this.state=Q9;return}this.word+=n};Vl.prototype.keyword=function(n){if(Xae.test(n)){this.word+=n;return}if(n==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=mp;return}if(xE.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in keyword yet, index '+this.place)};Vl.prototype.neutral=function(n){if(Yae.test(n)){this.word=n,this.state=q9;return}if(n==='"'){this.word="",this.state=Gx;return}if(J9.test(n)){this.word=n,this.state=Z9;return}if(xE.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in neutral yet, index '+this.place)};Vl.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===JR)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function qae(n){var e=new Vl(n);return e.output()}function gS(n,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var r=e?{}:n,i=t.reduce(function(s,a){return Ed(a,s),s},r);e&&(n[e]=i)}function Ed(n,e){if(!Array.isArray(n)){e[n]=!0;return}var t=n.shift();if(t==="PARAMETER"&&(t=n.shift()),n.length===1){if(Array.isArray(n[0])){e[t]={},Ed(n[0],e[t]);return}e[t]=n[0];return}if(!n.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=n;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(n);return}Array.isArray(t)||(e[t]={});var r;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:n[0].toLowerCase(),convert:n[1]},n.length===3&&Ed(n[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:n[0],a:n[1],rf:n[2]},n.length===4&&Ed(n[3],e[t]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":n[0]=["name",n[0]],gS(e,t,n);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":n[0]=["name",n[0]],gS(e,t,n),e[t].type=t;return;default:for(r=-1;++r<n.length;)if(!Array.isArray(n[r]))return Ed(n,e[t]);return gS(e,t,n)}}var Zae=.017453292519943295;function Na(n){return n*Zae}function e7(n){const e=(n.projName||"").toLowerCase().replace(/_/g," ");!n.long0&&n.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(n.long0=n.longc),!n.lat_ts&&n.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(n.lat0=Na(n.lat1>0?90:-90),n.lat_ts=n.lat1,delete n.lat1):!n.lat_ts&&n.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(n.lat_ts=n.lat0,n.lat0=Na(n.lat0>0?90:-90),delete n.lat1)}function YN(n){let e={units:null,to_meter:void 0};return typeof n=="string"?(e.units=n.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):n&&n.name&&(e.units=n.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=n.conversion_factor),e}function XN(n){return typeof n=="object"?n.value*n.unit.conversion_factor:n}function qN(n,e){n.ellipsoid.radius?(e.a=n.ellipsoid.radius,e.rf=0):(e.a=XN(n.ellipsoid.semi_major_axis),n.ellipsoid.inverse_flattening!==void 0?e.rf=n.ellipsoid.inverse_flattening:n.ellipsoid.semi_major_axis!==void 0&&n.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-XN(n.ellipsoid.semi_minor_axis))))}function Bx(n,e={}){return!n||typeof n!="object"?n:n.type==="BoundCRS"?(Bx(n.source_crs,e),n.transformation&&(n.transformation.method&&n.transformation.method.name==="NTv2"?e.nadgrids=n.transformation.parameters[0].value:e.datum_params=n.transformation.parameters.map(t=>t.value)),e):(Object.keys(n).forEach(t=>{const r=n[t];if(r!==null)switch(t){case"name":if(e.srsCode)break;e.name=r,e.srsCode=r;break;case"type":r==="GeographicCRS"?e.projName="longlat":r==="ProjectedCRS"&&n.conversion&&n.conversion.method&&(e.projName=n.conversion.method.name);break;case"datum":case"datum_ensemble":r.ellipsoid&&(e.ellps=r.ellipsoid.name,qN(r,e)),r.prime_meridian&&(e.from_greenwich=r.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=r.name,qN(r,e);break;case"prime_meridian":e.long0=(r.longitude||0)*Math.PI/180;break;case"coordinate_system":if(r.axis){if(e.axis=r.axis.map(i=>{const s=i.direction;if(s==="east")return"e";if(s==="north")return"n";if(s==="west")return"w";if(s==="south")return"s";throw new Error(`Unknown axis direction: ${s}`)}).join("")+"u",r.unit){const{units:i,to_meter:s}=YN(r.unit);e.units=i,e.to_meter=s}else if(r.axis[0]&&r.axis[0].unit){const{units:i,to_meter:s}=YN(r.axis[0].unit);e.units=i,e.to_meter=s}}break;case"id":r.authority&&r.code&&(e.title=r.authority+":"+r.code);break;case"conversion":r.method&&r.method.name&&(e.projName=r.method.name),r.parameters&&r.parameters.forEach(i=>{const s=i.name.toLowerCase().replace(/\s+/g,"_"),a=i.value;i.unit&&i.unit.conversion_factor?e[s]=a*i.unit.conversion_factor:i.unit==="degree"?e[s]=a*Math.PI/180:e[s]=a});break;case"unit":r.name&&(e.units=r.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),r.conversion_factor&&(e.to_meter=r.conversion_factor);break;case"base_crs":Bx(r,e),e.datumCode=r.id?r.id.authority+"_"+r.id.code:r.name;break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),e7(e),e)}var Qae=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Jae(n,e){var t=e[0],r=e[1];!(t in n)&&r in n&&(n[t]=n[r],e.length===3&&(n[t]=e[2](n[t])))}function t7(n){for(var e=Object.keys(n),t=0,r=e.length;t<r;++t){var i=e[t];Qae.indexOf(i)!==-1&&eoe(n[i]),typeof n[i]=="object"&&t7(n[i])}}function eoe(n){if(n.AUTHORITY){var e=Object.keys(n.AUTHORITY)[0];e&&e in n.AUTHORITY&&(n.title=e+":"+n.AUTHORITY[e])}if(n.type==="GEOGCS"?n.projName="longlat":n.type==="LOCAL_CS"?(n.projName="identity",n.local=!0):typeof n.PROJECTION=="object"?n.projName=Object.keys(n.PROJECTION)[0]:n.projName=n.PROJECTION,n.AXIS){for(var t="",r=0,i=n.AXIS.length;r<i;++r){var s=[n.AXIS[r][0].toLowerCase(),n.AXIS[r][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?t+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?t+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?t+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(n.axis=t)}n.UNIT&&(n.units=n.UNIT.name.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.UNIT.convert&&(n.type==="GEOGCS"?n.DATUM&&n.DATUM.SPHEROID&&(n.to_meter=n.UNIT.convert*n.DATUM.SPHEROID.a):n.to_meter=n.UNIT.convert));var a=n.GEOGCS;n.type==="GEOGCS"&&(a=n),a&&(a.DATUM?n.datumCode=a.DATUM.name.toLowerCase():n.datumCode=a.name.toLowerCase(),n.datumCode.slice(0,2)==="d_"&&(n.datumCode=n.datumCode.slice(2)),n.datumCode==="new_zealand_1949"&&(n.datumCode="nzgd49"),(n.datumCode==="wgs_1984"||n.datumCode==="world_geodetic_system_1984")&&(n.PROJECTION==="Mercator_Auxiliary_Sphere"&&(n.sphere=!0),n.datumCode="wgs84"),n.datumCode==="belge_1972"&&(n.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(n.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),n.ellps.toLowerCase().slice(0,13)==="international"&&(n.ellps="intl"),n.a=a.DATUM.SPHEROID.a,n.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(n.datum_params=a.DATUM.TOWGS84),~n.datumCode.indexOf("osgb_1936")&&(n.datumCode="osgb36"),~n.datumCode.indexOf("osni_1952")&&(n.datumCode="osni52"),(~n.datumCode.indexOf("tm65")||~n.datumCode.indexOf("geodetic_datum_of_1965"))&&(n.datumCode="ire65"),n.datumCode==="ch1903+"&&(n.datumCode="ch1903"),~n.datumCode.indexOf("israel")&&(n.datumCode="isr93")),n.b&&!isFinite(n.b)&&(n.b=n.a),n.rectified_grid_angle&&(n.rectified_grid_angle=Na(n.rectified_grid_angle));function o(f){var d=n.to_meter||1;return f*d}var l=function(f){return Jae(n,f)},u=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Na],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Na],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Na],["lat0","latitude_of_origin",Na],["lat0","standard_parallel_1",Na],["lat1","standard_parallel_1",Na],["lat2","standard_parallel_2",Na],["azimuth","Azimuth"],["alpha","azimuth",Na],["srsCode","name"]];u.forEach(l),e7(n)}function Ux(n){if(typeof n=="object")return Bx(n);const e=Hae(n);var t=qae(n);if(e==="WKT2"){const s=Wae(t);return Bx(s)}var r=t[0],i={};return Ed(t,i),t7(i),i[r]}function ii(n){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?ii[n]=aI(arguments[1]):ii[n]=Ux(arguments[1]):t&&typeof t=="object"&&!("projName"in t)?ii[n]=Ux(arguments[1]):(ii[n]=t,t||delete ii[n])}else if(arguments.length===1){if(Array.isArray(n))return n.map(function(r){return Array.isArray(r)?ii.apply(e,r):ii(r)});if(typeof n=="string"){if(n in ii)return ii[n]}else"EPSG"in n?ii["EPSG:"+n.EPSG]=n:"ESRI"in n?ii["ESRI:"+n.ESRI]=n:"IAU2000"in n?ii["IAU2000:"+n.IAU2000]=n:console.log(n);return}}Oae(ii);function toe(n){return typeof n=="string"}function noe(n){return n in ii}function roe(n){return n.indexOf("+")!==0&&n.indexOf("[")!==-1||typeof n=="object"&&!("srsCode"in n)}var ioe=["3857","900913","3785","102113"];function soe(n){var e=su(n,"authority");if(e){var t=su(e,"epsg");return t&&ioe.indexOf(t)>-1}}function aoe(n){var e=su(n,"extension");if(e)return su(e,"proj4")}function ooe(n){return n[0]==="+"}function loe(n){if(toe(n)){if(noe(n))return ii[n];if(roe(n)){var e=Ux(n);if(soe(e))return ii["EPSG:3857"];var t=aoe(e);return t?aI(t):e}if(ooe(n))return aI(n)}else return"projName"in n?n:Ux(n)}function ZN(n,e){n=n||{};var t,r;if(!e)return n;for(r in e)t=e[r],t!==void 0&&(n[r]=t);return n}function Vo(n,e,t){var r=n*e;return t/Math.sqrt(1-r*r)}function l_(n){return n<0?-1:1}function rt(n,e){return e||Math.abs(n)<=dr?n:n-l_(n)*gp}function Wa(n,e,t){var r=n*t,i=.5*n;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(Fe-e))/r}function pp(n,e){for(var t=.5*n,r,i,s=Fe-2*Math.atan(e),a=0;a<=15;a++)if(r=n*Math.sin(s),i=Fe-2*Math.atan(e*Math.pow((1-r)/(1+r),t))-s,s+=i,Math.abs(i)<=1e-10)return s;return-9999}function coe(){var n=this.b/this.a;this.es=1-n*n,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Vo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function uoe(n){var e=n.x,t=n.y;if(t*cs>90&&t*cs<-90&&e*cs>180&&e*cs<-180)return null;var r,i;if(Math.abs(Math.abs(t)-Fe)<=Je)return null;if(this.sphere)r=this.x0+this.a*this.k0*rt(e-this.long0,this.over),i=this.y0+this.a*this.k0*Math.log(Math.tan(gn+.5*t));else{var s=Math.sin(t),a=Wa(this.e,t,s);r=this.x0+this.a*this.k0*rt(e-this.long0,this.over),i=this.y0-this.a*this.k0*Math.log(a)}return n.x=r,n.y=i,n}function hoe(n){var e=n.x-this.x0,t=n.y-this.y0,r,i;if(this.sphere)i=Fe-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var s=Math.exp(-t/(this.a*this.k0));if(i=pp(this.e,s),i===-9999)return null}return r=rt(this.long0+e/(this.a*this.k0),this.over),n.x=r,n.y=i,n}var foe=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const doe={init:coe,forward:uoe,inverse:hoe,names:foe};function goe(){}function QN(n){return n}var n7=["longlat","identity"];const moe={init:goe,forward:QN,inverse:QN,names:n7};var poe=[doe,moe],Zu={},wd=[];function r7(n,e){var t=wd.length;return n.names?(wd[t]=n,n.names.forEach(function(r){Zu[r.toLowerCase()]=t}),this):(console.log(e),!0)}function i7(n){return n.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function _oe(n){if(!n)return!1;var e=n.toLowerCase();if(typeof Zu[e]<"u"&&wd[Zu[e]]||(e=i7(e),e in Zu&&wd[Zu[e]]))return wd[Zu[e]]}function yoe(){poe.forEach(r7)}const xoe={start:yoe,add:r7,get:_oe};var s7={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const voe=s7.WGS84;function Eoe(n,e,t,r){var i=n*n,s=e*e,a=(i-s)/i,o=0;r?(n*=1-a*(Vae+a*(jae+a*Gae)),i=n*n,a=0):o=Math.sqrt(a);var l=(i-s)/s;return{es:a,e:o,ep2:l}}function woe(n,e,t,r,i){if(!n){var s=su(s7,r);s||(s=voe),n=s.a,e=s.b,t=s.rf}return t&&!e&&(e=(1-1/t)*n),(t===0||Math.abs(n-e)<Je)&&(i=!0,e=n),{a:n,b:e,rf:t,sphere:i}}var by={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var Soe in by){var mS=by[Soe];mS.datumName&&(by[mS.datumName]=mS)}function Toe(n,e,t,r,i,s,a){var o={};return n===void 0||n==="none"?o.datum_type=sI:o.datum_type=Dae,e&&(o.datum_params=e.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=jh),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=Gh,o.datum_params[3]*=_m,o.datum_params[4]*=_m,o.datum_params[5]*=_m,o.datum_params[6]=o.datum_params[6]/1e6+1)),a&&(o.datum_type=Od,o.grids=a),o.a=t,o.b=r,o.es=i,o.ep2=s,o}var eC={};function Ioe(n,e,t){return e instanceof ArrayBuffer?Aoe(n,e,t):{ready:Roe(n,e)}}function Aoe(n,e,t){var r=!0;t!==void 0&&t.includeErrorFields===!1&&(r=!1);var i=new DataView(e),s=boe(i),a=Moe(i,s),o=koe(i,a,s,r),l={header:a,subgrids:o};return eC[n]=l,l}async function Roe(n,e){for(var t=[],r=await e.getImageCount(),i=r-1;i>=0;i--){var s=await e.getImage(i),a=await s.readRasters(),o=a,l=[s.getWidth(),s.getHeight()],u=s.getBoundingBox().map(JN),f=[s.fileDirectory.ModelPixelScale[0],s.fileDirectory.ModelPixelScale[1]].map(JN),d=u[0]+(l[0]-1)*f[0],g=u[3]-(l[1]-1)*f[1],p=o[0],v=o[1],y=[];for(let R=l[1]-1;R>=0;R--)for(let M=l[0]-1;M>=0;M--){var E=R*l[0]+M;y.push([-Oc(v[E]),Oc(p[E])])}t.push({del:f,lim:l,ll:[-d,g],cvs:y})}var T={header:{nSubgrids:r},subgrids:t};return eC[n]=T,T}function Coe(n){if(n===void 0)return null;var e=n.split(",");return e.map(Poe)}function Poe(n){if(n.length===0)return null;var e=n[0]==="@";return e&&(n=n.slice(1)),n==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:n,mandatory:!e,grid:eC[n]||null,isNull:!1}}function JN(n){return n*Math.PI/180}function Oc(n){return n/3600*Math.PI/180}function boe(n){var e=n.getInt32(8,!1);return e===11?!1:(e=n.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function Moe(n,e){return{nFields:n.getInt32(8,e),nSubgridFields:n.getInt32(24,e),nSubgrids:n.getInt32(40,e),shiftType:oI(n,56,64).trim(),fromSemiMajorAxis:n.getFloat64(120,e),fromSemiMinorAxis:n.getFloat64(136,e),toSemiMajorAxis:n.getFloat64(152,e),toSemiMinorAxis:n.getFloat64(168,e)}}function oI(n,e,t){return String.fromCharCode.apply(null,new Uint8Array(n.buffer.slice(e,t)))}function koe(n,e,t,r){for(var i=176,s=[],a=0;a<e.nSubgrids;a++){var o=Loe(n,i,t),l=Ooe(n,i,o,t,r),u=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),f=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);s.push({ll:[Oc(o.lowerLongitude),Oc(o.lowerLatitude)],del:[Oc(o.longitudeInterval),Oc(o.latitudeInterval)],lim:[u,f],count:o.gridNodeCount,cvs:Noe(l)});var d=16;r===!1&&(d=8),i+=176+o.gridNodeCount*d}return s}function Noe(n){return n.map(function(e){return[Oc(e.longitudeShift),Oc(e.latitudeShift)]})}function Loe(n,e,t){return{name:oI(n,e+8,e+16).trim(),parent:oI(n,e+24,e+24+8).trim(),lowerLatitude:n.getFloat64(e+72,t),upperLatitude:n.getFloat64(e+88,t),lowerLongitude:n.getFloat64(e+104,t),upperLongitude:n.getFloat64(e+120,t),latitudeInterval:n.getFloat64(e+136,t),longitudeInterval:n.getFloat64(e+152,t),gridNodeCount:n.getInt32(e+168,t)}}function Ooe(n,e,t,r,i){var s=e+176,a=16;i===!1&&(a=8);for(var o=[],l=0;l<t.gridNodeCount;l++){var u={latitudeShift:n.getFloat32(s+l*a,r),longitudeShift:n.getFloat32(s+l*a+4,r)};i!==!1&&(u.latitudeAccuracy=n.getFloat32(s+l*a+8,r),u.longitudeAccuracy=n.getFloat32(s+l*a+12,r)),o.push(u)}return o}function pa(n,e){if(!(this instanceof pa))return new pa(n);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(u){if(u)throw u};var t=loe(n);if(typeof t!="object"){e("Could not parse to valid json: "+n);return}var r=pa.projections.get(t.projName);if(!r){e("Could not get projection name from: "+n);return}if(t.datumCode&&t.datumCode!=="none"){var i=su(by,t.datumCode);i&&(t.datum_params=t.datum_params||(i.towgs84?i.towgs84.split(","):null),t.ellps=i.ellipse,t.datumName=i.datumName?i.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var s=woe(t.a,t.b,t.rf,t.ellps,t.sphere),a=Eoe(s.a,s.b,s.rf,t.R_A),o=Coe(t.nadgrids),l=t.datum||Toe(t.datumCode,t.datum_params,s.a,s.b,a.es,a.ep2,o);ZN(this,t),ZN(this,r),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=l,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}pa.projections=xoe;pa.projections.start();function Doe(n,e){return n.datum_type!==e.datum_type||n.a!==e.a||Math.abs(n.es-e.es)>5e-11?!1:n.datum_type===jh?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]:n.datum_type===Gh?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]&&n.datum_params[3]===e.datum_params[3]&&n.datum_params[4]===e.datum_params[4]&&n.datum_params[5]===e.datum_params[5]&&n.datum_params[6]===e.datum_params[6]:!0}function a7(n,e,t){var r=n.x,i=n.y,s=n.z?n.z:0,a,o,l,u;if(i<-Fe&&i>-1.001*Fe)i=-Fe;else if(i>Fe&&i<1.001*Fe)i=Fe;else{if(i<-Fe)return{x:-1/0,y:-1/0,z:n.z};if(i>Fe)return{x:1/0,y:1/0,z:n.z}}return r>Math.PI&&(r-=2*Math.PI),o=Math.sin(i),u=Math.cos(i),l=o*o,a=t/Math.sqrt(1-e*l),{x:(a+s)*u*Math.cos(r),y:(a+s)*u*Math.sin(r),z:(a*(1-e)+s)*o}}function o7(n,e,t,r){var i=1e-12,s=i*i,a=30,o,l,u,f,d,g,p,v,y,E,T,R,M,k=n.x,V=n.y,z=n.z?n.z:0,P,C,b;if(o=Math.sqrt(k*k+V*V),l=Math.sqrt(k*k+V*V+z*z),o/t<i){if(P=0,l/t<i)return C=Fe,b=-r,{x:n.x,y:n.y,z:n.z}}else P=Math.atan2(V,k);u=z/l,f=o/l,d=1/Math.sqrt(1-e*(2-e)*f*f),v=f*(1-e)*d,y=u*d,M=0;do M++,p=t/Math.sqrt(1-e*y*y),b=o*v+z*y-p*(1-e*y*y),g=e*p/(p+b),d=1/Math.sqrt(1-g*(2-g)*f*f),E=f*(1-g)*d,T=u*d,R=T*v-E*y,v=E,y=T;while(R*R>s&&M<a);return C=Math.atan(T/Math.abs(E)),{x:P,y:C,z:b}}function Foe(n,e,t){if(e===jh)return{x:n.x+t[0],y:n.y+t[1],z:n.z+t[2]};if(e===Gh){var r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6];return{x:u*(n.x-l*n.y+o*n.z)+r,y:u*(l*n.x+n.y-a*n.z)+i,z:u*(-o*n.x+a*n.y+n.z)+s}}}function Voe(n,e,t){if(e===jh)return{x:n.x-t[0],y:n.y-t[1],z:n.z-t[2]};if(e===Gh){var r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6],f=(n.x-r)/u,d=(n.y-i)/u,g=(n.z-s)/u;return{x:f+l*d-o*g,y:-l*f+d+a*g,z:o*f-a*d+g}}}function Y1(n){return n===jh||n===Gh}function joe(n,e,t){if(Doe(n,e)||n.datum_type===sI||e.datum_type===sI)return t;var r=n.a,i=n.es;if(n.datum_type===Od){var s=eL(n,!1,t);if(s!==0)return;r=WN,i=HN}var a=e.a,o=e.b,l=e.es;if(e.datum_type===Od&&(a=WN,o=Fae,l=HN),i===l&&r===a&&!Y1(n.datum_type)&&!Y1(e.datum_type))return t;if(t=a7(t,i,r),Y1(n.datum_type)&&(t=Foe(t,n.datum_type,n.datum_params)),Y1(e.datum_type)&&(t=Voe(t,e.datum_type,e.datum_params)),t=o7(t,l,a,o),e.datum_type===Od){var u=eL(e,!0,t);if(u!==0)return}return t}function eL(n,e,t){if(n.grids===null||n.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-t.x,y:t.y},i={x:Number.NaN,y:Number.NaN},s=[];e:for(var a=0;a<n.grids.length;a++){var o=n.grids[a];if(s.push(o.name),o.isNull){i=r;break}if(o.grid===null){if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1;continue}for(var l=o.grid.subgrids,u=0,f=l.length;u<f;u++){var d=l[u],g=(Math.abs(d.del[1])+Math.abs(d.del[0]))/1e4,p=d.ll[0]-g,v=d.ll[1]-g,y=d.ll[0]+(d.lim[0]-1)*d.del[0]+g,E=d.ll[1]+(d.lim[1]-1)*d.del[1]+g;if(!(v>r.y||p>r.x||E<r.y||y<r.x)&&(i=Goe(r,e,d),!isNaN(i.x)))break e}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*cs+" "+r.y*cs+" tried: '"+s+"'"),-1):(t.x=-i.x,t.y=i.y,0)}function Goe(n,e,t){var r={x:Number.NaN,y:Number.NaN};if(isNaN(n.x))return r;var i={x:n.x,y:n.y};i.x-=t.ll[0],i.y-=t.ll[1],i.x=rt(i.x-Math.PI)+Math.PI;var s=tL(i,t);if(e){if(isNaN(s.x))return r;s.x=i.x-s.x,s.y=i.y-s.y;var a=9,o=1e-12,l,u;do{if(u=tL(s,t),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:i.x-(u.x+s.x),y:i.y-(u.y+s.y)},s.x+=l.x,s.y+=l.y}while(a--&&Math.abs(l.x)>o&&Math.abs(l.y)>o);if(a<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=rt(s.x+t.ll[0]),r.y=s.y+t.ll[1]}else isNaN(s.x)||(r.x=n.x+s.x,r.y=n.y+s.y);return r}function tL(n,e){var t={x:n.x/e.del[0],y:n.y/e.del[1]},r={x:Math.floor(t.x),y:Math.floor(t.y)},i={x:t.x-1*r.x,y:t.y-1*r.y},s={x:Number.NaN,y:Number.NaN},a;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return s;a=r.y*e.lim[0]+r.x;var o={x:e.cvs[a][0],y:e.cvs[a][1]};a++;var l={x:e.cvs[a][0],y:e.cvs[a][1]};a+=e.lim[0];var u={x:e.cvs[a][0],y:e.cvs[a][1]};a--;var f={x:e.cvs[a][0],y:e.cvs[a][1]},d=i.x*i.y,g=i.x*(1-i.y),p=(1-i.x)*(1-i.y),v=(1-i.x)*i.y;return s.x=p*o.x+g*l.x+v*f.x+d*u.x,s.y=p*o.y+g*l.y+v*f.y+d*u.y,s}function nL(n,e,t){var r=t.x,i=t.y,s=t.z||0,a,o,l,u={};for(l=0;l<3;l++)if(!(e&&l===2&&t.z===void 0))switch(l===0?(a=r,"ew".indexOf(n.axis[l])!==-1?o="x":o="y"):l===1?(a=i,"ns".indexOf(n.axis[l])!==-1?o="y":o="x"):(a=s,o="z"),n.axis[l]){case"e":u[o]=a;break;case"w":u[o]=-a;break;case"n":u[o]=a;break;case"s":u[o]=-a;break;case"u":t[o]!==void 0&&(u.z=a);break;case"d":t[o]!==void 0&&(u.z=-a);break;default:return null}return u}function l7(n){var e={x:n[0],y:n[1]};return n.length>2&&(e.z=n[2]),n.length>3&&(e.m=n[3]),e}function Boe(n){rL(n.x),rL(n.y)}function rL(n){if(typeof Number.isFinite=="function"){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers")}if(typeof n!="number"||n!==n||!isFinite(n))throw new TypeError("coordinates must be finite numbers")}function Uoe(n,e){return(n.datum.datum_type===jh||n.datum.datum_type===Gh||n.datum.datum_type===Od)&&e.datumCode!=="WGS84"||(e.datum.datum_type===jh||e.datum.datum_type===Gh||e.datum.datum_type===Od)&&n.datumCode!=="WGS84"}function zx(n,e,t,r){var i;Array.isArray(t)?t=l7(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var s=t.z!==void 0;if(Boe(t),n.datum&&e.datum&&Uoe(n,e)&&(i=new pa("WGS84"),t=zx(n,i,t,r),n=i),r&&n.axis!=="enu"&&(t=nL(n,!1,t)),n.projName==="longlat")t={x:t.x*nr,y:t.y*nr,z:t.z||0};else if(n.to_meter&&(t={x:t.x*n.to_meter,y:t.y*n.to_meter,z:t.z||0}),t=n.inverse(t),!t)return;if(n.from_greenwich&&(t.x+=n.from_greenwich),t=joe(n.datum,e.datum,t),!!t)return t=t,e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*cs,y:t.y*cs,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),r&&e.axis!=="enu"?nL(e,!0,t):(t&&!s&&delete t.z,t)}var iL=pa("WGS84");function pS(n,e,t,r){var i,s,a;return Array.isArray(t)?(i=zx(n,e,t,r)||{x:NaN,y:NaN},t.length>2?typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(t.slice(3)):[i.x,i.y,t[2]].concat(t.slice(3)):[i.x,i.y].concat(t.slice(2)):[i.x,i.y]):(s=zx(n,e,t,r),a=Object.keys(t),a.length===2||a.forEach(function(o){if(typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(o==="x"||o==="y"||o==="z")return}else if(o==="x"||o==="y")return;s[o]=t[o]}),s)}function X1(n){return n instanceof pa?n:typeof n=="object"&&"oProj"in n?n.oProj:pa(n)}function zoe(n,e,t){var r,i,s=!1,a;return typeof e>"u"?(i=X1(n),r=iL,s=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,i=X1(n),r=iL,s=!0),r||(r=X1(n)),i||(i=X1(e)),t?pS(r,i,t):(a={forward:function(o,l){return pS(r,i,o,l)},inverse:function(o,l){return pS(i,r,o,l)}},s&&(a.oProj=i),a)}var sL=6,c7="AJSAJS",u7="AFAFAF",Sd=65,es=73,aa=79,Zg=86,Qg=90;const $oe={forward:h7,inverse:Woe,toPoint:f7};function h7(n,e){return e=e||5,Yoe(Hoe({lat:n[1],lon:n[0]}),e)}function Woe(n){var e=tC(g7(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function f7(n){var e=tC(g7(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function _S(n){return n*(Math.PI/180)}function aL(n){return 180*(n/Math.PI)}function Hoe(n){var e=n.lat,t=n.lon,r=6378137,i=.00669438,s=.9996,a,o,l,u,f,d,g,p=_S(e),v=_S(t),y,E;E=Math.floor((t+180)/6)+1,t===180&&(E=60),e>=56&&e<64&&t>=3&&t<12&&(E=32),e>=72&&e<84&&(t>=0&&t<9?E=31:t>=9&&t<21?E=33:t>=21&&t<33?E=35:t>=33&&t<42&&(E=37)),a=(E-1)*6-180+3,y=_S(a),o=i/(1-i),l=r/Math.sqrt(1-i*Math.sin(p)*Math.sin(p)),u=Math.tan(p)*Math.tan(p),f=o*Math.cos(p)*Math.cos(p),d=Math.cos(p)*(v-y),g=r*((1-i/4-3*i*i/64-5*i*i*i/256)*p-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*p)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*p)-35*i*i*i/3072*Math.sin(6*p));var T=s*l*(d+(1-u+f)*d*d*d/6+(5-18*u+u*u+72*f-58*o)*d*d*d*d*d/120)+5e5,R=s*(g+l*Math.tan(p)*(d*d/2+(5-u+9*f+4*f*f)*d*d*d*d/24+(61-58*u+u*u+600*f-330*o)*d*d*d*d*d*d/720));return e<0&&(R+=1e7),{northing:Math.round(R),easting:Math.round(T),zoneNumber:E,zoneLetter:Koe(e)}}function tC(n){var e=n.northing,t=n.easting,r=n.zoneLetter,i=n.zoneNumber;if(i<0||i>60)return null;var s=.9996,a=6378137,o=.00669438,l,u=(1-Math.sqrt(1-o))/(1+Math.sqrt(1-o)),f,d,g,p,v,y,E,T,R,M=t-5e5,k=e;r<"N"&&(k-=1e7),E=(i-1)*6-180+3,l=o/(1-o),y=k/s,T=y/(a*(1-o/4-3*o*o/64-5*o*o*o/256)),R=T+(3*u/2-27*u*u*u/32)*Math.sin(2*T)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*T)+151*u*u*u/96*Math.sin(6*T),f=a/Math.sqrt(1-o*Math.sin(R)*Math.sin(R)),d=Math.tan(R)*Math.tan(R),g=l*Math.cos(R)*Math.cos(R),p=a*(1-o)/Math.pow(1-o*Math.sin(R)*Math.sin(R),1.5),v=M/(f*s);var V=R-f*Math.tan(R)/p*(v*v/2-(5+3*d+10*g-4*g*g-9*l)*v*v*v*v/24+(61+90*d+298*g+45*d*d-252*l-3*g*g)*v*v*v*v*v*v/720);V=aL(V);var z=(v-(1+2*d+g)*v*v*v/6+(5-2*g+28*d-3*g*g+8*l+24*d*d)*v*v*v*v*v/120)/Math.cos(R);z=E+aL(z);var P;if(n.accuracy){var C=tC({northing:n.northing+n.accuracy,easting:n.easting+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber});P={top:C.lat,right:C.lon,bottom:V,left:z}}else P={lat:V,lon:z};return P}function Koe(n){var e="Z";return 84>=n&&n>=72?e="X":72>n&&n>=64?e="W":64>n&&n>=56?e="V":56>n&&n>=48?e="U":48>n&&n>=40?e="T":40>n&&n>=32?e="S":32>n&&n>=24?e="R":24>n&&n>=16?e="Q":16>n&&n>=8?e="P":8>n&&n>=0?e="N":0>n&&n>=-8?e="M":-8>n&&n>=-16?e="L":-16>n&&n>=-24?e="K":-24>n&&n>=-32?e="J":-32>n&&n>=-40?e="H":-40>n&&n>=-48?e="G":-48>n&&n>=-56?e="F":-56>n&&n>=-64?e="E":-64>n&&n>=-72?e="D":-72>n&&n>=-80&&(e="C"),e}function Yoe(n,e){var t="00000"+n.easting,r="00000"+n.northing;return n.zoneNumber+n.zoneLetter+Xoe(n.easting,n.northing,n.zoneNumber)+t.substr(t.length-5,e)+r.substr(r.length-5,e)}function Xoe(n,e,t){var r=d7(t),i=Math.floor(n/1e5),s=Math.floor(e/1e5)%20;return qoe(i,s,r)}function d7(n){var e=n%sL;return e===0&&(e=sL),e}function qoe(n,e,t){var r=t-1,i=c7.charCodeAt(r),s=u7.charCodeAt(r),a=i+n-1,o=s+e,l=!1;a>Qg&&(a=a-Qg+Sd-1,l=!0),(a===es||i<es&&a>es||(a>es||i<es)&&l)&&a++,(a===aa||i<aa&&a>aa||(a>aa||i<aa)&&l)&&(a++,a===es&&a++),a>Qg&&(a=a-Qg+Sd-1),o>Zg?(o=o-Zg+Sd-1,l=!0):l=!1,(o===es||s<es&&o>es||(o>es||s<es)&&l)&&o++,(o===aa||s<aa&&o>aa||(o>aa||s<aa)&&l)&&(o++,o===es&&o++),o>Zg&&(o=o-Zg+Sd-1);var u=String.fromCharCode(a)+String.fromCharCode(o);return u}function g7(n){if(n&&n.length===0)throw"MGRSPoint coverting from nothing";for(var e=n.length,t=null,r="",i,s=0;!/[A-Z]/.test(i=n.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+n;r+=i,s++}var a=parseInt(r,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+n;var o=n.charAt(s++);if(o<="A"||o==="B"||o==="Y"||o>="Z"||o==="I"||o==="O")throw"MGRSPoint zone letter "+o+" not handled: "+n;t=n.substring(s,s+=2);for(var l=d7(a),u=Zoe(t.charAt(0),l),f=Qoe(t.charAt(1),l);f<Joe(o);)f+=2e6;var d=e-s;if(d%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+n;var g=d/2,p=0,v=0,y,E,T,R,M;return g>0&&(y=1e5/Math.pow(10,g),E=n.substring(s,s+g),p=parseFloat(E)*y,T=n.substring(s+g),v=parseFloat(T)*y),R=p+u,M=v+f,{easting:R,northing:M,zoneLetter:o,zoneNumber:a,accuracy:y}}function Zoe(n,e){for(var t=c7.charCodeAt(e-1),r=1e5,i=!1;t!==n.charCodeAt(0);){if(t++,t===es&&t++,t===aa&&t++,t>Qg){if(i)throw"Bad character: "+n;t=Sd,i=!0}r+=1e5}return r}function Qoe(n,e){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var t=u7.charCodeAt(e-1),r=0,i=!1;t!==n.charCodeAt(0);){if(t++,t===es&&t++,t===aa&&t++,t>Zg){if(i)throw"Bad character: "+n;t=Sd,i=!0}r+=1e5}return r}function Joe(n){var e;switch(n){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+n}function m0(n,e,t){if(!(this instanceof m0))return new m0(n,e,t);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if(typeof n=="object")this.x=n.x,this.y=n.y,this.z=n.z||0;else if(typeof n=="string"&&typeof e>"u"){var r=n.split(",");this.x=parseFloat(r[0]),this.y=parseFloat(r[1]),this.z=parseFloat(r[2])||0}else this.x=n,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}m0.fromMGRS=function(n){return new m0(f7(n))};m0.prototype.toMGRS=function(n){return h7([this.x,this.y],n)};var ele=1,tle=.25,oL=.046875,lL=.01953125,cL=.01068115234375,nle=.75,rle=.46875,ile=.013020833333333334,sle=.007120768229166667,ale=.3645833333333333,ole=.005696614583333333,lle=.3076171875;function nC(n){var e=[];e[0]=ele-n*(tle+n*(oL+n*(lL+n*cL))),e[1]=n*(nle-n*(oL+n*(lL+n*cL)));var t=n*n;return e[2]=t*(rle-n*(ile+n*sle)),t*=n,e[3]=t*(ale-n*ole),e[4]=t*n*lle,e}function M0(n,e,t,r){return t*=e,e*=e,r[0]*n-t*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var cle=20;function rC(n,e,t){for(var r=1/(1-e),i=n,s=cle;s;--s){var a=Math.sin(i),o=1-e*a*a;if(o=(M0(i,a,Math.cos(i),t)-n)*(o*Math.sqrt(o))*r,i-=o,Math.abs(o)<Je)return i}return i}function ule(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=nC(this.es),this.ml0=M0(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function hle(n){var e=n.x,t=n.y,r=rt(e-this.long0,this.over),i,s,a,o=Math.sin(t),l=Math.cos(t);if(this.es){var f=l*r,d=Math.pow(f,2),g=this.ep2*Math.pow(l,2),p=Math.pow(g,2),v=Math.abs(l)>Je?Math.tan(t):0,y=Math.pow(v,2),E=Math.pow(y,2);i=1-this.es*Math.pow(o,2),f=f/Math.sqrt(i);var T=M0(t,o,l,this.en);s=this.a*(this.k0*f*(1+d/6*(1-y+g+d/20*(5-18*y+E+14*g-58*y*g+d/42*(61+179*E-E*y-479*y)))))+this.x0,a=this.a*(this.k0*(T-this.ml0+o*r*f/2*(1+d/12*(5-y+9*g+4*p+d/30*(61+E-58*y+270*g-330*y*g+d/56*(1385+543*E-E*y-3111*y))))))+this.y0}else{var u=l*Math.sin(r);if(Math.abs(Math.abs(u)-1)<Je)return 93;if(s=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,a=l*Math.cos(r)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(a),u>=1){if(u-1>Je)return 93;a=0}else a=Math.acos(a);t<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return n.x=s,n.y=a,n}function fle(n){var e,t,r,i,s=(n.x-this.x0)*(1/this.a),a=(n.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,t=rC(e,this.es,this.en),Math.abs(t)<Fe){var d=Math.sin(t),g=Math.cos(t),p=Math.abs(g)>Je?Math.tan(t):0,v=this.ep2*Math.pow(g,2),y=Math.pow(v,2),E=Math.pow(p,2),T=Math.pow(E,2);e=1-this.es*Math.pow(d,2);var R=s*Math.sqrt(e)/this.k0,M=Math.pow(R,2);e=e*p,r=t-e*M/(1-this.es)*.5*(1-M/12*(5+3*E-9*v*E+v-4*y-M/30*(61+90*E-252*v*E+45*T+46*v-M/56*(1385+3633*E+4095*T+1574*T*E)))),i=rt(this.long0+R*(1-M/6*(1+2*E+v-M/20*(5+28*E+24*T+8*v*E+6*v-M/42*(61+662*E+1320*T+720*T*E))))/g,this.over)}else r=Fe*l_(a),i=0;else{var o=Math.exp(s/this.k0),l=.5*(o-1/o),u=this.lat0+a/this.k0,f=Math.cos(u);e=Math.sqrt((1-Math.pow(f,2))/(1+Math.pow(l,2))),r=Math.asin(e),a<0&&(r=-r),l===0&&f===0?i=0:i=rt(Math.atan2(l,f)+this.long0,this.over)}return n.x=i,n.y=r,n}var dle=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const My={init:ule,forward:hle,inverse:fle,names:dle};function m7(n){var e=Math.exp(n);return e=(e-1/e)/2,e}function as(n,e){n=Math.abs(n),e=Math.abs(e);var t=Math.max(n,e),r=Math.min(n,e)/(t||1);return t*Math.sqrt(1+Math.pow(r,2))}function gle(n){var e=1+n,t=e-1;return t===0?n:n*Math.log(e)/t}function mle(n){var e=Math.abs(n);return e=gle(e*(1+e/(as(1,e)+1))),n<0?-e:e}function iC(n,e){for(var t=2*Math.cos(2*e),r=n.length-1,i=n[r],s=0,a;--r>=0;)a=-s+t*i+n[r],s=i,i=a;return e+a*Math.sin(2*e)}function ple(n,e){for(var t=2*Math.cos(e),r=n.length-1,i=n[r],s=0,a;--r>=0;)a=-s+t*i+n[r],s=i,i=a;return Math.sin(e)*a}function _le(n){var e=Math.exp(n);return e=(e+1/e)/2,e}function p7(n,e,t){for(var r=Math.sin(e),i=Math.cos(e),s=m7(t),a=_le(t),o=2*i*a,l=-2*r*s,u=n.length-1,f=n[u],d=0,g=0,p=0,v,y;--u>=0;)v=g,y=d,g=f,d=p,f=-v+o*g-l*d+n[u],p=-y+l*g+o*d;return o=r*a,l=i*s,[o*f-l*p,o*p+l*f]}function yle(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(My.init.apply(this),this.forward=My.forward,this.inverse=My.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var n=this.es/(1+Math.sqrt(1-this.es)),e=n/(2-n),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var r=iC(this.cbg,this.lat0);this.Zb=-this.Qn*(r+ple(this.gtu,2*r))}function xle(n){var e=rt(n.x-this.long0,this.over),t=n.y;t=iC(this.cbg,t);var r=Math.sin(t),i=Math.cos(t),s=Math.sin(e),a=Math.cos(e);t=Math.atan2(r,a*i),e=Math.atan2(s*i,as(r,i*a)),e=mle(Math.tan(e));var o=p7(this.gtu,2*t,2*e);t=t+o[0],e=e+o[1];var l,u;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*t+this.Zb)+this.y0):(l=1/0,u=1/0),n.x=l,n.y=u,n}function vle(n){var e=(n.x-this.x0)*(1/this.a),t=(n.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var r,i;if(Math.abs(e)<=2.623395162778){var s=p7(this.utg,2*t,2*e);t=t+s[0],e=e+s[1],e=Math.atan(m7(e));var a=Math.sin(t),o=Math.cos(t),l=Math.sin(e),u=Math.cos(e);t=Math.atan2(a*u,as(l,u*o)),e=Math.atan2(l,u*o),r=rt(e+this.long0,this.over),i=iC(this.cgb,t)}else r=1/0,i=1/0;return n.x=r,n.y=i,n}var Ele=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const ky={init:yle,forward:xle,inverse:vle,names:Ele};function wle(n,e){if(n===void 0){if(n=Math.floor((rt(e)+Math.PI)*30/Math.PI)+1,n<0)return 0;if(n>60)return 60}return n}var Sle="etmerc";function Tle(){var n=wle(this.zone,this.long0);if(n===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(n)-183)*nr,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,ky.init.apply(this),this.forward=ky.forward,this.inverse=ky.inverse}var Ile=["Universal Transverse Mercator System","utm"];const Ale={init:Tle,names:Ile,dependsOn:Sle};function sC(n,e){return Math.pow((1-n)/(1+n),e)}var Rle=20;function Cle(){var n=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*n*n),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(n/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+gn)/(Math.pow(Math.tan(.5*this.lat0+gn),this.C)*sC(this.e*n,this.ratexp))}function Ple(n){var e=n.x,t=n.y;return n.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+gn),this.C)*sC(this.e*Math.sin(t),this.ratexp))-Fe,n.x=this.C*e,n}function ble(n){for(var e=1e-14,t=n.x/this.C,r=n.y,i=Math.pow(Math.tan(.5*r+gn)/this.K,1/this.C),s=Rle;s>0&&(r=2*Math.atan(i*sC(this.e*Math.sin(n.y),-.5*this.e))-Fe,!(Math.abs(r-n.y)<e));--s)n.y=r;return s?(n.x=t,n.y=r,n):null}const aC={init:Cle,forward:Ple,inverse:ble};function Mle(){aC.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function kle(n){var e,t,r,i;return n.x=rt(n.x-this.long0,this.over),aC.forward.apply(this,[n]),e=Math.sin(n.y),t=Math.cos(n.y),r=Math.cos(n.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*r),n.x=i*t*Math.sin(n.x),n.y=i*(this.cosc0*e-this.sinc0*t*r),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function Nle(n){var e,t,r,i,s;if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,s=as(n.x,n.y)){var a=2*Math.atan2(s,this.R2);e=Math.sin(a),t=Math.cos(a),i=Math.asin(t*this.sinc0+n.y*e*this.cosc0/s),r=Math.atan2(n.x*e,s*this.cosc0*t-n.y*this.sinc0*e)}else i=this.phic0,r=0;return n.x=r,n.y=i,aC.inverse.apply(this,[n]),n.x=rt(n.x+this.long0,this.over),n}var Lle=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const Ole={init:Mle,forward:kle,inverse:Nle,names:Lle};function oC(n,e,t){return e*=t,Math.tan(.5*(Fe+n))*Math.pow((1-e)/(1+e),.5*t)}function Dle(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Je&&(this.k0=.5*(1+l_(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Je&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Je&&Math.abs(Math.cos(this.lat_ts))>Je&&(this.k0=.5*this.cons*Vo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Wa(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Vo(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(oC(this.lat0,this.sinlat0,this.e))-Fe,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Fle(n){var e=n.x,t=n.y,r=Math.sin(t),i=Math.cos(t),s,a,o,l,u,f,d=rt(e-this.long0,this.over);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=Je&&Math.abs(t+this.lat0)<=Je?(n.x=NaN,n.y=NaN,n):this.sphere?(s=2*this.k0/(1+this.sinlat0*r+this.coslat0*i*Math.cos(d)),n.x=this.a*s*i*Math.sin(d)+this.x0,n.y=this.a*s*(this.coslat0*r-this.sinlat0*i*Math.cos(d))+this.y0,n):(a=2*Math.atan(oC(t,r,this.e))-Fe,l=Math.cos(a),o=Math.sin(a),Math.abs(this.coslat0)<=Je?(u=Wa(this.e,t*this.con,this.con*r),f=2*this.a*this.k0*u/this.cons,n.x=this.x0+f*Math.sin(e-this.long0),n.y=this.y0-this.con*f*Math.cos(e-this.long0),n):(Math.abs(this.sinlat0)<Je?(s=2*this.a*this.k0/(1+l*Math.cos(d)),n.y=s*o):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*l*Math.cos(d))),n.y=s*(this.cosX0*o-this.sinX0*l*Math.cos(d))+this.y0),n.x=s*l*Math.sin(d)+this.x0,n))}function Vle(n){n.x-=this.x0,n.y-=this.y0;var e,t,r,i,s,a=Math.sqrt(n.x*n.x+n.y*n.y);if(this.sphere){var o=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,t=this.lat0,a<=Je?(n.x=e,n.y=t,n):(t=Math.asin(Math.cos(o)*this.sinlat0+n.y*Math.sin(o)*this.coslat0/a),Math.abs(this.coslat0)<Je?this.lat0>0?e=rt(this.long0+Math.atan2(n.x,-1*n.y),this.over):e=rt(this.long0+Math.atan2(n.x,n.y),this.over):e=rt(this.long0+Math.atan2(n.x*Math.sin(o),a*this.coslat0*Math.cos(o)-n.y*this.sinlat0*Math.sin(o)),this.over),n.x=e,n.y=t,n)}else if(Math.abs(this.coslat0)<=Je){if(a<=Je)return t=this.lat0,e=this.long0,n.x=e,n.y=t,n;n.x*=this.con,n.y*=this.con,r=a*this.cons/(2*this.a*this.k0),t=this.con*pp(this.e,r),e=this.con*rt(this.con*this.long0+Math.atan2(n.x,-1*n.y),this.over)}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=Je?s=this.X0:(s=Math.asin(Math.cos(i)*this.sinX0+n.y*Math.sin(i)*this.cosX0/a),e=rt(this.long0+Math.atan2(n.x*Math.sin(i),a*this.cosX0*Math.cos(i)-n.y*this.sinX0*Math.sin(i)),this.over)),t=-1*pp(this.e,Math.tan(.5*(Fe+s)));return n.x=e,n.y=t,n}var jle=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const Gle={init:Dle,forward:Fle,inverse:Vle,names:jle,ssfn_:oC};function Ble(){var n=this.lat0;this.lambda0=this.long0;var e=Math.sin(n),t=this.a,r=this.rf,i=1/r,s=2*i-Math.pow(i,2),a=this.e=Math.sqrt(s);this.R=this.k0*t*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(n),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+n/2)),u=Math.log((1+a*e)/(1-a*e));this.K=o-this.alpha*l+this.alpha*a/2*u}function Ule(n){var e=Math.log(Math.tan(Math.PI/4-n.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),r=-this.alpha*(e+t)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),s=this.alpha*(n.x-this.lambda0),a=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(s))),o=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(s));return n.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,n.x=this.R*a+this.x0,n}function zle(n){for(var e=n.x-this.x0,t=n.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),o=this.lambda0+a/this.alpha,l=0,u=s,f=-1e3,d=0;Math.abs(u-f)>1e-7;){if(++d>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),f=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return n.x=o,n.y=u,n}var $le=["somerc"];const Wle={init:Ble,forward:Ule,inverse:zle,names:$le};var hd=1e-7;function Hle(n){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof n.projName=="object"?Object.keys(n.projName)[0]:n.projName;return"no_uoff"in n||"no_off"in n||e.indexOf(t)!==-1||e.indexOf(i7(t))!==-1}function Kle(){var n,e,t,r,i,s,a,o,l,u,f=0,d,g=0,p=0,v=0,y=0,E=0,T=0;this.no_off=Hle(this),this.no_rot="no_rot"in this;var R=!1;"alpha"in this&&(R=!0);var M=!1;if("rectified_grid_angle"in this&&(M=!0),R&&(T=this.alpha),M&&(f=this.rectified_grid_angle),R||M)g=this.longc;else if(p=this.long1,y=this.lat1,v=this.long2,E=this.lat2,Math.abs(y-E)<=hd||(n=Math.abs(y))<=hd||Math.abs(n-Fe)<=hd||Math.abs(Math.abs(this.lat0)-Fe)<=hd||Math.abs(Math.abs(E)-Fe)<=hd)throw new Error;var k=1-this.es;e=Math.sqrt(k),Math.abs(this.lat0)>Je?(o=Math.sin(this.lat0),t=Math.cos(this.lat0),n=1-this.es*o*o,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/k),this.A=this.B*this.k0*e/n,r=this.B*e/(t*Math.sqrt(n)),i=r*r-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(Wa(this.e,this.lat0,o),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),R||M?(R?(d=Math.asin(Math.sin(T)/r),M||(f=T)):(d=f,T=Math.asin(r*Math.sin(d))),this.lam0=g-Math.asin(.5*(i-1/i)*Math.tan(d))/this.B):(s=Math.pow(Wa(this.e,y,Math.sin(y)),this.B),a=Math.pow(Wa(this.e,E,Math.sin(E)),this.B),i=this.E/s,l=(a-s)/(a+s),u=this.E*this.E,u=(u-a*s)/(u+a*s),n=p-v,n<-Math.PI?v-=gp:n>Math.PI&&(v+=gp),this.lam0=rt(.5*(p+v)-Math.atan(u*Math.tan(.5*this.B*(p-v))/l)/this.B,this.over),d=Math.atan(2*Math.sin(this.B*rt(p-this.lam0,this.over))/(i-1/i)),f=T=Math.asin(r*Math.sin(d))),this.singam=Math.sin(d),this.cosgam=Math.cos(d),this.sinrot=Math.sin(f),this.cosrot=Math.cos(f),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(T))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*d,this.v_pole_n=this.ArB*Math.log(Math.tan(gn-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(gn+i))}function Yle(n){var e={},t,r,i,s,a,o,l,u;if(n.x=n.x-this.lam0,Math.abs(Math.abs(n.y)-Fe)>Je){if(a=this.E/Math.pow(Wa(this.e,n.y,Math.sin(n.y)),this.B),o=1/a,t=.5*(a-o),r=.5*(a+o),s=Math.sin(this.B*n.x),i=(t*this.singam-s*this.cosgam)/r,Math.abs(Math.abs(i)-1)<Je)throw new Error;u=.5*this.ArB*Math.log((1-i)/(1+i)),o=Math.cos(this.B*n.x),Math.abs(o)<hd?l=this.A*n.x:l=this.ArB*Math.atan2(t*this.cosgam+s*this.singam,o)}else u=n.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*n.y;return this.no_rot?(e.x=l,e.y=u):(l-=this.u_0,e.x=u*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-u*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function Xle(n){var e,t,r,i,s,a,o,l={};if(n.x=(n.x-this.x0)*(1/this.a),n.y=(n.y-this.y0)*(1/this.a),this.no_rot?(t=n.y,e=n.x):(t=n.x*this.cosrot-n.y*this.sinrot,e=n.y*this.cosrot+n.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*t),i=.5*(r-1/r),s=.5*(r+1/r),a=Math.sin(this.BrA*e),o=(a*this.cosgam+i*this.singam)/s,Math.abs(Math.abs(o)-1)<Je)l.x=0,l.y=o<0?-Fe:Fe;else{if(l.y=this.E/Math.sqrt((1+o)/(1-o)),l.y=pp(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var qle=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const Zle={init:Kle,forward:Yle,inverse:Xle,names:qle};function Qle(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Je)){var n=this.b/this.a;this.e=Math.sqrt(1-n*n);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),r=Vo(this.e,e,t),i=Wa(this.e,this.lat1,e),s=Math.sin(this.lat2),a=Math.cos(this.lat2),o=Vo(this.e,s,a),l=Wa(this.e,this.lat2,s),u=Math.abs(Math.abs(this.lat0)-Fe)<Je?0:Wa(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Je?this.ns=Math.log(r/o)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function Jle(n){var e=n.x,t=n.y;Math.abs(2*Math.abs(t)-Math.PI)<=Je&&(t=l_(t)*(Fe-2*Je));var r=Math.abs(Math.abs(t)-Fe),i,s;if(r>Je)i=Wa(this.e,t,Math.sin(t)),s=this.a*this.f0*Math.pow(i,this.ns);else{if(r=t*this.ns,r<=0)return null;s=0}var a=this.ns*rt(e-this.long0,this.over);return n.x=this.k0*(s*Math.sin(a))+this.x0,n.y=this.k0*(this.rh-s*Math.cos(a))+this.y0,n}function ece(n){var e,t,r,i,s,a=(n.x-this.x0)/this.k0,o=this.rh-(n.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+o*o),t=1):(e=-Math.sqrt(a*a+o*o),t=-1);var l=0;if(e!==0&&(l=Math.atan2(t*a,t*o)),e!==0||this.ns>0){if(t=1/this.ns,r=Math.pow(e/(this.a*this.f0),t),i=pp(this.e,r),i===-9999)return null}else i=-Fe;return s=rt(l/this.ns+this.long0,this.over),n.x=s,n.y=i,n}var tce=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const nce={init:Qle,forward:Jle,inverse:ece,names:tce};function rce(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function ice(n){var e,t,r,i,s,a,o,l=n.x,u=n.y,f=rt(l-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),r=-f*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(r)),s=Math.asin(Math.cos(t)*Math.sin(r)/Math.cos(i)),a=this.n*s,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),n.y=o*Math.cos(a)/1,n.x=o*Math.sin(a)/1,this.czech||(n.y*=-1,n.x*=-1),n}function sce(n){var e,t,r,i,s,a,o,l,u=n.x;n.x=n.y,n.y=u,this.czech||(n.y*=-1,n.x*=-1),a=Math.sqrt(n.x*n.x+n.y*n.y),s=Math.atan2(n.y,n.x),i=s/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),t=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),n.x=this.long0-t/this.alfa,o=e,l=0;var f=0;do n.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-n.y)<1e-10&&(l=1),o=n.y,f+=1;while(l===0&&f<15);return f>=15?null:n}var ace=["Krovak","krovak"];const oce={init:rce,forward:ice,inverse:sce,names:ace};function Ui(n,e,t,r,i){return n*i-e*Math.sin(2*i)+t*Math.sin(4*i)-r*Math.sin(6*i)}function c_(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function u_(n){return .375*n*(1+.25*n*(1+.46875*n))}function h_(n){return .05859375*n*n*(1+.75*n)}function f_(n){return n*n*n*(35/3072)}function lC(n,e,t){var r=e*t;return n/Math.sqrt(1-r*r)}function pu(n){return Math.abs(n)<Fe?n:n-l_(n)*Math.PI}function $x(n,e,t,r,i){var s,a;s=n/e;for(var o=0;o<15;o++)if(a=(n-(e*s-t*Math.sin(2*s)+r*Math.sin(4*s)-i*Math.sin(6*s)))/(e-2*t*Math.cos(2*s)+4*r*Math.cos(4*s)-6*i*Math.cos(6*s)),s+=a,Math.abs(a)<=1e-10)return s;return NaN}function lce(){this.sphere||(this.e0=c_(this.es),this.e1=u_(this.es),this.e2=h_(this.es),this.e3=f_(this.es),this.ml0=this.a*Ui(this.e0,this.e1,this.e2,this.e3,this.lat0))}function cce(n){var e,t,r=n.x,i=n.y;if(r=rt(r-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),t=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var s=Math.sin(i),a=Math.cos(i),o=lC(this.a,this.e,s),l=Math.tan(i)*Math.tan(i),u=r*Math.cos(i),f=u*u,d=this.es*a*a/(1-this.es),g=this.a*Ui(this.e0,this.e1,this.e2,this.e3,i);e=o*u*(1-f*l*(1/6-(8-l+8*d)*f/120)),t=g-this.ml0+o*s/a*f*(.5+(5-l+6*d)*f/24)}return n.x=e+this.x0,n.y=t+this.y0,n}function uce(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,r,i;if(this.sphere){var s=t+this.lat0;r=Math.asin(Math.sin(s)*Math.cos(e)),i=Math.atan2(Math.tan(e),Math.cos(s))}else{var a=this.ml0/this.a+t,o=$x(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-Fe)<=Je)return n.x=this.long0,n.y=Fe,t<0&&(n.y*=-1),n;var l=lC(this.a,this.e,Math.sin(o)),u=l*l*l/this.a/this.a*(1-this.es),f=Math.pow(Math.tan(o),2),d=e*this.a/l,g=d*d;r=o-l*Math.tan(o)/u*d*d*(.5-(1+3*f)*d*d/24),i=d*(1-g*(f/3+(1+3*f)*f*g/15))/Math.cos(o)}return n.x=rt(i+this.long0,this.over),n.y=pu(r),n}var hce=["Cassini","Cassini_Soldner","cass"];const fce={init:lce,forward:cce,inverse:uce,names:hce};function Hc(n,e){var t;return n>1e-7?(t=n*e,(1-n*n)*(e/(1-t*t)-.5/n*Math.log((1-t)/(1+t)))):2*e}var lI=1,cI=2,uI=3,Ny=4;function dce(){var n=Math.abs(this.lat0);if(Math.abs(n-Fe)<Je?this.mode=this.lat0<0?lI:cI:Math.abs(n)<Je?this.mode=uI:this.mode=Ny,this.es>0){var e;switch(this.qp=Hc(this.e,1),this.mmf=.5/(1-this.es),this.apa=wce(this.es),this.mode){case cI:this.dd=1;break;case lI:this.dd=1;break;case uI:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case Ny:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Hc(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===Ny&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function gce(n){var e,t,r,i,s,a,o,l,u,f,d=n.x,g=n.y;if(d=rt(d-this.long0,this.over),this.sphere){if(s=Math.sin(g),f=Math.cos(g),r=Math.cos(d),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+f*r:1+this.sinph0*s+this.cosph0*f*r,t<=Je)return null;t=Math.sqrt(2/t),e=t*f*Math.sin(d),t*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*f*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(g+this.lat0)<Je)return null;t=gn-g*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(d),t*=r}}else{switch(o=0,l=0,u=0,r=Math.cos(d),i=Math.sin(d),s=Math.sin(g),a=Hc(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(o=a/this.qp,l=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:u=1+this.sinb1*o+this.cosb1*l*r;break;case this.EQUIT:u=1+l*r;break;case this.N_POLE:u=Fe+g,a=this.qp-a;break;case this.S_POLE:u=g-Fe,a=this.qp+a;break}if(Math.abs(u)<Je)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?t=this.ymf*u*(this.cosb1*o-this.sinb1*l*r):t=(u=Math.sqrt(2/(1+l*r)))*o*this.ymf,e=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(u=Math.sqrt(a))*i,t=r*(this.mode===this.S_POLE?u:-u)):e=t=0;break}}return n.x=this.a*e+this.x0,n.y=this.a*t+this.y0,n}function mce(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,r,i,s,a,o,l,u;if(this.sphere){var f=0,d,g=0;if(d=Math.sqrt(e*e+t*t),i=d*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(g=Math.sin(i),f=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(d)<=Je?0:Math.asin(t*g/d),e*=g,t=f*d;break;case this.OBLIQ:i=Math.abs(d)<=Je?this.lat0:Math.asin(f*this.sinph0+t*g*this.cosph0/d),e*=g*this.cosph0,t=(f-Math.sin(i)*this.sinph0)*d;break;case this.N_POLE:t=-t,i=Fe-i;break;case this.S_POLE:i-=Fe;break}r=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,l=Math.sqrt(e*e+t*t),l<Je)return n.x=this.long0,n.y=this.lat0,n;a=2*Math.asin(.5*l/this.rq),s=Math.cos(a),e*=a=Math.sin(a),this.mode===this.OBLIQ?(u=s*this.sinb1+t*a*this.cosb1/l,o=this.qp*u,t=l*this.cosb1*s-t*this.sinb1*a):(u=t*a/l,o=this.qp*u,t=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),o=e*e+t*t,!o)return n.x=this.long0,n.y=this.lat0,n;u=1-o/this.qp,this.mode===this.S_POLE&&(u=-u)}r=Math.atan2(e,t),i=Sce(Math.asin(u),this.apa)}return n.x=rt(this.long0+r,this.over),n.y=i,n}var pce=.3333333333333333,_ce=.17222222222222222,yce=.10257936507936508,xce=.06388888888888888,vce=.0664021164021164,Ece=.016415012942191543;function wce(n){var e,t=[];return t[0]=n*pce,e=n*n,t[0]+=e*_ce,t[1]=e*xce,e*=n,t[0]+=e*yce,t[1]+=e*vce,t[2]=e*Ece,t}function Sce(n,e){var t=n+n;return n+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var Tce=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const Ice={init:dce,forward:gce,inverse:mce,names:Tce,S_POLE:lI,N_POLE:cI,EQUIT:uI,OBLIQ:Ny};function au(n){return Math.abs(n)>1&&(n=n>1?1:-1),Math.asin(n)}function Ace(){Math.abs(this.lat1+this.lat2)<Je||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Vo(this.e3,this.sin_po,this.cos_po),this.qs1=Hc(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Vo(this.e3,this.sin_po,this.cos_po),this.qs2=Hc(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Hc(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Je?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Rce(n){var e=n.x,t=n.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var r=Hc(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*rt(e-this.long0,this.over),a=i*Math.sin(s)+this.x0,o=this.rh-i*Math.cos(s)+this.y0;return n.x=a,n.y=o,n}function Cce(n){var e,t,r,i,s,a;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns0>=0?(e=Math.sqrt(n.x*n.x+n.y*n.y),r=1):(e=-Math.sqrt(n.x*n.x+n.y*n.y),r=-1),i=0,e!==0&&(i=Math.atan2(r*n.x,r*n.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(t=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,t)),s=rt(i/this.ns0+this.long0,this.over),n.x=s,n.y=a,n}function Pce(n,e){var t,r,i,s,a,o=au(.5*e);if(n<Je)return o;for(var l=n*n,u=1;u<=25;u++)if(t=Math.sin(o),r=Math.cos(o),i=n*t,s=1-i*i,a=.5*s*s/r*(e/(1-l)-t/s+.5/n*Math.log((1-i)/(1+i))),o=o+a,Math.abs(a)<=1e-7)return o;return null}var bce=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const Mce={init:Ace,forward:Rce,inverse:Cce,names:bce,phi1z:Pce};function kce(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Nce(n){var e,t,r,i,s,a,o,l,u=n.x,f=n.y;return r=rt(u-this.long0,this.over),e=Math.sin(f),t=Math.cos(f),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*t*i,s=1,a>0||Math.abs(a)<=Je?(o=this.x0+this.a*s*t*Math.sin(r)/a,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*i)/a):(o=this.x0+this.infinity_dist*t*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*i)),n.x=o,n.y=l,n}function Lce(n){var e,t,r,i,s,a;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(e=Math.sqrt(n.x*n.x+n.y*n.y))?(i=Math.atan2(e,this.rc),t=Math.sin(i),r=Math.cos(i),a=au(r*this.sin_p14+n.y*t*this.cos_p14/e),s=Math.atan2(n.x*t,e*this.cos_p14*r-n.y*this.sin_p14*t),s=rt(this.long0+s,this.over)):(a=this.phic0,s=0),n.x=s,n.y=a,n}var Oce=["gnom"];const Dce={init:kce,forward:Nce,inverse:Lce,names:Oce};function Fce(n,e){var t=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*Fe:Fe;for(var r=Math.asin(.5*e),i,s,a,o,l=0;l<30;l++)if(s=Math.sin(r),a=Math.cos(r),o=n*s,i=Math.pow(1-o*o,2)/(2*a)*(e/(1-n*n)-s/(1-o*o)+.5/n*Math.log((1-o)/(1+o))),r+=i,Math.abs(i)<=1e-10)return r;return NaN}function Vce(){this.sphere||(this.k0=Vo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function jce(n){var e=n.x,t=n.y,r,i,s=rt(e-this.long0,this.over);if(this.sphere)r=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var a=Hc(this.e,Math.sin(t));r=this.x0+this.a*this.k0*s,i=this.y0+this.a*a*.5/this.k0}return n.x=r,n.y=i,n}function Gce(n){n.x-=this.x0,n.y-=this.y0;var e,t;return this.sphere?(e=rt(this.long0+n.x/this.a/Math.cos(this.lat_ts),this.over),t=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(t=Fce(this.e,2*n.y*this.k0/this.a),e=rt(this.long0+n.x/(this.a*this.k0),this.over)),n.x=e,n.y=t,n}var Bce=["cea"];const Uce={init:Vce,forward:jce,inverse:Gce,names:Bce};function zce(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function $ce(n){var e=n.x,t=n.y,r=rt(e-this.long0,this.over),i=pu(t-this.lat0);return n.x=this.x0+this.a*r*this.rc,n.y=this.y0+this.a*i,n}function Wce(n){var e=n.x,t=n.y;return n.x=rt(this.long0+(e-this.x0)/(this.a*this.rc),this.over),n.y=pu(this.lat0+(t-this.y0)/this.a),n}var Hce=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const Kce={init:zce,forward:$ce,inverse:Wce,names:Hce};var uL=20;function Yce(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=c_(this.es),this.e1=u_(this.es),this.e2=h_(this.es),this.e3=f_(this.es),this.ml0=this.a*Ui(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Xce(n){var e=n.x,t=n.y,r,i,s,a=rt(e-this.long0,this.over);if(s=a*Math.sin(t),this.sphere)Math.abs(t)<=Je?(r=this.a*a,i=-1*this.a*this.lat0):(r=this.a*Math.sin(s)/Math.tan(t),i=this.a*(pu(t-this.lat0)+(1-Math.cos(s))/Math.tan(t)));else if(Math.abs(t)<=Je)r=this.a*a,i=-1*this.ml0;else{var o=lC(this.a,this.e,Math.sin(t))/Math.tan(t);r=o*Math.sin(s),i=this.a*Ui(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+o*(1-Math.cos(s))}return n.x=r+this.x0,n.y=i+this.y0,n}function qce(n){var e,t,r,i,s,a,o,l,u;if(r=n.x-this.x0,i=n.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=Je)e=rt(r/this.a+this.long0,this.over),t=0;else{a=this.lat0+i/this.a,o=r*r/this.a/this.a+a*a,l=a;var f;for(s=uL;s;--s)if(f=Math.tan(l),u=-1*(a*(l*f+1)-l-.5*(l*l+o)*f)/((l-a)/f-1),l+=u,Math.abs(u)<=Je){t=l;break}e=rt(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(t),this.over)}else if(Math.abs(i+this.ml0)<=Je)t=0,e=rt(this.long0+r/this.a,this.over);else{a=(this.ml0+i)/this.a,o=r*r/this.a/this.a+a*a,l=a;var d,g,p,v,y;for(s=uL;s;--s)if(y=this.e*Math.sin(l),d=Math.sqrt(1-y*y)*Math.tan(l),g=this.a*Ui(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),v=g/this.a,u=(a*(d*v+1)-v-.5*d*(v*v+o))/(this.es*Math.sin(2*l)*(v*v+o-2*a*v)/(4*d)+(a-v)*(d*p-2/Math.sin(2*l))-p),l-=u,Math.abs(u)<=Je){t=l;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=rt(this.long0+Math.asin(r*d/this.a)/Math.sin(t),this.over)}return n.x=e,n.y=t,n}var Zce=["Polyconic","American_Polyconic","poly"];const Qce={init:Yce,forward:Xce,inverse:qce,names:Zce};function Jce(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function eue(n){var e,t=n.x,r=n.y,i=r-this.lat0,s=t-this.long0,a=i/_m*1e-5,o=s,l=1,u=0;for(e=1;e<=10;e++)l=l*a,u=u+this.A[e]*l;var f=u,d=o,g=1,p=0,v,y,E=0,T=0;for(e=1;e<=6;e++)v=g*f-p*d,y=p*f+g*d,g=v,p=y,E=E+this.B_re[e]*g-this.B_im[e]*p,T=T+this.B_im[e]*g+this.B_re[e]*p;return n.x=T*this.a+this.x0,n.y=E*this.a+this.y0,n}function tue(n){var e,t=n.x,r=n.y,i=t-this.x0,s=r-this.y0,a=s/this.a,o=i/this.a,l=1,u=0,f,d,g=0,p=0;for(e=1;e<=6;e++)f=l*a-u*o,d=u*a+l*o,l=f,u=d,g=g+this.C_re[e]*l-this.C_im[e]*u,p=p+this.C_im[e]*l+this.C_re[e]*u;for(var v=0;v<this.iterations;v++){var y=g,E=p,T,R,M=a,k=o;for(e=2;e<=6;e++)T=y*g-E*p,R=E*g+y*p,y=T,E=R,M=M+(e-1)*(this.B_re[e]*y-this.B_im[e]*E),k=k+(e-1)*(this.B_im[e]*y+this.B_re[e]*E);y=1,E=0;var V=this.B_re[1],z=this.B_im[1];for(e=2;e<=6;e++)T=y*g-E*p,R=E*g+y*p,y=T,E=R,V=V+e*(this.B_re[e]*y-this.B_im[e]*E),z=z+e*(this.B_im[e]*y+this.B_re[e]*E);var P=V*V+z*z;g=(M*V+k*z)/P,p=(k*V-M*z)/P}var C=g,b=p,L=1,F=0;for(e=1;e<=9;e++)L=L*C,F=F+this.D[e]*L;var U=this.lat0+F*_m*1e5,j=this.long0+b;return n.x=j,n.y=U,n}var nue=["New_Zealand_Map_Grid","nzmg"];const rue={init:Jce,forward:eue,inverse:tue,names:nue};function iue(){}function sue(n){var e=n.x,t=n.y,r=rt(e-this.long0,this.over),i=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return n.x=i,n.y=s,n}function aue(n){n.x-=this.x0,n.y-=this.y0;var e=rt(this.long0+n.x/this.a,this.over),t=2.5*(Math.atan(Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=e,n.y=t,n}var oue=["Miller_Cylindrical","mill"];const lue={init:iue,forward:sue,inverse:aue,names:oue};var cue=20;function uue(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=nC(this.es)}function hue(n){var e,t,r=n.x,i=n.y;if(r=rt(r-this.long0,this.over),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var s=this.n*Math.sin(i),a=cue;a;--a){var o=(this.m*i+Math.sin(i)-s)/(this.m+Math.cos(i));if(i-=o,Math.abs(o)<Je)break}e=this.a*this.C_x*r*(this.m+Math.cos(i)),t=this.a*this.C_y*i}else{var l=Math.sin(i),u=Math.cos(i);t=this.a*M0(i,l,u,this.en),e=this.a*r*u/Math.sqrt(1-this.es*l*l)}return n.x=e,n.y=t,n}function fue(n){var e,t,r,i;return n.x-=this.x0,r=n.x/this.a,n.y-=this.y0,e=n.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=au((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=au(Math.sin(e)/this.n)),r=rt(r+this.long0,this.over),e=pu(e)):(e=rC(n.y/this.a,this.es,this.en),i=Math.abs(e),i<Fe?(i=Math.sin(e),t=this.long0+n.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=rt(t,this.over)):i-Je<Fe&&(r=this.long0)),n.x=r,n.y=e,n}var due=["Sinusoidal","sinu"];const gue={init:uue,forward:hue,inverse:fue,names:due};function mue(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function pue(n){for(var e=n.x,t=n.y,r=rt(e-this.long0,this.over),i=t,s=Math.PI*Math.sin(t);;){var a=-(i+Math.sin(i)-s)/(1+Math.cos(i));if(i+=a,Math.abs(a)<Je)break}i/=2,Math.PI/2-Math.abs(t)<Je&&(r=0);var o=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return n.x=o,n.y=l,n}function _ue(n){var e,t;n.x-=this.x0,n.y-=this.y0,t=n.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var r=rt(this.long0+n.x/(.900316316158*this.a*Math.cos(e)),this.over);r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var i=Math.asin(t);return n.x=r,n.y=i,n}var yue=["Mollweide","moll"];const xue={init:mue,forward:pue,inverse:_ue,names:yue};function vue(){Math.abs(this.lat1+this.lat2)<Je||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=c_(this.es),this.e1=u_(this.es),this.e2=h_(this.es),this.e3=f_(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=Vo(this.e,this.sin_phi,this.cos_phi),this.ml1=Ui(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Je?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=Vo(this.e,this.sin_phi,this.cos_phi),this.ml2=Ui(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ui(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function Eue(n){var e=n.x,t=n.y,r;if(this.sphere)r=this.a*(this.g-t);else{var i=Ui(this.e0,this.e1,this.e2,this.e3,t);r=this.a*(this.g-i)}var s=this.ns*rt(e-this.long0,this.over),a=this.x0+r*Math.sin(s),o=this.y0+this.rh-r*Math.cos(s);return n.x=a,n.y=o,n}function wue(n){n.x-=this.x0,n.y=this.rh-n.y+this.y0;var e,t,r,i;this.ns>=0?(t=Math.sqrt(n.x*n.x+n.y*n.y),e=1):(t=-Math.sqrt(n.x*n.x+n.y*n.y),e=-1);var s=0;if(t!==0&&(s=Math.atan2(e*n.x,e*n.y)),this.sphere)return i=rt(this.long0+s/this.ns,this.over),r=pu(this.g-t/this.a),n.x=i,n.y=r,n;var a=this.g-t/this.a;return r=$x(a,this.e0,this.e1,this.e2,this.e3),i=rt(this.long0+s/this.ns,this.over),n.x=i,n.y=r,n}var Sue=["Equidistant_Conic","eqdc"];const Tue={init:vue,forward:Eue,inverse:wue,names:Sue};function Iue(){this.R=this.a}function Aue(n){var e=n.x,t=n.y,r=rt(e-this.long0,this.over),i,s;Math.abs(t)<=Je&&(i=this.x0+this.R*r,s=this.y0);var a=au(2*Math.abs(t/Math.PI));(Math.abs(r)<=Je||Math.abs(Math.abs(t)-Fe)<=Je)&&(i=this.x0,t>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*a):s=this.y0+Math.PI*this.R*-Math.tan(.5*a));var o=.5*Math.abs(Math.PI/r-r/Math.PI),l=o*o,u=Math.sin(a),f=Math.cos(a),d=f/(u+f-1),g=d*d,p=d*(2/u-1),v=p*p,y=Math.PI*this.R*(o*(d-v)+Math.sqrt(l*(d-v)*(d-v)-(v+l)*(g-v)))/(v+l);r<0&&(y=-y),i=this.x0+y;var E=l+d;return y=Math.PI*this.R*(p*E-o*Math.sqrt((v+l)*(l+1)-E*E))/(v+l),t>=0?s=this.y0+y:s=this.y0-y,n.x=i,n.y=s,n}function Rue(n){var e,t,r,i,s,a,o,l,u,f,d,g,p;return n.x-=this.x0,n.y-=this.y0,d=Math.PI*this.R,r=n.x/d,i=n.y/d,s=r*r+i*i,a=-Math.abs(i)*(1+s),o=a-2*i*i+r*r,l=-2*a+1+2*i*i+s*s,p=i*i/l+(2*o*o*o/l/l/l-9*a*o/l/l)/27,u=(a-o*o/3/l)/l,f=2*Math.sqrt(-u/3),d=3*p/u/f,Math.abs(d)>1&&(d>=0?d=1:d=-1),g=Math.acos(d)/3,n.y>=0?t=(-f*Math.cos(g+Math.PI/3)-o/3/l)*Math.PI:t=-(-f*Math.cos(g+Math.PI/3)-o/3/l)*Math.PI,Math.abs(r)<Je?e=this.long0:e=rt(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-i*i)+s*s))/2/r,this.over),n.x=e,n.y=t,n}var Cue=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const Pue={init:Iue,forward:Aue,inverse:Rue,names:Cue};function bue(n,e,t,r,i,s){const a=r-e,o=Math.atan((1-s)*Math.tan(n)),l=Math.atan((1-s)*Math.tan(t)),u=Math.sin(o),f=Math.cos(o),d=Math.sin(l),g=Math.cos(l);let p=a,v,y=100,E,T,R,M,k,V,z,P,C,b,L,F,U,j;do{if(E=Math.sin(p),T=Math.cos(p),R=Math.sqrt(g*E*(g*E)+(f*d-u*g*T)*(f*d-u*g*T)),R===0)return{azi1:0,s12:0};M=u*d+f*g*T,k=Math.atan2(R,M),V=f*g*E/R,z=1-V*V,P=z!==0?M-2*u*d/z:0,C=s/16*z*(4+s*(4-3*z)),v=p,p=a+(1-C)*s*V*(k+C*R*(P+C*M*(-1+2*P*P)))}while(Math.abs(p-v)>1e-12&&--y>0);return y===0?{azi1:NaN,s12:NaN}:(b=z*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),L=1+b/16384*(4096+b*(-768+b*(320-175*b))),F=b/1024*(256+b*(-128+b*(74-47*b))),U=F*R*(P+F/4*(M*(-1+2*P*P)-F/6*P*(-3+4*R*R)*(-3+4*P*P))),j=i*(1-s)*L*(k-U),{azi1:Math.atan2(g*E,f*d-u*g*T),s12:j})}function Mue(n,e,t,r,i,s){const a=Math.atan((1-s)*Math.tan(n)),o=Math.sin(a),l=Math.cos(a),u=Math.sin(t),f=Math.cos(t),d=Math.atan2(o,l*f),g=l*u,p=1-g*g,v=p*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),y=1+v/16384*(4096+v*(-768+v*(320-175*v))),E=v/1024*(256+v*(-128+v*(74-47*v)));let T=r/(i*(1-s)*y),R,M=100,k,V,z,P;do k=Math.cos(2*d+T),V=Math.sin(T),z=Math.cos(T),P=E*V*(k+E/4*(z*(-1+2*k*k)-E/6*k*(-3+4*V*V)*(-3+4*k*k))),R=T,T=r/(i*(1-s)*y)+P;while(Math.abs(T-R)>1e-12&&--M>0);if(M===0)return{lat2:NaN,lon2:NaN};const C=o*V-l*z*f,b=Math.atan2(o*z+l*V*f,(1-s)*Math.sqrt(g*g+C*C)),L=Math.atan2(V*u,l*z-o*V*f),F=s/16*p*(4+s*(4-3*p)),U=L-(1-F)*s*g*(T+F*V*(k+F*z*(-1+2*k*k))),j=e+U;return{lat2:b,lon2:j}}function kue(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function Nue(n){var e=n.x,t=n.y,r=Math.sin(n.y),i=Math.cos(n.y),s=rt(e-this.long0,this.over),a,o,l,u,f,d,g,p,v,y,E;return this.sphere?Math.abs(this.sin_p12-1)<=Je?(n.x=this.x0+this.a*(Fe-t)*Math.sin(s),n.y=this.y0-this.a*(Fe-t)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=Je?(n.x=this.x0+this.a*(Fe+t)*Math.sin(s),n.y=this.y0+this.a*(Fe+t)*Math.cos(s),n):(v=this.sin_p12*r+this.cos_p12*i*Math.cos(s),g=Math.acos(v),p=g?g/Math.sin(g):1,n.x=this.x0+this.a*p*i*Math.sin(s),n.y=this.y0+this.a*p*(this.cos_p12*r-this.sin_p12*i*Math.cos(s)),n):(a=c_(this.es),o=u_(this.es),l=h_(this.es),u=f_(this.es),Math.abs(this.sin_p12-1)<=Je?(f=this.a*Ui(a,o,l,u,Fe),d=this.a*Ui(a,o,l,u,t),n.x=this.x0+(f-d)*Math.sin(s),n.y=this.y0-(f-d)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=Je?(f=this.a*Ui(a,o,l,u,Fe),d=this.a*Ui(a,o,l,u,t),n.x=this.x0+(f+d)*Math.sin(s),n.y=this.y0+(f+d)*Math.cos(s),n):Math.abs(e)<Je&&Math.abs(t-this.lat0)<Je?(n.x=n.y=0,n):(y=bue(this.lat0,this.long0,t,e,this.a,this.f),E=y.azi1,n.x=y.s12*Math.sin(E),n.y=y.s12*Math.cos(E),n))}function Lue(n){n.x-=this.x0,n.y-=this.y0;var e,t,r,i,s,a,o,l,u,f,d,g,p,v,y,E;return this.sphere?(e=Math.sqrt(n.x*n.x+n.y*n.y),e>2*Fe*this.a?void 0:(t=e/this.a,r=Math.sin(t),i=Math.cos(t),s=this.long0,Math.abs(e)<=Je?a=this.lat0:(a=au(i*this.sin_p12+n.y*r*this.cos_p12/e),o=Math.abs(this.lat0)-Fe,Math.abs(o)<=Je?this.lat0>=0?s=rt(this.long0+Math.atan2(n.x,-n.y),this.over):s=rt(this.long0-Math.atan2(-n.x,n.y),this.over):s=rt(this.long0+Math.atan2(n.x*r,e*this.cos_p12*i-n.y*this.sin_p12*r),this.over)),n.x=s,n.y=a,n)):(l=c_(this.es),u=u_(this.es),f=h_(this.es),d=f_(this.es),Math.abs(this.sin_p12-1)<=Je?(g=this.a*Ui(l,u,f,d,Fe),e=Math.sqrt(n.x*n.x+n.y*n.y),p=g-e,a=$x(p/this.a,l,u,f,d),s=rt(this.long0+Math.atan2(n.x,-1*n.y),this.over),n.x=s,n.y=a,n):Math.abs(this.sin_p12+1)<=Je?(g=this.a*Ui(l,u,f,d,Fe),e=Math.sqrt(n.x*n.x+n.y*n.y),p=e-g,a=$x(p/this.a,l,u,f,d),s=rt(this.long0+Math.atan2(n.x,n.y),this.over),n.x=s,n.y=a,n):(v=Math.atan2(n.x,n.y),y=Math.sqrt(n.x*n.x+n.y*n.y),E=Mue(this.lat0,this.long0,v,y,this.a,this.f),n.x=E.lon2,n.y=E.lat2,n))}var Oue=["Azimuthal_Equidistant","aeqd"];const Due={init:kue,forward:Nue,inverse:Lue,names:Oue};function Fue(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function Vue(n){var e,t,r,i,s,a,o,l,u=n.x,f=n.y;return r=rt(u-this.long0,this.over),e=Math.sin(f),t=Math.cos(f),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*t*i,s=1,(a>0||Math.abs(a)<=Je)&&(o=this.a*s*t*Math.sin(r),l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*i)),n.x=o,n.y=l,n}function jue(n){var e,t,r,i,s,a,o;return n.x-=this.x0,n.y-=this.y0,e=Math.sqrt(n.x*n.x+n.y*n.y),t=au(e/this.a),r=Math.sin(t),i=Math.cos(t),a=this.long0,Math.abs(e)<=Je?(o=this.lat0,n.x=a,n.y=o,n):(o=au(i*this.sin_p14+n.y*r*this.cos_p14/e),s=Math.abs(this.lat0)-Fe,Math.abs(s)<=Je?(this.lat0>=0?a=rt(this.long0+Math.atan2(n.x,-n.y),this.over):a=rt(this.long0-Math.atan2(-n.x,n.y),this.over),n.x=a,n.y=o,n):(a=rt(this.long0+Math.atan2(n.x*r,e*this.cos_p14*i-n.y*this.sin_p14*r),this.over),n.x=a,n.y=o,n))}var Gue=["ortho"];const Bue={init:Fue,forward:Vue,inverse:jue,names:Gue};var qn={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},mn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Uue(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Fe-gn/2?this.face=qn.TOP:this.lat0<=-(Fe-gn/2)?this.face=qn.BOTTOM:Math.abs(this.long0)<=gn?this.face=qn.FRONT:Math.abs(this.long0)<=Fe+gn?this.face=this.long0>0?qn.RIGHT:qn.LEFT:this.face=qn.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function zue(n){var e={x:0,y:0},t,r,i,s,a,o,l={value:0};if(n.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(n.y)):t=n.y,r=n.x,this.face===qn.TOP)s=Fe-t,r>=gn&&r<=Fe+gn?(l.value=mn.AREA_0,i=r-Fe):r>Fe+gn||r<=-(Fe+gn)?(l.value=mn.AREA_1,i=r>0?r-dr:r+dr):r>-(Fe+gn)&&r<=-gn?(l.value=mn.AREA_2,i=r+Fe):(l.value=mn.AREA_3,i=r);else if(this.face===qn.BOTTOM)s=Fe+t,r>=gn&&r<=Fe+gn?(l.value=mn.AREA_0,i=-r+Fe):r<gn&&r>=-gn?(l.value=mn.AREA_1,i=-r):r<-gn&&r>=-(Fe+gn)?(l.value=mn.AREA_2,i=-r-Fe):(l.value=mn.AREA_3,i=r>0?-r+dr:-r-dr);else{var u,f,d,g,p,v,y;this.face===qn.RIGHT?r=Dd(r,+Fe):this.face===qn.BACK?r=Dd(r,+dr):this.face===qn.LEFT&&(r=Dd(r,-Fe)),g=Math.sin(t),p=Math.cos(t),v=Math.sin(r),y=Math.cos(r),u=p*y,f=p*v,d=g,this.face===qn.FRONT?(s=Math.acos(u),i=q1(s,d,f,l)):this.face===qn.RIGHT?(s=Math.acos(f),i=q1(s,d,-u,l)):this.face===qn.BACK?(s=Math.acos(-u),i=q1(s,d,-f,l)):this.face===qn.LEFT?(s=Math.acos(-f),i=q1(s,d,u,l)):(s=i=0,l.value=mn.AREA_0)}return o=Math.atan(12/dr*(i+Math.acos(Math.sin(i)*Math.cos(gn))-Fe)),a=Math.sqrt((1-Math.cos(s))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===mn.AREA_1?o+=Fe:l.value===mn.AREA_2?o+=dr:l.value===mn.AREA_3&&(o+=1.5*dr),e.x=a*Math.cos(o),e.y=a*Math.sin(o),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,n.x=e.x,n.y=e.y,n}function $ue(n){var e={lam:0,phi:0},t,r,i,s,a,o,l,u,f,d={value:0};if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,r=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),t=Math.atan2(n.y,n.x),n.x>=0&&n.x>=Math.abs(n.y)?d.value=mn.AREA_0:n.y>=0&&n.y>=Math.abs(n.x)?(d.value=mn.AREA_1,t-=Fe):n.x<0&&-n.x>=Math.abs(n.y)?(d.value=mn.AREA_2,t=t<0?t+dr:t-dr):(d.value=mn.AREA_3,t+=Fe),f=dr/12*Math.tan(t),a=Math.sin(f)/(Math.cos(f)-1/Math.sqrt(2)),o=Math.atan(a),i=Math.cos(t),s=Math.tan(r),l=1-i*i*s*s*(1-Math.cos(Math.atan(1/Math.cos(o)))),l<-1?l=-1:l>1&&(l=1),this.face===qn.TOP)u=Math.acos(l),e.phi=Fe-u,d.value===mn.AREA_0?e.lam=o+Fe:d.value===mn.AREA_1?e.lam=o<0?o+dr:o-dr:d.value===mn.AREA_2?e.lam=o-Fe:e.lam=o;else if(this.face===qn.BOTTOM)u=Math.acos(l),e.phi=u-Fe,d.value===mn.AREA_0?e.lam=-o+Fe:d.value===mn.AREA_1?e.lam=-o:d.value===mn.AREA_2?e.lam=-o-Fe:e.lam=o<0?-o-dr:-o+dr;else{var g,p,v;g=l,f=g*g,f>=1?v=0:v=Math.sqrt(1-f)*Math.sin(o),f+=v*v,f>=1?p=0:p=Math.sqrt(1-f),d.value===mn.AREA_1?(f=p,p=-v,v=f):d.value===mn.AREA_2?(p=-p,v=-v):d.value===mn.AREA_3&&(f=p,p=v,v=-f),this.face===qn.RIGHT?(f=g,g=-p,p=f):this.face===qn.BACK?(g=-g,p=-p):this.face===qn.LEFT&&(f=g,g=p,p=-f),e.phi=Math.acos(-v)-Fe,e.lam=Math.atan2(p,g),this.face===qn.RIGHT?e.lam=Dd(e.lam,-Fe):this.face===qn.BACK?e.lam=Dd(e.lam,-dr):this.face===qn.LEFT&&(e.lam=Dd(e.lam,+Fe))}if(this.es!==0){var y,E,T;y=e.phi<0?1:0,E=Math.tan(e.phi),T=this.b/Math.sqrt(E*E+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-T*T)/(this.one_minus_f*T)),y&&(e.phi=-e.phi)}return e.lam+=this.long0,n.x=e.lam,n.y=e.phi,n}function q1(n,e,t,r){var i;return n<Je?(r.value=mn.AREA_0,i=0):(i=Math.atan2(e,t),Math.abs(i)<=gn?r.value=mn.AREA_0:i>gn&&i<=Fe+gn?(r.value=mn.AREA_1,i-=Fe):i>Fe+gn||i<=-(Fe+gn)?(r.value=mn.AREA_2,i=i>=0?i-dr:i+dr):(r.value=mn.AREA_3,i+=Fe)),i}function Dd(n,e){var t=n+e;return t<-dr?t+=gp:t>+dr&&(t-=gp),t}var Wue=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const Hue={init:Uue,forward:zue,inverse:$ue,names:Wue};var hI=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Jg=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],_7=.8487,y7=1.3523,x7=cs/5,Kue=1/x7,Td=18,Wx=function(n,e){return n[0]+e*(n[1]+e*(n[2]+e*n[3]))},Yue=function(n,e){return n[1]+e*(2*n[2]+e*3*n[3])};function Xue(n,e,t,r){for(var i=e;r;--r){var s=n(i);if(i-=s,Math.abs(s)<t)break}return i}function que(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function Zue(n){var e=rt(n.x-this.long0,this.over),t=Math.abs(n.y),r=Math.floor(t*x7);r<0?r=0:r>=Td&&(r=Td-1),t=cs*(t-Kue*r);var i={x:Wx(hI[r],t)*e,y:Wx(Jg[r],t)};return n.y<0&&(i.y=-i.y),i.x=i.x*this.a*_7+this.x0,i.y=i.y*this.a*y7+this.y0,i}function Que(n){var e={x:(n.x-this.x0)/(this.a*_7),y:Math.abs(n.y-this.y0)/(this.a*y7)};if(e.y>=1)e.x/=hI[Td][0],e.y=n.y<0?-Fe:Fe;else{var t=Math.floor(e.y*Td);for(t<0?t=0:t>=Td&&(t=Td-1);;)if(Jg[t][0]>e.y)--t;else if(Jg[t+1][0]<=e.y)++t;else break;var r=Jg[t],i=5*(e.y-r[0])/(Jg[t+1][0]-r[0]);i=Xue(function(s){return(Wx(r,s)-e.y)/Yue(r,s)},i,Je,100),e.x/=Wx(hI[t],i),e.y=(5*t+i)*nr,n.y<0&&(e.y=-e.y)}return e.x=rt(e.x+this.long0,this.over),e}var Jue=["Robinson","robin"];const ehe={init:que,forward:Zue,inverse:Que,names:Jue};function the(){this.name="geocent"}function nhe(n){var e=a7(n,this.es,this.a);return e}function rhe(n){var e=o7(n,this.es,this.a,this.b);return e}var ihe=["Geocentric","geocentric","geocent","Geocent"];const she={init:the,forward:nhe,inverse:rhe,names:ihe};var Si={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Lg={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function ahe(){if(Object.keys(Lg).forEach((function(t){if(typeof this[t]>"u")this[t]=Lg[t].def;else{if(Lg[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);Lg[t].num&&(this[t]=parseFloat(this[t]))}Lg[t].degrees&&(this[t]=this[t]*nr)}).bind(this)),Math.abs(Math.abs(this.lat0)-Fe)<Je?this.mode=this.lat0<0?Si.S_POLE:Si.N_POLE:Math.abs(this.lat0)<Je?this.mode=Si.EQUIT:(this.mode=Si.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var n=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(n),this.sw=Math.sin(n)}function ohe(n){n.x-=this.long0;var e=Math.sin(n.y),t=Math.cos(n.y),r=Math.cos(n.x),i,s;switch(this.mode){case Si.OBLIQ:s=this.sinph0*e+this.cosph0*t*r;break;case Si.EQUIT:s=t*r;break;case Si.S_POLE:s=-e;break;case Si.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),i=s*t*Math.sin(n.x),this.mode){case Si.OBLIQ:s*=this.cosph0*e-this.sinph0*t*r;break;case Si.EQUIT:s*=e;break;case Si.N_POLE:s*=-(t*r);break;case Si.S_POLE:s*=t*r;break}var a,o;return a=s*this.cg+i*this.sg,o=1/(a*this.sw*this.h1+this.cw),i=(i*this.cg-s*this.sg)*this.cw*o,s=a*o,n.x=i*this.a,n.y=s*this.a,n}function lhe(n){n.x/=this.a,n.y/=this.a;var e={x:n.x,y:n.y},t,r,i;i=1/(this.pn1-n.y*this.sw),t=this.pn1*n.x*i,r=this.pn1*n.y*this.cw*i,n.x=t*this.cg+r*this.sg,n.y=r*this.cg-t*this.sg;var s=as(n.x,n.y);if(Math.abs(s)<Je)e.x=0,e.y=n.y;else{var a,o;switch(o=1-s*s*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/s+s/this.pn1),a=Math.sqrt(1-o*o),this.mode){case Si.OBLIQ:e.y=Math.asin(a*this.sinph0+n.y*o*this.cosph0/s),n.y=(a-this.sinph0*Math.sin(e.y))*s,n.x*=o*this.cosph0;break;case Si.EQUIT:e.y=Math.asin(n.y*o/s),n.y=a*s,n.x*=o;break;case Si.N_POLE:e.y=Math.asin(a),n.y=-n.y;break;case Si.S_POLE:e.y=-Math.asin(a);break}e.x=Math.atan2(n.x,n.y)}return n.x=e.x+this.long0,n.y=e.y,n}var che=["Tilted_Perspective","tpers"];const uhe={init:ahe,forward:ohe,inverse:lhe,names:che};function hhe(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var n=1-this.es,e=1/n;this.radius_p=Math.sqrt(n),this.radius_p2=n,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function fhe(n){var e=n.x,t=n.y,r,i,s,a;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var o=this.radius_p/as(this.radius_p*Math.cos(t),Math.sin(t));if(i=o*Math.cos(e)*Math.cos(t),s=o*Math.sin(e)*Math.cos(t),a=o*Math.sin(t),(this.radius_g-i)*i-s*s-a*a*this.radius_p_inv2<0)return n.x=Number.NaN,n.y=Number.NaN,n;r=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/as(a,r)),n.y=this.radius_g_1*Math.atan(a/r)):(n.x=this.radius_g_1*Math.atan(s/r),n.y=this.radius_g_1*Math.atan(a/as(s,r)))}else this.shape==="sphere"&&(r=Math.cos(t),i=Math.cos(e)*r,s=Math.sin(e)*r,a=Math.sin(t),r=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/as(a,r)),n.y=this.radius_g_1*Math.atan(a/r)):(n.x=this.radius_g_1*Math.atan(s/r),n.y=this.radius_g_1*Math.atan(a/as(s,r))));return n.x=n.x*this.a,n.y=n.y*this.a,n}function dhe(n){var e=-1,t=0,r=0,i,s,a,o;if(n.x=n.x/this.a,n.y=n.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*as(1,r)):(t=Math.tan(n.x/this.radius_g_1),r=Math.tan(n.y/this.radius_g_1)*as(1,t));var l=r/this.radius_p;if(i=t*t+l*l+e*e,s=2*this.radius_g*e,a=s*s-4*i*this.C,a<0)return n.x=Number.NaN,n.y=Number.NaN,n;o=(-s-Math.sqrt(a))/(2*i),e=this.radius_g+o*e,t*=o,r*=o,n.x=Math.atan2(t,e),n.y=Math.atan(r*Math.cos(n.x)/e),n.y=Math.atan(this.radius_p_inv2*Math.tan(n.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*Math.sqrt(1+r*r)):(t=Math.tan(n.x/this.radius_g_1),r=Math.tan(n.y/this.radius_g_1)*Math.sqrt(1+t*t)),i=t*t+r*r+e*e,s=2*this.radius_g*e,a=s*s-4*i*this.C,a<0)return n.x=Number.NaN,n.y=Number.NaN,n;o=(-s-Math.sqrt(a))/(2*i),e=this.radius_g+o*e,t*=o,r*=o,n.x=Math.atan2(t,e),n.y=Math.atan(r*Math.cos(n.x)/e)}return n.x=n.x+this.long0,n}var ghe=["Geostationary Satellite View","Geostationary_Satellite","geos"];const mhe={init:hhe,forward:fhe,inverse:dhe,names:ghe};var ym=1.340264,xm=-.081106,vm=893e-6,Em=.003796,Hx=Math.sqrt(3)/2;function phe(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function _he(n){var e=rt(n.x-this.long0,this.over),t=n.y,r=Math.asin(Hx*Math.sin(t)),i=r*r,s=i*i*i;return n.x=e*Math.cos(r)/(Hx*(ym+3*xm*i+s*(7*vm+9*Em*i))),n.y=r*(ym+xm*i+s*(vm+Em*i)),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function yhe(n){n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a;var e=1e-9,t=12,r=n.y,i,s,a,o,l,u;for(u=0;u<t&&(i=r*r,s=i*i*i,a=r*(ym+xm*i+s*(vm+Em*i))-n.y,o=ym+3*xm*i+s*(7*vm+9*Em*i),r-=l=a/o,!(Math.abs(l)<e));++u);return i=r*r,s=i*i*i,n.x=Hx*n.x*(ym+3*xm*i+s*(7*vm+9*Em*i))/Math.cos(r),n.y=Math.asin(Math.sin(r)/Hx),n.x=rt(n.x+this.long0,this.over),n}var xhe=["eqearth","Equal Earth","Equal_Earth"];const vhe={init:phe,forward:_he,inverse:yhe,names:xhe};var _p=1e-10;function Ehe(){var n;if(this.phi1=this.lat1,Math.abs(this.phi1)<_p)throw new Error;this.es?(this.en=nC(this.es),this.m1=M0(this.phi1,this.am1=Math.sin(this.phi1),n=Math.cos(this.phi1),this.en),this.am1=n/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=She,this.forward=whe):(Math.abs(this.phi1)+_p>=Fe?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=Ihe,this.forward=The)}function whe(n){var e=rt(n.x-(this.long0||0),this.over),t=n.y,r,i,s;return r=this.am1+this.m1-M0(t,i=Math.sin(t),s=Math.cos(t),this.en),i=s*e/(r*Math.sqrt(1-this.es*i*i)),n.x=r*Math.sin(i),n.y=this.am1-r*Math.cos(i),n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function She(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,r,i;if(t=as(n.x,n.y=this.am1-n.y),i=rC(this.am1+this.m1-t,this.es,this.en),(e=Math.abs(i))<Fe)e=Math.sin(i),r=t*Math.atan2(n.x,n.y)*Math.sqrt(1-this.es*e*e)/Math.cos(i);else if(Math.abs(e-Fe)<=_p)r=0;else throw new Error;return n.x=rt(r+(this.long0||0),this.over),n.y=pu(i),n}function The(n){var e=rt(n.x-(this.long0||0),this.over),t=n.y,r,i;return i=this.cphi1+this.phi1-t,Math.abs(i)>_p?(n.x=i*Math.sin(r=e*Math.cos(t)/i),n.y=this.cphi1-i*Math.cos(r)):n.x=n.y=0,n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function Ihe(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,r=as(n.x,n.y=this.cphi1-n.y);if(t=this.cphi1+this.phi1-r,Math.abs(t)>Fe)throw new Error;return Math.abs(Math.abs(t)-Fe)<=_p?e=0:e=r*Math.atan2(n.x,n.y)/Math.cos(t),n.x=rt(e+(this.long0||0),this.over),n.y=pu(t),n}var Ahe=["bonne","Bonne (Werner lat_1=90)"];const Rhe={init:Ehe,names:Ahe},hL={OBLIQUE:{forward:khe,inverse:Lhe},TRANSVERSE:{forward:Nhe,inverse:Ohe}},Kx={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function Che(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=n7.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const n=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),e=pa(n);if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);e.long0=0,this.obliqueProjection=e;let t;const r=Object.keys(Kx),i=o=>{if(typeof this[o]>"u")return;const l=parseFloat(this[o])*nr;if(isNaN(l))throw new Error("Invalid value for "+o+": "+this[o]);return l};for(let o=0;o<r.length;o++){const l=r[o],u=Kx[l],f=Object.entries(u);if(f.some(([g])=>typeof this[g]<"u")){t=u;for(let g=0;g<f.length;g++){const[p,v]=f[g],y=i(p);if(typeof y>"u")throw new Error("Missing parameter: "+p+".");this[v]=y}break}}if(!t)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:s,phip:a}=Mhe(this,t);this.lamp=s,Math.abs(a)>Je?(this.cphip=Math.cos(a),this.sphip=Math.sin(a),this.projectionType=hL.OBLIQUE):this.projectionType=hL.TRANSVERSE}function Phe(n){return this.projectionType.forward(this,n)}function bhe(n){return this.projectionType.inverse(this,n)}function Mhe(n,e){let t,r;if(e===Kx.ROTATE){let i=n.oLongC,s=n.oLatC,a=n.oAlpha;if(Math.abs(Math.abs(s)-Fe)<=Je)throw new Error("Invalid value for o_lat_c: "+n.o_lat_c+" should be < 90");r=i+Math.atan2(-1*Math.cos(a),-1*Math.sin(a)*Math.sin(s)),t=Math.asin(Math.cos(s)*Math.sin(a))}else if(e===Kx.NEW_POLE)r=n.oLongP,t=n.oLatP;else{let i=n.oLong1,s=n.oLat1,a=n.oLong2,o=n.oLat2,l=Math.abs(s);if(Math.abs(s)>Fe-Je)throw new Error("Invalid value for o_lat_1: "+n.o_lat_1+" should be < 90");if(Math.abs(o)>Fe-Je)throw new Error("Invalid value for o_lat_2: "+n.o_lat_2+" should be < 90");if(Math.abs(s-o)<Je)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(l<Je)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");r=Math.atan2(Math.cos(s)*Math.sin(o)*Math.cos(i)-Math.sin(s)*Math.cos(o)*Math.cos(a),Math.sin(s)*Math.cos(o)*Math.sin(a)-Math.cos(s)*Math.sin(o)*Math.sin(i)),t=Math.atan(-1*Math.cos(r-i)/Math.tan(s))}return{lamp:r,phip:t}}function khe(n,e){let{x:t,y:r}=e;t+=n.long0;const i=Math.cos(t),s=Math.sin(r),a=Math.cos(r);e.x=rt(Math.atan2(a*Math.sin(t),n.sphip*a*i+n.cphip*s)+n.lamp),e.y=Math.asin(n.sphip*s-n.cphip*a*i);const o=n.obliqueProjection.forward(e);return n.isIdentity&&(o.x*=cs,o.y*=cs),o}function Nhe(n,e){let{x:t,y:r}=e;t+=n.long0;const i=Math.cos(r),s=Math.cos(t);e.x=rt(Math.atan2(i*Math.sin(t),Math.sin(r))+n.lamp),e.y=Math.asin(-1*i*s);const a=n.obliqueProjection.forward(e);return n.isIdentity&&(a.x*=cs,a.y*=cs),a}function Lhe(n,e){n.isIdentity&&(e.x*=nr,e.y*=nr);const t=n.obliqueProjection.inverse(e);let{x:r,y:i}=t;if(r<Number.MAX_VALUE){r-=n.lamp;const s=Math.cos(r),a=Math.sin(i),o=Math.cos(i);e.x=Math.atan2(o*Math.sin(r),n.sphip*o*s-n.cphip*a),e.y=Math.asin(n.sphip*a+n.cphip*o*s)}return e.x=rt(e.x+n.long0),e}function Ohe(n,e){n.isIdentity&&(e.x*=nr,e.y*=nr);const t=n.obliqueProjection.inverse(e);let{x:r,y:i}=t;if(r<Number.MAX_VALUE){const s=Math.cos(i);r-=n.lamp,e.x=Math.atan2(s*Math.sin(r),-1*Math.sin(i)),e.y=Math.asin(s*Math.cos(r))}return e.x=rt(e.x+n.long0),e}var Dhe=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const Fhe={init:Che,forward:Phe,inverse:bhe,names:Dhe};function Vhe(n){n.Proj.projections.add(My),n.Proj.projections.add(ky),n.Proj.projections.add(Ale),n.Proj.projections.add(Ole),n.Proj.projections.add(Gle),n.Proj.projections.add(Wle),n.Proj.projections.add(Zle),n.Proj.projections.add(nce),n.Proj.projections.add(oce),n.Proj.projections.add(fce),n.Proj.projections.add(Ice),n.Proj.projections.add(Mce),n.Proj.projections.add(Dce),n.Proj.projections.add(Uce),n.Proj.projections.add(Kce),n.Proj.projections.add(Qce),n.Proj.projections.add(rue),n.Proj.projections.add(lue),n.Proj.projections.add(gue),n.Proj.projections.add(xue),n.Proj.projections.add(Tue),n.Proj.projections.add(Pue),n.Proj.projections.add(Due),n.Proj.projections.add(Bue),n.Proj.projections.add(Hue),n.Proj.projections.add(ehe),n.Proj.projections.add(she),n.Proj.projections.add(uhe),n.Proj.projections.add(mhe),n.Proj.projections.add(vhe),n.Proj.projections.add(Rhe),n.Proj.projections.add(Fhe)}const Qt=Object.assign(zoe,{defaultDatum:"WGS84",Proj:pa,WGS84:new pa("WGS84"),Point:m0,toPoint:l7,defs:ii,nadgrid:Ioe,transform:zx,mgrs:$oe,version:"__VERSION__"});Vhe(Qt);class v7{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Mo,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?Pn(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Pn(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return At()}readFeature(e,t){return At()}readFeatures(e,t){return At()}readGeometry(e,t){return At()}readProjection(e){return At()}writeFeature(e,t){return At()}writeFeatures(e,t){return At()}writeGeometry(e,t){return At()}}function Xa(n,e,t){const r=t?Pn(t.featureProjection):null,i=t?Pn(t.dataProjection):null;let s=n;if(r&&i&&!dh(r,i)){e&&(s=n.clone());const a=e?r:i,o=e?i:r;a.getUnits()==="tile-pixels"?s.transform(a,o):s.applyTransform(Om(a,o))}if(e&&t&&t.decimals!==void 0){const a=Math.pow(10,t.decimals),o=function(l){for(let u=0,f=l.length;u<f;++u)l[u]=Math.round(l[u]*a)/a;return l};s===n&&(s=n.clone()),s.applyTransform(o)}return s}const jhe={Point:Oo,LineString:Lo,Polygon:Ka,MultiPoint:x0,MultiLineString:Yc,MultiPolygon:qd};function Ghe(n,e,t){return Array.isArray(e[0])?(rD(n,0,e,t)||(n=n.slice(),KS(n,0,e,t)),n):(KI(n,0,e,t)||(n=n.slice(),Yy(n,0,e,t)),n)}function E7(n,e){const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(s=>E7({...n,geometry:s})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=t.layout.length;return Xa(new Ns(r,r==="Polygon"?Ghe(t.flatCoordinates,t.ends,i):t.flatCoordinates,t.ends?.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function cC(n,e){if(!n)return null;if(Array.isArray(n)){const r=n.map(i=>cC(i,e));return new $a(r)}const t=jhe[n.type];return Xa(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class Bhe extends v7{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(Z1(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Z1(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return At()}readFeaturesFromObject(e,t){return At()}readGeometry(e,t){return this.readGeometryFromObject(Z1(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return At()}readProjection(e){return this.readProjectionFromObject(Z1(e))}readProjectionFromObject(e){return At()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return At()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return At()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return At()}}function Z1(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class uC extends Bhe{constructor(e){e=e||{},super(),this.dataProjection=Pn(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Pn(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=hC(r.geometry);if(this.featureClass===Ns)return E7({geometry:i,id:r.id,properties:r.properties},t);const s=new Mo;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(cC(i,t)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,t){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const a=s.features;for(let o=0,l=a.length;o<l;++o){const u=this.readFeatureFromObject(a[o],t);u&&i.push(u)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return Uhe(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=Pn(t.properties.name);else if(t.type==="EPSG")r=Pn("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),a=e.getGeometry();return a&&(r.geometry=fI(a,t),delete s[e.getGeometryName()]),xh(s)||(r.properties=s),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return fI(e,this.adaptOptions(t))}}function hC(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=$he(n);break}case"LineString":{t=Whe(n);break}case"Polygon":{t=Xhe(n);break}case"MultiPoint":{t=Khe(n);break}case"MultiLineString":{t=Hhe(n);break}case"MultiPolygon":{t=Yhe(n);break}case"GeometryCollection":{t=zhe(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function Uhe(n,e){const t=hC(n);return cC(t,e)}function zhe(n,e){return n.geometries.map(function(r){return hC(r)})}function $he(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:Kh(e.length)}}function Whe(n){const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:Kh(e[0]?.length||2)}}function Hhe(n){const e=n.coordinates,t=e[0]?.[0]?.length||2,r=[],i=Lp(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:Kh(t)}}function Khe(n){const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:Kh(e[0]?.length||2)}}function Yhe(n){const e=n.coordinates,t=[],r=e[0]?.[0]?.[0].length||2,i=NO(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:Kh(r)}}function Xhe(n){const e=n.coordinates,t=[],r=e[0]?.[0]?.length,i=Lp(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:i,layout:Kh(r)}}function fI(n,e){n=Xa(n,!0,e);const t=n.getType();let r;switch(t){case"Point":{r=tfe(n);break}case"LineString":{r=Zhe(n);break}case"Polygon":{r=nfe(n,e);break}case"MultiPoint":{r=Jhe(n);break}case"MultiLineString":{r=Qhe(n);break}case"MultiPolygon":{r=efe(n,e);break}case"GeometryCollection":{r=qhe(n,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function qhe(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return fI(r,e)})}}function Zhe(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function Qhe(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function Jhe(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function efe(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function tfe(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function nfe(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const Yx="http://www.w3.org/2001/XMLSchema-instance";function ef(n,e){return k0().createElementNS(n,e)}function qa(n,e){return w7(n,e,[]).join("")}function w7(n,e,t){if(n.nodeType==Node.CDATA_SECTION_NODE||n.nodeType==Node.TEXT_NODE)t.push(n.nodeValue);else{let r;for(r=n.firstChild;r;r=r.nextSibling)w7(r,e,t)}return t}function gl(n){return"documentElement"in n}function ml(n){return new DOMParser().parseFromString(n,"application/xml")}function fL(n,e){return(function(t,r){const i=n.call(e??this,t,r);if(i!==void 0){const s=r[r.length-1];dn(s,i)}})}function Fa(n,e){return(function(t,r){const i=n.call(e??this,t,r);i!==void 0&&r[r.length-1].push(i)})}function fC(n,e){return(function(t,r){const i=n.call(this,t,r);i!==void 0&&(r[r.length-1]=i)})}function Le(n,e,t){return(function(r,i){const s=n.call(this,r,i);if(s!==void 0){const a=i[i.length-1],o=e!==void 0?e:r.localName;a[o]=s}})}function We(n,e){return(function(t,r,i){n.call(this,t,r,i),i[i.length-1].node.appendChild(t)})}function S7(n,e){let t,r;return function(i,s,a){if(t===void 0){t={};const o={};o[i.localName]=n,t[i.namespaceURI]=o,r=Za(i.localName)}T7(t,r,s,a)}}function Za(n,e){return(function(t,r,i){const a=r[r.length-1].node;let o=n;o===void 0&&(o=i);const l=a.namespaceURI;return ef(l,o)})}const Ci=Za();function hs(n,e){const t=e.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=n[e[i]];return r}function nt(n,e,t){t=t!==void 0?t:{};let r,i;for(r=0,i=n.length;r<i;++r)t[n[r]]=e;return t}function _u(n,e,t,r){let i;for(i=e.firstElementChild;i;i=i.nextElementSibling){const s=n[i.namespaceURI];if(s!==void 0){const a=s[i.localName];a!==void 0&&a.call(r,i,t)}}}function $t(n,e,t,r,i){return r.push(n),_u(e,t,r,i),r.pop()}function T7(n,e,t,r,i,s){const a=(i!==void 0?i:t).length;let o,l;for(let u=0;u<a;++u)o=t[u],o!==void 0&&(l=e.call(s,o,r,i!==void 0?i[u]:void 0),l!==void 0&&n[l.namespaceURI][l.localName].call(s,l,o,r))}function Mn(n,e,t,r,i,s,a){return i.push(n),T7(e,t,r,i,s,a),i.pop()}let yS;function rfe(){return yS===void 0&&typeof XMLSerializer<"u"&&(yS=new XMLSerializer),yS}let xS;function k0(){return xS===void 0&&typeof document<"u"&&(xS=document.implementation.createDocument("","",null)),xS}class I7 extends v7{constructor(){super(),this.xmlSerializer_=rfe()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const r=ml(e);return this.readFeatureFromDocument(r,t)}return gl(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const r=this.readFeaturesFromDocument(e,t);return r.length>0?r[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const r=ml(e);return this.readFeaturesFromDocument(r,t)}return gl(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const r=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&dn(r,this.readFeaturesFromNode(i,t));return r}readFeaturesFromNode(e,t){return At()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const r=ml(e);return this.readGeometryFromDocument(r,t)}return gl(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=ml(e);return this.readProjectionFromDocument(t)}return gl(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const r=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const r=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const r=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeGeometryNode(e,t){return null}}function ou(n){const e=qa(n,!1);return ife(e)}function ife(n){const e=/^\s*(true|1)|(false|0)\s*$/.exec(n);if(e)return e[1]!==void 0||!1}function vE(n){const e=qa(n,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function tn(n){const e=qa(n,!1);return sfe(e)}function sfe(n){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(n);if(e)return parseFloat(e[1])}function yp(n){const e=qa(n,!1);return afe(e)}function afe(n){const e=/^\s*(\d+)\s*$/.exec(n);if(e)return parseInt(e[1],10)}function Vt(n){return qa(n,!1).trim()}function p0(n,e){ln(n,e?"1":"0")}function ofe(n,e){n.appendChild(k0().createCDATASection(e))}function lfe(n,e){const t=new Date(e*1e3),r=t.getUTCFullYear()+"-"+Eg(t.getUTCMonth()+1,2)+"-"+Eg(t.getUTCDate(),2)+"T"+Eg(t.getUTCHours(),2)+":"+Eg(t.getUTCMinutes(),2)+":"+Eg(t.getUTCSeconds(),2)+"Z";n.appendChild(k0().createTextNode(r))}function ts(n,e){const t=e.toPrecision();n.appendChild(k0().createTextNode(t))}function Xx(n,e){const t=e.toString();n.appendChild(k0().createTextNode(t))}const cfe=/^\s/,ufe=/\s$/,hfe=/(\n|\t|\r|<|&| {2})/;function ln(n,e){typeof e=="string"&&(cfe.test(e)||ufe.test(e)||hfe.test(e))?e.split("]]>").forEach((t,r,i)=>{r<i.length-1&&(t+="]]"),r>0&&(t=">"+t),ofe(n,t)}):n.appendChild(k0().createTextNode(e))}const Vn=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],ffe="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",dfe={rte:A7,trk:R7,wpt:C7},gfe=nt(Vn,{rte:Fa(A7),trk:Fa(R7),wpt:Fa(C7)}),mfe=nt(Vn,{text:Le(Vt,"linkText"),type:Le(Vt,"linkType")}),pfe=nt(Vn,{name:Le(Vt),email:zfe,link:d_}),_fe=nt(Vn,{name:Le(Vt),desc:Le(Vt),author:Le(Gfe),copyright:Le(Bfe),link:d_,time:Le(vE),keywords:Le(Vt),bounds:Ufe,extensions:EE}),yfe=nt(Vn,{year:Le(yp),license:Le(Vt)}),xfe=nt(Vn,{rte:We(Kfe),trk:We(Yfe),wpt:We(qfe)});class vfe extends I7{constructor(e){super(),e=e||{},this.dataProjection=Pn("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,r=e.length;t<r;++t){const i=e[t];if(this.readExtensions_){const s=i.get("extensionsNode_")||null;this.readExtensions_(i,s)}i.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(ml(e)):gl(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE){const r=this.readMetadataFromNode(t);if(r)return r}return null}readMetadataFromNode(e){if(!Vn.includes(e.namespaceURI))return null;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(Vn.includes(t.namespaceURI)&&t.localName==="metadata")return $t({},_fe,t,[]);return null}readFeatureFromNode(e,t){if(!Vn.includes(e.namespaceURI))return null;const r=dfe[e.localName];if(!r)return null;const i=r(e,[this.getReadOptions(e,t)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(e,t){if(!Vn.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const r=$t([],gfe,e,[this.getReadOptions(e,t)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const r=ef("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",Yx),r.setAttributeNS(Yx,"xsi:schemaLocation",ffe),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),Mn({node:r},xfe,jfe,e,[t]),r}}const Efe=nt(Vn,{name:Le(Vt),cmt:Le(Vt),desc:Le(Vt),src:Le(Vt),link:d_,number:Le(yp),extensions:EE,type:Le(Vt),rtept:$fe}),wfe=nt(Vn,{ele:Le(tn),time:Le(vE)}),Sfe=nt(Vn,{name:Le(Vt),cmt:Le(Vt),desc:Le(Vt),src:Le(Vt),link:d_,number:Le(yp),type:Le(Vt),extensions:EE,trkseg:Hfe}),Tfe=nt(Vn,{trkpt:Wfe}),Ife=nt(Vn,{ele:Le(tn),time:Le(vE)}),Afe=nt(Vn,{ele:Le(tn),time:Le(vE),magvar:Le(tn),geoidheight:Le(tn),name:Le(Vt),cmt:Le(Vt),desc:Le(Vt),src:Le(Vt),link:d_,sym:Le(Vt),type:Le(Vt),fix:Le(Vt),sat:Le(yp),hdop:Le(tn),vdop:Le(tn),pdop:Le(tn),ageofdgpsdata:Le(tn),dgpsid:Le(yp),extensions:EE}),Rfe=["text","type"],Cfe=nt(Vn,{text:We(ln),type:We(ln)}),Pfe=nt(Vn,["name","cmt","desc","src","link","number","type","rtept"]),bfe=nt(Vn,{name:We(ln),cmt:We(ln),desc:We(ln),src:We(ln),link:We(mC),number:We(Xx),type:We(ln),rtept:S7(We(pC))}),Mfe=nt(Vn,["ele","time"]),kfe=nt(Vn,["name","cmt","desc","src","link","number","type","trkseg"]),Nfe=nt(Vn,{name:We(ln),cmt:We(ln),desc:We(ln),src:We(ln),link:We(mC),number:We(Xx),type:We(ln),trkseg:S7(We(Xfe))}),Lfe=Za("trkpt"),Ofe=nt(Vn,{trkpt:We(pC)}),Dfe=nt(Vn,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),Ffe=nt(Vn,{ele:We(ts),time:We(lfe),magvar:We(ts),geoidheight:We(ts),name:We(ln),cmt:We(ln),desc:We(ln),src:We(ln),link:We(mC),sym:We(ln),type:We(ln),fix:We(ln),sat:We(Xx),hdop:We(ts),vdop:We(ts),pdop:We(ts),ageofdgpsdata:We(ts),dgpsid:We(Xx)}),Vfe={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function jfe(n,e,t){const r=n.getGeometry();if(r){const i=Vfe[r.getType()];if(i){const s=e[e.length-1].node;return ef(s.namespaceURI,i)}}}function dC(n,e,t,r){return n.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in r?(n.push(r.ele),delete r.ele,e.hasZ=!0):n.push(0),"time"in r?(n.push(r.time),delete r.time,e.hasM=!0):n.push(0),n}function gC(n,e,t){let r="XY",i=2;if(n.hasZ&&n.hasM?(r="XYZM",i=4):n.hasZ?(r="XYZ",i=3):n.hasM&&(r="XYM",i=3),i!==4){for(let s=0,a=e.length/4;s<a;s++)e[s*i]=e[s*4],e[s*i+1]=e[s*4+1],n.hasZ&&(e[s*i+2]=e[s*4+2]),n.hasM&&(e[s*i+2]=e[s*4+3]);if(e.length=e.length/4*i,t)for(let s=0,a=t.length;s<a;s++)t[s]=t[s]/4*i}return r}function Gfe(n,e){const t=$t({},pfe,n,e);if(t)return t}function Bfe(n,e){const t=$t({},yfe,n,e);if(t){const r=n.getAttribute("author");return r!==null&&(t.author=r),t}}function Ufe(n,e){const t=e[e.length-1],r=n.getAttribute("minlat"),i=n.getAttribute("minlon"),s=n.getAttribute("maxlat"),a=n.getAttribute("maxlon");i!==null&&r!==null&&a!==null&&s!==null&&(t.bounds=[[parseFloat(i),parseFloat(r)],[parseFloat(a),parseFloat(s)]])}function zfe(n,e){const t=e[e.length-1],r=n.getAttribute("id"),i=n.getAttribute("domain");r!==null&&i!==null&&(t.email=`${r}@${i}`)}function d_(n,e){const t=e[e.length-1],r=n.getAttribute("href");r!==null&&(t.link=r),_u(mfe,n,e)}function EE(n,e){const t=e[e.length-1];t.extensionsNode_=n}function $fe(n,e){const t=$t({},wfe,n,e);if(t){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;dC(i,s,n,t)}}function Wfe(n,e){const t=$t({},Ife,n,e);if(t){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;dC(i,s,n,t)}}function Hfe(n,e){const t=e[e.length-1];_u(Tfe,n,e);const r=t.flatCoordinates;t.ends.push(r.length)}function A7(n,e){const t=e[0],r=$t({flatCoordinates:[],layoutOptions:{}},Efe,n,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.layoutOptions;delete r.layoutOptions;const a=gC(s,i),o=new Lo(i,a);Xa(o,!1,t);const l=new Mo(o);return l.setProperties(r,!0),l}function R7(n,e){const t=e[0],r=$t({flatCoordinates:[],ends:[],layoutOptions:{}},Sfe,n,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.ends;delete r.ends;const a=r.layoutOptions;delete r.layoutOptions;const o=gC(a,i,s),l=new Yc(i,o,s);Xa(l,!1,t);const u=new Mo(l);return u.setProperties(r,!0),u}function C7(n,e){const t=e[0],r=$t({},Afe,n,e);if(!r)return;const i={},s=dC([],i,n,r),a=gC(i,s),o=new Oo(s,a);Xa(o,!1,t);const l=new Mo(o);return l.setProperties(r,!0),l}function mC(n,e,t){n.setAttribute("href",e);const i=t[t.length-1].properties,s=[i.linkText,i.linkType];Mn({node:n},Cfe,Ci,s,t,Rfe)}function pC(n,e,t){const r=t[t.length-1],s=r.node.namespaceURI,a=r.properties;switch(n.setAttributeNS(null,"lat",String(e[1])),n.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case"XYZM":e[3]!==0&&(a.time=e[3]);case"XYZ":e[2]!==0&&(a.ele=e[2]);break;case"XYM":e[2]!==0&&(a.time=e[2]);break}const l=n.nodeName=="rtept"?Mfe[s]:Dfe[s],u=hs(a,l);Mn({node:n,properties:a},Ffe,Ci,u,t,l)}function Kfe(n,e,t){const r=t[0],i=e.getProperties(),s={node:n};s.properties=i;const a=e.getGeometry();if(a.getType()=="LineString"){const f=Xa(a,!0,r);s.geometryLayout=f.getLayout(),i.rtept=f.getCoordinates()}const o=t[t.length-1].node,l=Pfe[o.namespaceURI],u=hs(i,l);Mn(s,bfe,Ci,u,t,l)}function Yfe(n,e,t){const r=t[0],i=e.getProperties(),s={node:n};s.properties=i;const a=e.getGeometry();if(a.getType()=="MultiLineString"){const f=Xa(a,!0,r);i.trkseg=f.getLineStrings()}const o=t[t.length-1].node,l=kfe[o.namespaceURI],u=hs(i,l);Mn(s,Nfe,Ci,u,t,l)}function Xfe(n,e,t){const r={node:n};r.geometryLayout=e.getLayout(),r.properties={},Mn(r,Ofe,Lfe,e.getCoordinates(),t)}function qfe(n,e,t){const r=t[0],i=t[t.length-1];i.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const a=Xa(s,!0,r);i.geometryLayout=a.getLayout(),pC(n,a.getCoordinates(),t)}}const jl=["http://www.google.com/kml/ext/2.2"],pt=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Zfe="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",dL={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},Qfe=nt(pt,{ExtendedData:z7,Region:$7,MultiGeometry:Le(G7,"geometry"),LineString:Le(V7,"geometry"),LinearRing:Le(j7,"geometry"),Point:Le(B7,"geometry"),Polygon:Le(U7,"geometry"),Style:Le(xC),StyleMap:Ode,address:Le(Vt),description:Le(Vt),name:Le(Vt),open:Le(ou),phoneNumber:Le(Vt),styleUrl:Le(N7),visibility:Le(ou)},nt(jl,{MultiTrack:Le(wde,"geometry"),Track:Le(F7,"geometry")})),Jfe=nt(pt,{ExtendedData:z7,Region:$7,Link:Kde,address:Le(Vt),description:Le(Vt),name:Le(Vt),open:Le(ou),phoneNumber:Le(Vt),visibility:Le(ou)}),ede=nt(pt,{href:Le(k7)}),tde=nt(pt,{Altitude:Le(tn),Longitude:Le(tn),Latitude:Le(tn),Tilt:Le(tn),AltitudeMode:Le(Vt),Heading:Le(tn),Roll:Le(tn)}),P7=nt(pt,{LatLonAltBox:Gde,Lod:Ude}),nde=nt(pt,["Document","Placemark"]),rde=nt(pt,{Document:We(t0e),Placemark:We(K7)});let Fd,Ly=null,dI,wm,Sm,Tm,qx,gI=null,_C,mI=null,pI,uh=null,gL=null,_I=null;function Zx(n){return 32/Math.min(n[0],n[1])}function ide(){Fd=[255,255,255,1],Ly=new Ai({color:Fd}),dI=[20,2],wm="pixels",Sm="pixels",Tm=[64,64],qx="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",gI=new Fp({anchor:dI,anchorOrigin:"bottom-left",anchorXUnits:wm,anchorYUnits:Sm,crossOrigin:"anonymous",rotation:0,scale:Zx(Tm),size:Tm,src:qx}),_C="NO_IMAGE",mI=new Fs({color:Fd,width:1}),pI=new Fs({color:[51,51,51,1],width:2}),uh=new v0({font:"bold 16px Helvetica",fill:Ly,stroke:pI,scale:.8}),gL=new ar({fill:Ly,image:gI,text:uh,stroke:mI,zIndex:0}),_I=[gL]}let Q1;function sde(n){return n}class ade extends I7{constructor(e){super(),e=e||{},_I||ide(),this.dataProjection=Pn("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:_I,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:sde,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const r=nt(pt,{Document:fL(this.readDocumentOrFolder_,this),Folder:fL(this.readDocumentOrFolder_,this),Placemark:Fa(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),i=$t([],r,e,t,this);if(i)return i}readPlacemark_(e,t){const r=$t({geometry:null},Qfe,e,t,this);if(!r)return;const i=new Mo,s=e.getAttribute("id");s!==null&&i.setId(s);const a=t[0],o=r.geometry;if(o&&Xa(o,!1,a),i.setGeometry(o),delete r.geometry,this.extractStyles_){const l=r.Style,u=r.styleUrl,f=lde(l,u,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(f)}return delete r.Style,i.setProperties(r,!0),i}readSharedStyle_(e,t){const r=e.getAttribute("id");if(r!==null){const i=xC.call(this,e,t);if(i){let s,a=e.baseURI;(!a||a=="about:blank")&&(a=window.location.href),a?s=new URL("#"+r,a).href:s="#"+r,this.sharedStyles_[s]=i}}}readSharedStyleMap_(e,t){const r=e.getAttribute("id");if(r===null)return;const i=O7.call(this,e,t);if(!i)return;let s,a=e.baseURI;(!a||a=="about:blank")&&(a=window.location.href),a?s=new URL("#"+r,a).href:s="#"+r,this.sharedStyles_[s]=i}readFeatureFromNode(e,t){if(!pt.includes(e.namespaceURI))return null;const r=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return r||null}readFeaturesFromNode(e,t){if(!pt.includes(e.namespaceURI))return[];let r;const i=e.localName;if(i=="Document"||i=="Folder")return r=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),r||[];if(i=="Placemark"){const s=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return s?[s]:[]}if(i=="kml"){r=[];for(let s=e.firstElementChild;s;s=s.nextElementSibling){const a=this.readFeaturesFromNode(s,t);a&&dn(r,a)}return r}return[]}readName(e){if(e){if(typeof e=="string"){const t=ml(e);return this.readNameFromDocument(t)}return gl(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const r=this.readNameFromNode(t);if(r)return r}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(pt.includes(t.namespaceURI)&&t.localName=="name")return Vt(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const r=t.localName;if(pt.includes(t.namespaceURI)&&(r=="Document"||r=="Folder"||r=="Placemark"||r=="kml")){const i=this.readNameFromNode(t);if(i)return i}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const r=ml(e);dn(t,this.readNetworkLinksFromDocument(r))}else gl(e)?dn(t,this.readNetworkLinksFromDocument(e)):dn(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&dn(t,this.readNetworkLinksFromNode(r));return t}readNetworkLinksFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(pt.includes(r.namespaceURI)&&r.localName=="NetworkLink"){const i=$t({},Jfe,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;pt.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&dn(t,this.readNetworkLinksFromNode(r))}return t}readRegion(e){const t=[];if(typeof e=="string"){const r=ml(e);dn(t,this.readRegionFromDocument(r))}else gl(e)?dn(t,this.readRegionFromDocument(e)):dn(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&dn(t,this.readRegionFromNode(r));return t}readRegionFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(pt.includes(r.namespaceURI)&&r.localName=="Region"){const i=$t({},P7,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;pt.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&dn(t,this.readRegionFromNode(r))}return t}readCamera(e){const t=[];if(typeof e=="string"){const r=ml(e);dn(t,this.readCameraFromDocument(r))}else gl(e)?dn(t,this.readCameraFromDocument(e)):dn(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType===Node.ELEMENT_NODE&&dn(t,this.readCameraFromNode(r));return t}readCameraFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(pt.includes(r.namespaceURI)&&r.localName==="Camera"){const i=$t({},tde,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;pt.includes(r.namespaceURI)&&(i==="Document"||i==="Folder"||i==="Placemark"||i==="kml")&&dn(t,this.readCameraFromNode(r))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const r=ef(pt[4],"kml"),i="http://www.w3.org/2000/xmlns/";r.setAttributeNS(i,"xmlns:gx",jl[0]),r.setAttributeNS(i,"xmlns:xsi",Yx),r.setAttributeNS(Yx,"xsi:schemaLocation",Zfe);const s={node:r},a={};e.length>1?a.Document=e:e.length==1&&(a.Placemark=e[0]);const o=nde[r.namespaceURI],l=hs(a,o);return Mn(s,rde,Ci,l,[t],o,this),r}}function ode(n,e){const t=[0,0];let r="start";const i=n.getImage();if(i){const o=i.getSize();if(o&&o.length==2){const l=i.getScaleArray(),u=i.getAnchor();t[0]=l[0]*(o[0]-u[0]),t[1]=l[1]*(o[1]/2-u[1]),r="left"}}let s=n.getText();return s?(s=s.clone(),s.setFont(s.getFont()||uh.getFont()),s.setScale(s.getScale()||uh.getScale()),s.setFill(s.getFill()||uh.getFill()),s.setStroke(s.getStroke()||pI)):s=uh.clone(),s.setText(e),s.setOffsetX(t[0]),s.setOffsetY(t[1]),s.setTextAlign(r),new ar({image:i,text:s})}function lde(n,e,t,r,i){return(function(s,a){let o=i,l="",u=[];if(o){const d=s.getGeometry();if(d)if(d instanceof $a)u=d.getGeometriesArrayRecursive().filter(function(g){const p=g.getType();return p==="Point"||p==="MultiPoint"}),o=u.length>0;else{const g=d.getType();o=g==="Point"||g==="MultiPoint"}}o&&(l=s.get("name"),o=o&&!!l,o&&/&[^&]+;/.test(l)&&(Q1||(Q1=document.createElement("textarea")),Q1.innerHTML=l,l=Q1.value));let f=t;if(n?f=n:e&&(f=b7(e,t,r)),o){const d=ode(f[0],l);if(u.length>0){d.setGeometry(new $a(u));const g=new ar({geometry:f[0].getGeometry(),image:null,fill:f[0].getFill(),stroke:f[0].getStroke(),text:null});return[d,g].concat(f.slice(1))}return d}return f})}function b7(n,e,t){return Array.isArray(n)?n:typeof n=="string"?b7(t[n],e,t):e}function wE(n){const e=qa(n,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const r=t[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function M7(n){let e=qa(n,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let i;for(;i=r.exec(e);){const s=parseFloat(i[1]),a=parseFloat(i[2]),o=i[3]?parseFloat(i[3]):0;t.push(s,a,o),e=e.substr(i[0].length)}if(e==="")return t}function k7(n){const e=qa(n,!1).trim();let t=n.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function N7(n){const e=qa(n,!1).trim().replace(/^(?!.*#)/,"#");let t=n.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function cde(n){const e=n.getAttribute("xunits"),t=n.getAttribute("yunits");let r;return e!=="insetPixels"?t!=="insetPixels"?r="bottom-left":r="top-left":t!=="insetPixels"?r="bottom-right":r="top-right",{x:parseFloat(n.getAttribute("x")),xunits:dL[e],y:parseFloat(n.getAttribute("y")),yunits:dL[t],origin:r}}function L7(n){return tn(n)}const ude=nt(pt,{Pair:Lde});function O7(n,e){return $t(void 0,ude,n,e,this)}const hde=nt(pt,{Icon:Le(Ide),color:Le(wE),heading:Le(tn),hotSpot:Le(cde),scale:Le(L7)});function fde(n,e){const t=$t({},hde,n,e);if(!t)return;const r=e[e.length-1],i="Icon"in t?t.Icon:{},s=!("Icon"in t)||Object.keys(i).length>0;let a;const o=i.href;o?a=o:s&&(a=qx);let l,u,f,d="bottom-left";const g=t.hotSpot;g?(l=[g.x,g.y],u=g.xunits,f=g.yunits,d=g.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(a)&&(a.includes("pushpin")?(l=dI,u=wm,f=Sm):a.includes("arrow-reverse")?(l=[54,42],u=wm,f=Sm):a.includes("paddle")&&(l=[32,1],u=wm,f=Sm));let p;const v=i.x,y=i.y;v!==void 0&&y!==void 0&&(p=[v,y]);let E;const T=i.w,R=i.h;T!==void 0&&R!==void 0&&(E=[T,R]);let M;const k=t.heading;k!==void 0&&(M=yl(k));const V=t.scale,z=t.color;if(s){a==qx&&(E=Tm);const P=new Fp({anchor:l,anchorOrigin:d,anchorXUnits:u,anchorYUnits:f,crossOrigin:this.crossOrigin_,offset:p,offsetOrigin:"bottom-left",rotation:M,scale:V,size:E,src:this.iconUrlFunction_(a),color:z}),C=P.getScaleArray()[0],b=P.getSize();if(b===null){const L=P.getImageState();if(L===ht.IDLE||L===ht.LOADING){const F=function(){const U=P.getImageState();if(!(U===ht.IDLE||U===ht.LOADING)){const j=P.getSize();if(j&&j.length==2){const Te=Zx(j);P.setScale(C*Te)}P.unlistenImageChange(F)}};P.listenImageChange(F),L===ht.IDLE&&P.load()}}else if(b.length==2){const L=Zx(b);P.setScale(C*L)}r.imageStyle=P}else r.imageStyle=_C}const dde=nt(pt,{color:Le(wE),scale:Le(L7)});function gde(n,e){const t=$t({},dde,n,e);if(!t)return;const r=e[e.length-1],i=new v0({fill:new Ai({color:"color"in t?t.color:Fd}),scale:t.scale});r.textStyle=i}const mde=nt(pt,{color:Le(wE),width:Le(tn)});function pde(n,e){const t=$t({},mde,n,e);if(!t)return;const r=e[e.length-1],i=new Fs({color:"color"in t?t.color:Fd,width:"width"in t?t.width:1});r.strokeStyle=i}const _de=nt(pt,{color:Le(wE),fill:Le(ou),outline:Le(ou)});function yde(n,e){const t=$t({},_de,n,e);if(!t)return;const r=e[e.length-1],i=new Ai({color:"color"in t?t.color:Fd});r.fillStyle=i;const s=t.fill;s!==void 0&&(r.fill=s);const a=t.outline;a!==void 0&&(r.outline=a)}const xde=nt(pt,{coordinates:fC(M7)});function D7(n,e){return $t(null,xde,n,e)}function vde(n,e){const r=e[e.length-1].coordinates,i=qa(n,!1),a=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(i);if(a){const o=parseFloat(a[1]),l=parseFloat(a[2]),u=parseFloat(a[3]);r.push([o,l,u])}else r.push([])}const Ede=nt(jl,{Track:Fa(F7)});function wde(n,e){const t=$t([],Ede,n,e);if(t)return new Yc(t)}const Sde=nt(pt,{when:Yde},nt(jl,{coord:vde}));function F7(n,e){const t=$t({coordinates:[],whens:[]},Sde,n,e);if(!t)return;const r=[],i=t.coordinates,s=t.whens;for(let a=0,o=Math.min(i.length,s.length);a<o;++a)i[a].length==3&&r.push(i[a][0],i[a][1],i[a][2],s[a]);return new Lo(r,"XYZM")}const Tde=nt(pt,{href:Le(k7)},nt(jl,{x:Le(tn),y:Le(tn),w:Le(tn),h:Le(tn)}));function Ide(n,e){const t=$t({},Tde,n,e);return t||null}const Ade=nt(pt,{coordinates:fC(M7)});function yC(n,e){return $t(null,Ade,n,e)}const SE=nt(pt,{extrude:Le(ou),tessellate:Le(ou),altitudeMode:Le(Vt)});function V7(n,e){const t=$t({},SE,n,e),r=yC(n,e);if(r){const i=new Lo(r,"XYZ");return i.setProperties(t,!0),i}}function j7(n,e){const t=$t({},SE,n,e),r=yC(n,e);if(r){const i=new Ka(r,"XYZ",[r.length]);return i.setProperties(t,!0),i}}const Rde=nt(pt,{LineString:Fa(V7),LinearRing:Fa(j7),MultiGeometry:Fa(G7),Point:Fa(B7),Polygon:Fa(U7)});function G7(n,e){const t=$t([],Rde,n,e);if(!t)return null;if(t.length===0)return new $a(t);let r,i=!0;const s=t[0].getType();let a;for(let o=1,l=t.length;o<l;++o)if(a=t[o],a.getType()!=s){i=!1;break}if(i){let o,l;if(s=="Point"){const u=t[0];o=u.getLayout(),l=u.getFlatCoordinates();for(let f=1,d=t.length;f<d;++f)a=t[f],dn(l,a.getFlatCoordinates());r=new x0(l,o),vS(r,t)}else if(s=="LineString")r=new Yc(t),vS(r,t);else if(s=="Polygon")r=new qd(t),vS(r,t);else if(s=="GeometryCollection"||s.startsWith("Multi"))r=new $a(t);else throw new Error("Unknown geometry type found")}else r=new $a(t);return r}function B7(n,e){const t=$t({},SE,n,e),r=yC(n,e);if(r){const i=new Oo(r,"XYZ");return i.setProperties(t,!0),i}}const Cde=nt(pt,{innerBoundaryIs:$de,outerBoundaryIs:Hde});function U7(n,e){const t=$t({},SE,n,e),r=$t([null],Cde,n,e);if(r&&r[0]){const i=r[0],s=[i.length];for(let o=1,l=r.length;o<l;++o)dn(i,r[o]),s.push(i.length);const a=new Ka(i,"XYZ",s);return a.setProperties(t,!0),a}}const Pde=nt(pt,{IconStyle:fde,LabelStyle:gde,LineStyle:pde,PolyStyle:yde});function xC(n,e){const t=$t({},Pde,n,e,this);if(!t)return null;let r="fillStyle"in t?t.fillStyle:Ly;const i=t.fill;i!==void 0&&!i&&(r=null);let s;"imageStyle"in t?t.imageStyle!=_C&&(s=t.imageStyle):s=gI;const a="textStyle"in t?t.textStyle:uh,o="strokeStyle"in t?t.strokeStyle:mI,l=t.outline;return l!==void 0&&!l?[new ar({geometry:function(u){const f=u.getGeometry(),d=f.getType();if(d==="GeometryCollection"){const g=f;return new $a(g.getGeometriesArrayRecursive().filter(function(p){const v=p.getType();return v!=="Polygon"&&v!=="MultiPolygon"}))}if(d!=="Polygon"&&d!=="MultiPolygon")return f},fill:r,image:s,stroke:o,text:a,zIndex:void 0}),new ar({geometry:function(u){const f=u.getGeometry(),d=f.getType();if(d==="GeometryCollection"){const g=f;return new $a(g.getGeometriesArrayRecursive().filter(function(p){const v=p.getType();return v==="Polygon"||v==="MultiPolygon"}))}if(d==="Polygon"||d==="MultiPolygon")return f},fill:r,stroke:null,zIndex:void 0})]:[new ar({fill:r,image:s,stroke:o,text:a,zIndex:void 0})]}function vS(n,e){const t=e.length,r=new Array(e.length),i=new Array(e.length),s=new Array(e.length);let a,o,l;a=!1,o=!1,l=!1;for(let u=0;u<t;++u){const f=e[u];r[u]=f.get("extrude"),i[u]=f.get("tessellate"),s[u]=f.get("altitudeMode"),a=a||r[u]!==void 0,o=o||i[u]!==void 0,l=l||s[u]}a&&n.set("extrude",r),o&&n.set("tessellate",i),l&&n.set("altitudeMode",s)}const bde=nt(pt,{displayName:Le(Vt),value:Le(Vt)});function Mde(n,e){const t=n.getAttribute("name");_u(bde,n,e);const r=e[e.length-1];t&&r.displayName?r[t]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:t!==null?r[t]=r.value:r.displayName!==null&&(r[r.displayName]=r.value),delete r.value}const kde=nt(pt,{Data:Mde,SchemaData:Fde});function z7(n,e){_u(kde,n,e)}function $7(n,e){_u(P7,n,e)}const Nde=nt(pt,{Style:Le(xC),key:Le(Vt),styleUrl:Le(N7)});function Lde(n,e){const t=$t({},Nde,n,e,this);if(!t)return;const r=t.key;if(r&&r=="normal"){const i=t.styleUrl;i&&(e[e.length-1]=i);const s=t.Style;s&&(e[e.length-1]=s)}}function Ode(n,e){const t=O7.call(this,n,e);if(!t)return;const r=e[e.length-1];if(Array.isArray(t))r.Style=t;else if(typeof t=="string")r.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const Dde=nt(pt,{SimpleData:Vde});function Fde(n,e){_u(Dde,n,e)}function Vde(n,e){const t=n.getAttribute("name");if(t!==null){const r=Vt(n),i=e[e.length-1];i[t]=r}}const jde=nt(pt,{altitudeMode:Le(Vt),minAltitude:Le(tn),maxAltitude:Le(tn),north:Le(tn),south:Le(tn),east:Le(tn),west:Le(tn)});function Gde(n,e){const t=$t({},jde,n,e);if(!t)return;const r=e[e.length-1],i=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];r.extent=i,r.altitudeMode=t.altitudeMode,r.minAltitude=parseFloat(t.minAltitude),r.maxAltitude=parseFloat(t.maxAltitude)}const Bde=nt(pt,{minLodPixels:Le(tn),maxLodPixels:Le(tn),minFadeExtent:Le(tn),maxFadeExtent:Le(tn)});function Ude(n,e){const t=$t({},Bde,n,e);if(!t)return;const r=e[e.length-1];r.minLodPixels=parseFloat(t.minLodPixels),r.maxLodPixels=parseFloat(t.maxLodPixels),r.minFadeExtent=parseFloat(t.minFadeExtent),r.maxFadeExtent=parseFloat(t.maxFadeExtent)}const zde=nt(pt,{LinearRing:Fa(D7)});function $de(n,e){const t=$t([],zde,n,e);t.length>0&&e[e.length-1].push(...t)}const Wde=nt(pt,{LinearRing:fC(D7)});function Hde(n,e){const t=$t(void 0,Wde,n,e);if(t){const r=e[e.length-1];r[0]=t}}function Kde(n,e){_u(ede,n,e)}function Yde(n,e){const r=e[e.length-1].whens,i=qa(n,!1),s=Date.parse(i);r.push(isNaN(s)?0:s)}function TE(n,e){const t=Sh(e),i=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let s=0;s<4;++s){const a=Math.floor(i[s]).toString(16);i[s]=a.length==1?"0"+a:a}ln(n,i.join(""))}function Xde(n,e,t){const r=t[t.length-1],i=r.layout,s=r.stride;let a;if(i=="XY"||i=="XYM")a=2;else if(i=="XYZ"||i=="XYZM")a=3;else throw new Error("Invalid geometry layout");const o=e.length;let l="";if(o>0){l+=e[0];for(let u=1;u<a;++u)l+=","+e[u];for(let u=s;u<o;u+=s){l+=" "+e[u];for(let f=1;f<a;++f)l+=","+e[u+f]}}ln(n,l)}const Oy=nt(pt,{Data:We(qde),value:We(Qde),displayName:We(Zde)});function qde(n,e,t){n.setAttribute("name",e.name);const r={node:n},i=e.value;typeof i=="object"?(i!==null&&i.displayName&&Mn(r,Oy,Ci,[i.displayName],t,["displayName"]),i!==null&&i.value&&Mn(r,Oy,Ci,[i.value],t,["value"])):Mn(r,Oy,Ci,[i],t,["value"])}function Zde(n,e){ln(n,e)}function Qde(n,e){ln(n,e)}const Jde=nt(pt,{Placemark:We(K7)}),e0e=function(n,e,t){const r=e[e.length-1].node;return ef(r.namespaceURI,"Placemark")};function t0e(n,e,t){Mn({node:n},Jde,e0e,e,t,void 0,this)}const n0e=Za("Data");function r0e(n,e,t){const r={node:n},i=e.names,s=e.values,a=i.length;for(let o=0;o<a;o++)Mn(r,Oy,n0e,[{name:i[o],value:s[o]}],t)}const mL=nt(pt,["href"],nt(jl,["x","y","w","h"])),pL=nt(pt,{href:We(ln)},nt(jl,{x:We(ts),y:We(ts),w:We(ts),h:We(ts)})),i0e=function(n,e,t){return ef(jl[0],"gx:"+t)};function s0e(n,e,t){const r={node:n},i=t[t.length-1].node;let s=mL[i.namespaceURI],a=hs(e,s);Mn(r,pL,Ci,a,t,s),s=mL[jl[0]],a=hs(e,s),Mn(r,pL,i0e,a,t,s)}const a0e=nt(pt,["scale","heading","Icon","color","hotSpot"]),o0e=nt(pt,{Icon:We(s0e),color:We(TE),heading:We(ts),hotSpot:We(L0e),scale:We(X7)});function l0e(n,e,t){const r={node:n},i={},s=e.getSrc(),a=e.getSize(),o=e.getImageSize(),l={href:s};if(a){l.w=a[0],l.h=a[1];const E=e.getAnchor(),T=e.getOrigin();if(T&&o&&T[0]!==0&&T[1]!==a[1]&&(l.x=T[0],l.y=o[1]-(T[1]+a[1])),E&&(E[0]!==a[0]/2||E[1]!==a[1]/2)){const R={x:E[0],xunits:"pixels",y:a[1]-E[1],yunits:"pixels"};i.hotSpot=R}}i.Icon=l;let u=e.getScaleArray()[0],f=a;if(f===null&&(f=Tm),f.length==2){const E=Zx(f);u=u/E}u!==1&&(i.scale=u);const d=e.getRotation();d!==0&&(i.heading=d);const g=e.getColor();g&&(i.color=g);const p=t[t.length-1].node,v=a0e[p.namespaceURI],y=hs(i,v);Mn(r,o0e,Ci,y,t,v)}const c0e=nt(pt,["color","scale"]),u0e=nt(pt,{color:We(TE),scale:We(X7)});function h0e(n,e,t){const r={node:n},i={},s=e.getFill();s&&(i.color=s.getColor());const a=e.getScale();a&&a!==1&&(i.scale=a);const o=t[t.length-1].node,l=c0e[o.namespaceURI],u=hs(i,l);Mn(r,u0e,Ci,u,t,l)}const f0e=nt(pt,["color","width"]),d0e=nt(pt,{color:We(TE),width:We(ts)});function g0e(n,e,t){const r={node:n},i={color:e.getColor(),width:Number(e.getWidth())||1},s=t[t.length-1].node,a=f0e[s.namespaceURI],o=hs(i,a);Mn(r,d0e,Ci,o,t,a)}const m0e={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},W7=function(n,e,t){if(n){const r=e[e.length-1].node;return ef(r.namespaceURI,m0e[n.getType()])}},p0e=Za("Point"),_0e=Za("LineString"),y0e=Za("LinearRing"),x0e=Za("Polygon"),v0e=nt(pt,{LineString:We(Vd),Point:We(Vd),Polygon:We(Y7),GeometryCollection:We(H7)});function H7(n,e,t){const r={node:n},i=e.getType();let s=[],a;if(i==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(o){const l=o.getType();if(l==="MultiPoint")s=s.concat(o.getPoints());else if(l==="MultiLineString")s=s.concat(o.getLineStrings());else if(l==="MultiPolygon")s=s.concat(o.getPolygons());else if(l==="Point"||l==="LineString"||l==="Polygon")s.push(o);else throw new Error("Unknown geometry type")}),a=W7;else if(i==="MultiPoint")s=e.getPoints(),a=p0e;else if(i==="MultiLineString")s=e.getLineStrings(),a=_0e;else if(i==="MultiPolygon")s=e.getPolygons(),a=x0e;else throw new Error("Unknown geometry type");Mn(r,v0e,a,s,t)}const E0e=nt(pt,{LinearRing:We(Vd)});function _L(n,e,t){Mn({node:n},E0e,y0e,[e],t)}const ES=nt(pt,{ExtendedData:We(r0e),MultiGeometry:We(H7),LineString:We(Vd),LinearRing:We(Vd),Point:We(Vd),Polygon:We(Y7),Style:We(N0e),address:We(ln),description:We(ln),name:We(ln),open:We(p0),phoneNumber:We(ln),styleUrl:We(ln),visibility:We(p0)}),w0e=nt(pt,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),S0e=Za("ExtendedData");function K7(n,e,t){const r={node:n};e.getId()&&n.setAttribute("id",e.getId());const i=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const a=Object.keys(i||{}).sort().filter(function(p){return!s[p]}),o=e.getStyleFunction();if(o){const p=o(e,0);if(p){const v=Array.isArray(p)?p:[p];let y=v;if(e.getGeometry()&&(y=v.filter(function(E){const T=E.getGeometryFunction()(e);if(T){const R=T.getType();return R==="GeometryCollection"?T.getGeometriesArrayRecursive().filter(function(M){const k=M.getType();return k==="Point"||k==="MultiPoint"}).length:R==="Point"||R==="MultiPoint"}})),this.writeStyles_){let E=v,T=v;e.getGeometry()&&(E=v.filter(function(R){const M=R.getGeometryFunction()(e);if(M){const k=M.getType();return k==="GeometryCollection"?M.getGeometriesArrayRecursive().filter(function(V){const z=V.getType();return z==="LineString"||z==="MultiLineString"}).length:k==="LineString"||k==="MultiLineString"}}),T=v.filter(function(R){const M=R.getGeometryFunction()(e);if(M){const k=M.getType();return k==="GeometryCollection"?M.getGeometriesArrayRecursive().filter(function(V){const z=V.getType();return z==="Polygon"||z==="MultiPolygon"}).length:k==="Polygon"||k==="MultiPolygon"}})),i.Style={pointStyles:y,lineStyles:E,polyStyles:T}}if(y.length&&i.name===void 0){const E=y[0].getText();E&&(i.name=E.getText())}}}const l=t[t.length-1].node,u=w0e[l.namespaceURI],f=hs(i,u);if(Mn(r,ES,Ci,f,t,u),a.length>0){const p=hs(i,a);Mn(r,ES,S0e,[{names:a,values:p}],t)}const d=t[0];let g=e.getGeometry();g&&(g=Xa(g,!0,d)),Mn(r,ES,W7,[g],t)}const T0e=nt(pt,["extrude","tessellate","altitudeMode","coordinates"]),I0e=nt(pt,{extrude:We(p0),tessellate:We(p0),altitudeMode:We(ln),coordinates:We(Xde)});function Vd(n,e,t){const r=e.getFlatCoordinates(),i={node:n};i.layout=e.getLayout(),i.stride=e.getStride();const s=e.getProperties();s.coordinates=r;const a=t[t.length-1].node,o=T0e[a.namespaceURI],l=hs(s,o);Mn(i,I0e,Ci,l,t,o)}const A0e=nt(pt,["color","fill","outline"]),yL=nt(pt,{outerBoundaryIs:We(_L),innerBoundaryIs:We(_L)}),R0e=Za("innerBoundaryIs"),C0e=Za("outerBoundaryIs");function Y7(n,e,t){const r=e.getLinearRings(),i=r.shift(),s={node:n};Mn(s,yL,R0e,r,t),Mn(s,yL,C0e,[i],t)}const P0e=nt(pt,{color:We(TE),fill:We(p0),outline:We(p0)});function b0e(n,e,t){const r={node:n},i=e.getFill(),s=e.getStroke(),a={color:i?i.getColor():void 0,fill:i?void 0:!1,outline:s?void 0:!1},o=t[t.length-1].node,l=A0e[o.namespaceURI],u=hs(a,l);Mn(r,P0e,Ci,u,t,l)}function X7(n,e){ts(n,Math.round(e*1e6)/1e6)}const M0e=nt(pt,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),k0e=nt(pt,{IconStyle:We(l0e),LabelStyle:We(h0e),LineStyle:We(g0e),PolyStyle:We(b0e)});function N0e(n,e,t){const r={node:n},i={};if(e.pointStyles.length){const l=e.pointStyles[0].getText();l&&(i.LabelStyle=l);const u=e.pointStyles[0].getImage();u&&typeof u.getSrc=="function"&&(i.IconStyle=u)}if(e.lineStyles.length){const l=e.lineStyles[0].getStroke();l&&(i.LineStyle=l)}if(e.polyStyles.length){const l=e.polyStyles[0].getStroke();l&&!i.LineStyle&&(i.LineStyle=l),i.PolyStyle=e.polyStyles[0]}const s=t[t.length-1].node,a=M0e[s.namespaceURI],o=hs(i,a);Mn(r,k0e,Ci,o,t,a)}function L0e(n,e){n.setAttribute("x",String(e.x)),n.setAttribute("y",String(e.y)),n.setAttribute("xunits",e.xunits),n.setAttribute("yunits",e.yunits)}function q7(n){const e=Object.keys(n.defs),t=e.length;let r,i;for(r=0;r<t;++r){const s=e[r];if(!ly(s)){const a=n.defs(s);let o=a.units;!o&&a.projName==="longlat"&&(o="degrees"),Uy(new xv({code:s,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:o}))}}for(r=0;r<t;++r){const s=e[r],a=ly(s);for(i=0;i<t;++i){const o=e[i],l=ly(o);if(!cy(s,o))if(n.defs[s]===n.defs[o])VS([a,l]);else{const u=n(s,o);DB(a,l,yb(a,l,u.forward),yb(l,a,u.inverse))}}}}console.log(" parcelHighlight.ts v3.1 loaded - fixed pixelRatio for Android");Qt.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");q7(Qt);let hh=null,Im=null,fd=null;function yI(n){hh&&(n.removeLayer(hh),hh=null),Im&&(n.removeLayer(Im),Im=null),fd=null}async function O0e(n,e){try{const t=fn(e);console.log(` Click (3857): ${e[0].toFixed(0)}, ${e[1].toFixed(0)}`),console.log(` LonLat (WGS84): ${t[0].toFixed(5)}, ${t[1].toFixed(5)}`);const r=Qt("EPSG:4326","EPSG:28992",t);if(console.log(` RD (28992): ${r?r[0].toFixed(0)+", "+r[1].toFixed(0):"FAILED"}`),!r||r[0]<7e3||r[0]>3e5||r[1]<289e3||r[1]>629e3)return console.error(" Coordinate outside Netherlands or transformation failed:",r),!1;yI(n);const i=1,s=`${r[0]-i},${r[1]-i},${r[0]+i},${r[1]+i}`,a=Date.now(),o=`https://service.pdok.nl/rvo/brpgewaspercelen/wfs/v1_0?SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=brpgewaspercelen:BrpGewas&OUTPUTFORMAT=json&SRSNAME=EPSG:28992&BBOX=${s},EPSG:28992&_=${a}`;console.log(" WFS URL:",o);const l=new AbortController,u=setTimeout(()=>l.abort(),1e4),f=await fetch(o,{signal:l.signal});if(clearTimeout(u),!f.ok)return console.error("WFS request failed:",f.status),!1;const d=await f.json();if(console.log(" WFS RESPONSE:",JSON.stringify(d).substring(0,500)),!d.features||d.features.length===0)return console.log("No parcel found at location"),!1;const g=d.features[0];console.log(" PARCEL ID:",g.id||g.properties?.id||"geen ID"),console.log(" PARCEL BBOX:",JSON.stringify(g.bbox||"geen bbox"));const v=new uC().readFeature(g,{dataProjection:"EPSG:28992",featureProjection:"EPSG:3857"}),y=v.getGeometry();if(!y)return console.log("No geometry in parcel feature"),!1;const E=g.properties||{};console.log(` Parcel: ${E.category||"unknown"} - ${E.gewasnaam||E.gewas||"geen gewas"}`),console.log(` Geometry type: ${y.getType()}, extent: ${y.getExtent().map(b=>b.toFixed(0)).join(", ")}`);const T=y.getExtent(),R=T[2]-T[0],M=T[3]-T[1],k=Math.max(R,M)*.05,V=[T[0]-k,T[1]-k,T[2]+k,T[3]+k],z=Math.max(R,M)*.3,P=[T[0]-z,T[1]-z,T[2]+z,T[3]+z];fd=y,hh=new b$({source:new rW({url:"https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_50cm/ImageServer",params:{renderingRule:JSON.stringify({rasterFunction:"AHN - Color Ramp D"})},crossOrigin:"anonymous"}),extent:V,zIndex:998}),hh.on("prerender",b=>{if(!fd)return;const L=b.context;if(!L)return;const F=b.frameState;if(!F)return;L.save(),L.beginPath(),(fd.getType()==="Polygon"?fd.getCoordinates()[0]:fd.getCoordinates()[0][0]).forEach((j,Te)=>{const Me=n.getPixelFromCoordinate(j);if(!Me)return;const Ue=F.pixelRatio,ke=Me[0]*Ue,le=Me[1]*Ue;Te===0?L.moveTo(ke,le):L.lineTo(ke,le)}),L.closePath(),L.clip()}),hh.on("postrender",b=>{const L=b.context;L&&L.restore()}),n.addLayer(hh);const C=new Av({features:[v]});return Im=new Mv({source:C,style:new ar({fill:new Ai({color:"rgba(0, 0, 0, 0)"}),stroke:new Fs({color:"#dc2626",width:3})}),zIndex:999}),n.addLayer(Im),console.log(" Parcel height map displayed"),!0}catch(t){return console.error("Failed to show parcel height map:",t),!1}}var Qx={};Qx.version="0.18.5";var Z7=1252,D0e=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Q7=function(n){D0e.indexOf(n)!=-1&&(Z7=n)};function F0e(){Q7(1252)}var xp=function(n){Q7(n)};function V0e(){xp(1200),F0e()}var J1=function(e){return String.fromCharCode(e)},xL=function(e){return String.fromCharCode(e)},Jx,Dc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function vp(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0,l=0,u=0;u<n.length;)t=n.charCodeAt(u++),s=t>>2,r=n.charCodeAt(u++),a=(t&3)<<4|r>>4,i=n.charCodeAt(u++),o=(r&15)<<2|i>>6,l=i&63,isNaN(r)?o=l=64:isNaN(i)&&(l=64),e+=Dc.charAt(s)+Dc.charAt(a)+Dc.charAt(o)+Dc.charAt(l);return e}function Nl(n){var e="",t=0,r=0,i=0,s=0,a=0,o=0,l=0;n=n.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<n.length;)s=Dc.indexOf(n.charAt(u++)),a=Dc.indexOf(n.charAt(u++)),t=s<<2|a>>4,e+=String.fromCharCode(t),o=Dc.indexOf(n.charAt(u++)),r=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(r)),l=Dc.indexOf(n.charAt(u++)),i=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var on=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Gl=(function(){if(typeof Buffer<"u"){var n=!Buffer.from;if(!n)try{Buffer.from("foo","utf8")}catch{n=!0}return n?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function Bh(n){return on?Buffer.alloc?Buffer.alloc(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}function vL(n){return on?Buffer.allocUnsafe?Buffer.allocUnsafe(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}var Va=function(e){return on?Gl(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function IE(n){if(typeof ArrayBuffer>"u")return Va(n);for(var e=new ArrayBuffer(n.length),t=new Uint8Array(e),r=0;r!=n.length;++r)t[r]=n.charCodeAt(r)&255;return e}function g_(n){if(Array.isArray(n))return n.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],t=0;t<n.length;++t)e[t]=String.fromCharCode(n[t]);return e.join("")}function j0e(n){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(n)}var ci=on?function(n){return Buffer.concat(n.map(function(e){return Buffer.isBuffer(e)?e:Gl(e)}))}:function(n){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<n.length;++e)t+=n[e].length;var r=new Uint8Array(t),i=0;for(e=0,t=0;e<n.length;t+=i,++e)if(i=n[e].length,n[e]instanceof Uint8Array)r.set(n[e],t);else{if(typeof n[e]=="string")throw"wtf";r.set(new Uint8Array(n[e]),t)}return r}return[].concat.apply([],n.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function G0e(n){for(var e=[],t=0,r=n.length+250,i=Bh(n.length+255),s=0;s<n.length;++s){var a=n.charCodeAt(s);if(a<128)i[t++]=a;else if(a<2048)i[t++]=192|a>>6&31,i[t++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=n.charCodeAt(++s)&1023;i[t++]=240|a>>8&7,i[t++]=128|a>>2&63,i[t++]=128|o>>6&15|(a&3)<<4,i[t++]=128|o&63}else i[t++]=224|a>>12&15,i[t++]=128|a>>6&63,i[t++]=128|a&63;t>r&&(e.push(i.slice(0,t)),t=0,i=Bh(65535),r=65530)}return e.push(i.slice(0,t)),ci(e)}var Am=/\u0000/g,ey=/[\u0001-\u0006]/g;function jd(n){for(var e="",t=n.length-1;t>=0;)e+=n.charAt(t--);return e}function Ua(n,e){var t=""+n;return t.length>=e?t:ir("0",e-t.length)+t}function vC(n,e){var t=""+n;return t.length>=e?t:ir(" ",e-t.length)+t}function ev(n,e){var t=""+n;return t.length>=e?t:t+ir(" ",e-t.length)}function B0e(n,e){var t=""+Math.round(n);return t.length>=e?t:ir("0",e-t.length)+t}function U0e(n,e){var t=""+n;return t.length>=e?t:ir("0",e-t.length)+t}var EL=Math.pow(2,32);function Zf(n,e){if(n>EL||n<-EL)return B0e(n,e);var t=Math.round(n);return U0e(t,e)}function tv(n,e){return e=e||0,n.length>=7+e&&(n.charCodeAt(e)|32)===103&&(n.charCodeAt(e+1)|32)===101&&(n.charCodeAt(e+2)|32)===110&&(n.charCodeAt(e+3)|32)===101&&(n.charCodeAt(e+4)|32)===114&&(n.charCodeAt(e+5)|32)===97&&(n.charCodeAt(e+6)|32)===108}var wL=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],wS=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function z0e(n){return n||(n={}),n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="m/d/yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[56]='"/ "hh""mm""ss" "',n}var or={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},SL={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},$0e={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function nv(n,e,t){for(var r=n<0?-1:1,i=n*r,s=0,a=1,o=0,l=1,u=0,f=0,d=Math.floor(i);u<e&&(d=Math.floor(i),o=d*a+s,f=d*u+l,!(i-d<5e-8));)i=1/(i-d),s=a,a=o,l=u,u=f;if(f>e&&(u>e?(f=l,o=s):(f=u,o=a)),!t)return[0,r*o,f];var g=Math.floor(r*o/f);return[g,r*o-g*f,f]}function ty(n,e,t){if(n>2958465||n<0)return null;var r=n|0,i=Math.floor(86400*(n-r)),s=0,a=[],o={D:r,T:i,u:86400*(n-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++r,++o.D)),r===60)a=t?[1317,10,29]:[1900,2,29],s=3;else if(r===0)a=t?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),t&&(s=Z0e(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var J7=new Date(1899,11,31,0,0,0),W0e=J7.getTime(),H0e=new Date(1900,2,1,0,0,0);function eV(n,e){var t=n.getTime();return e?t-=1461*24*60*60*1e3:n>=H0e&&(t+=1440*60*1e3),(t-(W0e+(n.getTimezoneOffset()-J7.getTimezoneOffset())*6e4))/(1440*60*1e3)}function EC(n){return n.indexOf(".")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function K0e(n){return n.indexOf("E")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Y0e(n){var e=n<0?12:11,t=EC(n.toFixed(12));return t.length<=e||(t=n.toPrecision(10),t.length<=e)?t:n.toExponential(5)}function X0e(n){var e=EC(n.toFixed(11));return e.length>(n<0?12:11)||e==="0"||e==="-0"?n.toPrecision(6):e}function q0e(n){var e=Math.floor(Math.log(Math.abs(n))*Math.LOG10E),t;return e>=-4&&e<=-1?t=n.toPrecision(10+e):Math.abs(e)<=9?t=Y0e(n):e===10?t=n.toFixed(10).substr(0,12):t=X0e(n),EC(K0e(t.toUpperCase()))}function xI(n,e){switch(typeof n){case"string":return n;case"boolean":return n?"TRUE":"FALSE";case"number":return(n|0)===n?n.toString(10):q0e(n);case"undefined":return"";case"object":if(n==null)return"";if(n instanceof Date)return lu(14,eV(n,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+n)}function Z0e(n,e){e[0]-=581;var t=n.getDay();return n<60&&(t=(t+6)%7),t}function Q0e(n,e,t,r){var i="",s=0,a=0,o=t.y,l,u=0;switch(n){case 98:o=t.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:l=t.m,u=e.length;break;case 3:return wS[t.m-1][1];case 5:return wS[t.m-1][0];default:return wS[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=t.d,u=e.length;break;case 3:return wL[t.q][0];default:return wL[t.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(t.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=t.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=t.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?Ua(t.S,e.length):(r>=2?a=r===3?1e3:100:a=r===1?10:1,s=Math.round(a*(t.S+t.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=Ua(s,2+r),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=t.D*24+t.H;break;case"[m]":case"[mm]":l=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":l=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:l=o,u=1;break}var f=u>0?Ua(l,u):"";return f}function Fc(n){var e=3;if(n.length<=e)return n;for(var t=n.length%e,r=n.substr(0,t);t!=n.length;t+=e)r+=(r.length>0?",":"")+n.substr(t,e);return r}var tV=/%/g;function J0e(n,e,t){var r=e.replace(tV,""),i=e.length-r.length;return Tl(n,r,t*Math.pow(10,2*i))+ir("%",i)}function ege(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Tl(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function nV(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+nV(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),t.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,i)+"."+t.substr(2+i),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,f){return l+u+f.substr(0,(i+s)%i)+"."+f.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var rV=/# (\?+)( ?)\/( ?)(\d+)/;function tge(n,e,t){var r=parseInt(n[4],10),i=Math.round(e*r),s=Math.floor(i/r),a=i-s*r,o=r;return t+(s===0?"":""+s)+" "+(a===0?ir(" ",n[1].length+1+n[4].length):vC(a,n[1].length)+n[2]+"/"+n[3]+Ua(o,n[4].length))}function nge(n,e,t){return t+(e===0?"":""+e)+ir(" ",n[1].length+2+n[4].length)}var iV=/^#*0*\.([0#]+)/,sV=/\).*[0#]/,aV=/\(###\) ###\\?-####/;function Oi(n){for(var e="",t,r=0;r!=n.length;++r)switch(t=n.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function TL(n,e){var t=Math.pow(10,e);return""+Math.round(n*t)/t}function IL(n,e){var t=n-Math.floor(n),r=Math.pow(10,e);return e<(""+Math.round(t*r)).length?0:Math.round(t*r)}function rge(n,e){return e<(""+Math.round((n-Math.floor(n))*Math.pow(10,e))).length?1:0}function ige(n){return n<2147483647&&n>-2147483648?""+(n>=0?n|0:n-1|0):""+Math.floor(n)}function ia(n,e,t){if(n.charCodeAt(0)===40&&!e.match(sV)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?ia("n",r,t):"("+ia("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return ege(n,e,t);if(e.indexOf("%")!==-1)return J0e(n,e,t);if(e.indexOf("E")!==-1)return nV(e,t);if(e.charCodeAt(0)===36)return"$"+ia(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,l=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+Zf(l,e.length);if(e.match(/^[#?]+$/))return i=Zf(t,0),i==="0"&&(i=""),i.length>e.length?i:Oi(e.substr(0,e.length-i.length))+i;if(s=e.match(rV))return tge(s,l,u);if(e.match(/^#+0+$/))return u+Zf(l,e.length-e.indexOf("0"));if(s=e.match(iV))return i=TL(t,s[1].length).replace(/^([^\.]+)$/,"$1."+Oi(s[1])).replace(/\.$/,"."+Oi(s[1])).replace(/\.(\d*)$/,function(v,y){return"."+y+ir("0",Oi(s[1]).length-y.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+TL(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Fc(Zf(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+ia(n,e,-t):Fc(""+(Math.floor(t)+rge(t,s[1].length)))+"."+Ua(IL(t,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return ia(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=jd(ia(n,e.replace(/[\\-]/g,""),t)),a=0,jd(jd(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return a<i.length?i.charAt(a++):v==="0"?"0":""}));if(e.match(aV))return i=ia(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var f="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=nv(l,Math.pow(10,a)-1,!1),i=""+u,f=Tl("n",s[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),i+=f+s[2]+"/"+s[3],f=ev(o[2],a),f.length<s[4].length&&(f=Oi(s[4].substr(s[4].length-f.length))+f),i+=f,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=nv(l,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?vC(o[1],a)+s[2]+"/"+s[3]+ev(o[2],a):ir(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=Zf(t,0),e.length<=i.length?i:Oi(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,g=e.length-i.length-d;return Oi(e.substr(0,d)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=IL(t,s[1].length),t<0?"-"+ia(n,e,-t):Fc(ige(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Ua(0,3-v.length):"")+v})+"."+Ua(a,s[1].length);switch(e){case"###,##0.00":return ia(n,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var p=Fc(Zf(l,0));return p!=="0"?u+p:"";case"###,###.00":return ia(n,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return ia(n,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function sge(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Tl(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function age(n,e,t){var r=e.replace(tV,""),i=e.length-r.length;return Tl(n,r,t*Math.pow(10,2*i))+ir("%",i)}function oV(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+oV(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),!t.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,f){return l+u+f.substr(0,(i+s)%i)+"."+f.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function mo(n,e,t){if(n.charCodeAt(0)===40&&!e.match(sV)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?mo("n",r,t):"("+mo("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return sge(n,e,t);if(e.indexOf("%")!==-1)return age(n,e,t);if(e.indexOf("E")!==-1)return oV(e,t);if(e.charCodeAt(0)===36)return"$"+mo(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,l=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+Ua(l,e.length);if(e.match(/^[#?]+$/))return i=""+t,t===0&&(i=""),i.length>e.length?i:Oi(e.substr(0,e.length-i.length))+i;if(s=e.match(rV))return nge(s,l,u);if(e.match(/^#+0+$/))return u+Ua(l,e.length-e.indexOf("0"));if(s=e.match(iV))return i=(""+t).replace(/^([^\.]+)$/,"$1."+Oi(s[1])).replace(/\.$/,"."+Oi(s[1])),i=i.replace(/\.(\d*)$/,function(v,y){return"."+y+ir("0",Oi(s[1]).length-y.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Fc(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+mo(n,e,-t):Fc(""+t)+"."+ir("0",s[1].length);if(s=e.match(/^#,#*,#0/))return mo(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=jd(mo(n,e.replace(/[\\-]/g,""),t)),a=0,jd(jd(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return a<i.length?i.charAt(a++):v==="0"?"0":""}));if(e.match(aV))return i=mo(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var f="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=nv(l,Math.pow(10,a)-1,!1),i=""+u,f=Tl("n",s[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),i+=f+s[2]+"/"+s[3],f=ev(o[2],a),f.length<s[4].length&&(f=Oi(s[4].substr(s[4].length-f.length))+f),i+=f,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=nv(l,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?vC(o[1],a)+s[2]+"/"+s[3]+ev(o[2],a):ir(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+t,e.length<=i.length?i:Oi(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,g=e.length-i.length-d;return Oi(e.substr(0,d)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+mo(n,e,-t):Fc(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Ua(0,3-v.length):"")+v})+"."+Ua(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var p=Fc(""+l);return p!=="0"?u+p:"";default:if(e.match(/\.[0#?]*$/))return mo(n,e.slice(0,e.lastIndexOf(".")),t)+Oi(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Tl(n,e,t){return(t|0)===t?mo(n,e,t):ia(n,e,t)}function oge(n){for(var e=[],t=!1,r=0,i=0;r<n.length;++r)switch(n.charCodeAt(r)){case 34:t=!t;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=n.substr(i,r-i),i=r+1}if(e[e.length]=n.substr(i),t===!0)throw new Error("Format |"+n+"| unterminated string ");return e}var lV=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function cV(n){for(var e=0,t="",r="";e<n.length;)switch(t=n.charAt(e)){case"G":tv(n,e)&&(e+=6),e++;break;case'"':for(;n.charCodeAt(++e)!==34&&e<n.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(n.charAt(e+1)==="1"||n.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(n.substr(e,3).toUpperCase()==="A/P"||n.substr(e,5).toUpperCase()==="AM/PM"||n.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=t;n.charAt(e++)!=="]"&&e<n.length;)r+=n.charAt(e);if(r.match(lV))return!0;break;case".":case"0":case"#":for(;e<n.length&&("0#?.,E+-%".indexOf(t=n.charAt(++e))>-1||t=="\\"&&n.charAt(e+1)=="-"&&"0#".indexOf(n.charAt(e+2))>-1););break;case"?":for(;n.charAt(++e)===t;);break;case"*":++e,(n.charAt(e)==" "||n.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<n.length&&"0123456789".indexOf(n.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function lge(n,e,t,r){for(var i=[],s="",a=0,o="",l="t",u,f,d,g="H";a<n.length;)switch(o=n.charAt(a)){case"G":if(!tv(n,a))throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(d=n.charCodeAt(++a))!==34&&a<n.length;)s+=String.fromCharCode(d);i[i.length]={t:"t",v:s},++a;break;case"\\":var p=n.charAt(++a),v=p==="("||p===")"?p:"t";i[i.length]={t:v,v:p},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(n.charAt(a+1)==="1"||n.charAt(a+1)==="2"){if(u==null&&(u=ty(e,t,n.charAt(a+1)==="2"),u==null))return"";i[i.length]={t:"X",v:n.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=ty(e,t),u==null))return"";for(s=o;++a<n.length&&n.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=g),i[i.length]={t:o,v:s},l=o;break;case"A":case"a":case"":var y={t:o,v:o};if(u==null&&(u=ty(e,t)),n.substr(a,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",g="h",a+=3):n.substr(a,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",a+=5,g="h"):n.substr(a,5).toUpperCase()==="/"?(u!=null&&(y.v=u.H>=12?"":""),y.t="T",a+=5,g="h"):(y.t="t",++a),u==null&&y.t==="T")return"";i[i.length]=y,l=o;break;case"[":for(s=o;n.charAt(a++)!=="]"&&a<n.length;)s+=n.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(lV)){if(u==null&&(u=ty(e,t),u==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",cV(n)||(i[i.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++a<n.length&&(o=n.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<n.length&&"0#?.,E+-%".indexOf(o=n.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;n.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},l=o;break;case"*":++a,(n.charAt(a)==" "||n.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:r===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<n.length&&"0123456789".indexOf(n.charAt(++a))>-1;)s+=n.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"t",v:o},++a;break}var E=0,T=0,R;for(a=i.length-1,l="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=g,l="h",E<1&&(E=1);break;case"s":(R=i[a].v.match(/\.0+$/))&&(T=Math.max(T,R[0].length-1)),E<3&&(E=3);case"d":case"y":case"M":case"e":l=i[a].t;break;case"m":l==="s"&&(i[a].t="M",E<2&&(E=2));break;case"X":break;case"Z":E<1&&i[a].v.match(/[Hh]/)&&(E=1),E<2&&i[a].v.match(/[Mm]/)&&(E=2),E<3&&i[a].v.match(/[Ss]/)&&(E=3)}switch(E){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var M="",k;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=Q0e(i[a].t.charCodeAt(0),i[a].v,u,T),i[a].t="t";break;case"n":case"?":for(k=a+1;i[k]!=null&&((o=i[k].t)==="?"||o==="D"||(o===" "||o==="t")&&i[k+1]!=null&&(i[k+1].t==="?"||i[k+1].t==="t"&&i[k+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[k].v==="/"||i[k].v===" "&&i[k+1]!=null&&i[k+1].t=="?"));)i[a].v+=i[k].v,i[k]={v:"",t:";"},++k;M+=i[a].v,a=k-1;break;case"G":i[a].t="t",i[a].v=xI(e,t);break}var V="",z,P;if(M.length>0){M.charCodeAt(0)==40?(z=e<0&&M.charCodeAt(0)===45?-e:e,P=Tl("n",M,z)):(z=e<0&&r>1?-e:e,P=Tl("n",M,z),z<0&&i[0]&&i[0].t=="t"&&(P=P.substr(1),i[0].v="-"+i[0].v)),k=P.length-1;var C=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){C=a;break}var b=i.length;if(C===i.length&&P.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(k>=i[a].v.length-1?(k-=i[a].v.length,i[a].v=P.substr(k+1,i[a].v.length)):k<0?i[a].v="":(i[a].v=P.substr(0,k+1),k=-1),i[a].t="t",b=a);k>=0&&b<i.length&&(i[b].v=P.substr(0,k+1)+i[b].v)}else if(C!==i.length&&P.indexOf("E")===-1){for(k=P.indexOf(".")-1,a=C;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(f=i[a].v.indexOf(".")>-1&&a===C?i[a].v.indexOf(".")-1:i[a].v.length-1,V=i[a].v.substr(f+1);f>=0;--f)k>=0&&(i[a].v.charAt(f)==="0"||i[a].v.charAt(f)==="#")&&(V=P.charAt(k--)+V);i[a].v=V,i[a].t="t",b=a}for(k>=0&&b<i.length&&(i[b].v=P.substr(0,k+1)+i[b].v),k=P.indexOf(".")+1,a=C;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==C)){for(f=i[a].v.indexOf(".")>-1&&a===C?i[a].v.indexOf(".")+1:0,V=i[a].v.substr(0,f);f<i[a].v.length;++f)k<P.length&&(V+=P.charAt(k++));i[a].v=V,i[a].t="t",b=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(z=r>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=Tl(i[a].t,i[a].v,z),i[a].t="t");var L="";for(a=0;a!==i.length;++a)i[a]!=null&&(L+=i[a].v);return L}var AL=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function RL(n,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(n==t)return!0;break;case">":if(n>t)return!0;break;case"<":if(n<t)return!0;break;case"<>":if(n!=t)return!0;break;case">=":if(n>=t)return!0;break;case"<=":if(n<=t)return!0;break}return!1}function cge(n,e){var t=oge(n),r=t.length,i=t[r-1].indexOf("@");if(r<4&&i>-1&&--r,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||i>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=i>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=i>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=i>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var s=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[r,s];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var a=t[0].match(AL),o=t[1].match(AL);return RL(e,a)?[r,t[0]]:RL(e,o)?[r,t[1]]:[r,t[a!=null&&o!=null?2:1]]}return[r,s]}function lu(n,e,t){t==null&&(t={});var r="";switch(typeof n){case"string":n=="m/d/yy"&&t.dateNF?r=t.dateNF:r=n;break;case"number":n==14&&t.dateNF?r=t.dateNF:r=(t.table!=null?t.table:or)[n],r==null&&(r=t.table&&t.table[SL[n]]||or[SL[n]]),r==null&&(r=$0e[n]||"General");break}if(tv(r,0))return xI(e,t);e instanceof Date&&(e=eV(e,t.date1904));var i=cge(r,e);if(tv(i[1]))return xI(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return lge(i[1],e,t,i[0])}function uV(n,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(or[t]==null){e<0&&(e=t);continue}if(or[t]==n){e=t;break}}e<0&&(e=391)}return or[e]=n,e}function AE(n){for(var e=0;e!=392;++e)n[e]!==void 0&&uV(n[e],e)}function RE(){or=z0e()}var hV=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function uge(n){var e=typeof n=="number"?or[n]:n;return e=e.replace(hV,"(\\d+)"),new RegExp("^"+e+"$")}function hge(n,e,t){var r=-1,i=-1,s=-1,a=-1,o=-1,l=-1;(e.match(hV)||[]).forEach(function(d,g){var p=parseInt(t[g+1],10);switch(d.toLowerCase().charAt(0)){case"y":r=p;break;case"d":s=p;break;case"h":a=p;break;case"s":l=p;break;case"m":a>=0?o=p:i=p;break}}),l>=0&&o==-1&&i>=0&&(o=i,i=-1);var u=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var f=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?u:r==-1&&i==-1&&s==-1?f:u+"T"+f}var fge=(function(){var n={};n.version="1.2.0";function e(){for(var P=0,C=new Array(256),b=0;b!=256;++b)P=b,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,C[b]=P;return typeof Int32Array<"u"?new Int32Array(C):C}var t=e();function r(P){var C=0,b=0,L=0,F=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(L=0;L!=256;++L)F[L]=P[L];for(L=0;L!=256;++L)for(b=P[L],C=256+L;C<4096;C+=256)b=F[C]=b>>>8^P[b&255];var U=[];for(L=1;L!=16;++L)U[L-1]=typeof Int32Array<"u"?F.subarray(L*256,L*256+256):F.slice(L*256,L*256+256);return U}var i=r(t),s=i[0],a=i[1],o=i[2],l=i[3],u=i[4],f=i[5],d=i[6],g=i[7],p=i[8],v=i[9],y=i[10],E=i[11],T=i[12],R=i[13],M=i[14];function k(P,C){for(var b=C^-1,L=0,F=P.length;L<F;)b=b>>>8^t[(b^P.charCodeAt(L++))&255];return~b}function V(P,C){for(var b=C^-1,L=P.length-15,F=0;F<L;)b=M[P[F++]^b&255]^R[P[F++]^b>>8&255]^T[P[F++]^b>>16&255]^E[P[F++]^b>>>24]^y[P[F++]]^v[P[F++]]^p[P[F++]]^g[P[F++]]^d[P[F++]]^f[P[F++]]^u[P[F++]]^l[P[F++]]^o[P[F++]]^a[P[F++]]^s[P[F++]]^t[P[F++]];for(L+=15;F<L;)b=b>>>8^t[(b^P[F++])&255];return~b}function z(P,C){for(var b=C^-1,L=0,F=P.length,U=0,j=0;L<F;)U=P.charCodeAt(L++),U<128?b=b>>>8^t[(b^U)&255]:U<2048?(b=b>>>8^t[(b^(192|U>>6&31))&255],b=b>>>8^t[(b^(128|U&63))&255]):U>=55296&&U<57344?(U=(U&1023)+64,j=P.charCodeAt(L++)&1023,b=b>>>8^t[(b^(240|U>>8&7))&255],b=b>>>8^t[(b^(128|U>>2&63))&255],b=b>>>8^t[(b^(128|j>>6&15|(U&3)<<4))&255],b=b>>>8^t[(b^(128|j&63))&255]):(b=b>>>8^t[(b^(224|U>>12&15))&255],b=b>>>8^t[(b^(128|U>>6&63))&255],b=b>>>8^t[(b^(128|U&63))&255]);return~b}return n.table=t,n.bstr=k,n.buf=V,n.str=z,n})(),Cn=(function(){var e={};e.version="1.2.1";function t(B,q){for(var K=B.split("/"),X=q.split("/"),Z=0,Q=0,_e=Math.min(K.length,X.length);Z<_e;++Z){if(Q=K[Z].length-X[Z].length)return Q;if(K[Z]!=X[Z])return K[Z]<X[Z]?-1:1}return K.length-X.length}function r(B){if(B.charAt(B.length-1)=="/")return B.slice(0,-1).indexOf("/")===-1?B:r(B.slice(0,-1));var q=B.lastIndexOf("/");return q===-1?B:B.slice(0,q+1)}function i(B){if(B.charAt(B.length-1)=="/")return i(B.slice(0,-1));var q=B.lastIndexOf("/");return q===-1?B:B.slice(q+1)}function s(B,q){typeof q=="string"&&(q=new Date(q));var K=q.getHours();K=K<<6|q.getMinutes(),K=K<<5|q.getSeconds()>>>1,B.write_shift(2,K);var X=q.getFullYear()-1980;X=X<<4|q.getMonth()+1,X=X<<5|q.getDate(),B.write_shift(2,X)}function a(B){var q=B.read_shift(2)&65535,K=B.read_shift(2)&65535,X=new Date,Z=K&31;K>>>=5;var Q=K&15;K>>>=4,X.setMilliseconds(0),X.setFullYear(K+1980),X.setMonth(Q-1),X.setDate(Z);var _e=q&31;q>>>=5;var Ce=q&63;return q>>>=6,X.setHours(q),X.setMinutes(Ce),X.setSeconds(_e<<1),X}function o(B){Ms(B,0);for(var q={},K=0;B.l<=B.length-4;){var X=B.read_shift(2),Z=B.read_shift(2),Q=B.l+Z,_e={};switch(X){case 21589:K=B.read_shift(1),K&1&&(_e.mtime=B.read_shift(4)),Z>5&&(K&2&&(_e.atime=B.read_shift(4)),K&4&&(_e.ctime=B.read_shift(4))),_e.mtime&&(_e.mt=new Date(_e.mtime*1e3));break}B.l=Q,q[X]=_e}return q}var l;function u(){return l||(l={})}function f(B,q){if(B[0]==80&&B[1]==75)return Vr(B,q);if((B[0]|32)==109&&(B[1]|32)==105)return Ar(B,q);if(B.length<512)throw new Error("CFB file size "+B.length+" < 512");var K=3,X=512,Z=0,Q=0,_e=0,Ce=0,pe=0,xe=[],ve=B.slice(0,512);Ms(ve,0);var je=d(ve);switch(K=je[0],K){case 3:X=512;break;case 4:X=4096;break;case 0:if(je[1]==0)return Vr(B,q);default:throw new Error("Major Version: Expected 3 or 4 saw "+K)}X!==512&&(ve=B.slice(0,X),Ms(ve,28));var Xe=B.slice(0,X);g(ve,K);var it=ve.read_shift(4,"i");if(K===3&&it!==0)throw new Error("# Directory Sectors: Expected 0 saw "+it);ve.l+=4,_e=ve.read_shift(4,"i"),ve.l+=4,ve.chk("00100000","Mini Stream Cutoff Size: "),Ce=ve.read_shift(4,"i"),Z=ve.read_shift(4,"i"),pe=ve.read_shift(4,"i"),Q=ve.read_shift(4,"i");for(var Ge=-1,Be=0;Be<109&&(Ge=ve.read_shift(4,"i"),!(Ge<0));++Be)xe[Be]=Ge;var Rt=p(B,X);E(pe,Q,Rt,X,xe);var hn=R(Rt,_e,xe,X);hn[_e].name="!Directory",Z>0&&Ce!==j&&(hn[Ce].name="!MiniFAT"),hn[xe[0]].name="!FAT",hn.fat_addrs=xe,hn.ssz=X;var _n={},Bn=[],Ea=[],Ys=[];M(_e,hn,Rt,Bn,Z,_n,Ea,Ce),v(Ea,Ys,Bn),Bn.shift();var Es={FileIndex:Ea,FullPaths:Ys};return q&&q.raw&&(Es.raw={header:Xe,sectors:Rt}),Es}function d(B){if(B[B.l]==80&&B[B.l+1]==75)return[0,0];B.chk(Te,"Header Signature: "),B.l+=16;var q=B.read_shift(2,"u");return[B.read_shift(2,"u"),q]}function g(B,q){var K=9;switch(B.l+=2,K=B.read_shift(2)){case 9:if(q!=3)throw new Error("Sector Shift: Expected 9 saw "+K);break;case 12:if(q!=4)throw new Error("Sector Shift: Expected 12 saw "+K);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+K)}B.chk("0600","Mini Sector Shift: "),B.chk("000000000000","Reserved: ")}function p(B,q){for(var K=Math.ceil(B.length/q)-1,X=[],Z=1;Z<K;++Z)X[Z-1]=B.slice(Z*q,(Z+1)*q);return X[K-1]=B.slice(K*q),X}function v(B,q,K){for(var X=0,Z=0,Q=0,_e=0,Ce=0,pe=K.length,xe=[],ve=[];X<pe;++X)xe[X]=ve[X]=X,q[X]=K[X];for(;Ce<ve.length;++Ce)X=ve[Ce],Z=B[X].L,Q=B[X].R,_e=B[X].C,xe[X]===X&&(Z!==-1&&xe[Z]!==Z&&(xe[X]=xe[Z]),Q!==-1&&xe[Q]!==Q&&(xe[X]=xe[Q])),_e!==-1&&(xe[_e]=X),Z!==-1&&X!=xe[X]&&(xe[Z]=xe[X],ve.lastIndexOf(Z)<Ce&&ve.push(Z)),Q!==-1&&X!=xe[X]&&(xe[Q]=xe[X],ve.lastIndexOf(Q)<Ce&&ve.push(Q));for(X=1;X<pe;++X)xe[X]===X&&(Q!==-1&&xe[Q]!==Q?xe[X]=xe[Q]:Z!==-1&&xe[Z]!==Z&&(xe[X]=xe[Z]));for(X=1;X<pe;++X)if(B[X].type!==0){if(Ce=X,Ce!=xe[Ce])do Ce=xe[Ce],q[X]=q[Ce]+"/"+q[X];while(Ce!==0&&xe[Ce]!==-1&&Ce!=xe[Ce]);xe[X]=-1}for(q[0]+="/",X=1;X<pe;++X)B[X].type!==2&&(q[X]+="/")}function y(B,q,K){for(var X=B.start,Z=B.size,Q=[],_e=X;K&&Z>0&&_e>=0;)Q.push(q.slice(_e*U,_e*U+U)),Z-=U,_e=rh(K,_e*4);return Q.length===0?Re(0):ci(Q).slice(0,B.size)}function E(B,q,K,X,Z){var Q=j;if(B===j){if(q!==0)throw new Error("DIFAT chain shorter than expected")}else if(B!==-1){var _e=K[B],Ce=(X>>>2)-1;if(!_e)return;for(var pe=0;pe<Ce&&(Q=rh(_e,pe*4))!==j;++pe)Z.push(Q);E(rh(_e,X-4),q-1,K,X,Z)}}function T(B,q,K,X,Z){var Q=[],_e=[];Z||(Z=[]);var Ce=X-1,pe=0,xe=0;for(pe=q;pe>=0;){Z[pe]=!0,Q[Q.length]=pe,_e.push(B[pe]);var ve=K[Math.floor(pe*4/X)];if(xe=pe*4&Ce,X<4+xe)throw new Error("FAT boundary crossed: "+pe+" 4 "+X);if(!B[ve])break;pe=rh(B[ve],xe)}return{nodes:Q,data:OL([_e])}}function R(B,q,K,X){var Z=B.length,Q=[],_e=[],Ce=[],pe=[],xe=X-1,ve=0,je=0,Xe=0,it=0;for(ve=0;ve<Z;++ve)if(Ce=[],Xe=ve+q,Xe>=Z&&(Xe-=Z),!_e[Xe]){pe=[];var Ge=[];for(je=Xe;je>=0;){Ge[je]=!0,_e[je]=!0,Ce[Ce.length]=je,pe.push(B[je]);var Be=K[Math.floor(je*4/X)];if(it=je*4&xe,X<4+it)throw new Error("FAT boundary crossed: "+je+" 4 "+X);if(!B[Be]||(je=rh(B[Be],it),Ge[je]))break}Q[Xe]={nodes:Ce,data:OL([pe])}}return Q}function M(B,q,K,X,Z,Q,_e,Ce){for(var pe=0,xe=X.length?2:0,ve=q[B].data,je=0,Xe=0,it;je<ve.length;je+=128){var Ge=ve.slice(je,je+128);Ms(Ge,64),Xe=Ge.read_shift(2),it=AC(Ge,0,Xe-xe),X.push(it);var Be={name:it,type:Ge.read_shift(1),color:Ge.read_shift(1),L:Ge.read_shift(4,"i"),R:Ge.read_shift(4,"i"),C:Ge.read_shift(4,"i"),clsid:Ge.read_shift(16),state:Ge.read_shift(4,"i"),start:0,size:0},Rt=Ge.read_shift(2)+Ge.read_shift(2)+Ge.read_shift(2)+Ge.read_shift(2);Rt!==0&&(Be.ct=k(Ge,Ge.l-8));var hn=Ge.read_shift(2)+Ge.read_shift(2)+Ge.read_shift(2)+Ge.read_shift(2);hn!==0&&(Be.mt=k(Ge,Ge.l-8)),Be.start=Ge.read_shift(4,"i"),Be.size=Ge.read_shift(4,"i"),Be.size<0&&Be.start<0&&(Be.size=Be.type=0,Be.start=j,Be.name=""),Be.type===5?(pe=Be.start,Z>0&&pe!==j&&(q[pe].name="!StreamData")):Be.size>=4096?(Be.storage="fat",q[Be.start]===void 0&&(q[Be.start]=T(K,Be.start,q.fat_addrs,q.ssz)),q[Be.start].name=Be.name,Be.content=q[Be.start].data.slice(0,Be.size)):(Be.storage="minifat",Be.size<0?Be.size=0:pe!==j&&Be.start!==j&&q[pe]&&(Be.content=y(Be,q[pe].data,(q[Ce]||{}).data))),Be.content&&Ms(Be.content,0),Q[it]=Be,_e.push(Be)}}function k(B,q){return new Date((Os(B,q+4)/1e7*Math.pow(2,32)+Os(B,q)/1e7-11644473600)*1e3)}function V(B,q){return u(),f(l.readFileSync(B),q)}function z(B,q){var K=q&&q.type;switch(K||on&&Buffer.isBuffer(B)&&(K="buffer"),K||"base64"){case"file":return V(B,q);case"base64":return f(Va(Nl(B)),q);case"binary":return f(Va(B),q)}return f(B,q)}function P(B,q){var K=q||{},X=K.root||"Root Entry";if(B.FullPaths||(B.FullPaths=[]),B.FileIndex||(B.FileIndex=[]),B.FullPaths.length!==B.FileIndex.length)throw new Error("inconsistent CFB structure");B.FullPaths.length===0&&(B.FullPaths[0]=X+"/",B.FileIndex[0]={name:X,type:5}),K.CLSID&&(B.FileIndex[0].clsid=K.CLSID),C(B)}function C(B){var q="Sh33tJ5";if(!Cn.find(B,"/"+q)){var K=Re(4);K[0]=55,K[1]=K[3]=50,K[2]=54,B.FileIndex.push({name:q,type:2,content:K,size:4,L:69,R:69,C:69}),B.FullPaths.push(B.FullPaths[0]+q),b(B)}}function b(B,q){P(B);for(var K=!1,X=!1,Z=B.FullPaths.length-1;Z>=0;--Z){var Q=B.FileIndex[Z];switch(Q.type){case 0:X?K=!0:(B.FileIndex.pop(),B.FullPaths.pop());break;case 1:case 2:case 5:X=!0,isNaN(Q.R*Q.L*Q.C)&&(K=!0),Q.R>-1&&Q.L>-1&&Q.R==Q.L&&(K=!0);break;default:K=!0;break}}if(!(!K&&!q)){var _e=new Date(1987,1,19),Ce=0,pe=Object.create?Object.create(null):{},xe=[];for(Z=0;Z<B.FullPaths.length;++Z)pe[B.FullPaths[Z]]=!0,B.FileIndex[Z].type!==0&&xe.push([B.FullPaths[Z],B.FileIndex[Z]]);for(Z=0;Z<xe.length;++Z){var ve=r(xe[Z][0]);X=pe[ve],X||(xe.push([ve,{name:i(ve).replace("/",""),type:1,clsid:Ue,ct:_e,mt:_e,content:null}]),pe[ve]=!0)}for(xe.sort(function(it,Ge){return t(it[0],Ge[0])}),B.FullPaths=[],B.FileIndex=[],Z=0;Z<xe.length;++Z)B.FullPaths[Z]=xe[Z][0],B.FileIndex[Z]=xe[Z][1];for(Z=0;Z<xe.length;++Z){var je=B.FileIndex[Z],Xe=B.FullPaths[Z];if(je.name=i(Xe).replace("/",""),je.L=je.R=je.C=-(je.color=1),je.size=je.content?je.content.length:0,je.start=0,je.clsid=je.clsid||Ue,Z===0)je.C=xe.length>1?1:-1,je.size=0,je.type=5;else if(Xe.slice(-1)=="/"){for(Ce=Z+1;Ce<xe.length&&r(B.FullPaths[Ce])!=Xe;++Ce);for(je.C=Ce>=xe.length?-1:Ce,Ce=Z+1;Ce<xe.length&&r(B.FullPaths[Ce])!=r(Xe);++Ce);je.R=Ce>=xe.length?-1:Ce,je.type=1}else r(B.FullPaths[Z+1]||"")==r(Xe)&&(je.R=Z+1),je.type=2}}}function L(B,q){var K=q||{};if(K.fileType=="mad")return Rr(B,K);switch(b(B),K.fileType){case"zip":return un(B,K)}var X=(function(it){for(var Ge=0,Be=0,Rt=0;Rt<it.FileIndex.length;++Rt){var hn=it.FileIndex[Rt];if(hn.content){var _n=hn.content.length;_n>0&&(_n<4096?Ge+=_n+63>>6:Be+=_n+511>>9)}}for(var Bn=it.FullPaths.length+3>>2,Ea=Ge+7>>3,Ys=Ge+127>>7,Es=Ea+Be+Bn+Ys,cr=Es+127>>7,Bl=cr<=109?0:Math.ceil((cr-109)/127);Es+cr+Bl+127>>7>cr;)Bl=++cr<=109?0:Math.ceil((cr-109)/127);var Kn=[1,Bl,cr,Ys,Bn,Be,Ge,0];return it.FileIndex[0].size=Ge<<6,Kn[7]=(it.FileIndex[0].start=Kn[0]+Kn[1]+Kn[2]+Kn[3]+Kn[4]+Kn[5])+(Kn[6]+7>>3),Kn})(B),Z=Re(X[7]<<9),Q=0,_e=0;{for(Q=0;Q<8;++Q)Z.write_shift(1,Me[Q]);for(Q=0;Q<8;++Q)Z.write_shift(2,0);for(Z.write_shift(2,62),Z.write_shift(2,3),Z.write_shift(2,65534),Z.write_shift(2,9),Z.write_shift(2,6),Q=0;Q<3;++Q)Z.write_shift(2,0);for(Z.write_shift(4,0),Z.write_shift(4,X[2]),Z.write_shift(4,X[0]+X[1]+X[2]+X[3]-1),Z.write_shift(4,0),Z.write_shift(4,4096),Z.write_shift(4,X[3]?X[0]+X[1]+X[2]-1:j),Z.write_shift(4,X[3]),Z.write_shift(-4,X[1]?X[0]-1:j),Z.write_shift(4,X[1]),Q=0;Q<109;++Q)Z.write_shift(-4,Q<X[2]?X[1]+Q:-1)}if(X[1])for(_e=0;_e<X[1];++_e){for(;Q<236+_e*127;++Q)Z.write_shift(-4,Q<X[2]?X[1]+Q:-1);Z.write_shift(-4,_e===X[1]-1?j:_e+1)}var Ce=function(it){for(_e+=it;Q<_e-1;++Q)Z.write_shift(-4,Q+1);it&&(++Q,Z.write_shift(-4,j))};for(_e=Q=0,_e+=X[1];Q<_e;++Q)Z.write_shift(-4,ke.DIFSECT);for(_e+=X[2];Q<_e;++Q)Z.write_shift(-4,ke.FATSECT);Ce(X[3]),Ce(X[4]);for(var pe=0,xe=0,ve=B.FileIndex[0];pe<B.FileIndex.length;++pe)ve=B.FileIndex[pe],ve.content&&(xe=ve.content.length,!(xe<4096)&&(ve.start=_e,Ce(xe+511>>9)));for(Ce(X[6]+7>>3);Z.l&511;)Z.write_shift(-4,ke.ENDOFCHAIN);for(_e=Q=0,pe=0;pe<B.FileIndex.length;++pe)ve=B.FileIndex[pe],ve.content&&(xe=ve.content.length,!(!xe||xe>=4096)&&(ve.start=_e,Ce(xe+63>>6)));for(;Z.l&511;)Z.write_shift(-4,ke.ENDOFCHAIN);for(Q=0;Q<X[4]<<2;++Q){var je=B.FullPaths[Q];if(!je||je.length===0){for(pe=0;pe<17;++pe)Z.write_shift(4,0);for(pe=0;pe<3;++pe)Z.write_shift(4,-1);for(pe=0;pe<12;++pe)Z.write_shift(4,0);continue}ve=B.FileIndex[Q],Q===0&&(ve.start=ve.size?ve.start-1:j);var Xe=Q===0&&K.root||ve.name;if(xe=2*(Xe.length+1),Z.write_shift(64,Xe,"utf16le"),Z.write_shift(2,xe),Z.write_shift(1,ve.type),Z.write_shift(1,ve.color),Z.write_shift(-4,ve.L),Z.write_shift(-4,ve.R),Z.write_shift(-4,ve.C),ve.clsid)Z.write_shift(16,ve.clsid,"hex");else for(pe=0;pe<4;++pe)Z.write_shift(4,0);Z.write_shift(4,ve.state||0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,ve.start),Z.write_shift(4,ve.size),Z.write_shift(4,0)}for(Q=1;Q<B.FileIndex.length;++Q)if(ve=B.FileIndex[Q],ve.size>=4096)if(Z.l=ve.start+1<<9,on&&Buffer.isBuffer(ve.content))ve.content.copy(Z,Z.l,0,ve.size),Z.l+=ve.size+511&-512;else{for(pe=0;pe<ve.size;++pe)Z.write_shift(1,ve.content[pe]);for(;pe&511;++pe)Z.write_shift(1,0)}for(Q=1;Q<B.FileIndex.length;++Q)if(ve=B.FileIndex[Q],ve.size>0&&ve.size<4096)if(on&&Buffer.isBuffer(ve.content))ve.content.copy(Z,Z.l,0,ve.size),Z.l+=ve.size+63&-64;else{for(pe=0;pe<ve.size;++pe)Z.write_shift(1,ve.content[pe]);for(;pe&63;++pe)Z.write_shift(1,0)}if(on)Z.l=Z.length;else for(;Z.l<Z.length;)Z.write_shift(1,0);return Z}function F(B,q){var K=B.FullPaths.map(function(pe){return pe.toUpperCase()}),X=K.map(function(pe){var xe=pe.split("/");return xe[xe.length-(pe.slice(-1)=="/"?2:1)]}),Z=!1;q.charCodeAt(0)===47?(Z=!0,q=K[0].slice(0,-1)+q):Z=q.indexOf("/")!==-1;var Q=q.toUpperCase(),_e=Z===!0?K.indexOf(Q):X.indexOf(Q);if(_e!==-1)return B.FileIndex[_e];var Ce=!Q.match(ey);for(Q=Q.replace(Am,""),Ce&&(Q=Q.replace(ey,"!")),_e=0;_e<K.length;++_e)if((Ce?K[_e].replace(ey,"!"):K[_e]).replace(Am,"")==Q||(Ce?X[_e].replace(ey,"!"):X[_e]).replace(Am,"")==Q)return B.FileIndex[_e];return null}var U=64,j=-2,Te="d0cf11e0a1b11ae1",Me=[208,207,17,224,161,177,26,225],Ue="00000000000000000000000000000000",ke={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:j,FREESECT:-1,HEADER_SIGNATURE:Te,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Ue,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function le(B,q,K){u();var X=L(B,K);l.writeFileSync(q,X)}function Ae(B){for(var q=new Array(B.length),K=0;K<B.length;++K)q[K]=String.fromCharCode(B[K]);return q.join("")}function Ie(B,q){var K=L(B,q);switch(q&&q.type||"buffer"){case"file":return u(),l.writeFileSync(q.filename,K),K;case"binary":return typeof K=="string"?K:Ae(K);case"base64":return vp(typeof K=="string"?K:Ae(K));case"buffer":if(on)return Buffer.isBuffer(K)?K:Gl(K);case"array":return typeof K=="string"?Va(K):K}return K}var Y;function O(B){try{var q=B.InflateRaw,K=new q;if(K._processChunk(new Uint8Array([3,0]),K._finishFlushFlag),K.bytesRead)Y=B;else throw new Error("zlib does not expose bytesRead")}catch(X){console.error("cannot use native zlib: "+(X.message||X))}}function te(B,q){if(!Y)return _s(B,q);var K=Y.InflateRaw,X=new K,Z=X._processChunk(B.slice(B.l),X._finishFlushFlag);return B.l+=X.bytesRead,Z}function ne(B){return Y?Y.deflateRawSync(B):ms(B)}var ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],me=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Se=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Ne(B){var q=(B<<1|B<<11)&139536|(B<<5|B<<15)&558144;return(q>>16|q>>8|q)&255}for(var se=typeof Uint8Array<"u",re=se?new Uint8Array(256):[],D=0;D<256;++D)re[D]=Ne(D);function Ye(B,q){var K=re[B&255];return q<=8?K>>>8-q:(K=K<<8|re[B>>8&255],q<=16?K>>>16-q:(K=K<<8|re[B>>16&255],K>>>24-q))}function he(B,q){var K=q&7,X=q>>>3;return(B[X]|(K<=6?0:B[X+1]<<8))>>>K&3}function He(B,q){var K=q&7,X=q>>>3;return(B[X]|(K<=5?0:B[X+1]<<8))>>>K&7}function ue(B,q){var K=q&7,X=q>>>3;return(B[X]|(K<=4?0:B[X+1]<<8))>>>K&15}function W(B,q){var K=q&7,X=q>>>3;return(B[X]|(K<=3?0:B[X+1]<<8))>>>K&31}function ae(B,q){var K=q&7,X=q>>>3;return(B[X]|(K<=1?0:B[X+1]<<8))>>>K&127}function lt(B,q,K){var X=q&7,Z=q>>>3,Q=(1<<K)-1,_e=B[Z]>>>X;return K<8-X||(_e|=B[Z+1]<<8-X,K<16-X)||(_e|=B[Z+2]<<16-X,K<24-X)||(_e|=B[Z+3]<<24-X),_e&Q}function ot(B,q,K){var X=q&7,Z=q>>>3;return X<=5?B[Z]|=(K&7)<<X:(B[Z]|=K<<X&255,B[Z+1]=(K&7)>>8-X),q+3}function gt(B,q,K){var X=q&7,Z=q>>>3;return K=(K&1)<<X,B[Z]|=K,q+1}function Ot(B,q,K){var X=q&7,Z=q>>>3;return K<<=X,B[Z]|=K&255,K>>>=8,B[Z+1]=K,q+8}function Rn(B,q,K){var X=q&7,Z=q>>>3;return K<<=X,B[Z]|=K&255,K>>>=8,B[Z+1]=K&255,B[Z+2]=K>>>8,q+16}function Yt(B,q){var K=B.length,X=2*K>q?2*K:q+5,Z=0;if(K>=q)return B;if(on){var Q=vL(X);if(B.copy)B.copy(Q);else for(;Z<B.length;++Z)Q[Z]=B[Z];return Q}else if(se){var _e=new Uint8Array(X);if(_e.set)_e.set(B);else for(;Z<K;++Z)_e[Z]=B[Z];return _e}return B.length=X,B}function Ln(B){for(var q=new Array(B),K=0;K<B;++K)q[K]=0;return q}function gr(B,q,K){var X=1,Z=0,Q=0,_e=0,Ce=0,pe=B.length,xe=se?new Uint16Array(32):Ln(32);for(Q=0;Q<32;++Q)xe[Q]=0;for(Q=pe;Q<K;++Q)B[Q]=0;pe=B.length;var ve=se?new Uint16Array(pe):Ln(pe);for(Q=0;Q<pe;++Q)xe[Z=B[Q]]++,X<Z&&(X=Z),ve[Q]=0;for(xe[0]=0,Q=1;Q<=X;++Q)xe[Q+16]=Ce=Ce+xe[Q-1]<<1;for(Q=0;Q<pe;++Q)Ce=B[Q],Ce!=0&&(ve[Q]=xe[Ce+16]++);var je=0;for(Q=0;Q<pe;++Q)if(je=B[Q],je!=0)for(Ce=Ye(ve[Q],X)>>X-je,_e=(1<<X+4-je)-1;_e>=0;--_e)q[Ce|_e<<je]=je&15|Q<<4;return X}var Wi=se?new Uint16Array(512):Ln(512),Mi=se?new Uint16Array(32):Ln(32);if(!se){for(var Fr=0;Fr<512;++Fr)Wi[Fr]=0;for(Fr=0;Fr<32;++Fr)Mi[Fr]=0}(function(){for(var B=[],q=0;q<32;q++)B.push(5);gr(B,Mi,32);var K=[];for(q=0;q<=143;q++)K.push(8);for(;q<=255;q++)K.push(9);for(;q<=279;q++)K.push(7);for(;q<=287;q++)K.push(8);gr(K,Wi,288)})();var Wo=(function(){for(var q=se?new Uint8Array(32768):[],K=0,X=0;K<Se.length-1;++K)for(;X<Se[K+1];++X)q[X]=K;for(;X<32768;++X)q[X]=29;var Z=se?new Uint8Array(259):[];for(K=0,X=0;K<me.length-1;++K)for(;X<me[K+1];++X)Z[X]=K;function Q(Ce,pe){for(var xe=0;xe<Ce.length;){var ve=Math.min(65535,Ce.length-xe),je=xe+ve==Ce.length;for(pe.write_shift(1,+je),pe.write_shift(2,ve),pe.write_shift(2,~ve&65535);ve-- >0;)pe[pe.l++]=Ce[xe++]}return pe.l}function _e(Ce,pe){for(var xe=0,ve=0,je=se?new Uint16Array(32768):[];ve<Ce.length;){var Xe=Math.min(65535,Ce.length-ve);if(Xe<10){for(xe=ot(pe,xe,+(ve+Xe==Ce.length)),xe&7&&(xe+=8-(xe&7)),pe.l=xe/8|0,pe.write_shift(2,Xe),pe.write_shift(2,~Xe&65535);Xe-- >0;)pe[pe.l++]=Ce[ve++];xe=pe.l*8;continue}xe=ot(pe,xe,+(ve+Xe==Ce.length)+2);for(var it=0;Xe-- >0;){var Ge=Ce[ve];it=(it<<5^Ge)&32767;var Be=-1,Rt=0;if((Be=je[it])&&(Be|=ve&-32768,Be>ve&&(Be-=32768),Be<ve))for(;Ce[Be+Rt]==Ce[ve+Rt]&&Rt<250;)++Rt;if(Rt>2){Ge=Z[Rt],Ge<=22?xe=Ot(pe,xe,re[Ge+1]>>1)-1:(Ot(pe,xe,3),xe+=5,Ot(pe,xe,re[Ge-23]>>5),xe+=3);var hn=Ge<8?0:Ge-4>>2;hn>0&&(Rn(pe,xe,Rt-me[Ge]),xe+=hn),Ge=q[ve-Be],xe=Ot(pe,xe,re[Ge]>>3),xe-=3;var _n=Ge<4?0:Ge-2>>1;_n>0&&(Rn(pe,xe,ve-Be-Se[Ge]),xe+=_n);for(var Bn=0;Bn<Rt;++Bn)je[it]=ve&32767,it=(it<<5^Ce[ve])&32767,++ve;Xe-=Rt-1}else Ge<=143?Ge=Ge+48:xe=gt(pe,xe,1),xe=Ot(pe,xe,re[Ge]),je[it]=ve&32767,++ve}xe=Ot(pe,xe,0)-1}return pe.l=(xe+7)/8|0,pe.l}return function(pe,xe){return pe.length<8?Q(pe,xe):_e(pe,xe)}})();function ms(B){var q=Re(50+Math.floor(B.length*1.1)),K=Wo(B,q);return q.slice(0,K)}var ki=se?new Uint16Array(32768):Ln(32768),Ho=se?new Uint16Array(32768):Ln(32768),ps=se?new Uint16Array(128):Ln(128),Ks=1,xa=1;function Zr(B,q){var K=W(B,q)+257;q+=5;var X=W(B,q)+1;q+=5;var Z=ue(B,q)+4;q+=4;for(var Q=0,_e=se?new Uint8Array(19):Ln(19),Ce=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],pe=1,xe=se?new Uint8Array(8):Ln(8),ve=se?new Uint8Array(8):Ln(8),je=_e.length,Xe=0;Xe<Z;++Xe)_e[ee[Xe]]=Q=He(B,q),pe<Q&&(pe=Q),xe[Q]++,q+=3;var it=0;for(xe[0]=0,Xe=1;Xe<=pe;++Xe)ve[Xe]=it=it+xe[Xe-1]<<1;for(Xe=0;Xe<je;++Xe)(it=_e[Xe])!=0&&(Ce[Xe]=ve[it]++);var Ge=0;for(Xe=0;Xe<je;++Xe)if(Ge=_e[Xe],Ge!=0){it=re[Ce[Xe]]>>8-Ge;for(var Be=(1<<7-Ge)-1;Be>=0;--Be)ps[it|Be<<Ge]=Ge&7|Xe<<3}var Rt=[];for(pe=1;Rt.length<K+X;)switch(it=ps[ae(B,q)],q+=it&7,it>>>=3){case 16:for(Q=3+he(B,q),q+=2,it=Rt[Rt.length-1];Q-- >0;)Rt.push(it);break;case 17:for(Q=3+He(B,q),q+=3;Q-- >0;)Rt.push(0);break;case 18:for(Q=11+ae(B,q),q+=7;Q-- >0;)Rt.push(0);break;default:Rt.push(it),pe<it&&(pe=it);break}var hn=Rt.slice(0,K),_n=Rt.slice(K);for(Xe=K;Xe<286;++Xe)hn[Xe]=0;for(Xe=X;Xe<30;++Xe)_n[Xe]=0;return Ks=gr(hn,ki,286),xa=gr(_n,Ho,30),q}function va(B,q){if(B[0]==3&&!(B[1]&3))return[Bh(q),2];for(var K=0,X=0,Z=vL(q||1<<18),Q=0,_e=Z.length>>>0,Ce=0,pe=0;(X&1)==0;){if(X=He(B,K),K+=3,X>>>1)X>>1==1?(Ce=9,pe=5):(K=Zr(B,K),Ce=Ks,pe=xa);else{K&7&&(K+=8-(K&7));var xe=B[K>>>3]|B[(K>>>3)+1]<<8;if(K+=32,xe>0)for(!q&&_e<Q+xe&&(Z=Yt(Z,Q+xe),_e=Z.length);xe-- >0;)Z[Q++]=B[K>>>3],K+=8;continue}for(;;){!q&&_e<Q+32767&&(Z=Yt(Z,Q+32767),_e=Z.length);var ve=lt(B,K,Ce),je=X>>>1==1?Wi[ve]:ki[ve];if(K+=je&15,je>>>=4,(je>>>8&255)===0)Z[Q++]=je;else{if(je==256)break;je-=257;var Xe=je<8?0:je-4>>2;Xe>5&&(Xe=0);var it=Q+me[je];Xe>0&&(it+=lt(B,K,Xe),K+=Xe),ve=lt(B,K,pe),je=X>>>1==1?Mi[ve]:Ho[ve],K+=je&15,je>>>=4;var Ge=je<4?0:je-2>>1,Be=Se[je];for(Ge>0&&(Be+=lt(B,K,Ge),K+=Ge),!q&&_e<it&&(Z=Yt(Z,it+100),_e=Z.length);Q<it;)Z[Q]=Z[Q-Be],++Q}}}return q?[Z,K+7>>>3]:[Z.slice(0,Q),K+7>>>3]}function _s(B,q){var K=B.slice(B.l||0),X=va(K,q);return B.l+=X[1],X[0]}function ys(B,q){if(B)typeof console<"u"&&console.error(q);else throw new Error(q)}function Vr(B,q){var K=B;Ms(K,0);var X=[],Z=[],Q={FileIndex:X,FullPaths:Z};P(Q,{root:q.root});for(var _e=K.length-4;(K[_e]!=80||K[_e+1]!=75||K[_e+2]!=5||K[_e+3]!=6)&&_e>=0;)--_e;K.l=_e+4,K.l+=4;var Ce=K.read_shift(2);K.l+=6;var pe=K.read_shift(4);for(K.l=pe,_e=0;_e<Ce;++_e){K.l+=20;var xe=K.read_shift(4),ve=K.read_shift(4),je=K.read_shift(2),Xe=K.read_shift(2),it=K.read_shift(2);K.l+=8;var Ge=K.read_shift(4),Be=o(K.slice(K.l+je,K.l+je+Xe));K.l+=je+Xe+it;var Rt=K.l;K.l=Ge+4,Qr(K,xe,ve,Q,Be),K.l=Rt}return Q}function Qr(B,q,K,X,Z){B.l+=2;var Q=B.read_shift(2),_e=B.read_shift(2),Ce=a(B);if(Q&8257)throw new Error("Unsupported ZIP encryption");for(var pe=B.read_shift(4),xe=B.read_shift(4),ve=B.read_shift(4),je=B.read_shift(2),Xe=B.read_shift(2),it="",Ge=0;Ge<je;++Ge)it+=String.fromCharCode(B[B.l++]);if(Xe){var Be=o(B.slice(B.l,B.l+Xe));(Be[21589]||{}).mt&&(Ce=Be[21589].mt),((Z||{})[21589]||{}).mt&&(Ce=Z[21589].mt)}B.l+=Xe;var Rt=B.slice(B.l,B.l+xe);switch(_e){case 8:Rt=te(B,ve);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+_e)}var hn=!1;Q&8&&(pe=B.read_shift(4),pe==134695760&&(pe=B.read_shift(4),hn=!0),xe=B.read_shift(4),ve=B.read_shift(4)),xe!=q&&ys(hn,"Bad compressed size: "+q+" != "+xe),ve!=K&&ys(hn,"Bad uncompressed size: "+K+" != "+ve),Wt(X,it,Rt,{unsafe:!0,mt:Ce})}function un(B,q){var K=q||{},X=[],Z=[],Q=Re(1),_e=K.compression?8:0,Ce=0,pe=0,xe=0,ve=0,je=0,Xe=B.FullPaths[0],it=Xe,Ge=B.FileIndex[0],Be=[],Rt=0;for(pe=1;pe<B.FullPaths.length;++pe)if(it=B.FullPaths[pe].slice(Xe.length),Ge=B.FileIndex[pe],!(!Ge.size||!Ge.content||it=="Sh33tJ5")){var hn=ve,_n=Re(it.length);for(xe=0;xe<it.length;++xe)_n.write_shift(1,it.charCodeAt(xe)&127);_n=_n.slice(0,_n.l),Be[je]=fge.buf(Ge.content,0);var Bn=Ge.content;_e==8&&(Bn=ne(Bn)),Q=Re(30),Q.write_shift(4,67324752),Q.write_shift(2,20),Q.write_shift(2,Ce),Q.write_shift(2,_e),Ge.mt?s(Q,Ge.mt):Q.write_shift(4,0),Q.write_shift(-4,Be[je]),Q.write_shift(4,Bn.length),Q.write_shift(4,Ge.content.length),Q.write_shift(2,_n.length),Q.write_shift(2,0),ve+=Q.length,X.push(Q),ve+=_n.length,X.push(_n),ve+=Bn.length,X.push(Bn),Q=Re(46),Q.write_shift(4,33639248),Q.write_shift(2,0),Q.write_shift(2,20),Q.write_shift(2,Ce),Q.write_shift(2,_e),Q.write_shift(4,0),Q.write_shift(-4,Be[je]),Q.write_shift(4,Bn.length),Q.write_shift(4,Ge.content.length),Q.write_shift(2,_n.length),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(4,0),Q.write_shift(4,hn),Rt+=Q.l,Z.push(Q),Rt+=_n.length,Z.push(_n),++je}return Q=Re(22),Q.write_shift(4,101010256),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(2,je),Q.write_shift(2,je),Q.write_shift(4,Rt),Q.write_shift(4,ve),Q.write_shift(2,0),ci([ci(X),ci(Z),Q])}var xs={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function vs(B,q){if(B.ctype)return B.ctype;var K=B.name||"",X=K.match(/\.([^\.]+)$/);return X&&xs[X[1]]||q&&(X=(K=q).match(/[\.\\]([^\.\\])+$/),X&&xs[X[1]])?xs[X[1]]:"application/octet-stream"}function Wn(B){for(var q=vp(B),K=[],X=0;X<q.length;X+=76)K.push(q.slice(X,X+76));return K.join(`\r
`)+`\r
`}function Hi(B){var q=B.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(xe){var ve=xe.charCodeAt(0).toString(16).toUpperCase();return"="+(ve.length==1?"0"+ve:ve)});q=q.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),q.charAt(0)==`
`&&(q="=0D"+q.slice(1)),q=q.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var K=[],X=q.split(`\r
`),Z=0;Z<X.length;++Z){var Q=X[Z];if(Q.length==0){K.push("");continue}for(var _e=0;_e<Q.length;){var Ce=76,pe=Q.slice(_e,_e+Ce);pe.charAt(Ce-1)=="="?Ce--:pe.charAt(Ce-2)=="="?Ce-=2:pe.charAt(Ce-3)=="="&&(Ce-=3),pe=Q.slice(_e,_e+Ce),_e+=Ce,_e<Q.length&&(pe+="="),K.push(pe)}}return K.join(`\r
`)}function Ir(B){for(var q=[],K=0;K<B.length;++K){for(var X=B[K];K<=B.length&&X.charAt(X.length-1)=="=";)X=X.slice(0,X.length-1)+B[++K];q.push(X)}for(var Z=0;Z<q.length;++Z)q[Z]=q[Z].replace(/[=][0-9A-Fa-f]{2}/g,function(Q){return String.fromCharCode(parseInt(Q.slice(1),16))});return Va(q.join(`\r
`))}function Hn(B,q,K){for(var X="",Z="",Q="",_e,Ce=0;Ce<10;++Ce){var pe=q[Ce];if(!pe||pe.match(/^\s*$/))break;var xe=pe.match(/^(.*?):\s*([^\s].*)$/);if(xe)switch(xe[1].toLowerCase()){case"content-location":X=xe[2].trim();break;case"content-type":Q=xe[2].trim();break;case"content-transfer-encoding":Z=xe[2].trim();break}}switch(++Ce,Z.toLowerCase()){case"base64":_e=Va(Nl(q.slice(Ce).join("")));break;case"quoted-printable":_e=Ir(q.slice(Ce));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Z)}var ve=Wt(B,X.slice(K.length),_e,{unsafe:!0});Q&&(ve.ctype=Q)}function Ar(B,q){if(Ae(B.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var K=q&&q.root||"",X=(on&&Buffer.isBuffer(B)?B.toString("binary"):Ae(B)).split(`\r
`),Z=0,Q="";for(Z=0;Z<X.length;++Z)if(Q=X[Z],!!/^Content-Location:/i.test(Q)&&(Q=Q.slice(Q.indexOf("file")),K||(K=Q.slice(0,Q.lastIndexOf("/")+1)),Q.slice(0,K.length)!=K))for(;K.length>0&&(K=K.slice(0,K.length-1),K=K.slice(0,K.lastIndexOf("/")+1),Q.slice(0,K.length)!=K););var _e=(X[1]||"").match(/boundary="(.*?)"/);if(!_e)throw new Error("MAD cannot find boundary");var Ce="--"+(_e[1]||""),pe=[],xe=[],ve={FileIndex:pe,FullPaths:xe};P(ve);var je,Xe=0;for(Z=0;Z<X.length;++Z){var it=X[Z];it!==Ce&&it!==Ce+"--"||(Xe++&&Hn(ve,X.slice(je,Z),K),je=Z)}return ve}function Rr(B,q){var K=q||{},X=K.boundary||"SheetJS";X="------="+X;for(var Z=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+X.slice(2)+'"',"","",""],Q=B.FullPaths[0],_e=Q,Ce=B.FileIndex[0],pe=1;pe<B.FullPaths.length;++pe)if(_e=B.FullPaths[pe].slice(Q.length),Ce=B.FileIndex[pe],!(!Ce.size||!Ce.content||_e=="Sh33tJ5")){_e=_e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Rt){return"_x"+Rt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Rt){return"_u"+Rt.charCodeAt(0).toString(16)+"_"});for(var xe=Ce.content,ve=on&&Buffer.isBuffer(xe)?xe.toString("binary"):Ae(xe),je=0,Xe=Math.min(1024,ve.length),it=0,Ge=0;Ge<=Xe;++Ge)(it=ve.charCodeAt(Ge))>=32&&it<128&&++je;var Be=je>=Xe*4/5;Z.push(X),Z.push("Content-Location: "+(K.root||"file:///C:/SheetJS/")+_e),Z.push("Content-Transfer-Encoding: "+(Be?"quoted-printable":"base64")),Z.push("Content-Type: "+vs(Ce,_e)),Z.push(""),Z.push(Be?Hi(ve):Wn(ve))}return Z.push(X+`--\r
`),Z.join(`\r
`)}function mr(B){var q={};return P(q,B),q}function Wt(B,q,K,X){var Z=X&&X.unsafe;Z||P(B);var Q=!Z&&Cn.find(B,q);if(!Q){var _e=B.FullPaths[0];q.slice(0,_e.length)==_e?_e=q:(_e.slice(-1)!="/"&&(_e+="/"),_e=(_e+q).replace("//","/")),Q={name:i(q),type:2},B.FileIndex.push(Q),B.FullPaths.push(_e),Z||Cn.utils.cfb_gc(B)}return Q.content=K,Q.size=K?K.length:0,X&&(X.CLSID&&(Q.clsid=X.CLSID),X.mt&&(Q.mt=X.mt),X.ct&&(Q.ct=X.ct)),Q}function Jn(B,q){P(B);var K=Cn.find(B,q);if(K){for(var X=0;X<B.FileIndex.length;++X)if(B.FileIndex[X]==K)return B.FileIndex.splice(X,1),B.FullPaths.splice(X,1),!0}return!1}function lr(B,q,K){P(B);var X=Cn.find(B,q);if(X){for(var Z=0;Z<B.FileIndex.length;++Z)if(B.FileIndex[Z]==X)return B.FileIndex[Z].name=i(K),B.FullPaths[Z]=K,!0}return!1}function Ki(B){b(B,!0)}return e.find=F,e.read=z,e.parse=f,e.write=Ie,e.writeFile=le,e.utils={cfb_new:mr,cfb_add:Wt,cfb_del:Jn,cfb_mov:lr,cfb_gc:Ki,ReadShift:Cm,CheckField:PV,prep_blob:Ms,bconcat:ci,use_zlib:O,_deflateRaw:ms,_inflateRaw:_s,consts:ke},e})();function dge(n){return typeof n=="string"?IE(n):Array.isArray(n)?j0e(n):n}function m_(n,e,t){if(typeof Deno<"u"){if(t&&typeof e=="string")switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=IE(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(n,e)}var r=t=="utf8"?wp(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,n);if(typeof Blob<"u"){var i=new Blob([dge(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,n);if(typeof saveAs<"u")return saveAs(i,n);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:n,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=n,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(n);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=g_(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+n)}function di(n){for(var e=Object.keys(n),t=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(n,e[r])&&t.push(e[r]);return t}function CL(n,e){for(var t=[],r=di(n),i=0;i!==r.length;++i)t[n[r[i]][e]]==null&&(t[n[r[i]][e]]=r[i]);return t}function wC(n){for(var e=[],t=di(n),r=0;r!==t.length;++r)e[n[t[r]]]=t[r];return e}function CE(n){for(var e=[],t=di(n),r=0;r!==t.length;++r)e[n[t[r]]]=parseInt(t[r],10);return e}function gge(n){for(var e=[],t=di(n),r=0;r!==t.length;++r)e[n[t[r]]]==null&&(e[n[t[r]]]=[]),e[n[t[r]]].push(t[r]);return e}var rv=new Date(1899,11,30,0,0,0);function fs(n,e){var t=n.getTime(),r=rv.getTime()+(n.getTimezoneOffset()-rv.getTimezoneOffset())*6e4;return(t-r)/(1440*60*1e3)}var fV=new Date,mge=rv.getTime()+(fV.getTimezoneOffset()-rv.getTimezoneOffset())*6e4,PL=fV.getTimezoneOffset();function dV(n){var e=new Date;return e.setTime(n*24*60*60*1e3+mge),e.getTimezoneOffset()!==PL&&e.setTime(e.getTime()+(e.getTimezoneOffset()-PL)*6e4),e}var bL=new Date("2017-02-19T19:06:09.000Z"),gV=isNaN(bL.getFullYear())?new Date("2/19/17"):bL,pge=gV.getFullYear()==2017;function $i(n,e){var t=new Date(n);if(pge)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(n instanceof Date)return n;if(gV.getFullYear()==1917&&!isNaN(t.getFullYear())){var r=t.getFullYear();return n.indexOf(""+r)>-1||t.setFullYear(t.getFullYear()+100),t}var i=n.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return n.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function PE(n,e){if(on&&Buffer.isBuffer(n))return n.toString("binary");if(typeof TextDecoder<"u")try{var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(n)&&(n=new Uint8Array(n)),new TextDecoder("latin1").decode(n).replace(/[]/g,function(s){return t[s]||s})}catch{}for(var r=[],i=0;i!=n.length;++i)r.push(String.fromCharCode(n[i]));return r.join("")}function ds(n){if(typeof JSON<"u"&&!Array.isArray(n))return JSON.parse(JSON.stringify(n));if(typeof n!="object"||n==null)return n;if(n instanceof Date)return new Date(n.getTime());var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=ds(n[t]));return e}function ir(n,e){for(var t="";t.length<e;)t+=n;return t}function Il(n){var e=Number(n);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(n))return e;var t=1,r=n.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,s){return t=-t,s}),!isNaN(e=Number(r)))?e/t:e}var _ge=["january","february","march","april","may","june","july","august","september","october","november","december"];function Ep(n){var e=new Date(n),t=new Date(NaN),r=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return t;var a=n.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&_ge.indexOf(a)==-1)return t}else if(a.match(/[a-z]/))return t;return r<0||r>8099?t:(i>0||s>1)&&r!=101?e:n.match(/[^-0-9:,\/\\]/)?t:e}function Ft(n,e,t){if(n.FullPaths){if(typeof t=="string"){var r;return on?r=Gl(t):r=G0e(t),Cn.utils.cfb_add(n,e,r)}Cn.utils.cfb_add(n,e,t)}else n.file(e,t)}function SC(){return Cn.utils.cfb_new()}var Tr=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,yge={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},TC=wC(yge),IC=/[&<>'"]/g,xge=/[\u0000-\u0008\u000b-\u001f]/g;function Tn(n){var e=n+"";return e.replace(IC,function(t){return TC[t]}).replace(xge,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function ML(n){return Tn(n).replace(/ /g,"_x0020_")}var mV=/[\u0000-\u001f]/g;function vge(n){var e=n+"";return e.replace(IC,function(t){return TC[t]}).replace(/\n/g,"<br/>").replace(mV,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function Ege(n){var e=n+"";return e.replace(IC,function(t){return TC[t]}).replace(mV,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}function wge(n){return n.replace(/(\r\n|[\r\n])/g,"&#10;")}function Sge(n){switch(n){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function SS(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0;t<n.length;){if(r=n.charCodeAt(t++),r<128){e+=String.fromCharCode(r);continue}if(i=n.charCodeAt(t++),r>191&&r<224){a=(r&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=n.charCodeAt(t++),r<240){e+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);continue}a=n.charCodeAt(t++),o=((r&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function kL(n){var e=Bh(2*n.length),t,r,i=1,s=0,a=0,o;for(r=0;r<n.length;r+=i)i=1,(o=n.charCodeAt(r))<128?t=o:o<224?(t=(o&31)*64+(n.charCodeAt(r+1)&63),i=2):o<240?(t=(o&15)*4096+(n.charCodeAt(r+1)&63)*64+(n.charCodeAt(r+2)&63),i=3):(i=4,t=(o&7)*262144+(n.charCodeAt(r+1)&63)*4096+(n.charCodeAt(r+2)&63)*64+(n.charCodeAt(r+3)&63),t-=65536,a=55296+(t>>>10&1023),t=56320+(t&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=t%256,e[s++]=t>>>8;return e.slice(0,s).toString("ucs2")}function NL(n){return Gl(n,"binary").toString("utf8")}var ny="foo bar baz",Rm=on&&(NL(ny)==SS(ny)&&NL||kL(ny)==SS(ny)&&kL)||SS,wp=on?function(n){return Gl(n,"utf8").toString("binary")}:function(n){for(var e=[],t=0,r=0,i=0;t<n.length;)switch(r=n.charCodeAt(t++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=n.charCodeAt(t++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},Tge=(function(){var n=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<n.length;++i)r=r.replace(n[i][0],n[i][1]);return r}})(),pV=/(^\s|\s$|\n)/;function ui(n,e){return"<"+n+(e.match(pV)?' xml:space="preserve"':"")+">"+e+"</"+n+">"}function Sp(n){return di(n).map(function(e){return" "+e+'="'+n[e]+'"'}).join("")}function qe(n,e,t){return"<"+n+(t!=null?Sp(t):"")+(e!=null?(e.match(pV)?' xml:space="preserve"':"")+">"+e+"</"+n:"/")+">"}function vI(n,e){try{return n.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}function Ige(n,e){switch(typeof n){case"string":var t=qe("vt:lpwstr",Tn(n));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return qe((n|0)==n?"vt:i4":"vt:r8",Tn(String(n)));case"boolean":return qe("vt:bool",n?"true":"false")}if(n instanceof Date)return qe("vt:filetime",vI(n));throw new Error("Unable to serialize "+n)}var Hr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},N0=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Ls={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Age(n,e){for(var t=1-2*(n[e+7]>>>7),r=((n[e+7]&127)<<4)+(n[e+6]>>>4&15),i=n[e+6]&15,s=5;s>=0;--s)i=i*256+n[e+s];return r==2047?i==0?t*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),t*Math.pow(2,r-52)*i)}function Rge(n,e,t){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=r?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)n[t+o]=s&255;n[t+6]=(i&15)<<4|s&15,n[t+7]=i>>4|r}var LL=function(n){for(var e=[],t=10240,r=0;r<n[0].length;++r)if(n[0][r])for(var i=0,s=n[0][r].length;i<s;i+=t)e.push.apply(e,n[0][r].slice(i,i+t));return e},OL=on?function(n){return n[0].length>0&&Buffer.isBuffer(n[0][0])?Buffer.concat(n[0].map(function(e){return Buffer.isBuffer(e)?e:Gl(e)})):LL(n)}:LL,DL=function(n,e,t){for(var r=[],i=e;i<t;i+=2)r.push(String.fromCharCode(em(n,i)));return r.join("").replace(Am,"")},AC=on?function(n,e,t){return Buffer.isBuffer(n)?n.toString("utf16le",e,t).replace(Am,""):DL(n,e,t)}:DL,FL=function(n,e,t){for(var r=[],i=e;i<e+t;++i)r.push(("0"+n[i].toString(16)).slice(-2));return r.join("")},_V=on?function(n,e,t){return Buffer.isBuffer(n)?n.toString("hex",e,e+t):FL(n,e,t)}:FL,VL=function(n,e,t){for(var r=[],i=e;i<t;i++)r.push(String.fromCharCode(dd(n,i)));return r.join("")},p_=on?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):VL(e,t,r)}:VL,yV=function(n,e){var t=Os(n,e);return t>0?p_(n,e+4,e+4+t-1):""},xV=yV,vV=function(n,e){var t=Os(n,e);return t>0?p_(n,e+4,e+4+t-1):""},EV=vV,wV=function(n,e){var t=2*Os(n,e);return t>0?p_(n,e+4,e+4+t-1):""},SV=wV,TV=function(e,t){var r=Os(e,t);return r>0?AC(e,t+4,t+4+r):""},IV=TV,AV=function(n,e){var t=Os(n,e);return t>0?p_(n,e+4,e+4+t):""},RV=AV,CV=function(n,e){return Age(n,e)},iv=CV,RC=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};on&&(xV=function(e,t){if(!Buffer.isBuffer(e))return yV(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},EV=function(e,t){if(!Buffer.isBuffer(e))return vV(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},SV=function(e,t){if(!Buffer.isBuffer(e))return wV(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},IV=function(e,t){if(!Buffer.isBuffer(e))return TV(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},RV=function(e,t){if(!Buffer.isBuffer(e))return AV(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},iv=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):CV(e,t)},RC=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var dd=function(n,e){return n[e]},em=function(n,e){return n[e+1]*256+n[e]},Cge=function(n,e){var t=n[e+1]*256+n[e];return t<32768?t:(65535-t+1)*-1},Os=function(n,e){return n[e+3]*(1<<24)+(n[e+2]<<16)+(n[e+1]<<8)+n[e]},rh=function(n,e){return n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]},Pge=function(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]};function Cm(n,e){var t="",r,i,s=[],a,o,l,u;switch(e){case"dbcs":if(u=this.l,on&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*n).toString("utf16le");else for(l=0;l<n;++l)t+=String.fromCharCode(em(this,u)),u+=2;n*=2;break;case"utf8":t=p_(this,this.l,this.l+n);break;case"utf16le":n*=2,t=AC(this,this.l,this.l+n);break;case"wstr":return Cm.call(this,n,"dbcs");case"lpstr-ansi":t=xV(this,this.l),n=4+Os(this,this.l);break;case"lpstr-cp":t=EV(this,this.l),n=4+Os(this,this.l);break;case"lpwstr":t=SV(this,this.l),n=4+2*Os(this,this.l);break;case"lpp4":n=4+Os(this,this.l),t=IV(this,this.l),n&2&&(n+=2);break;case"8lpp4":n=4+Os(this,this.l),t=RV(this,this.l),n&3&&(n+=4-(n&3));break;case"cstr":for(n=0,t="";(a=dd(this,this.l+n++))!==0;)s.push(J1(a));t=s.join("");break;case"_wstr":for(n=0,t="";(a=em(this,this.l+n))!==0;)s.push(J1(a)),n+=2;n+=2,t=s.join("");break;case"dbcs-cont":for(t="",u=this.l,l=0;l<n;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=dd(this,u),this.l=u+1,o=Cm.call(this,n-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(J1(em(this,u))),u+=2}t=s.join(""),n*=2;break;case"cpstr":case"sbcs-cont":for(t="",u=this.l,l=0;l!=n;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=dd(this,u),this.l=u+1,o=Cm.call(this,n-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(J1(dd(this,u))),u+=1}t=s.join("");break;default:switch(n){case 1:return r=dd(this,this.l),this.l++,r;case 2:return r=(e==="i"?Cge:em)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(n>0?rh:Pge)(this,this.l),this.l+=4,r):(i=Os(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return n==8?i=iv(this,this.l):i=iv([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;n=8;case 16:t=_V(this,this.l,n);break}}return this.l+=n,t}var bge=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255,n[t+2]=e>>>16&255,n[t+3]=e>>>24&255},Mge=function(n,e,t){n[t]=e&255,n[t+1]=e>>8&255,n[t+2]=e>>16&255,n[t+3]=e>>24&255},kge=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255};function Nge(n,e,t){var r=0,i=0;if(t==="dbcs"){for(i=0;i!=e.length;++i)kge(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if(t==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;r=e.length}else if(t==="hex"){for(;i<n;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(t==="utf16le"){var s=Math.min(this.l+n,this.length);for(i=0;i<Math.min(e.length,n);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(n){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,bge(this,e,this.l);break;case 8:if(r=8,t==="f"){Rge(this,e,this.l);break}case 16:break;case-4:r=4,Mge(this,e,this.l);break}return this.l+=r,this}function PV(n,e){var t=_V(this,this.l,n.length>>1);if(t!==n)throw new Error(e+"Expected "+n+" saw "+t);this.l+=n.length>>1}function Ms(n,e){n.l=e,n.read_shift=Cm,n.chk=PV,n.write_shift=Nge}function jo(n,e){n.l+=e}function Re(n){var e=Bh(n);return Ms(e,0),e}function us(){var n=[],e=on?256:2048,t=function(u){var f=Re(u);return Ms(f,0),f},r=t(e),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&n.push(r),r=null)},s=function(u){return r&&u<r.length-r.l?r:(i(),r=t(Math.max(u+1,e)))},a=function(){return i(),ci(n)},o=function(u){i(),r=u,r.l==null&&(r.l=r.length),s(e)};return{next:s,push:o,end:a,_bufs:n}}function Oe(n,e,t,r){var i=+e,s;if(!isNaN(i)){r||(r=Axe[i].p||(t||[]).length||0),s=1+(i>=128?1:0)+1,r>=128&&++s,r>=16384&&++s,r>=2097152&&++s;var a=n.next(s);i<=127?a.write_shift(1,i):(a.write_shift(1,(i&127)+128),a.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(r>=128)a.write_shift(1,(r&127)+128),r>>=7;else{a.write_shift(1,r);break}r>0&&RC(t)&&n.push(t)}}function Pm(n,e,t){var r=ds(n);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!t||t.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function jL(n,e,t){var r=ds(n);return r.s=Pm(r.s,e.s,t),r.e=Pm(r.e,e.s,t),r}function bm(n,e){if(n.cRel&&n.c<0)for(n=ds(n);n.c<0;)n.c+=e>8?16384:256;if(n.rRel&&n.r<0)for(n=ds(n);n.r<0;)n.r+=e>8?1048576:e>5?65536:16384;var t=An(n);return!n.cRel&&n.cRel!=null&&(t=Dge(t)),!n.rRel&&n.rRel!=null&&(t=Lge(t)),t}function TS(n,e){return n.s.r==0&&!n.s.rRel&&n.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!n.e.rRel?(n.s.cRel?"":"$")+Pi(n.s.c)+":"+(n.e.cRel?"":"$")+Pi(n.e.c):n.s.c==0&&!n.s.cRel&&n.e.c==(e.biff>=12?16383:255)&&!n.e.cRel?(n.s.rRel?"":"$")+fi(n.s.r)+":"+(n.e.rRel?"":"$")+fi(n.e.r):bm(n.s,e.biff)+":"+bm(n.e,e.biff)}function CC(n){return parseInt(Oge(n),10)-1}function fi(n){return""+(n+1)}function Lge(n){return n.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Oge(n){return n.replace(/\$(\d+)$/,"$1")}function PC(n){for(var e=Fge(n),t=0,r=0;r!==e.length;++r)t=26*t+e.charCodeAt(r)-64;return t-1}function Pi(n){if(n<0)throw new Error("invalid column "+n);var e="";for(++n;n;n=Math.floor((n-1)/26))e=String.fromCharCode((n-1)%26+65)+e;return e}function Dge(n){return n.replace(/^([A-Z])/,"$$$1")}function Fge(n){return n.replace(/^\$([A-Z])/,"$1")}function Vge(n){return n.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Yr(n){for(var e=0,t=0,r=0;r<n.length;++r){var i=n.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(t=26*t+(i-64))}return{c:t-1,r:e-1}}function An(n){for(var e=n.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(n.r+1)}function Ws(n){var e=n.indexOf(":");return e==-1?{s:Yr(n),e:Yr(n)}:{s:Yr(n.slice(0,e)),e:Yr(n.slice(e+1))}}function wr(n,e){return typeof e>"u"||typeof e=="number"?wr(n.s,n.e):(typeof n!="string"&&(n=An(n)),typeof e!="string"&&(e=An(e)),n==e?n:n+":"+e)}function Gn(n){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,r=0,i=0,s=n.length;for(t=0;r<s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.s.c=--t,t=0;r<s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;if(e.s.r=--t,r===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,t=0;r!=s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.e.c=--t,t=0;r!=s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;return e.e.r=--t,e}function GL(n,e){var t=n.t=="d"&&e instanceof Date;if(n.z!=null)try{return n.w=lu(n.z,t?fs(e):e)}catch{}try{return n.w=lu((n.XF||{}).numFmtId||(t?14:0),t?fs(e):e)}catch{return""+e}}function Ll(n,e,t){return n==null||n.t==null||n.t=="z"?"":n.w!==void 0?n.w:(n.t=="d"&&!n.z&&t&&t.dateNF&&(n.z=t.dateNF),n.t=="e"?__[n.v]||n.v:e==null?GL(n,n.v):GL(n,e))}function tf(n,e){var t=e&&e.sheet?e.sheet:"Sheet1",r={};return r[t]=n,{SheetNames:[t],Sheets:r}}function bV(n,e,t){var r=t||{},i=n?Array.isArray(n):r.dense,s=n||(i?[]:{}),a=0,o=0;if(s&&r.origin!=null){if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?Yr(r.origin):r.origin;a=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var f=Gn(s["!ref"]);u.s.c=f.s.c,u.s.r=f.s.r,u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),a==-1&&(u.e.r=a=f.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=e[d].length;++g)if(!(typeof e[d][g]>"u")){var p={v:e[d][g]},v=a+d,y=o+g;if(u.s.r>v&&(u.s.r=v),u.s.c>y&&(u.s.c=y),u.e.r<v&&(u.e.r=v),u.e.c<y&&(u.e.c=y),e[d][g]&&typeof e[d][g]=="object"&&!Array.isArray(e[d][g])&&!(e[d][g]instanceof Date))p=e[d][g];else if(Array.isArray(p.v)&&(p.f=e[d][g][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(r.nullError)p.t="e",p.v=0;else if(r.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=r.dateNF||or[14],r.cellDates?(p.t="d",p.w=lu(p.z,fs(p.v))):(p.t="n",p.v=fs(p.v),p.w=lu(p.z,p.v))):p.t="s";if(i)s[v]||(s[v]=[]),s[v][y]&&s[v][y].z&&(p.z=s[v][y].z),s[v][y]=p;else{var E=An({c:y,r:v});s[E]&&s[E].z&&(p.z=s[E].z),s[E]=p}}}return u.s.c<1e7&&(s["!ref"]=wr(u)),s}function L0(n,e){return bV(null,n,e)}function jge(n){return n.read_shift(4,"i")}function Ha(n,e){return e||(e=Re(4)),e.write_shift(4,n),e}function bi(n){var e=n.read_shift(4);return e===0?"":n.read_shift(e,"dbcs")}function Xr(n,e){var t=!1;return e==null&&(t=!0,e=Re(4+2*n.length)),e.write_shift(4,n.length),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}function Gge(n){return{ich:n.read_shift(2),ifnt:n.read_shift(2)}}function Bge(n,e){return e||(e=Re(4)),e.write_shift(2,0),e.write_shift(2,0),e}function bC(n,e){var t=n.l,r=n.read_shift(1),i=bi(n),s=[],a={t:i,h:i};if((r&1)!==0){for(var o=n.read_shift(4),l=0;l!=o;++l)s.push(Gge(n));a.r=s}else a.r=[{ich:0,ifnt:0}];return n.l=t+e,a}function Uge(n,e){var t=!1;return e==null&&(t=!0,e=Re(15+4*n.t.length)),e.write_shift(1,0),Xr(n.t,e),t?e.slice(0,e.l):e}var zge=bC;function $ge(n,e){var t=!1;return e==null&&(t=!0,e=Re(23+4*n.t.length)),e.write_shift(1,1),Xr(n.t,e),e.write_shift(4,1),Bge({},e),t?e.slice(0,e.l):e}function ya(n){var e=n.read_shift(4),t=n.read_shift(2);return t+=n.read_shift(1)<<16,n.l++,{c:e,iStyleRef:t}}function nf(n,e){return e==null&&(e=Re(8)),e.write_shift(-4,n.c),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}function rf(n){var e=n.read_shift(2);return e+=n.read_shift(1)<<16,n.l++,{c:-1,iStyleRef:e}}function sf(n,e){return e==null&&(e=Re(4)),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}var Wge=bi,MV=Xr;function MC(n){var e=n.read_shift(4);return e===0||e===4294967295?"":n.read_shift(e,"dbcs")}function sv(n,e){var t=!1;return e==null&&(t=!0,e=Re(127)),e.write_shift(4,n.length>0?n.length:4294967295),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}var Hge=bi,EI=MC,kC=sv;function kV(n){var e=n.slice(n.l,n.l+4),t=e[0]&1,r=e[0]&2;n.l+=4;var i=r===0?iv([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):rh(e,0)>>2;return t?i/100:i}function NV(n,e){e==null&&(e=Re(4));var t=0,r=0,i=n*100;if(n==(n|0)&&n>=-536870912&&n<1<<29?r=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(r=1,t=1),r)e.write_shift(-4,((t?i:n)<<2)+(t+2));else throw new Error("unsupported RkNumber "+n)}function LV(n){var e={s:{},e:{}};return e.s.r=n.read_shift(4),e.e.r=n.read_shift(4),e.s.c=n.read_shift(4),e.e.c=n.read_shift(4),e}function Kge(n,e){return e||(e=Re(16)),e.write_shift(4,n.s.r),e.write_shift(4,n.e.r),e.write_shift(4,n.s.c),e.write_shift(4,n.e.c),e}var af=LV,O0=Kge;function D0(n){if(n.length-n.l<8)throw"XLS Xnum Buffer underflow";return n.read_shift(8,"f")}function Uh(n,e){return(e||Re(8)).write_shift(8,n,"f")}function Yge(n){var e={},t=n.read_shift(1),r=t>>>1,i=n.read_shift(1),s=n.read_shift(2,"i"),a=n.read_shift(1),o=n.read_shift(1),l=n.read_shift(1);switch(n.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var u=rme[i];u&&(e.rgb=ZL(u));break;case 2:e.rgb=ZL([a,o,l]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function av(n,e){if(e||(e=Re(8)),!n||n.auto)return e.write_shift(4,0),e.write_shift(4,0),e;n.index!=null?(e.write_shift(1,2),e.write_shift(1,n.index)):n.theme!=null?(e.write_shift(1,6),e.write_shift(1,n.theme)):(e.write_shift(1,5),e.write_shift(1,0));var t=n.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),e.write_shift(2,t),!n.rgb||n.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=n.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function Xge(n){var e=n.read_shift(1);n.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function qge(n,e){e||(e=Re(2));var t=(n.italic?2:0)|(n.strike?8:0)|(n.outline?16:0)|(n.shadow?32:0)|(n.condense?64:0)|(n.extend?128:0);return e.write_shift(1,t),e.write_shift(1,0),e}var OV=2,Ps=3,ry=11,ov=19,iy=64,Zge=65,Qge=71,Jge=4108,eme=4126,ai=80,BL={1:{n:"CodePage",t:OV},2:{n:"Category",t:ai},3:{n:"PresentationFormat",t:ai},4:{n:"ByteCount",t:Ps},5:{n:"LineCount",t:Ps},6:{n:"ParagraphCount",t:Ps},7:{n:"SlideCount",t:Ps},8:{n:"NoteCount",t:Ps},9:{n:"HiddenCount",t:Ps},10:{n:"MultimediaClipCount",t:Ps},11:{n:"ScaleCrop",t:ry},12:{n:"HeadingPairs",t:Jge},13:{n:"TitlesOfParts",t:eme},14:{n:"Manager",t:ai},15:{n:"Company",t:ai},16:{n:"LinksUpToDate",t:ry},17:{n:"CharacterCount",t:Ps},19:{n:"SharedDoc",t:ry},22:{n:"HyperlinksChanged",t:ry},23:{n:"AppVersion",t:Ps,p:"version"},24:{n:"DigSig",t:Zge},26:{n:"ContentType",t:ai},27:{n:"ContentStatus",t:ai},28:{n:"Language",t:ai},29:{n:"Version",t:ai},255:{},2147483648:{n:"Locale",t:ov},2147483651:{n:"Behavior",t:ov},1919054434:{}},UL={1:{n:"CodePage",t:OV},2:{n:"Title",t:ai},3:{n:"Subject",t:ai},4:{n:"Author",t:ai},5:{n:"Keywords",t:ai},6:{n:"Comments",t:ai},7:{n:"Template",t:ai},8:{n:"LastAuthor",t:ai},9:{n:"RevNumber",t:ai},10:{n:"EditTime",t:iy},11:{n:"LastPrinted",t:iy},12:{n:"CreatedDate",t:iy},13:{n:"ModifiedDate",t:iy},14:{n:"PageCount",t:Ps},15:{n:"WordCount",t:Ps},16:{n:"CharCount",t:Ps},17:{n:"Thumbnail",t:Qge},18:{n:"Application",t:ai},19:{n:"DocSecurity",t:Ps},255:{},2147483648:{n:"Locale",t:ov},2147483651:{n:"Behavior",t:ov},1919054434:{}};function tme(n){return n.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var nme=tme([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),rme=ds(nme),__={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},ime={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},sy={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function DV(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function FV(n,e){var t=gge(ime),r=[],i;r[r.length]=Tr,r[r.length]=qe("Types",null,{xmlns:Hr.CT,"xmlns:xsd":Hr.xsd,"xmlns:xsi":Hr.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return qe("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){n[l]&&n[l].length>0&&(i=n[l][0],r[r.length]=qe("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:sy[l][e.bookType]||sy[l].xlsx}))},a=function(l){(n[l]||[]).forEach(function(u){r[r.length]=qe("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:sy[l][e.bookType]||sy[l].xlsx})})},o=function(l){(n[l]||[]).forEach(function(u){r[r.length]=qe("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:t[l][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var en={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function VV(n){var e=n.lastIndexOf("/");return n.slice(0,e+1)+"_rels/"+n.slice(e+1)+".rels"}function Gd(n){var e=[Tr,qe("Relationships",null,{xmlns:Hr.RELS})];return di(n["!id"]).forEach(function(t){e[e.length]=qe("Relationship",null,n["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function En(n,e,t,r,i,s){if(i||(i={}),n["!id"]||(n["!id"]={}),n["!idx"]||(n["!idx"]=1),e<0)for(e=n["!idx"];n["!id"]["rId"+e];++e);if(n["!idx"]=e+1,i.Id="rId"+e,i.Type=r,i.Target=t,[en.HLINK,en.XPATH,en.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),n["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return n["!id"][i.Id]=i,n[("/"+i.Target).replace("//","/")]=i,e}function sme(n){var e=[Tr];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<n.length;++t)e.push('  <manifest:file-entry manifest:full-path="'+n[t][0]+'" manifest:media-type="'+n[t][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function zL(n,e,t){return['  <rdf:Description rdf:about="'+n+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function ame(n,e){return['  <rdf:Description rdf:about="'+n+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function ome(n){var e=[Tr];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=n.length;++t)e.push(zL(n[t][0],n[t][1])),e.push(ame("",n[t][0]));return e.push(zL("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function jV(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Qx.version+"</meta:generator></office:meta></office:document-meta>"}var yh=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function IS(n,e,t,r,i){i[n]!=null||e==null||e===""||(i[n]=e,e=Tn(e),r[r.length]=t?qe(n,e,t):ui(n,e))}function GV(n,e){var t=e||{},r=[Tr,qe("cp:coreProperties",null,{"xmlns:cp":Hr.CORE_PROPS,"xmlns:dc":Hr.dc,"xmlns:dcterms":Hr.dcterms,"xmlns:dcmitype":Hr.dcmitype,"xmlns:xsi":Hr.xsi})],i={};if(!n&&!t.Props)return r.join("");n&&(n.CreatedDate!=null&&IS("dcterms:created",typeof n.CreatedDate=="string"?n.CreatedDate:vI(n.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),n.ModifiedDate!=null&&IS("dcterms:modified",typeof n.ModifiedDate=="string"?n.ModifiedDate:vI(n.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=yh.length;++s){var a=yh[s],o=t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:n?n[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&IS(a[0],o,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Bd=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],BV=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function UV(n){var e=[],t=qe;return n||(n={}),n.Application="SheetJS",e[e.length]=Tr,e[e.length]=qe("Properties",null,{xmlns:Hr.EXT_PROPS,"xmlns:vt":Hr.vt}),Bd.forEach(function(r){if(n[r[1]]!==void 0){var i;switch(r[2]){case"string":i=Tn(String(n[r[1]]));break;case"bool":i=n[r[1]]?"true":"false";break}i!==void 0&&(e[e.length]=t(r[0],i))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(n.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",n.SheetNames.map(function(r){return"<vt:lpstr>"+Tn(r)+"</vt:lpstr>"}).join(""),{size:n.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function zV(n){var e=[Tr,qe("Properties",null,{xmlns:Hr.CUST_PROPS,"xmlns:vt":Hr.vt})];if(!n)return e.join("");var t=1;return di(n).forEach(function(i){++t,e[e.length]=qe("property",Ige(n[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:Tn(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var $L={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function lme(n,e){var t=[];return di($L).map(function(r){for(var i=0;i<yh.length;++i)if(yh[i][1]==r)return yh[i];for(i=0;i<Bd.length;++i)if(Bd[i][1]==r)return Bd[i];throw r}).forEach(function(r){if(n[r[1]]!=null){var i=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:n[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),t.push(ui($L[r[1]]||r[1],i))}}),qe("DocumentProperties",t.join(""),{xmlns:Ls.o})}function cme(n,e){var t=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return n&&di(n).forEach(function(s){if(Object.prototype.hasOwnProperty.call(n,s)){for(var a=0;a<yh.length;++a)if(s==yh[a][1])return;for(a=0;a<Bd.length;++a)if(s==Bd[a][1])return;for(a=0;a<t.length;++a)if(s==t[a])return;var o=n[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),i.push(qe(ML(s),o,{"dt:dt":l}))}}),e&&di(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(n&&Object.prototype.hasOwnProperty.call(n,s))){var a=e[s],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),i.push(qe(ML(s),a,{"dt:dt":o}))}}),"<"+r+' xmlns="'+Ls.o+'">'+i.join("")+"</"+r+">"}function ume(n){var e=typeof n=="string"?new Date(Date.parse(n)):n,t=e.getTime()/1e3+11644473600,r=t%Math.pow(2,32),i=(t-r)/Math.pow(2,32);r*=1e7,i*=1e7;var s=r/Math.pow(2,32)|0;s>0&&(r=r%Math.pow(2,32),i+=s);var a=Re(8);return a.write_shift(4,r),a.write_shift(4,i),a}function WL(n,e){var t=Re(4),r=Re(4);switch(t.write_shift(4,n==80?31:n),n){case 3:r.write_shift(-4,e);break;case 5:r=Re(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=ume(e);break;case 31:case 80:for(r=Re(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+e)}return ci([t,r])}var $V=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function hme(n){switch(typeof n){case"boolean":return 11;case"number":return(n|0)==n?3:5;case"string":return 31;case"object":if(n instanceof Date)return 64;break}return-1}function HL(n,e,t){var r=Re(8),i=[],s=[],a=8,o=0,l=Re(8),u=Re(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),s.push(l),i.push(u),a+=8+l.length,!e){u=Re(8),u.write_shift(4,0),i.unshift(u);var f=[Re(4)];for(f[0].write_shift(4,n.length),o=0;o<n.length;++o){var d=n[o][0];for(l=Re(8+2*(d.length+1)+(d.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,d.length+1),l.write_shift(0,d,"dbcs");l.l!=l.length;)l.write_shift(1,0);f.push(l)}l=ci(f),s.unshift(l),a+=8+l.length}for(o=0;o<n.length;++o)if(!(e&&!e[n[o][0]])&&!($V.indexOf(n[o][0])>-1||BV.indexOf(n[o][0])>-1)&&n[o][1]!=null){var g=n[o][1],p=0;if(e){p=+e[n[o][0]];var v=t[p];if(v.p=="version"&&typeof g=="string"){var y=g.split(".");g=(+y[0]<<16)+(+y[1]||0)}l=WL(v.t,g)}else{var E=hme(g);E==-1&&(E=31,g=String(g)),l=WL(E,g)}s.push(l),u=Re(8),u.write_shift(4,e?p:2+o),i.push(u),a+=8+l.length}var T=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,T),T+=s[o].length;return r.write_shift(4,a),r.write_shift(4,s.length),ci([r].concat(i).concat(s))}function KL(n,e,t,r,i,s){var a=Re(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,Cn.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var l=HL(n,t,r);if(o.push(l),i){var u=HL(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+l.length),o.push(u)}return ci(o)}function fme(n,e){e||(e=Re(n));for(var t=0;t<n;++t)e.write_shift(1,0);return e}function dme(n,e){return n.read_shift(e)===1}function Di(n,e){return e||(e=Re(2)),e.write_shift(2,+!!n),e}function WV(n){return n.read_shift(2,"u")}function oa(n,e){return e||(e=Re(2)),e.write_shift(2,n),e}function HV(n,e,t){return t||(t=Re(2)),t.write_shift(1,e=="e"?+n:+!!n),t.write_shift(1,e=="e"?1:0),t}function KV(n,e,t){var r=n.read_shift(t&&t.biff>=12?2:1),i="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var s=n.read_shift(1);s&&(i="dbcs-cont")}else t.biff==12&&(i="wstr");t.biff>=2&&t.biff<=5&&(i="cpstr");var a=r?n.read_shift(r,i):"";return a}function gme(n){var e=n.t||"",t=Re(3);t.write_shift(2,e.length),t.write_shift(1,1);var r=Re(2*e.length);r.write_shift(2*e.length,e,"utf16le");var i=[t,r];return ci(i)}function mme(n,e,t){var r;if(t){if(t.biff>=2&&t.biff<=5)return n.read_shift(e,"cpstr");if(t.biff>=12)return n.read_shift(e,"dbcs-cont")}var i=n.read_shift(1);return i===0?r=n.read_shift(e,"sbcs-cont"):r=n.read_shift(e,"dbcs-cont"),r}function pme(n,e,t){var r=n.read_shift(t&&t.biff==2?1:2);return r===0?(n.l++,""):mme(n,r,t)}function _me(n,e,t){if(t.biff>5)return pme(n,e,t);var r=n.read_shift(1);return r===0?(n.l++,""):n.read_shift(r,t.biff<=4||!n.lens?"cpstr":"sbcs-cont")}function YV(n,e,t){return t||(t=Re(3+2*n.length)),t.write_shift(2,n.length),t.write_shift(1,1),t.write_shift(31,n,"utf16le"),t}function YL(n,e){e||(e=Re(6+n.length*2)),e.write_shift(4,1+n.length);for(var t=0;t<n.length;++t)e.write_shift(2,n.charCodeAt(t));return e.write_shift(2,0),e}function yme(n){var e=Re(512),t=0,r=n.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(t=0;t<a.length;++t)e.write_shift(4,a[t]);if(s==28)r=r.slice(1),YL(r,e);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));var o=i>-1?r.slice(0,i):r;for(e.write_shift(4,2*(o.length+1)),t=0;t<o.length;++t)e.write_shift(2,o.charCodeAt(t));e.write_shift(2,0),s&8&&YL(i>-1?r.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,r.length-3*l+1),t=0;t<r.length-3*l;++t)e.write_shift(1,r.charCodeAt(t+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),t=0;t<6;++t)e.write_shift(4,0)}return e.slice(0,e.l)}function zh(n,e,t,r){return r||(r=Re(6)),r.write_shift(2,n),r.write_shift(2,e),r.write_shift(2,t||0),r}function xme(n,e,t){var r=t.biff>8?4:2,i=n.read_shift(r),s=n.read_shift(r,"i"),a=n.read_shift(r,"i");return[i,s,a]}function vme(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(2),i=n.read_shift(2);return{s:{c:r,r:e},e:{c:i,r:t}}}function XV(n,e){return e||(e=Re(8)),e.write_shift(2,n.s.r),e.write_shift(2,n.e.r),e.write_shift(2,n.s.c),e.write_shift(2,n.e.c),e}function NC(n,e,t){var r=1536,i=16;switch(t.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Re(i);return s.write_shift(2,r),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Eme(n,e){var t=!e||e.biff==8,r=Re(t?112:54);for(r.write_shift(e.biff==8?2:1,7),t&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(t?0:536870912));r.l<r.length;)r.write_shift(1,t?0:32);return r}function wme(n,e){var t=!e||e.biff>=8?2:1,r=Re(8+t*n.name.length);r.write_shift(4,n.pos),r.write_shift(1,n.hs||0),r.write_shift(1,n.dt),r.write_shift(1,n.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(t*n.name.length,n.name,e.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function Sme(n,e){var t=Re(8);t.write_shift(4,n.Count),t.write_shift(4,n.Unique);for(var r=[],i=0;i<n.length;++i)r[i]=gme(n[i]);var s=ci([t].concat(r));return s.parts=[t.length].concat(r.map(function(a){return a.length})),s}function Tme(){var n=Re(18);return n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,29280),n.write_shift(2,17600),n.write_shift(2,56),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,1),n.write_shift(2,500),n}function Ime(n){var e=Re(18),t=1718;return n&&n.RTL&&(t|=64),e.write_shift(2,t),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Ame(n,e){var t=n.name||"Arial",r=e&&e.biff==5,i=r?15+t.length:16+2*t.length,s=Re(i);return s.write_shift(2,n.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,t.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*t.length,t,r?"sbcs":"utf16le"),s}function Rme(n,e,t,r){var i=Re(10);return zh(n,e,r,i),i.write_shift(4,t),i}function Cme(n,e,t,r,i){var s=!i||i.biff==8,a=Re(8+ +s+(1+s)*t.length);return zh(n,e,r,a),a.write_shift(2,t.length),s&&a.write_shift(1,1),a.write_shift((1+s)*t.length,t,s?"utf16le":"sbcs"),a}function Pme(n,e,t,r){var i=t&&t.biff==5;r||(r=Re(i?3+e.length:5+2*e.length)),r.write_shift(2,n),r.write_shift(i?1:2,e.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return s.l==null&&(s.l=s.length),s}function bme(n,e){var t=e.biff==8||!e.biff?4:2,r=Re(2*t+6);return r.write_shift(t,n.s.r),r.write_shift(t,n.e.r+1),r.write_shift(2,n.s.c),r.write_shift(2,n.e.c+1),r.write_shift(2,0),r}function XL(n,e,t,r){var i=t&&t.biff==5;r||(r=Re(i?16:20)),r.write_shift(2,0),n.style?(r.write_shift(2,n.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,n.numFmtId||0),r.write_shift(2,e<<4));var s=0;return n.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function Mme(n){var e=Re(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function kme(n,e,t,r,i,s){var a=Re(8);return zh(n,e,r,a),HV(t,s,a),a}function Nme(n,e,t,r){var i=Re(14);return zh(n,e,r,i),Uh(t,i),i}function Lme(n,e,t){if(t.biff<8)return Ome(n,e,t);for(var r=[],i=n.l+e,s=n.read_shift(t.biff>8?4:2);s--!==0;)r.push(xme(n,t.biff>8?12:6,t));if(n.l!=i)throw new Error("Bad ExternSheet: "+n.l+" != "+i);return r}function Ome(n,e,t){n[n.l+1]==3&&n[n.l]++;var r=KV(n,e,t);return r.charCodeAt(0)==3?r.slice(1):r}function Dme(n){var e=Re(2+n.length*8);e.write_shift(2,n.length);for(var t=0;t<n.length;++t)XV(n[t],e);return e}function Fme(n){var e=Re(24),t=Yr(n[0]);e.write_shift(2,t.r),e.write_shift(2,t.r),e.write_shift(2,t.c),e.write_shift(2,t.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(r[i],16));return ci([e,yme(n[1])])}function Vme(n){var e=n[1].Tooltip,t=Re(10+2*(e.length+1));t.write_shift(2,2048);var r=Yr(n[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var i=0;i<e.length;++i)t.write_shift(2,e.charCodeAt(i));return t.write_shift(2,0),t}function jme(n){return n||(n=Re(4)),n.write_shift(2,1),n.write_shift(2,1),n}function Gme(n,e,t){if(!t.cellStyles)return jo(n,e);var r=t&&t.biff>=12?4:2,i=n.read_shift(r),s=n.read_shift(r),a=n.read_shift(r),o=n.read_shift(r),l=n.read_shift(2);r==2&&(n.l+=2);var u={s:i,e:s,w:a,ixfe:o,flags:l};return(t.biff>=5||!t.biff)&&(u.level=l>>8&7),u}function Bme(n,e){var t=Re(12);t.write_shift(2,e),t.write_shift(2,e),t.write_shift(2,n.width*256),t.write_shift(2,0);var r=0;return n.hidden&&(r|=1),t.write_shift(1,r),r=n.level||0,t.write_shift(1,r),t.write_shift(2,0),t}function Ume(n){for(var e=Re(2*n),t=0;t<n;++t)e.write_shift(2,t+1);return e}function zme(n,e,t){var r=Re(15);return x_(r,n,e),r.write_shift(8,t,"f"),r}function $me(n,e,t){var r=Re(9);return x_(r,n,e),r.write_shift(2,t),r}var Wme=(function(){var n={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=wC({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(o,l){var u=[],f=Bh(1);switch(l.type){case"base64":f=Va(Nl(o));break;case"binary":f=Va(o);break;case"buffer":case"array":f=o;break}Ms(f,0);var d=f.read_shift(1),g=!!(d&136),p=!1,v=!1;switch(d){case 2:break;case 3:break;case 48:p=!0,g=!0;break;case 49:p=!0,g=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var y=0,E=521;d==2&&(y=f.read_shift(2)),f.l+=3,d!=2&&(y=f.read_shift(4)),y>1048576&&(y=1e6),d!=2&&(E=f.read_shift(2));var T=f.read_shift(2),R=l.codepage||1252;d!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(R=n[f[f.l]]),f.l+=1,f.l+=2),v&&(f.l+=36);for(var M=[],k={},V=Math.min(f.length,d==2?521:E-10-(p?264:0)),z=v?32:11;f.l<V&&f[f.l]!=13;)switch(k={},k.name=Jx.utils.decode(R,f.slice(f.l,f.l+z)).replace(/[\u0000\r\n].*$/g,""),f.l+=z,k.type=String.fromCharCode(f.read_shift(1)),d!=2&&!v&&(k.offset=f.read_shift(4)),k.len=f.read_shift(1),d==2&&(k.offset=f.read_shift(2)),k.dec=f.read_shift(1),k.name.length&&M.push(k),d!=2&&(f.l+=v?13:14),k.type){case"B":(!p||k.len!=8)&&l.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+k.type)}if(f[f.l]!==13&&(f.l=E-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=E;var P=0,C=0;for(u[0]=[],C=0;C!=M.length;++C)u[0][C]=M[C].name;for(;y-- >0;){if(f[f.l]===42){f.l+=T;continue}for(++f.l,u[++P]=[],C=0,C=0;C!=M.length;++C){var b=f.slice(f.l,f.l+M[C].len);f.l+=M[C].len,Ms(b,0);var L=Jx.utils.decode(R,b);switch(M[C].type){case"C":L.trim().length&&(u[P][C]=L.replace(/\s+$/,""));break;case"D":L.length===8?u[P][C]=new Date(+L.slice(0,4),+L.slice(4,6)-1,+L.slice(6,8)):u[P][C]=L;break;case"F":u[P][C]=parseFloat(L.trim());break;case"+":case"I":u[P][C]=v?b.read_shift(-4,"i")^2147483648:b.read_shift(4,"i");break;case"L":switch(L.trim().toUpperCase()){case"Y":case"T":u[P][C]=!0;break;case"N":case"F":u[P][C]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+L+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));u[P][C]="##MEMO##"+(v?parseInt(L.trim(),10):b.read_shift(4));break;case"N":L=L.replace(/\u0000/g,"").trim(),L&&L!="."&&(u[P][C]=+L||0);break;case"@":u[P][C]=new Date(b.read_shift(-8,"f")-621356832e5);break;case"T":u[P][C]=new Date((b.read_shift(4)-2440588)*864e5+b.read_shift(4));break;case"Y":u[P][C]=b.read_shift(4,"i")/1e4+b.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[P][C]=-b.read_shift(-8,"f");break;case"B":if(p&&M[C].len==8){u[P][C]=b.read_shift(8,"f");break}case"G":case"P":b.l+=M[C].len;break;case"0":if(M[C].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+M[C].type)}}}if(d!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=M,u}function r(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var f=L0(t(o,u),u);return f["!cols"]=u.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete u.DBF,f}function i(o,l){try{return tf(r(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var u=l||{};if(+u.codepage>=0&&xp(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var f=us(),d=fv(o,{header:1,raw:!0,cellDates:!0}),g=d[0],p=d.slice(1),v=o["!cols"]||[],y=0,E=0,T=0,R=1;for(y=0;y<g.length;++y){if(((v[y]||{}).DBF||{}).name){g[y]=v[y].DBF.name,++T;continue}if(g[y]!=null){if(++T,typeof g[y]=="number"&&(g[y]=g[y].toString(10)),typeof g[y]!="string")throw new Error("DBF Invalid column name "+g[y]+" |"+typeof g[y]+"|");if(g.indexOf(g[y])!==y){for(E=0;E<1024;++E)if(g.indexOf(g[y]+"_"+E)==-1){g[y]+="_"+E;break}}}}var M=Gn(o["!ref"]),k=[],V=[],z=[];for(y=0;y<=M.e.c-M.s.c;++y){var P="",C="",b=0,L=[];for(E=0;E<p.length;++E)p[E][y]!=null&&L.push(p[E][y]);if(L.length==0||g[y]==null){k[y]="?";continue}for(E=0;E<L.length;++E){switch(typeof L[E]){case"number":C="B";break;case"string":C="C";break;case"boolean":C="L";break;case"object":C=L[E]instanceof Date?"D":"C";break;default:C="C"}b=Math.max(b,String(L[E]).length),P=P&&P!=C?"C":C}b>250&&(b=250),C=((v[y]||{}).DBF||{}).type,C=="C"&&v[y].DBF.len>b&&(b=v[y].DBF.len),P=="B"&&C=="N"&&(P="N",z[y]=v[y].DBF.dec,b=v[y].DBF.len),V[y]=P=="C"||C=="N"?b:s[P]||0,R+=V[y],k[y]=P}var F=f.next(32);for(F.write_shift(4,318902576),F.write_shift(4,p.length),F.write_shift(2,296+32*T),F.write_shift(2,R),y=0;y<4;++y)F.write_shift(4,0);for(F.write_shift(4,0|(+e[Z7]||3)<<8),y=0,E=0;y<g.length;++y)if(g[y]!=null){var U=f.next(32),j=(g[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);U.write_shift(1,j,"sbcs"),U.write_shift(1,k[y]=="?"?"C":k[y],"sbcs"),U.write_shift(4,E),U.write_shift(1,V[y]||s[k[y]]||0),U.write_shift(1,z[y]||0),U.write_shift(1,2),U.write_shift(4,0),U.write_shift(1,0),U.write_shift(4,0),U.write_shift(4,0),E+=V[y]||s[k[y]]||0}var Te=f.next(264);for(Te.write_shift(4,13),y=0;y<65;++y)Te.write_shift(4,0);for(y=0;y<p.length;++y){var Me=f.next(R);for(Me.write_shift(1,0),E=0;E<g.length;++E)if(g[E]!=null)switch(k[E]){case"L":Me.write_shift(1,p[y][E]==null?63:p[y][E]?84:70);break;case"B":Me.write_shift(8,p[y][E]||0,"f");break;case"N":var Ue="0";for(typeof p[y][E]=="number"&&(Ue=p[y][E].toFixed(z[E]||0)),T=0;T<V[E]-Ue.length;++T)Me.write_shift(1,32);Me.write_shift(1,Ue,"sbcs");break;case"D":p[y][E]?(Me.write_shift(4,("0000"+p[y][E].getFullYear()).slice(-4),"sbcs"),Me.write_shift(2,("00"+(p[y][E].getMonth()+1)).slice(-2),"sbcs"),Me.write_shift(2,("00"+p[y][E].getDate()).slice(-2),"sbcs")):Me.write_shift(8,"00000000","sbcs");break;case"C":var ke=String(p[y][E]!=null?p[y][E]:"").slice(0,V[E]);for(Me.write_shift(1,ke,"sbcs"),T=0;T<V[E]-ke.length;++T)Me.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:i,to_sheet:r,from_sheet:a}})(),Hme=(function(){var n={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+di(n).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(g,p){var v=n[p];return typeof v=="number"?xL(v):v},r=function(g,p,v){var y=p.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return y==59?g:xL(y)};n["|"]=254;function i(g,p){switch(p.type){case"base64":return s(Nl(g),p);case"binary":return s(g,p);case"buffer":return s(on&&Buffer.isBuffer(g)?g.toString("binary"):g_(g),p);case"array":return s(PE(g),p)}throw new Error("Unrecognized type "+p.type)}function s(g,p){var v=g.split(/[\n\r]+/),y=-1,E=-1,T=0,R=0,M=[],k=[],V=null,z={},P=[],C=[],b=[],L=0,F;for(+p.codepage>=0&&xp(+p.codepage);T!==v.length;++T){L=0;var U=v[T].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,t),j=U.replace(/;;/g,"\0").split(";").map(function(ee){return ee.replace(/\u0000/g,";")}),Te=j[0],Me;if(U.length>0)switch(Te){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":j[1].charAt(0)=="P"&&k.push(U.slice(3).replace(/;;/g,";"));break;case"C":var Ue=!1,ke=!1,le=!1,Ae=!1,Ie=-1,Y=-1;for(R=1;R<j.length;++R)switch(j[R].charAt(0)){case"A":break;case"X":E=parseInt(j[R].slice(1))-1,ke=!0;break;case"Y":for(y=parseInt(j[R].slice(1))-1,ke||(E=0),F=M.length;F<=y;++F)M[F]=[];break;case"K":Me=j[R].slice(1),Me.charAt(0)==='"'?Me=Me.slice(1,Me.length-1):Me==="TRUE"?Me=!0:Me==="FALSE"?Me=!1:isNaN(Il(Me))?isNaN(Ep(Me).getDate())||(Me=$i(Me)):(Me=Il(Me),V!==null&&cV(V)&&(Me=dV(Me))),Ue=!0;break;case"E":Ae=!0;var O=$pe(j[R].slice(1),{r:y,c:E});M[y][E]=[M[y][E],O];break;case"S":le=!0,M[y][E]=[M[y][E],"S5S"];break;case"G":break;case"R":Ie=parseInt(j[R].slice(1))-1;break;case"C":Y=parseInt(j[R].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+U)}if(Ue&&(M[y][E]&&M[y][E].length==2?M[y][E][0]=Me:M[y][E]=Me,V=null),le){if(Ae)throw new Error("SYLK shared formula cannot have own formula");var te=Ie>-1&&M[Ie][Y];if(!te||!te[1])throw new Error("SYLK shared formula cannot find base");M[y][E][1]=Wpe(te[1],{r:y-Ie,c:E-Y})}break;case"F":var ne=0;for(R=1;R<j.length;++R)switch(j[R].charAt(0)){case"X":E=parseInt(j[R].slice(1))-1,++ne;break;case"Y":for(y=parseInt(j[R].slice(1))-1,F=M.length;F<=y;++F)M[F]=[];break;case"M":L=parseInt(j[R].slice(1))/20;break;case"F":break;case"G":break;case"P":V=k[parseInt(j[R].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(b=j[R].slice(1).split(" "),F=parseInt(b[0],10);F<=parseInt(b[1],10);++F)L=parseInt(b[2],10),C[F-1]=L===0?{hidden:!0}:{wch:L},LC(C[F-1]);break;case"C":E=parseInt(j[R].slice(1))-1,C[E]||(C[E]={});break;case"R":y=parseInt(j[R].slice(1))-1,P[y]||(P[y]={}),L>0?(P[y].hpt=L,P[y].hpx=ej(L)):L===0&&(P[y].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+U)}ne<1&&(V=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+U)}}return P.length>0&&(z["!rows"]=P),C.length>0&&(z["!cols"]=C),p&&p.sheetRows&&(M=M.slice(0,p.sheetRows)),[M,z]}function a(g,p){var v=i(g,p),y=v[0],E=v[1],T=L0(y,p);return di(E).forEach(function(R){T[R]=E[R]}),T}function o(g,p){return tf(a(g,p),p)}function l(g,p,v,y){var E="C;Y"+(v+1)+";X"+(y+1)+";K";switch(g.t){case"n":E+=g.v||0,g.f&&!g.F&&(E+=";E"+DC(g.f,{r:v,c:y}));break;case"b":E+=g.v?"TRUE":"FALSE";break;case"e":E+=g.w||g.v;break;case"d":E+='"'+(g.w||g.v)+'"';break;case"s":E+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return E}function u(g,p){p.forEach(function(v,y){var E="F;W"+(y+1)+" "+(y+1)+" ";v.hidden?E+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=lv(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=cv(v.wpx)),typeof v.wch=="number"&&(E+=Math.round(v.wch))),E.charAt(E.length-1)!=" "&&g.push(E)})}function f(g,p){p.forEach(function(v,y){var E="F;";v.hidden?E+="M0;":v.hpt?E+="M"+20*v.hpt+";":v.hpx&&(E+="M"+20*uv(v.hpx)+";"),E.length>2&&g.push(E+"R"+(y+1))})}function d(g,p){var v=["ID;PWXL;N;E"],y=[],E=Gn(g["!ref"]),T,R=Array.isArray(g),M=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),g["!cols"]&&u(v,g["!cols"]),g["!rows"]&&f(v,g["!rows"]),v.push("B;Y"+(E.e.r-E.s.r+1)+";X"+(E.e.c-E.s.c+1)+";D"+[E.s.c,E.s.r,E.e.c,E.e.r].join(" "));for(var k=E.s.r;k<=E.e.r;++k)for(var V=E.s.c;V<=E.e.c;++V){var z=An({r:k,c:V});T=R?(g[k]||[])[V]:g[z],!(!T||T.v==null&&(!T.f||T.F))&&y.push(l(T,g,k,V))}return v.join(M)+M+y.join(M)+M+"E"+M}return{to_workbook:o,to_sheet:a,from_sheet:d}})(),Kme=(function(){function n(s,a){switch(a.type){case"base64":return e(Nl(s),a);case"binary":return e(s,a);case"buffer":return e(on&&Buffer.isBuffer(s)?s.toString("binary"):g_(s),a);case"array":return e(PE(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){for(var o=s.split(`
`),l=-1,u=-1,f=0,d=[];f!==o.length;++f){if(o[f].trim()==="BOT"){d[++l]=[],u=0;continue}if(!(l<0)){var g=o[f].trim().split(","),p=g[0],v=g[1];++f;for(var y=o[f]||"";(y.match(/["]/g)||[]).length&1&&f<o.length-1;)y+=`
`+o[++f];switch(y=y.trim(),+p){case-1:if(y==="BOT"){d[++l]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?d[l][u]=!0:y==="FALSE"?d[l][u]=!1:isNaN(Il(v))?isNaN(Ep(v).getDate())?d[l][u]=v:d[l][u]=$i(v):d[l][u]=Il(v),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),d[l][u++]=y!==""?y:null;break}if(y==="EOD")break}}return a&&a.sheetRows&&(d=d.slice(0,a.sheetRows)),d}function t(s,a){return L0(n(s,a),a)}function r(s,a){return tf(t(s,a),a)}var i=(function(){var s=function(l,u,f,d,g){l.push(u),l.push(f+","+d),l.push('"'+g.replace(/"/g,'""')+'"')},a=function(l,u,f,d){l.push(u+","+f),l.push(u==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(l){var u=[],f=Gn(l["!ref"]),d,g=Array.isArray(l);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,f.e.r-f.s.r+1,""),s(u,"TUPLES",0,f.e.c-f.s.c+1,""),s(u,"DATA",0,0,"");for(var p=f.s.r;p<=f.e.r;++p){a(u,-1,0,"BOT");for(var v=f.s.c;v<=f.e.c;++v){var y=An({r:p,c:v});if(d=g?(l[p]||[])[v]:l[y],!d){a(u,1,0,"");continue}switch(d.t){case"n":var E=d.w;!E&&d.v!=null&&(E=d.v),E==null?d.f&&!d.F?a(u,1,0,"="+d.f):a(u,1,0,""):a(u,0,E,"V");break;case"b":a(u,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":a(u,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=lu(d.z||or[14],fs($i(d.v)))),a(u,0,d.w,"V");break;default:a(u,1,0,"")}}}a(u,-1,0,"EOD");var T=`\r
`,R=u.join(T);return R}})();return{to_workbook:r,to_sheet:t,from_sheet:i}})(),qV=(function(){function n(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(d,g){for(var p=d.split(`
`),v=-1,y=-1,E=0,T=[];E!==p.length;++E){var R=p[E].trim().split(":");if(R[0]==="cell"){var M=Yr(R[1]);if(T.length<=M.r)for(v=T.length;v<=M.r;++v)T[v]||(T[v]=[]);switch(v=M.r,y=M.c,R[2]){case"t":T[v][y]=n(R[3]);break;case"v":T[v][y]=+R[3];break;case"vtf":var k=R[R.length-1];case"vtc":switch(R[3]){case"nl":T[v][y]=!!+R[4];break;default:T[v][y]=+R[4];break}R[2]=="vtf"&&(T[v][y]=[T[v][y],k])}}}return g&&g.sheetRows&&(T=T.slice(0,g.sheetRows)),T}function r(d,g){return L0(t(d,g),g)}function i(d,g){return tf(r(d,g),g)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(d){if(!d||!d["!ref"])return"";for(var g=[],p=[],v,y="",E=Ws(d["!ref"]),T=Array.isArray(d),R=E.s.r;R<=E.e.r;++R)for(var M=E.s.c;M<=E.e.c;++M)if(y=An({r:R,c:M}),v=T?(d[R]||[])[M]:d[y],!(!v||v.v==null||v.t==="z")){switch(p=["cell",y,"t"],v.t){case"s":case"str":p.push(e(v.v));break;case"n":v.f?(p[2]="vtf",p[3]="n",p[4]=v.v,p[5]=e(v.f)):(p[2]="v",p[3]=v.v);break;case"b":p[2]="vt"+(v.f?"f":"c"),p[3]="nl",p[4]=v.v?"1":"0",p[5]=e(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var k=fs($i(v.v));p[2]="vtc",p[3]="nd",p[4]=""+k,p[5]=v.w||lu(v.z||or[14],k);break;case"e":continue}g.push(p.join(":"))}return g.push("sheet:c:"+(E.e.c-E.s.c+1)+":r:"+(E.e.r-E.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function f(d){return[s,a,o,a,u(d),l].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:f}})(),Yme=(function(){function n(f,d,g,p,v){v.raw?d[g][p]=f:f===""||(f==="TRUE"?d[g][p]=!0:f==="FALSE"?d[g][p]=!1:isNaN(Il(f))?isNaN(Ep(f).getDate())?d[g][p]=f:d[g][p]=$i(f):d[g][p]=Il(f))}function e(f,d){var g=d||{},p=[];if(!f||f.length===0)return p;for(var v=f.split(/[\r\n]/),y=v.length-1;y>=0&&v[y].length===0;)--y;for(var E=10,T=0,R=0;R<=y;++R)T=v[R].indexOf(" "),T==-1?T=v[R].length:T++,E=Math.max(E,T);for(R=0;R<=y;++R){p[R]=[];var M=0;for(n(v[R].slice(0,E).trim(),p,R,M,g),M=1;M<=(v[R].length-E)/10+1;++M)n(v[R].slice(E+(M-1)*10,E+M*10).trim(),p,R,M,g)}return g.sheetRows&&(p=p.slice(0,g.sheetRows)),p}var t={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(f){for(var d={},g=!1,p=0,v=0;p<f.length;++p)(v=f.charCodeAt(p))==34?g=!g:!g&&v in t&&(d[v]=(d[v]||0)+1);v=[];for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&v.push([d[p],p]);if(!v.length){d=r;for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&v.push([d[p],p])}return v.sort(function(y,E){return y[0]-E[0]||r[y[1]]-r[E[1]]}),t[v.pop()[1]]||44}function s(f,d){var g=d||{},p="",v=g.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(p=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(p=f.charAt(4),f=f.slice(6)):p=i(f.slice(0,1024)):g&&g.FS?p=g.FS:p=i(f.slice(0,1024));var E=0,T=0,R=0,M=0,k=0,V=p.charCodeAt(0),z=!1,P=0,C=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var b=g.dateNF!=null?uge(g.dateNF):null;function L(){var F=f.slice(M,k),U={};if(F.charAt(0)=='"'&&F.charAt(F.length-1)=='"'&&(F=F.slice(1,-1).replace(/""/g,'"')),F.length===0)U.t="z";else if(g.raw)U.t="s",U.v=F;else if(F.trim().length===0)U.t="s",U.v=F;else if(F.charCodeAt(0)==61)F.charCodeAt(1)==34&&F.charCodeAt(F.length-1)==34?(U.t="s",U.v=F.slice(2,-1).replace(/""/g,'"')):Hpe(F)?(U.t="n",U.f=F.slice(1)):(U.t="s",U.v=F);else if(F=="TRUE")U.t="b",U.v=!0;else if(F=="FALSE")U.t="b",U.v=!1;else if(!isNaN(R=Il(F)))U.t="n",g.cellText!==!1&&(U.w=F),U.v=R;else if(!isNaN(Ep(F).getDate())||b&&F.match(b)){U.z=g.dateNF||or[14];var j=0;b&&F.match(b)&&(F=hge(F,g.dateNF,F.match(b)||[]),j=1),g.cellDates?(U.t="d",U.v=$i(F,j)):(U.t="n",U.v=fs($i(F,j))),g.cellText!==!1&&(U.w=lu(U.z,U.v instanceof Date?fs(U.v):U.v)),g.cellNF||delete U.z}else U.t="s",U.v=F;if(U.t=="z"||(g.dense?(v[E]||(v[E]=[]),v[E][T]=U):v[An({c:T,r:E})]=U),M=k+1,C=f.charCodeAt(M),y.e.c<T&&(y.e.c=T),y.e.r<E&&(y.e.r=E),P==V)++T;else if(T=0,++E,g.sheetRows&&g.sheetRows<=E)return!0}e:for(;k<f.length;++k)switch(P=f.charCodeAt(k)){case 34:C===34&&(z=!z);break;case V:case 10:case 13:if(!z&&L())break e;break}return k-M>0&&L(),v["!ref"]=wr(y),v}function a(f,d){return!(d&&d.PRN)||d.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?s(f,d):L0(e(f,d),d)}function o(f,d){var g="",p=d.type=="string"?[0,0,0,0]:ave(f,d);switch(d.type){case"base64":g=Nl(f);break;case"binary":g=f;break;case"buffer":d.codepage==65001?g=f.toString("utf8"):d.codepage&&typeof Jx<"u"||(g=on&&Buffer.isBuffer(f)?f.toString("binary"):g_(f));break;case"array":g=PE(f);break;case"string":g=f;break;default:throw new Error("Unrecognized type "+d.type)}return p[0]==239&&p[1]==187&&p[2]==191?g=Rm(g.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?g=Rm(g):d.type=="binary"&&typeof Jx<"u",g.slice(0,19)=="socialcalc:version:"?qV.to_sheet(d.type=="string"?g:Rm(g),d):a(g,d)}function l(f,d){return tf(o(f,d),d)}function u(f){for(var d=[],g=Gn(f["!ref"]),p,v=Array.isArray(f),y=g.s.r;y<=g.e.r;++y){for(var E=[],T=g.s.c;T<=g.e.c;++T){var R=An({r:y,c:T});if(p=v?(f[y]||[])[T]:f[R],!p||p.v==null){E.push("          ");continue}for(var M=(p.w||(Ll(p),p.w)||"").slice(0,10);M.length<10;)M+=" ";E.push(M+(T===0?" ":""))}d.push(E.join(""))}return d.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}})(),qL=(function(){function n(O,te,ne){if(O){Ms(O,O.l||0);for(var ee=ne.Enum||Ie;O.l<O.length;){var me=O.read_shift(2),Se=ee[me]||ee[65535],Ne=O.read_shift(2),se=O.l+Ne,re=Se.f&&Se.f(O,Ne,ne);if(O.l=se,te(re,Se,me))return}}}function e(O,te){switch(te.type){case"base64":return t(Va(Nl(O)),te);case"binary":return t(Va(O),te);case"buffer":case"array":return t(O,te)}throw"Unsupported type "+te.type}function t(O,te){if(!O)return O;var ne=te||{},ee=ne.dense?[]:{},me="Sheet1",Se="",Ne=0,se={},re=[],D=[],Ye={s:{r:0,c:0},e:{r:0,c:0}},he=ne.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)ne.Enum=Ie,n(O,function(ae,lt,ot){switch(ot){case 0:ne.vers=ae,ae>=4096&&(ne.qpro=!0);break;case 6:Ye=ae;break;case 204:ae&&(Se=ae);break;case 222:Se=ae;break;case 15:case 51:ne.qpro||(ae[1].v=ae[1].v.slice(1));case 13:case 14:case 16:ot==14&&(ae[2]&112)==112&&(ae[2]&15)>1&&(ae[2]&15)<15&&(ae[1].z=ne.dateNF||or[14],ne.cellDates&&(ae[1].t="d",ae[1].v=dV(ae[1].v))),ne.qpro&&ae[3]>Ne&&(ee["!ref"]=wr(Ye),se[me]=ee,re.push(me),ee=ne.dense?[]:{},Ye={s:{r:0,c:0},e:{r:0,c:0}},Ne=ae[3],me=Se||"Sheet"+(Ne+1),Se="");var gt=ne.dense?(ee[ae[0].r]||[])[ae[0].c]:ee[An(ae[0])];if(gt){gt.t=ae[1].t,gt.v=ae[1].v,ae[1].z!=null&&(gt.z=ae[1].z),ae[1].f!=null&&(gt.f=ae[1].f);break}ne.dense?(ee[ae[0].r]||(ee[ae[0].r]=[]),ee[ae[0].r][ae[0].c]=ae[1]):ee[An(ae[0])]=ae[1];break}},ne);else if(O[2]==26||O[2]==14)ne.Enum=Y,O[2]==14&&(ne.qpro=!0,O.l=0),n(O,function(ae,lt,ot){switch(ot){case 204:me=ae;break;case 22:ae[1].v=ae[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ae[3]>Ne&&(ee["!ref"]=wr(Ye),se[me]=ee,re.push(me),ee=ne.dense?[]:{},Ye={s:{r:0,c:0},e:{r:0,c:0}},Ne=ae[3],me="Sheet"+(Ne+1)),he>0&&ae[0].r>=he)break;ne.dense?(ee[ae[0].r]||(ee[ae[0].r]=[]),ee[ae[0].r][ae[0].c]=ae[1]):ee[An(ae[0])]=ae[1],Ye.e.c<ae[0].c&&(Ye.e.c=ae[0].c),Ye.e.r<ae[0].r&&(Ye.e.r=ae[0].r);break;case 27:ae[14e3]&&(D[ae[14e3][0]]=ae[14e3][1]);break;case 1537:D[ae[0]]=ae[1],ae[0]==Ne&&(me=ae[1]);break}},ne);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(ee["!ref"]=wr(Ye),se[Se||me]=ee,re.push(Se||me),!D.length)return{SheetNames:re,Sheets:se};for(var He={},ue=[],W=0;W<D.length;++W)se[re[W]]?(ue.push(D[W]||re[W]),He[D[W]]=se[D[W]]||se[re[W]]):(ue.push(D[W]),He[D[W]]={"!ref":"A1"});return{SheetNames:ue,Sheets:He}}function r(O,te){var ne=te||{};if(+ne.codepage>=0&&xp(+ne.codepage),ne.type=="string")throw new Error("Cannot write WK1 to JS string");var ee=us(),me=Gn(O["!ref"]),Se=Array.isArray(O),Ne=[];Ze(ee,0,s(1030)),Ze(ee,6,l(me));for(var se=Math.min(me.e.r,8191),re=me.s.r;re<=se;++re)for(var D=fi(re),Ye=me.s.c;Ye<=me.e.c;++Ye){re===me.s.r&&(Ne[Ye]=Pi(Ye));var he=Ne[Ye]+D,He=Se?(O[re]||[])[Ye]:O[he];if(!(!He||He.t=="z"))if(He.t=="n")(He.v|0)==He.v&&He.v>=-32768&&He.v<=32767?Ze(ee,13,p(re,Ye,He.v)):Ze(ee,14,y(re,Ye,He.v));else{var ue=Ll(He);Ze(ee,15,d(re,Ye,ue.slice(0,239)))}}return Ze(ee,1),ee.end()}function i(O,te){var ne=te||{};if(+ne.codepage>=0&&xp(+ne.codepage),ne.type=="string")throw new Error("Cannot write WK3 to JS string");var ee=us();Ze(ee,0,a(O));for(var me=0,Se=0;me<O.SheetNames.length;++me)(O.Sheets[O.SheetNames[me]]||{})["!ref"]&&Ze(ee,27,Ae(O.SheetNames[me],Se++));var Ne=0;for(me=0;me<O.SheetNames.length;++me){var se=O.Sheets[O.SheetNames[me]];if(!(!se||!se["!ref"])){for(var re=Gn(se["!ref"]),D=Array.isArray(se),Ye=[],he=Math.min(re.e.r,8191),He=re.s.r;He<=he;++He)for(var ue=fi(He),W=re.s.c;W<=re.e.c;++W){He===re.s.r&&(Ye[W]=Pi(W));var ae=Ye[W]+ue,lt=D?(se[He]||[])[W]:se[ae];if(!(!lt||lt.t=="z"))if(lt.t=="n")Ze(ee,23,L(He,W,Ne,lt.v));else{var ot=Ll(lt);Ze(ee,22,P(He,W,Ne,ot.slice(0,239)))}}++Ne}}return Ze(ee,1),ee.end()}function s(O){var te=Re(2);return te.write_shift(2,O),te}function a(O){var te=Re(26);te.write_shift(2,4096),te.write_shift(2,4),te.write_shift(4,0);for(var ne=0,ee=0,me=0,Se=0;Se<O.SheetNames.length;++Se){var Ne=O.SheetNames[Se],se=O.Sheets[Ne];if(!(!se||!se["!ref"])){++me;var re=Ws(se["!ref"]);ne<re.e.r&&(ne=re.e.r),ee<re.e.c&&(ee=re.e.c)}}return ne>8191&&(ne=8191),te.write_shift(2,ne),te.write_shift(1,me),te.write_shift(1,ee),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(1,1),te.write_shift(1,2),te.write_shift(4,0),te.write_shift(4,0),te}function o(O,te,ne){var ee={s:{c:0,r:0},e:{c:0,r:0}};return te==8&&ne.qpro?(ee.s.c=O.read_shift(1),O.l++,ee.s.r=O.read_shift(2),ee.e.c=O.read_shift(1),O.l++,ee.e.r=O.read_shift(2),ee):(ee.s.c=O.read_shift(2),ee.s.r=O.read_shift(2),te==12&&ne.qpro&&(O.l+=2),ee.e.c=O.read_shift(2),ee.e.r=O.read_shift(2),te==12&&ne.qpro&&(O.l+=2),ee.s.c==65535&&(ee.s.c=ee.e.c=ee.s.r=ee.e.r=0),ee)}function l(O){var te=Re(8);return te.write_shift(2,O.s.c),te.write_shift(2,O.s.r),te.write_shift(2,O.e.c),te.write_shift(2,O.e.r),te}function u(O,te,ne){var ee=[{c:0,r:0},{t:"n",v:0},0,0];return ne.qpro&&ne.vers!=20768?(ee[0].c=O.read_shift(1),ee[3]=O.read_shift(1),ee[0].r=O.read_shift(2),O.l+=2):(ee[2]=O.read_shift(1),ee[0].c=O.read_shift(2),ee[0].r=O.read_shift(2)),ee}function f(O,te,ne){var ee=O.l+te,me=u(O,te,ne);if(me[1].t="s",ne.vers==20768){O.l++;var Se=O.read_shift(1);return me[1].v=O.read_shift(Se,"utf8"),me}return ne.qpro&&O.l++,me[1].v=O.read_shift(ee-O.l,"cstr"),me}function d(O,te,ne){var ee=Re(7+ne.length);ee.write_shift(1,255),ee.write_shift(2,te),ee.write_shift(2,O),ee.write_shift(1,39);for(var me=0;me<ee.length;++me){var Se=ne.charCodeAt(me);ee.write_shift(1,Se>=128?95:Se)}return ee.write_shift(1,0),ee}function g(O,te,ne){var ee=u(O,te,ne);return ee[1].v=O.read_shift(2,"i"),ee}function p(O,te,ne){var ee=Re(7);return ee.write_shift(1,255),ee.write_shift(2,te),ee.write_shift(2,O),ee.write_shift(2,ne,"i"),ee}function v(O,te,ne){var ee=u(O,te,ne);return ee[1].v=O.read_shift(8,"f"),ee}function y(O,te,ne){var ee=Re(13);return ee.write_shift(1,255),ee.write_shift(2,te),ee.write_shift(2,O),ee.write_shift(8,ne,"f"),ee}function E(O,te,ne){var ee=O.l+te,me=u(O,te,ne);if(me[1].v=O.read_shift(8,"f"),ne.qpro)O.l=ee;else{var Se=O.read_shift(2);k(O.slice(O.l,O.l+Se),me),O.l+=Se}return me}function T(O,te,ne){var ee=te&32768;return te&=-32769,te=(ee?O:0)+(te>=8192?te-16384:te),(ee?"":"$")+(ne?Pi(te):fi(te))}var R={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},M=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function k(O,te){Ms(O,0);for(var ne=[],ee=0,me="",Se="",Ne="",se="";O.l<O.length;){var re=O[O.l++];switch(re){case 0:ne.push(O.read_shift(8,"f"));break;case 1:Se=T(te[0].c,O.read_shift(2),!0),me=T(te[0].r,O.read_shift(2),!1),ne.push(Se+me);break;case 2:{var D=T(te[0].c,O.read_shift(2),!0),Ye=T(te[0].r,O.read_shift(2),!1);Se=T(te[0].c,O.read_shift(2),!0),me=T(te[0].r,O.read_shift(2),!1),ne.push(D+Ye+":"+Se+me)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:ne.push("("+ne.pop()+")");break;case 5:ne.push(O.read_shift(2));break;case 6:{for(var he="";re=O[O.l++];)he+=String.fromCharCode(re);ne.push('"'+he.replace(/"/g,'""')+'"')}break;case 8:ne.push("-"+ne.pop());break;case 23:ne.push("+"+ne.pop());break;case 22:ne.push("NOT("+ne.pop()+")");break;case 20:case 21:se=ne.pop(),Ne=ne.pop(),ne.push(["AND","OR"][re-20]+"("+Ne+","+se+")");break;default:if(re<32&&M[re])se=ne.pop(),Ne=ne.pop(),ne.push(Ne+M[re]+se);else if(R[re]){if(ee=R[re][1],ee==69&&(ee=O[O.l++]),ee>ne.length){console.error("WK1 bad formula parse 0x"+re.toString(16)+":|"+ne.join("|")+"|");return}var He=ne.slice(-ee);ne.length-=ee,ne.push(R[re][0]+"("+He.join(",")+")")}else return re<=7?console.error("WK1 invalid opcode "+re.toString(16)):re<=24?console.error("WK1 unsupported op "+re.toString(16)):re<=30?console.error("WK1 invalid opcode "+re.toString(16)):re<=115?console.error("WK1 unsupported function opcode "+re.toString(16)):console.error("WK1 unrecognized opcode "+re.toString(16))}}ne.length==1?te[1].f=""+ne[0]:console.error("WK1 bad formula parse |"+ne.join("|")+"|")}function V(O){var te=[{c:0,r:0},{t:"n",v:0},0];return te[0].r=O.read_shift(2),te[3]=O[O.l++],te[0].c=O[O.l++],te}function z(O,te){var ne=V(O);return ne[1].t="s",ne[1].v=O.read_shift(te-4,"cstr"),ne}function P(O,te,ne,ee){var me=Re(6+ee.length);me.write_shift(2,O),me.write_shift(1,ne),me.write_shift(1,te),me.write_shift(1,39);for(var Se=0;Se<ee.length;++Se){var Ne=ee.charCodeAt(Se);me.write_shift(1,Ne>=128?95:Ne)}return me.write_shift(1,0),me}function C(O,te){var ne=V(O);ne[1].v=O.read_shift(2);var ee=ne[1].v>>1;if(ne[1].v&1)switch(ee&7){case 0:ee=(ee>>3)*5e3;break;case 1:ee=(ee>>3)*500;break;case 2:ee=(ee>>3)/20;break;case 3:ee=(ee>>3)/200;break;case 4:ee=(ee>>3)/2e3;break;case 5:ee=(ee>>3)/2e4;break;case 6:ee=(ee>>3)/16;break;case 7:ee=(ee>>3)/64;break}return ne[1].v=ee,ne}function b(O,te){var ne=V(O),ee=O.read_shift(4),me=O.read_shift(4),Se=O.read_shift(2);if(Se==65535)return ee===0&&me===3221225472?(ne[1].t="e",ne[1].v=15):ee===0&&me===3489660928?(ne[1].t="e",ne[1].v=42):ne[1].v=0,ne;var Ne=Se&32768;return Se=(Se&32767)-16446,ne[1].v=(1-Ne*2)*(me*Math.pow(2,Se+32)+ee*Math.pow(2,Se)),ne}function L(O,te,ne,ee){var me=Re(14);if(me.write_shift(2,O),me.write_shift(1,ne),me.write_shift(1,te),ee==0)return me.write_shift(4,0),me.write_shift(4,0),me.write_shift(2,65535),me;var Se=0,Ne=0,se=0,re=0;return ee<0&&(Se=1,ee=-ee),Ne=Math.log2(ee)|0,ee/=Math.pow(2,Ne-31),re=ee>>>0,(re&2147483648)==0&&(ee/=2,++Ne,re=ee>>>0),ee-=re,re|=2147483648,re>>>=0,ee*=Math.pow(2,32),se=ee>>>0,me.write_shift(4,se),me.write_shift(4,re),Ne+=16383+(Se?32768:0),me.write_shift(2,Ne),me}function F(O,te){var ne=b(O);return O.l+=te-14,ne}function U(O,te){var ne=V(O),ee=O.read_shift(4);return ne[1].v=ee>>6,ne}function j(O,te){var ne=V(O),ee=O.read_shift(8,"f");return ne[1].v=ee,ne}function Te(O,te){var ne=j(O);return O.l+=te-10,ne}function Me(O,te){return O[O.l+te-1]==0?O.read_shift(te,"cstr"):""}function Ue(O,te){var ne=O[O.l++];ne>te-1&&(ne=te-1);for(var ee="";ee.length<ne;)ee+=String.fromCharCode(O[O.l++]);return ee}function ke(O,te,ne){if(!(!ne.qpro||te<21)){var ee=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var me=O.read_shift(te-21,"cstr");return[ee,me]}}function le(O,te){for(var ne={},ee=O.l+te;O.l<ee;){var me=O.read_shift(2);if(me==14e3){for(ne[me]=[0,""],ne[me][0]=O.read_shift(2);O[O.l];)ne[me][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return ne}function Ae(O,te){var ne=Re(5+O.length);ne.write_shift(2,14e3),ne.write_shift(2,te);for(var ee=0;ee<O.length;++ee){var me=O.charCodeAt(ee);ne[ne.l++]=me>127?95:me}return ne[ne.l++]=0,ne}var Ie={0:{n:"BOF",f:WV},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:v},15:{n:"LABEL",f},16:{n:"FORMULA",f:E},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Me},222:{n:"SHEETNAMELP",f:Ue},65535:{n:""}},Y={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:z},23:{n:"NUMBER17",f:b},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:F},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:le},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:U},38:{n:"??"},39:{n:"NUMBER27",f:j},40:{n:"FORMULA28",f:Te},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Me},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ke},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:e}})(),Xme=/^\s|\s$|[\t\n\r]/;function ZV(n,e){if(!e.bookSST)return"";var t=[Tr];t[t.length]=qe("sst",null,{xmlns:N0[0],count:n.Count,uniqueCount:n.Unique});for(var r=0;r!=n.length;++r)if(n[r]!=null){var i=n[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(Xme)&&(s+=' xml:space="preserve"'),s+=">"+Tn(i.t)+"</t>"),s+="</si>",t[t.length]=s}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function qme(n){return[n.read_shift(4),n.read_shift(4)]}function Zme(n,e){return e||(e=Re(8)),e.write_shift(4,n.Count),e.write_shift(4,n.Unique),e}var Qme=Uge;function Jme(n){var e=us();Oe(e,159,Zme(n));for(var t=0;t<n.length;++t)Oe(e,19,Qme(n[t]));return Oe(e,160),e.end()}function epe(n){for(var e=[],t=n.split(""),r=0;r<t.length;++r)e[r]=t[r].charCodeAt(0);return e}function QV(n){var e=0,t,r=epe(n),i=r.length+1,s,a,o,l,u;for(t=Bh(i),t[0]=r.length,s=1;s!=i;++s)t[s]=r[s-1];for(s=i-1;s>=0;--s)a=t[s],o=(e&16384)===0?0:1,l=e<<1&32767,u=o|l,e=u^a;return e^52811}var tpe=(function(){function n(i,s){switch(s.type){case"base64":return e(Nl(i),s);case"binary":return e(i,s);case"buffer":return e(on&&Buffer.isBuffer(i)?i.toString("binary"):g_(i),s);case"array":return e(PE(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var a=s||{},o=a.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(f,d){Array.isArray(o)&&(o[d]=[]);for(var g=/\\\w+\b/g,p=0,v,y=-1;v=g.exec(f);){switch(v[0]){case"\\cell":var E=f.slice(p,g.lastIndex-v[0].length);if(E[0]==" "&&(E=E.slice(1)),++y,E.length){var T={v:E,t:"s"};Array.isArray(o)?o[d][y]=T:o[An({r:d,c:y})]=T}break}p=g.lastIndex}y>u.e.c&&(u.e.c=y)}),o["!ref"]=wr(u),o}function t(i,s){return tf(n(i,s),s)}function r(i){for(var s=["{\\rtf1\\ansi"],a=Gn(i["!ref"]),o,l=Array.isArray(i),u=a.s.r;u<=a.e.r;++u){s.push("\\trowd\\trautofit1");for(var f=a.s.c;f<=a.e.c;++f)s.push("\\cellx"+(f+1));for(s.push("\\pard\\intbl"),f=a.s.c;f<=a.e.c;++f){var d=An({r:u,c:f});o=l?(i[u]||[])[f]:i[d],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(Ll(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:t,to_sheet:n,from_sheet:r}})();function ZL(n){for(var e=0,t=1;e!=3;++e)t=t*256+(n[e]>255?255:n[e]<0?0:n[e]);return t.toString(16).toUpperCase().slice(1)}var npe=6,Al=npe;function lv(n){return Math.floor((n+Math.round(128/Al)/256)*Al)}function cv(n){return Math.floor((n-5)/Al*100+.5)/100}function wI(n){return Math.round((n*Al+5)/Al*256)/256}function LC(n){n.width?(n.wpx=lv(n.width),n.wch=cv(n.wpx),n.MDW=Al):n.wpx?(n.wch=cv(n.wpx),n.width=wI(n.wch),n.MDW=Al):typeof n.wch=="number"&&(n.width=wI(n.wch),n.wpx=lv(n.width),n.MDW=Al),n.customWidth&&delete n.customWidth}var rpe=96,JV=rpe;function uv(n){return n*96/JV}function ej(n){return n*JV/96}function ipe(n){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var r=t[0];r<=t[1];++r)n[r]!=null&&(e[e.length]=qe("numFmt",null,{numFmtId:r,formatCode:Tn(n[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=qe("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function spe(n){var e=[];return e[e.length]=qe("cellXfs",null),n.forEach(function(t){e[e.length]=qe("xf",null,t)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=qe("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function tj(n,e){var t=[Tr,qe("styleSheet",null,{xmlns:N0[0],"xmlns:vt":Hr.vt})],r;return n.SSF&&(r=ipe(n.SSF))!=null&&(t[t.length]=r),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=spe(e.cellXfs))&&(t[t.length]=r),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function ape(n,e){var t=n.read_shift(2),r=bi(n);return[t,r]}function ope(n,e,t){t||(t=Re(6+4*e.length)),t.write_shift(2,n),Xr(e,t);var r=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),r}function lpe(n,e,t){var r={};r.sz=n.read_shift(2)/20;var i=Xge(n);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var s=n.read_shift(2);switch(s===700&&(r.bold=1),n.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var a=n.read_shift(1);a!=0&&(r.underline=a);var o=n.read_shift(1);o>0&&(r.family=o);var l=n.read_shift(1);switch(l>0&&(r.charset=l),n.l++,r.color=Yge(n),n.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=bi(n),r}function cpe(n,e){e||(e=Re(153)),e.write_shift(2,n.sz*20),qge(n,e),e.write_shift(2,n.bold?700:400);var t=0;n.vertAlign=="superscript"?t=1:n.vertAlign=="subscript"&&(t=2),e.write_shift(2,t),e.write_shift(1,n.underline||0),e.write_shift(1,n.family||0),e.write_shift(1,n.charset||0),e.write_shift(1,0),av(n.color,e);var r=0;return r=2,e.write_shift(1,r),Xr(n.name,e),e.length>e.l?e.slice(0,e.l):e}var upe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],AS,hpe=jo;function QL(n,e){e||(e=Re(84)),AS||(AS=wC(upe));var t=AS[n.patternType];t==null&&(t=40),e.write_shift(4,t);var r=0;if(t!=40)for(av({auto:1},e),av({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function fpe(n,e){var t=n.l+e,r=n.read_shift(2),i=n.read_shift(2);return n.l=t,{ixfe:r,numFmtId:i}}function nj(n,e,t){t||(t=Re(16)),t.write_shift(2,e||0),t.write_shift(2,n.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var r=0;return t.write_shift(1,r),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function Og(n,e){return e||(e=Re(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var dpe=jo;function gpe(n,e){return e||(e=Re(51)),e.write_shift(1,0),Og(null,e),Og(null,e),Og(null,e),Og(null,e),Og(null,e),e.length>e.l?e.slice(0,e.l):e}function mpe(n,e){return e||(e=Re(52)),e.write_shift(4,n.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),sv(n.name||"",e),e.length>e.l?e.slice(0,e.l):e}function ppe(n,e,t){var r=Re(2052);return r.write_shift(4,n),sv(e,r),sv(t,r),r.length>r.l?r.slice(0,r.l):r}function _pe(n,e){if(e){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&++t}),t!=0&&(Oe(n,615,Ha(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&Oe(n,44,ope(i,e[i]))}),Oe(n,616))}}function ype(n){var e=1;Oe(n,611,Ha(e)),Oe(n,43,cpe({sz:12,color:{theme:1},name:"Calibri",family:2})),Oe(n,612)}function xpe(n){var e=2;Oe(n,603,Ha(e)),Oe(n,45,QL({patternType:"none"})),Oe(n,45,QL({patternType:"gray125"})),Oe(n,604)}function vpe(n){var e=1;Oe(n,613,Ha(e)),Oe(n,46,gpe()),Oe(n,614)}function Epe(n){var e=1;Oe(n,626,Ha(e)),Oe(n,47,nj({numFmtId:0},65535)),Oe(n,627)}function wpe(n,e){Oe(n,617,Ha(e.length)),e.forEach(function(t){Oe(n,47,nj(t,0))}),Oe(n,618)}function Spe(n){var e=1;Oe(n,619,Ha(e)),Oe(n,48,mpe({xfId:0,name:"Normal"})),Oe(n,620)}function Tpe(n){var e=0;Oe(n,505,Ha(e)),Oe(n,506)}function Ipe(n){var e=0;Oe(n,508,ppe(e,"TableStyleMedium9","PivotStyleMedium4")),Oe(n,509)}function Ape(n,e){var t=us();return Oe(t,278),_pe(t,n.SSF),ype(t),xpe(t),vpe(t),Epe(t),wpe(t,e.cellXfs),Spe(t),Tpe(t),Ipe(t),Oe(t,279),t.end()}function rj(n,e){if(e&&e.themeXLSX)return e.themeXLSX;if(n&&typeof n.raw=="string")return n.raw;var t=[Tr];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function Rpe(n,e){return{flags:n.read_shift(4),version:n.read_shift(4),name:bi(n)}}function Cpe(n){var e=Re(12+2*n.name.length);return e.write_shift(4,n.flags),e.write_shift(4,n.version),Xr(n.name,e),e.slice(0,e.l)}function Ppe(n){for(var e=[],t=n.read_shift(4);t-- >0;)e.push([n.read_shift(4),n.read_shift(4)]);return e}function bpe(n){var e=Re(4+8*n.length);e.write_shift(4,n.length);for(var t=0;t<n.length;++t)e.write_shift(4,n[t][0]),e.write_shift(4,n[t][1]);return e}function Mpe(n,e){var t=Re(8+2*e.length);return t.write_shift(4,n),Xr(e,t),t.slice(0,t.l)}function kpe(n){return n.l+=4,n.read_shift(4)!=0}function Npe(n,e){var t=Re(8);return t.write_shift(4,n),t.write_shift(4,1),t}function Lpe(){var n=us();return Oe(n,332),Oe(n,334,Ha(1)),Oe(n,335,Cpe({name:"XLDAPR",version:12e4,flags:3496657072})),Oe(n,336),Oe(n,339,Mpe(1,"XLDAPR")),Oe(n,52),Oe(n,35,Ha(514)),Oe(n,4096,Ha(0)),Oe(n,4097,oa(1)),Oe(n,36),Oe(n,53),Oe(n,340),Oe(n,337,Npe(1)),Oe(n,51,bpe([[1,0]])),Oe(n,338),Oe(n,333),n.end()}function ij(){var n=[Tr];return n.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),n.join("")}function Ope(n){var e={};e.i=n.read_shift(4);var t={};t.r=n.read_shift(4),t.c=n.read_shift(4),e.r=An(t);var r=n.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}var Id=1024;function sj(n,e){for(var t=[21600,21600],r=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),i=[qe("xml",null,{"xmlns:v":Ls.v,"xmlns:o":Ls.o,"xmlns:x":Ls.x,"xmlns:mv":Ls.mv}).replace(/\/>/,">"),qe("o:shapelayout",qe("o:idmap",null,{"v:ext":"edit",data:n}),{"v:ext":"edit"}),qe("v:shapetype",[qe("v:stroke",null,{joinstyle:"miter"}),qe("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:r})];Id<n*1e3;)Id+=1e3;return e.forEach(function(s){var a=Yr(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?qe("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=qe("v:fill",l,o),f={on:"t",obscured:"t"};++Id,i=i.concat(["<v:shape"+Sp({id:"_x0000_s"+Id,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,qe("v:shadow",null,f),qe("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ui("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),ui("x:AutoFill","False"),ui("x:Row",String(a.r)),ui("x:Column",String(a.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function aj(n){var e=[Tr,qe("comments",null,{xmlns:N0[0]})],t=[];return e.push("<authors>"),n.forEach(function(r){r[1].forEach(function(i){var s=Tn(i.a);t.indexOf(s)==-1&&(t.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&t.indexOf("tc="+i.ID)==-1&&(t.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),n.forEach(function(r){var i=0,s=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=t.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(i=t.indexOf(Tn(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(ui("t",Tn(s[0]||"")));else{for(var a=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)a+=`Reply:
    `+s[o]+`
`;e.push(ui("t",Tn(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function Dpe(n,e,t){var r=[Tr,qe("ThreadedComments",null,{xmlns:Hr.TCMNT}).replace(/[\/]>/,">")];return n.forEach(function(i){var s="";(i[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};o==0?s=l.id:l.parentId=s,a.ID=l.id,a.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),r.push(qe("threadedComment",ui("text",a.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function Fpe(n){var e=[Tr,qe("personList",null,{xmlns:Hr.TCMNT,"xmlns:x":N0[0]}).replace(/[\/]>/,">")];return n.forEach(function(t,r){e.push(qe("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}function Vpe(n){var e={};e.iauthor=n.read_shift(4);var t=af(n);return e.rfx=t.s,e.ref=An(t.s),n.l+=16,e}function jpe(n,e){return e==null&&(e=Re(36)),e.write_shift(4,n[1].iauthor),O0(n[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var Gpe=bi;function Bpe(n){return Xr(n.slice(0,54))}function Upe(n){var e=us(),t=[];return Oe(e,628),Oe(e,630),n.forEach(function(r){r[1].forEach(function(i){t.indexOf(i.a)>-1||(t.push(i.a.slice(0,54)),Oe(e,632,Bpe(i.a)))})}),Oe(e,631),Oe(e,633),n.forEach(function(r){r[1].forEach(function(i){i.iauthor=t.indexOf(i.a);var s={s:Yr(r[0]),e:Yr(r[0])};Oe(e,635,jpe([s,i])),i.t&&i.t.length>0&&Oe(e,637,$ge(i)),Oe(e,636),delete i.iauthor})}),Oe(e,634),Oe(e,629),e.end()}function zpe(n,e){e.FullPaths.forEach(function(t,r){if(r!=0){var i=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&Cn.utils.cfb_add(n,i,e.FileIndex[r].content)}})}var oj=["xlsb","xlsm","xlam","biff8","xla"],$pe=(function(){var n=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(r,i,s,a){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,f=a.length>0?parseInt(a,10)|0:0;return o?f+=e.c:--f,l?u+=e.r:--u,i+(o?"":"$")+Pi(f)+(l?"":"$")+fi(u)}return function(i,s){return e=s,i.replace(n,t)}})(),OC=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,DC=(function(){return function(e,t){return e.replace(OC,function(r,i,s,a,o,l){var u=PC(a)-(s?0:t.c),f=CC(l)-(o?0:t.r),d=f==0?"":o?f+1:"["+f+"]",g=u==0?"":s?u+1:"["+u+"]";return i+"R"+d+"C"+g})}})();function Wpe(n,e){return n.replace(OC,function(t,r,i,s,a,o){return r+(i=="$"?i+s:Pi(PC(s)+e.c))+(a=="$"?a+o:fi(CC(o)+e.r))})}function Hpe(n){return n.length!=1}function yr(n){n.l+=1}function cu(n,e){var t=n.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function lj(n,e,t){var r=2;if(t){if(t.biff>=2&&t.biff<=5)return cj(n);t.biff==12&&(r=4)}var i=n.read_shift(r),s=n.read_shift(r),a=cu(n),o=cu(n);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function cj(n){var e=cu(n),t=cu(n),r=n.read_shift(1),i=n.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:t[0],c:i,cRel:t[1],rRel:t[2]}}}function Kpe(n,e,t){if(t.biff<8)return cj(n);var r=n.read_shift(t.biff==12?4:2),i=n.read_shift(t.biff==12?4:2),s=cu(n),a=cu(n);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function uj(n,e,t){if(t&&t.biff>=2&&t.biff<=5)return Ype(n);var r=n.read_shift(t&&t.biff==12?4:2),i=cu(n);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function Ype(n){var e=cu(n),t=n.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function Xpe(n){var e=n.read_shift(2),t=n.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function qpe(n,e,t){var r=t&&t.biff?t.biff:8;if(r>=2&&r<=5)return Zpe(n);var i=n.read_shift(r>=12?4:2),s=n.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function Zpe(n){var e=n.read_shift(2),t=n.read_shift(1),r=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),i==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:i,rRel:r}}function Qpe(n,e,t){var r=(n[n.l++]&96)>>5,i=lj(n,t.biff>=2&&t.biff<=5?6:8,t);return[r,i]}function Jpe(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2,"i"),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}var a=lj(n,s,t);return[r,i,a]}function e_e(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t&&t.biff>8?12:t.biff<8?6:8,[r]}function t_e(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}return n.l+=s,[r,i]}function n_e(n,e,t){var r=(n[n.l++]&96)>>5,i=Kpe(n,e-1,t);return[r,i]}function r_e(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t.biff==2?6:t.biff==12?14:7,[r]}function JL(n){var e=n[n.l+1]&1,t=1;return n.l+=4,[e,t]}function i_e(n,e,t){n.l+=2;for(var r=n.read_shift(t&&t.biff==2?1:2),i=[],s=0;s<=r;++s)i.push(n.read_shift(t&&t.biff==2?1:2));return i}function s_e(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function a_e(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function o_e(n){var e=n[n.l+1]&255?1:0;return n.l+=2,[e,n.read_shift(2)]}function l_e(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=t&&t.biff==2?3:4,[r]}function hj(n){var e=n.read_shift(1),t=n.read_shift(1);return[e,t]}function c_e(n){return n.read_shift(2),hj(n)}function u_e(n){return n.read_shift(2),hj(n)}function h_e(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=uj(n,0,t);return[r,i]}function f_e(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=qpe(n,0,t);return[r,i]}function d_e(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(2);t&&t.biff==5&&(n.l+=12);var s=uj(n,0,t);return[r,i,s]}function g_e(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(t&&t.biff<=3?1:2);return[g1e[i],gj[i],r]}function m_e(n,e,t){var r=n[n.l++],i=n.read_shift(1),s=t&&t.biff<=3?[r==88?-1:0,n.read_shift(1)]:p_e(n);return[i,(s[0]===0?gj:d1e)[s[1]]]}function p_e(n){return[n[n.l+1]>>7,n.read_shift(2)&32767]}function __e(n,e,t){n.l+=t&&t.biff==2?3:4}function y_e(n,e,t){if(n.l++,t&&t.biff==12)return[n.read_shift(4,"i"),0];var r=n.read_shift(2),i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function x_e(n){return n.l++,__[n.read_shift(1)]}function v_e(n){return n.l++,n.read_shift(2)}function E_e(n){return n.l++,n.read_shift(1)!==0}function w_e(n){return n.l++,D0(n)}function S_e(n,e,t){return n.l++,KV(n,e-1,t)}function T_e(n,e){var t=[n.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=dme(n,1)?"TRUE":"FALSE",e!=12&&(n.l+=7);break;case 37:case 16:t[1]=__[n[n.l]],n.l+=e==12?4:8;break;case 0:n.l+=8;break;case 1:t[1]=D0(n);break;case 2:t[1]=_me(n,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function I_e(n,e,t){for(var r=n.read_shift(t.biff==12?4:2),i=[],s=0;s!=r;++s)i.push((t.biff==12?af:vme)(n));return i}function A_e(n,e,t){var r=0,i=0;t.biff==12?(r=n.read_shift(4),i=n.read_shift(4)):(i=1+n.read_shift(1),r=1+n.read_shift(2)),t.biff>=2&&t.biff<8&&(--r,--i==0&&(i=256));for(var s=0,a=[];s!=r&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=T_e(n,t.biff);return a}function R_e(n,e,t){var r=n.read_shift(1)>>>5&3,i=!t||t.biff>=8?4:2,s=n.read_shift(i);switch(t.biff){case 2:n.l+=5;break;case 3:case 4:n.l+=8;break;case 5:n.l+=12;break}return[r,0,s]}function C_e(n,e,t){if(t.biff==5)return P_e(n);var r=n.read_shift(1)>>>5&3,i=n.read_shift(2),s=n.read_shift(4);return[r,i,s]}function P_e(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2,"i");n.l+=8;var r=n.read_shift(2);return n.l+=12,[e,t,r]}function b_e(n,e,t){var r=n.read_shift(1)>>>5&3;n.l+=t&&t.biff==2?3:4;var i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function M_e(n,e,t){var r=n.read_shift(1)>>>5&3,i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function k_e(n,e,t){var r=n.read_shift(1)>>>5&3;return n.l+=4,t.biff<8&&n.l--,t.biff==12&&(n.l+=2),[r]}function N_e(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=4;if(t)switch(t.biff){case 5:s=15;break;case 12:s=6;break}return n.l+=s,[r,i]}var L_e=jo,O_e=jo,D_e=jo;function y_(n,e,t){return n.l+=2,[Xpe(n)]}function FC(n){return n.l+=6,[]}var F_e=y_,V_e=FC,j_e=FC,G_e=y_;function fj(n){return n.l+=2,[WV(n),n.read_shift(2)&1]}var B_e=y_,U_e=fj,z_e=FC,$_e=y_,W_e=y_,H_e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function K_e(n){n.l+=2;var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(4),i=n.read_shift(2),s=n.read_shift(2),a=H_e[t>>2&31];return{ixti:e,coltype:t&3,rt:a,idx:r,c:i,C:s}}function Y_e(n){return n.l+=2,[n.read_shift(4)]}function X_e(n,e,t){return n.l+=5,n.l+=2,n.l+=t.biff==2?1:4,["PTGSHEET"]}function q_e(n,e,t){return n.l+=t.biff==2?4:5,["PTGENDSHEET"]}function Z_e(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function Q_e(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function J_e(n){return n.l+=4,[0,0]}var eO={1:{n:"PtgExp",f:y_e},2:{n:"PtgTbl",f:D_e},3:{n:"PtgAdd",f:yr},4:{n:"PtgSub",f:yr},5:{n:"PtgMul",f:yr},6:{n:"PtgDiv",f:yr},7:{n:"PtgPower",f:yr},8:{n:"PtgConcat",f:yr},9:{n:"PtgLt",f:yr},10:{n:"PtgLe",f:yr},11:{n:"PtgEq",f:yr},12:{n:"PtgGe",f:yr},13:{n:"PtgGt",f:yr},14:{n:"PtgNe",f:yr},15:{n:"PtgIsect",f:yr},16:{n:"PtgUnion",f:yr},17:{n:"PtgRange",f:yr},18:{n:"PtgUplus",f:yr},19:{n:"PtgUminus",f:yr},20:{n:"PtgPercent",f:yr},21:{n:"PtgParen",f:yr},22:{n:"PtgMissArg",f:yr},23:{n:"PtgStr",f:S_e},26:{n:"PtgSheet",f:X_e},27:{n:"PtgEndSheet",f:q_e},28:{n:"PtgErr",f:x_e},29:{n:"PtgBool",f:E_e},30:{n:"PtgInt",f:v_e},31:{n:"PtgNum",f:w_e},32:{n:"PtgArray",f:r_e},33:{n:"PtgFunc",f:g_e},34:{n:"PtgFuncVar",f:m_e},35:{n:"PtgName",f:R_e},36:{n:"PtgRef",f:h_e},37:{n:"PtgArea",f:Qpe},38:{n:"PtgMemArea",f:b_e},39:{n:"PtgMemErr",f:L_e},40:{n:"PtgMemNoMem",f:O_e},41:{n:"PtgMemFunc",f:M_e},42:{n:"PtgRefErr",f:k_e},43:{n:"PtgAreaErr",f:e_e},44:{n:"PtgRefN",f:f_e},45:{n:"PtgAreaN",f:n_e},46:{n:"PtgMemAreaN",f:Z_e},47:{n:"PtgMemNoMemN",f:Q_e},57:{n:"PtgNameX",f:C_e},58:{n:"PtgRef3d",f:d_e},59:{n:"PtgArea3d",f:Jpe},60:{n:"PtgRefErr3d",f:N_e},61:{n:"PtgAreaErr3d",f:t_e},255:{}},e1e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},t1e={1:{n:"PtgElfLel",f:fj},2:{n:"PtgElfRw",f:$_e},3:{n:"PtgElfCol",f:F_e},6:{n:"PtgElfRwV",f:W_e},7:{n:"PtgElfColV",f:G_e},10:{n:"PtgElfRadical",f:B_e},11:{n:"PtgElfRadicalS",f:z_e},13:{n:"PtgElfColS",f:V_e},15:{n:"PtgElfColSV",f:j_e},16:{n:"PtgElfRadicalLel",f:U_e},25:{n:"PtgList",f:K_e},29:{n:"PtgSxName",f:Y_e},255:{}},n1e={0:{n:"PtgAttrNoop",f:J_e},1:{n:"PtgAttrSemi",f:l_e},2:{n:"PtgAttrIf",f:a_e},4:{n:"PtgAttrChoose",f:i_e},8:{n:"PtgAttrGoto",f:s_e},16:{n:"PtgAttrSum",f:__e},32:{n:"PtgAttrBaxcel",f:JL},33:{n:"PtgAttrBaxcel",f:JL},64:{n:"PtgAttrSpace",f:c_e},65:{n:"PtgAttrSpaceSemi",f:u_e},128:{n:"PtgAttrIfError",f:o_e},255:{}};function r1e(n,e,t,r){if(r.biff<8)return jo(n,e);for(var i=n.l+e,s=[],a=0;a!==t.length;++a)switch(t[a][0]){case"PtgArray":t[a][1]=A_e(n,0,r),s.push(t[a][1]);break;case"PtgMemArea":t[a][2]=I_e(n,t[a][1],r),s.push(t[a][2]);break;case"PtgExp":r&&r.biff==12&&(t[a][1][1]=n.read_shift(4),s.push(t[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[a][0]}return e=i-n.l,e!==0&&s.push(jo(n,e)),s}function i1e(n,e,t){for(var r=n.l+e,i,s,a=[];r!=n.l;)e=r-n.l,s=n[n.l],i=eO[s]||eO[e1e[s]],(s===24||s===25)&&(i=(s===24?t1e:n1e)[n[n.l+1]]),!i||!i.f?jo(n,e):a.push([i.n,i.f(n,e,t)]);return a}function s1e(n){for(var e=[],t=0;t<n.length;++t){for(var r=n[t],i=[],s=0;s<r.length;++s){var a=r[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var a1e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function o1e(n,e){if(!n&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(n)?"'"+n+"'":n}function dj(n,e,t){if(!n)return"SH33TJSERR0";if(t.biff>8&&(!n.XTI||!n.XTI[e]))return n.SheetNames[e];if(!n.XTI)return"SH33TJSERR6";var r=n.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":n.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(t.biff>8)switch(n[r[0]][0]){case 357:return i=r[1]==-1?"#REF":n.SheetNames[r[1]],r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 358:return t.SID!=null?n.SheetNames[t.SID]:"SH33TJSSAME"+n[r[0]][0];case 355:default:return"SH33TJSSRC"+n[r[0]][0]}switch(n[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":n.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 14849:return n[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return n[r[0]][0][3]?(i=r[1]==-1?"#REF":n[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+n[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function tO(n,e,t){var r=dj(n,e,t);return r=="#REF"?r:o1e(r,t)}function _0(n,e,t,r,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},o=[],l,u,f,d=0,g=0,p,v="";if(!n[0]||!n[0][0])return"";for(var y=-1,E="",T=0,R=n[0].length;T<R;++T){var M=n[0][T];switch(M[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),y>=0){switch(n[0][y][1][0]){case 0:E=ir(" ",n[0][y][1][1]);break;case 1:E=ir("\r",n[0][y][1][1]);break;default:if(E="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][y][1][0])}u=u+E,y=-1}o.push(u+a1e[M[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=Pm(M[1][1],a,i),o.push(bm(f,s));break;case"PtgRefN":f=t?Pm(M[1][1],t,i):M[1][1],o.push(bm(f,s));break;case"PtgRef3d":d=M[1][1],f=Pm(M[1][2],a,i),v=tO(r,d,i),o.push(v+"!"+bm(f,s));break;case"PtgFunc":case"PtgFuncVar":var k=M[1][0],V=M[1][1];k||(k=0),k&=127;var z=k==0?[]:o.slice(-k);o.length-=k,V==="User"&&(V=z.shift()),o.push(V+"("+z.join(",")+")");break;case"PtgBool":o.push(M[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(M[1]);break;case"PtgNum":o.push(String(M[1]));break;case"PtgStr":o.push('"'+M[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(M[1]);break;case"PtgAreaN":p=jL(M[1][1],t?{s:t}:a,i),o.push(TS(p,i));break;case"PtgArea":p=jL(M[1][1],a,i),o.push(TS(p,i));break;case"PtgArea3d":d=M[1][1],p=M[1][2],v=tO(r,d,i),o.push(v+"!"+TS(p,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=M[1][2];var P=(r.names||[])[g-1]||(r[0]||[])[g],C=P?P.Name:"SH33TJSNAME"+String(g);C&&C.slice(0,6)=="_xlfn."&&!i.xlfn&&(C=C.slice(6)),o.push(C);break;case"PtgNameX":var b=M[1][1];g=M[1][2];var L;if(i.biff<=5)b<0&&(b=-b),r[b]&&(L=r[b][g]);else{var F="";if(((r[b]||[])[0]||[])[0]==14849||(((r[b]||[])[0]||[])[0]==1025?r[b][g]&&r[b][g].itab>0&&(F=r.SheetNames[r[b][g].itab-1]+"!"):F=r.SheetNames[g-1]+"!"),r[b]&&r[b][g])F+=r[b][g].Name;else if(r[0]&&r[0][g])F+=r[0][g].Name;else{var U=(dj(r,b,i)||"").split(";;");U[g-1]?F=U[g-1]:F+="SH33TJSERRX"}o.push(F);break}L||(L={Name:"SH33TJSERRY"}),o.push(L.Name);break;case"PtgParen":var j="(",Te=")";if(y>=0){switch(E="",n[0][y][1][0]){case 2:j=ir(" ",n[0][y][1][1])+j;break;case 3:j=ir("\r",n[0][y][1][1])+j;break;case 4:Te=ir(" ",n[0][y][1][1])+Te;break;case 5:Te=ir("\r",n[0][y][1][1])+Te;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][y][1][0])}y=-1}o.push(j+o.pop()+Te);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":f={c:M[1][1],r:M[1][0]};var Me={c:t.c,r:t.r};if(r.sharedf[An(f)]){var Ue=r.sharedf[An(f)];o.push(_0(Ue,a,Me,r,i))}else{var ke=!1;for(l=0;l!=r.arrayf.length;++l)if(u=r.arrayf[l],!(f.c<u[0].s.c||f.c>u[0].e.c)&&!(f.r<u[0].s.r||f.r>u[0].e.r)){o.push(_0(u[1],a,Me,r,i)),ke=!0;break}ke||o.push(M[1])}break;case"PtgArray":o.push("{"+s1e(M[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=T;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+M[1].idx+"[#"+M[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(M));default:throw new Error("Unrecognized Formula Token: "+String(M))}var le=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&y>=0&&le.indexOf(n[0][T][0])==-1){M=n[0][y];var Ae=!0;switch(M[1][0]){case 4:Ae=!1;case 0:E=ir(" ",M[1][1]);break;case 5:Ae=!1;case 1:E=ir("\r",M[1][1]);break;default:if(E="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+M[1][0])}o.push((Ae?E:"")+o.pop()+(Ae?"":E)),y=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function l1e(n){if(n==null){var e=Re(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof n=="number")return Uh(n);return Uh(0)}function c1e(n,e,t,r,i){var s=zh(e,t,i),a=l1e(n.v),o=Re(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=Re(n.bf.length),f=0;f<n.bf.length;++f)u[f]=n.bf[f];var d=ci([s,a,o,u]);return d}function bE(n,e,t){var r=n.read_shift(4),i=i1e(n,r,t),s=n.read_shift(4),a=s>0?r1e(n,s,i,t):null;return[i,a]}var u1e=bE,ME=bE,h1e=bE,f1e=bE,d1e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},gj={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},g1e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function m1e(n){var e="of:="+n.replace(OC,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function p1e(n){return n.replace(/\./,"!")}var Mm=typeof Map<"u";function VC(n,e,t){var r=0,i=n.length;if(t){if(Mm?t.has(e):Object.prototype.hasOwnProperty.call(t,e)){for(var s=Mm?t.get(e):t[e];r<s.length;++r)if(n[s[r]].t===e)return n.Count++,s[r]}}else for(;r<i;++r)if(n[r].t===e)return n.Count++,r;return n[i]={t:e},n.Count++,n.Unique++,t&&(Mm?(t.has(e)||t.set(e,[]),t.get(e).push(i)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(i))),i}function kE(n,e){var t={min:n+1,max:n+1},r=-1;return e.MDW&&(Al=e.MDW),e.width!=null?t.customWidth=1:e.wpx!=null?r=cv(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(t.width=wI(r),t.customWidth=1):e.width!=null&&(t.width=e.width),e.hidden&&(t.hidden=!0),e.level!=null&&(t.outlineLevel=t.level=e.level),t}function mj(n,e){if(n){var t=[.7,.7,.75,.75,.3,.3];n.left==null&&(n.left=t[0]),n.right==null&&(n.right=t[1]),n.top==null&&(n.top=t[2]),n.bottom==null&&(n.bottom=t[3]),n.header==null&&(n.header=t[4]),n.footer==null&&(n.footer=t[5])}}function yu(n,e,t){var r=t.revssf[e.z!=null?e.z:"General"],i=60,s=n.length;if(r==null&&t.ssf){for(;i<392;++i)if(t.ssf[i]==null){uV(e.z,i),t.ssf[i]=e.z,t.revssf[e.z]=r=i;break}}for(i=0;i!=s;++i)if(n[i].numFmtId===r)return i;return n[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function _1e(n,e,t){if(n&&n["!ref"]){var r=Gn(n["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+t+"): "+n["!ref"])}}function y1e(n){if(n.length===0)return"";for(var e='<mergeCells count="'+n.length+'">',t=0;t!=n.length;++t)e+='<mergeCell ref="'+wr(n[t])+'"/>';return e+"</mergeCells>"}function x1e(n,e,t,r,i){var s=!1,a={},o=null;if(r.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[t];try{e.Workbook&&(l=e.Workbook.Sheets[t].CodeName||l)}catch{}s=!0,a.codeName=wp(Tn(l))}if(n&&n["!outline"]){var u={summaryBelow:1,summaryRight:1};n["!outline"].above&&(u.summaryBelow=0),n["!outline"].left&&(u.summaryRight=0),o=(o||"")+qe("outlinePr",null,u)}!s&&!o||(i[i.length]=qe("sheetPr",o,a))}var v1e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],E1e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function w1e(n){var e={sheet:1};return v1e.forEach(function(t){n[t]!=null&&n[t]&&(e[t]="1")}),E1e.forEach(function(t){n[t]!=null&&!n[t]&&(e[t]="0")}),n.password&&(e.password=QV(n.password).toString(16).toUpperCase()),qe("sheetProtection",null,e)}function S1e(n){return mj(n),qe("pageMargins",null,n)}function T1e(n,e){for(var t=["<cols>"],r,i=0;i!=e.length;++i)(r=e[i])&&(t[t.length]=qe("col",null,kE(i,r)));return t[t.length]="</cols>",t.join("")}function I1e(n,e,t,r){var i=typeof n.ref=="string"?n.ref:wr(n.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var s=t.Workbook.Names,a=Ws(i);a.s.r==a.e.r&&(a.e.r=Ws(e["!ref"]).e.r,i=wr(a));for(var o=0;o<s.length;++o){var l=s[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+t.SheetNames[r]+"'!"+i;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+i}),qe("autoFilter",null,{ref:i})}function A1e(n,e,t,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),qe("sheetViews",qe("sheetView",null,i),{})}function R1e(n,e,t,r){if(n.c&&t["!comments"].push([e,n.c]),n.v===void 0&&typeof n.f!="string"||n.t==="z"&&!n.f)return"";var i="",s=n.t,a=n.v;if(n.t!=="z")switch(n.t){case"b":i=n.v?"1":"0";break;case"n":i=""+n.v;break;case"e":i=__[n.v];break;case"d":r&&r.cellDates?i=$i(n.v,-1).toISOString():(n=ds(n),n.t="n",i=""+(n.v=fs($i(n.v)))),typeof n.z>"u"&&(n.z=or[14]);break;default:i=n.v;break}var o=ui("v",Tn(i)),l={r:e},u=yu(r.cellXfs,n,r);switch(u!==0&&(l.s=u),n.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(n.v==null){delete n.t;break}if(n.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=ui("v",""+VC(r.Strings,n.v,r.revStrings)),l.t="s";break}l.t="str";break}if(n.t!=s&&(n.t=s,n.v=a),typeof n.f=="string"&&n.f){var f=n.F&&n.F.slice(0,e.length)==e?{t:"array",ref:n.F}:null;o=qe("f",Tn(n.f),f)+(n.v!=null?o:"")}return n.l&&t["!links"].push([e,n.l]),n.D&&(l.cm=1),qe("c",o,l)}function C1e(n,e,t,r){var i=[],s=[],a=Gn(n["!ref"]),o="",l,u="",f=[],d=0,g=0,p=n["!rows"],v=Array.isArray(n),y={r:u},E,T=-1;for(g=a.s.c;g<=a.e.c;++g)f[g]=Pi(g);for(d=a.s.r;d<=a.e.r;++d){for(s=[],u=fi(d),g=a.s.c;g<=a.e.c;++g){l=f[g]+u;var R=v?(n[d]||[])[g]:n[l];R!==void 0&&(o=R1e(R,l,n,e))!=null&&s.push(o)}(s.length>0||p&&p[d])&&(y={r:u},p&&p[d]&&(E=p[d],E.hidden&&(y.hidden=1),T=-1,E.hpx?T=uv(E.hpx):E.hpt&&(T=E.hpt),T>-1&&(y.ht=T,y.customHeight=1),E.level&&(y.outlineLevel=E.level)),i[i.length]=qe("row",s.join(""),y))}if(p)for(;d<p.length;++d)p&&p[d]&&(y={r:d+1},E=p[d],E.hidden&&(y.hidden=1),T=-1,E.hpx?T=uv(E.hpx):E.hpt&&(T=E.hpt),T>-1&&(y.ht=T,y.customHeight=1),E.level&&(y.outlineLevel=E.level),i[i.length]=qe("row","",y));return i.join("")}function pj(n,e,t,r){var i=[Tr,qe("worksheet",null,{xmlns:N0[0],"xmlns:r":Hr.r})],s=t.SheetNames[n],a=0,o="",l=t.Sheets[s];l==null&&(l={});var u=l["!ref"]||"A1",f=Gn(u);if(f.e.c>16383||f.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575),u=wr(f)}r||(r={}),l["!comments"]=[];var d=[];x1e(l,t,n,e,i),i[i.length]=qe("dimension",null,{ref:u}),i[i.length]=A1e(l,e,n,t),e.sheetFormat&&(i[i.length]=qe("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=T1e(l,l["!cols"])),i[a=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=C1e(l,e),o.length>0&&(i[i.length]=o)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),l["!protect"]&&(i[i.length]=w1e(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=I1e(l["!autofilter"],l,t,n)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=y1e(l["!merges"]));var g=-1,p,v=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(y){y[1].Target&&(p={ref:y[0]},y[1].Target.charAt(0)!="#"&&(v=En(r,-1,Tn(y[1].Target).replace(/#.*$/,""),en.HLINK),p["r:id"]="rId"+v),(g=y[1].Target.indexOf("#"))>-1&&(p.location=Tn(y[1].Target.slice(g+1))),y[1].Tooltip&&(p.tooltip=Tn(y[1].Tooltip)),i[i.length]=qe("hyperlink",null,p))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=S1e(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=ui("ignoredErrors",qe("ignoredError",null,{numberStoredAsText:1,sqref:u}))),d.length>0&&(v=En(r,-1,"../drawings/drawing"+(n+1)+".xml",en.DRAW),i[i.length]=qe("drawing",null,{"r:id":"rId"+v}),l["!drawing"]=d),l["!comments"].length>0&&(v=En(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",en.VML),i[i.length]=qe("legacyDrawing",null,{"r:id":"rId"+v}),l["!legacy"]=v),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function P1e(n,e){var t={},r=n.l+e;t.r=n.read_shift(4),n.l+=4;var i=n.read_shift(2);n.l+=1;var s=n.read_shift(1);return n.l=r,s&7&&(t.level=s&7),s&16&&(t.hidden=!0),s&32&&(t.hpt=i/20),t}function b1e(n,e,t){var r=Re(145),i=(t["!rows"]||[])[n]||{};r.write_shift(4,n),r.write_shift(4,0);var s=320;i.hpx?s=uv(i.hpx)*20:i.hpt&&(s=i.hpt*20),r.write_shift(2,s),r.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),r.write_shift(1,a),r.write_shift(1,0);var o=0,l=r.l;r.l+=4;for(var u={r:n,c:0},f=0;f<16;++f)if(!(e.s.c>f+1<<10||e.e.c<f<<10)){for(var d=-1,g=-1,p=f<<10;p<f+1<<10;++p){u.c=p;var v=Array.isArray(t)?(t[u.r]||[])[u.c]:t[An(u)];v&&(d<0&&(d=p),g=p)}d<0||(++o,r.write_shift(4,d),r.write_shift(4,g))}var y=r.l;return r.l=l,r.write_shift(4,o),r.l=y,r.length>r.l?r.slice(0,r.l):r}function M1e(n,e,t,r){var i=b1e(r,t,e);(i.length>17||(e["!rows"]||[])[r])&&Oe(n,0,i)}var k1e=af,N1e=O0;function L1e(){}function O1e(n,e){var t={},r=n[n.l];return++n.l,t.above=!(r&64),t.left=!(r&128),n.l+=18,t.name=Wge(n),t}function D1e(n,e,t){t==null&&(t=Re(84+4*n.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),t.write_shift(1,r);for(var i=1;i<3;++i)t.write_shift(1,0);return av({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),MV(n,t),t.slice(0,t.l)}function F1e(n){var e=ya(n);return[e]}function V1e(n,e,t){return t==null&&(t=Re(8)),nf(e,t)}function j1e(n){var e=rf(n);return[e]}function G1e(n,e,t){return t==null&&(t=Re(4)),sf(e,t)}function B1e(n){var e=ya(n),t=n.read_shift(1);return[e,t,"b"]}function U1e(n,e,t){return t==null&&(t=Re(9)),nf(e,t),t.write_shift(1,n.v?1:0),t}function z1e(n){var e=rf(n),t=n.read_shift(1);return[e,t,"b"]}function $1e(n,e,t){return t==null&&(t=Re(5)),sf(e,t),t.write_shift(1,n.v?1:0),t}function W1e(n){var e=ya(n),t=n.read_shift(1);return[e,t,"e"]}function H1e(n,e,t){return t==null&&(t=Re(9)),nf(e,t),t.write_shift(1,n.v),t}function K1e(n){var e=rf(n),t=n.read_shift(1);return[e,t,"e"]}function Y1e(n,e,t){return t==null&&(t=Re(8)),sf(e,t),t.write_shift(1,n.v),t.write_shift(2,0),t.write_shift(1,0),t}function X1e(n){var e=ya(n),t=n.read_shift(4);return[e,t,"s"]}function q1e(n,e,t){return t==null&&(t=Re(12)),nf(e,t),t.write_shift(4,e.v),t}function Z1e(n){var e=rf(n),t=n.read_shift(4);return[e,t,"s"]}function Q1e(n,e,t){return t==null&&(t=Re(8)),sf(e,t),t.write_shift(4,e.v),t}function J1e(n){var e=ya(n),t=D0(n);return[e,t,"n"]}function eye(n,e,t){return t==null&&(t=Re(16)),nf(e,t),Uh(n.v,t),t}function tye(n){var e=rf(n),t=D0(n);return[e,t,"n"]}function nye(n,e,t){return t==null&&(t=Re(12)),sf(e,t),Uh(n.v,t),t}function rye(n){var e=ya(n),t=kV(n);return[e,t,"n"]}function iye(n,e,t){return t==null&&(t=Re(12)),nf(e,t),NV(n.v,t),t}function sye(n){var e=rf(n),t=kV(n);return[e,t,"n"]}function aye(n,e,t){return t==null&&(t=Re(8)),sf(e,t),NV(n.v,t),t}function oye(n){var e=ya(n),t=bC(n);return[e,t,"is"]}function lye(n){var e=ya(n),t=bi(n);return[e,t,"str"]}function cye(n,e,t){return t==null&&(t=Re(12+4*n.v.length)),nf(e,t),Xr(n.v,t),t.length>t.l?t.slice(0,t.l):t}function uye(n){var e=rf(n),t=bi(n);return[e,t,"str"]}function hye(n,e,t){return t==null&&(t=Re(8+4*n.v.length)),sf(e,t),Xr(n.v,t),t.length>t.l?t.slice(0,t.l):t}function fye(n,e,t){var r=n.l+e,i=ya(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"b"];if(t.cellFormula){n.l+=2;var o=ME(n,r-n.l,t);a[3]=_0(o,null,i,t.supbooks,t)}else n.l=r;return a}function dye(n,e,t){var r=n.l+e,i=ya(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"e"];if(t.cellFormula){n.l+=2;var o=ME(n,r-n.l,t);a[3]=_0(o,null,i,t.supbooks,t)}else n.l=r;return a}function gye(n,e,t){var r=n.l+e,i=ya(n);i.r=t["!row"];var s=D0(n),a=[i,s,"n"];if(t.cellFormula){n.l+=2;var o=ME(n,r-n.l,t);a[3]=_0(o,null,i,t.supbooks,t)}else n.l=r;return a}function mye(n,e,t){var r=n.l+e,i=ya(n);i.r=t["!row"];var s=bi(n),a=[i,s,"str"];if(t.cellFormula){n.l+=2;var o=ME(n,r-n.l,t);a[3]=_0(o,null,i,t.supbooks,t)}else n.l=r;return a}var pye=af,_ye=O0;function yye(n,e){return e==null&&(e=Re(4)),e.write_shift(4,n),e}function xye(n,e){var t=n.l+e,r=af(n),i=MC(n),s=bi(n),a=bi(n),o=bi(n);n.l=t;var l={rfx:r,relId:i,loc:s,display:o};return a&&(l.Tooltip=a),l}function vye(n,e){var t=Re(50+4*(n[1].Target.length+(n[1].Tooltip||"").length));O0({s:Yr(n[0]),e:Yr(n[0])},t),kC("rId"+e,t);var r=n[1].Target.indexOf("#"),i=r==-1?"":n[1].Target.slice(r+1);return Xr(i||"",t),Xr(n[1].Tooltip||"",t),Xr("",t),t.slice(0,t.l)}function Eye(){}function wye(n,e,t){var r=n.l+e,i=LV(n),s=n.read_shift(1),a=[i];if(a[2]=s,t.cellFormula){var o=u1e(n,r-n.l,t);a[1]=o}else n.l=r;return a}function Sye(n,e,t){var r=n.l+e,i=af(n),s=[i];if(t.cellFormula){var a=f1e(n,r-n.l,t);s[1]=a,n.l=r}else n.l=r;return s}function Tye(n,e,t){t==null&&(t=Re(18));var r=kE(n,e);t.write_shift(-4,n),t.write_shift(-4,n),t.write_shift(4,(r.width||10)*256),t.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),t.write_shift(2,i),t}var _j=["left","right","top","bottom","header","footer"];function Iye(n){var e={};return _j.forEach(function(t){e[t]=D0(n)}),e}function Aye(n,e){return e==null&&(e=Re(48)),mj(n),_j.forEach(function(t){Uh(n[t],e)}),e}function Rye(n){var e=n.read_shift(2);return n.l+=28,{RTL:e&32}}function Cye(n,e,t){t==null&&(t=Re(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function Pye(n){var e=Re(24);return e.write_shift(4,4),e.write_shift(4,1),O0(n,e),e}function bye(n,e){return e==null&&(e=Re(66)),e.write_shift(2,n.password?QV(n.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?e.write_shift(4,n[t[0]]!=null&&!n[t[0]]?1:0):e.write_shift(4,n[t[0]]!=null&&n[t[0]]?0:1)}),e}function Mye(){}function kye(){}function Nye(n,e,t,r,i,s,a){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=ds(e),e.z=e.z||or[14],e.v=fs($i(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r:t,c:r};switch(l.s=yu(i.cellXfs,e,i),e.l&&s["!links"].push([An(l),e.l]),e.c&&s["!comments"].push([An(l),e.c]),e.t){case"s":case"str":return i.bookSST?(o=VC(i.Strings,e.v,i.revStrings),l.t="s",l.v=o,a?Oe(n,18,Q1e(e,l)):Oe(n,7,q1e(e,l))):(l.t="str",a?Oe(n,17,hye(e,l)):Oe(n,6,cye(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?Oe(n,13,aye(e,l)):Oe(n,2,iye(e,l)):a?Oe(n,16,nye(e,l)):Oe(n,5,eye(e,l)),!0;case"b":return l.t="b",a?Oe(n,15,$1e(e,l)):Oe(n,4,U1e(e,l)),!0;case"e":return l.t="e",a?Oe(n,14,Y1e(e,l)):Oe(n,3,H1e(e,l)),!0}return a?Oe(n,12,G1e(e,l)):Oe(n,1,V1e(e,l)),!0}function Lye(n,e,t,r){var i=Gn(e["!ref"]||"A1"),s,a="",o=[];Oe(n,145);var l=Array.isArray(e),u=i.e.r;e["!rows"]&&(u=Math.max(i.e.r,e["!rows"].length-1));for(var f=i.s.r;f<=u;++f){a=fi(f),M1e(n,e,i,f);var d=!1;if(f<=i.e.r)for(var g=i.s.c;g<=i.e.c;++g){f===i.s.r&&(o[g]=Pi(g)),s=o[g]+a;var p=l?(e[f]||[])[g]:e[s];if(!p){d=!1;continue}d=Nye(n,p,f,g,r,e,d)}}Oe(n,146)}function Oye(n,e){!e||!e["!merges"]||(Oe(n,177,yye(e["!merges"].length)),e["!merges"].forEach(function(t){Oe(n,176,_ye(t))}),Oe(n,178))}function Dye(n,e){!e||!e["!cols"]||(Oe(n,390),e["!cols"].forEach(function(t,r){t&&Oe(n,60,Tye(r,t))}),Oe(n,391))}function Fye(n,e){!e||!e["!ref"]||(Oe(n,648),Oe(n,649,Pye(Gn(e["!ref"]))),Oe(n,650))}function Vye(n,e,t){e["!links"].forEach(function(r){if(r[1].Target){var i=En(t,-1,r[1].Target.replace(/#.*$/,""),en.HLINK);Oe(n,494,vye(r,i))}}),delete e["!links"]}function jye(n,e,t,r){if(e["!comments"].length>0){var i=En(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",en.VML);Oe(n,551,kC("rId"+i)),e["!legacy"]=i}}function Gye(n,e,t,r){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:wr(i.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var a=t.Workbook.Names,o=Ws(s);o.s.r==o.e.r&&(o.e.r=Ws(e["!ref"]).e.r,s=wr(o));for(var l=0;l<a.length;++l){var u=a[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==r){u.Ref="'"+t.SheetNames[r]+"'!"+s;break}}l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+s}),Oe(n,161,O0(Gn(s))),Oe(n,162)}}function Bye(n,e,t){Oe(n,133),Oe(n,137,Cye(e,t)),Oe(n,138),Oe(n,134)}function Uye(n,e){e["!protect"]&&Oe(n,535,bye(e["!protect"]))}function zye(n,e,t,r){var i=us(),s=t.SheetNames[n],a=t.Sheets[s]||{},o=s;try{t&&t.Workbook&&(o=t.Workbook.Sheets[n].CodeName||o)}catch{}var l=Gn(a["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],Oe(i,129),(t.vbaraw||a["!outline"])&&Oe(i,147,D1e(o,a["!outline"])),Oe(i,148,N1e(l)),Bye(i,a,t.Workbook),Dye(i,a),Lye(i,a,n,e),Uye(i,a),Gye(i,a,t,n),Oye(i,a),Vye(i,a,r),a["!margins"]&&Oe(i,476,Aye(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Fye(i,a),jye(i,a,n,r),Oe(i,130),i.end()}function $ye(n,e){n.l+=10;var t=bi(n);return{name:t}}var Wye=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function Hye(n){return!n.Workbook||!n.Workbook.WBProps?"false":Sge(n.Workbook.WBProps.date1904)?"true":"false"}var Kye="][*?/\\".split("");function yj(n,e){if(n.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return Kye.forEach(function(r){if(n.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function Yye(n,e,t){n.forEach(function(r,i){yj(r);for(var s=0;s<i;++s)if(r==n[s])throw new Error("Duplicate Sheet Name: "+r);if(t){var a=e&&e[i]&&e[i].CodeName||r;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function Xye(n){if(!n||!n.SheetNames||!n.Sheets)throw new Error("Invalid Workbook");if(!n.SheetNames.length)throw new Error("Workbook is empty");var e=n.Workbook&&n.Workbook.Sheets||[];Yye(n.SheetNames,e,!!n.vbaraw);for(var t=0;t<n.SheetNames.length;++t)_1e(n.Sheets[n.SheetNames[t]],n.SheetNames[t],t)}function xj(n){var e=[Tr];e[e.length]=qe("workbook",null,{xmlns:N0[0],"xmlns:r":Hr.r});var t=n.Workbook&&(n.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};n.Workbook&&n.Workbook.WBProps&&(Wye.forEach(function(o){n.Workbook.WBProps[o[0]]!=null&&n.Workbook.WBProps[o[0]]!=o[1]&&(r[o[0]]=n.Workbook.WBProps[o[0]])}),n.Workbook.WBProps.CodeName&&(r.codeName=n.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=qe("workbookPr",null,r);var i=n.Workbook&&n.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=n.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==n.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=n.SheetNames.length;++s){var a={name:Tn(n.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=qe("sheet",null,a)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",n.Workbook&&n.Workbook.Names&&n.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=qe("definedName",Tn(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function qye(n,e){var t={};return t.Hidden=n.read_shift(4),t.iTabID=n.read_shift(4),t.strRelID=EI(n),t.name=bi(n),t}function Zye(n,e){return e||(e=Re(127)),e.write_shift(4,n.Hidden),e.write_shift(4,n.iTabID),kC(n.strRelID,e),Xr(n.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function Qye(n,e){var t={},r=n.read_shift(4);t.defaultThemeVersion=n.read_shift(4);var i=e>8?bi(n):"";return i.length>0&&(t.CodeName=i),t.autoCompressPictures=!!(r&65536),t.backupFile=!!(r&64),t.checkCompatibility=!!(r&4096),t.date1904=!!(r&1),t.filterPrivacy=!!(r&8),t.hidePivotFieldList=!!(r&1024),t.promptedSolutions=!!(r&16),t.publishItems=!!(r&2048),t.refreshAllConnections=!!(r&262144),t.saveExternalLinkValues=!!(r&128),t.showBorderUnselectedTables=!!(r&4),t.showInkAnnotation=!!(r&32),t.showObjects=["all","placeholders","none"][r>>13&3],t.showPivotChartFilter=!!(r&32768),t.updateLinks=["userSet","never","always"][r>>8&3],t}function Jye(n,e){e||(e=Re(72));var t=0;return n&&n.filterPrivacy&&(t|=8),e.write_shift(4,t),e.write_shift(4,0),MV(n&&n.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function exe(n,e,t){var r=n.l+e;n.l+=4,n.l+=1;var i=n.read_shift(4),s=Hge(n),a=h1e(n,0,t),o=MC(n);n.l=r;var l={Name:s,Ptg:a};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}function txe(n,e){Oe(n,143);for(var t=0;t!=e.SheetNames.length;++t){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[t]&&e.Workbook.Sheets[t].Hidden||0,i={Hidden:r,iTabID:t+1,strRelID:"rId"+(t+1),name:e.SheetNames[t]};Oe(n,156,Zye(i))}Oe(n,144)}function nxe(n,e){e||(e=Re(127));for(var t=0;t!=4;++t)e.write_shift(4,0);return Xr("SheetJS",e),Xr(Qx.version,e),Xr(Qx.version,e),Xr("7262",e),e.length>e.l?e.slice(0,e.l):e}function rxe(n,e){e||(e=Re(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,n),e.write_shift(4,n);var t=120;return e.write_shift(1,t),e.length>e.l?e.slice(0,e.l):e}function ixe(n,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var t=e.Workbook.Sheets,r=0,i=-1,s=-1;r<t.length;++r)!t[r]||!t[r].Hidden&&i==-1?i=r:t[r].Hidden==1&&s==-1&&(s=r);s>i||(Oe(n,135),Oe(n,158,rxe(i)),Oe(n,136))}}function sxe(n,e){var t=us();return Oe(t,131),Oe(t,128,nxe()),Oe(t,153,Jye(n.Workbook&&n.Workbook.WBProps||null)),ixe(t,n),txe(t,n),Oe(t,132),t.end()}function axe(n,e,t){return(e.slice(-4)===".bin"?sxe:xj)(n)}function oxe(n,e,t,r,i){return(e.slice(-4)===".bin"?zye:pj)(n,t,r,i)}function lxe(n,e,t){return(e.slice(-4)===".bin"?Ape:tj)(n,t)}function cxe(n,e,t){return(e.slice(-4)===".bin"?Jme:ZV)(n,t)}function uxe(n,e,t){return(e.slice(-4)===".bin"?Upe:aj)(n)}function hxe(n){return(n.slice(-4)===".bin"?Lpe:ij)()}function fxe(n,e){var t=[];return n.Props&&t.push(lme(n.Props,e)),n.Custprops&&t.push(cme(n.Props,n.Custprops)),t.join("")}function dxe(){return""}function gxe(n,e){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,i){var s=[];s.push(qe("NumberFormat",null,{"ss:Format":Tn(or[r.numFmtId])}));var a={"ss:ID":"s"+(21+i)};t.push(qe("Style",s.join(""),a))}),qe("Styles",t.join(""))}function vj(n){return qe("NamedRange",null,{"ss:Name":n.Name,"ss:RefersTo":"="+DC(n.Ref,{r:0,c:0})})}function mxe(n){if(!((n||{}).Workbook||{}).Names)return"";for(var e=n.Workbook.Names,t=[],r=0;r<e.length;++r){var i=e[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||t.push(vj(i)))}return qe("Names",t.join(""))}function pxe(n,e,t,r){if(!n||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==t&&(o.Name.match(/^_xlfn\./)||s.push(vj(o)))}return s.join("")}function _xe(n,e,t,r){if(!n)return"";var i=[];if(n["!margins"]&&(i.push("<PageSetup>"),n["!margins"].header&&i.push(qe("Header",null,{"x:Margin":n["!margins"].header})),n["!margins"].footer&&i.push(qe("Footer",null,{"x:Margin":n["!margins"].footer})),i.push(qe("PageMargins",null,{"x:Bottom":n["!margins"].bottom||"0.75","x:Left":n["!margins"].left||"0.7","x:Right":n["!margins"].right||"0.7","x:Top":n["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[t])if(r.Workbook.Sheets[t].Hidden)i.push(qe("Visible",r.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<t&&!(r.Workbook.Sheets[s]&&!r.Workbook.Sheets[s].Hidden);++s);s==t&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),n["!protect"]&&(i.push(ui("ProtectContents","True")),n["!protect"].objects&&i.push(ui("ProtectObjects","True")),n["!protect"].scenarios&&i.push(ui("ProtectScenarios","True")),n["!protect"].selectLockedCells!=null&&!n["!protect"].selectLockedCells?i.push(ui("EnableSelection","NoSelection")):n["!protect"].selectUnlockedCells!=null&&!n["!protect"].selectUnlockedCells&&i.push(ui("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){n["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),i.length==0?"":qe("WorksheetOptions",i.join(""),{xmlns:Ls.x})}function yxe(n){return n.map(function(e){var t=wge(e.t||""),r=qe("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return qe("Comment",r,{"ss:Author":e.a})}).join("")}function xxe(n,e,t,r,i,s,a){if(!n||n.v==null&&n.f==null)return"";var o={};if(n.f&&(o["ss:Formula"]="="+Tn(DC(n.f,a))),n.F&&n.F.slice(0,e.length)==e){var l=Yr(n.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==a.r?"":"["+(l.r-a.r)+"]")+"C"+(l.c==a.c?"":"["+(l.c-a.c)+"]")}if(n.l&&n.l.Target&&(o["ss:HRef"]=Tn(n.l.Target),n.l.Tooltip&&(o["x:HRefScreenTip"]=Tn(n.l.Tooltip))),t["!merges"])for(var u=t["!merges"],f=0;f!=u.length;++f)u[f].s.c!=a.c||u[f].s.r!=a.r||(u[f].e.c>u[f].s.c&&(o["ss:MergeAcross"]=u[f].e.c-u[f].s.c),u[f].e.r>u[f].s.r&&(o["ss:MergeDown"]=u[f].e.r-u[f].s.r));var d="",g="";switch(n.t){case"z":if(!r.sheetStubs)return"";break;case"n":d="Number",g=String(n.v);break;case"b":d="Boolean",g=n.v?"1":"0";break;case"e":d="Error",g=__[n.v];break;case"d":d="DateTime",g=new Date(n.v).toISOString(),n.z==null&&(n.z=n.z||or[14]);break;case"s":d="String",g=Ege(n.v||"");break}var p=yu(r.cellXfs,n,r);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=a.c+1;var v=n.v!=null?g:"",y=n.t=="z"?"":'<Data ss:Type="'+d+'">'+v+"</Data>";return(n.c||[]).length>0&&(y+=yxe(n.c)),qe("Cell",y,o)}function vxe(n,e){var t='<Row ss:Index="'+(n+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=ej(e.hpt)),e.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(t+=' ss:Hidden="1"')),t+">"}function Exe(n,e,t,r){if(!n["!ref"])return"";var i=Gn(n["!ref"]),s=n["!merges"]||[],a=0,o=[];n["!cols"]&&n["!cols"].forEach(function(E,T){LC(E);var R=!!E.width,M=kE(T,E),k={"ss:Index":T+1};R&&(k["ss:Width"]=lv(M.width)),E.hidden&&(k["ss:Hidden"]="1"),o.push(qe("Column",null,k))});for(var l=Array.isArray(n),u=i.s.r;u<=i.e.r;++u){for(var f=[vxe(u,(n["!rows"]||[])[u])],d=i.s.c;d<=i.e.c;++d){var g=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>d)&&!(s[a].s.r>u)&&!(s[a].e.c<d)&&!(s[a].e.r<u)){(s[a].s.c!=d||s[a].s.r!=u)&&(g=!0);break}if(!g){var p={r:u,c:d},v=An(p),y=l?(n[u]||[])[d]:n[v];f.push(xxe(y,v,n,e,t,r,p))}}f.push("</Row>"),f.length>2&&o.push(f.join(""))}return o.join("")}function wxe(n,e,t){var r=[],i=t.SheetNames[n],s=t.Sheets[i],a=s?pxe(s,e,n,t):"";return a.length>0&&r.push("<Names>"+a+"</Names>"),a=s?Exe(s,e,n,t):"",a.length>0&&r.push("<Table>"+a+"</Table>"),r.push(_xe(s,e,n,t)),r.join("")}function Sxe(n,e){e||(e={}),n.SSF||(n.SSF=ds(or)),n.SSF&&(RE(),AE(n.SSF),e.revssf=CE(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF,e.cellXfs=[],yu(e.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(fxe(n,e)),t.push(dxe()),t.push(""),t.push("");for(var r=0;r<n.SheetNames.length;++r)t.push(qe("Worksheet",wxe(r,e,n),{"ss:Name":Tn(n.SheetNames[r])}));return t[2]=gxe(n,e),t[3]=mxe(n),Tr+qe("Workbook",t.join(""),{xmlns:Ls.ss,"xmlns:o":Ls.o,"xmlns:x":Ls.x,"xmlns:ss":Ls.ss,"xmlns:dt":Ls.dt,"xmlns:html":Ls.html})}var RS={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Txe(n,e){var t=[],r=[],i=[],s=0,a,o=CL(BL,"n"),l=CL(UL,"n");if(n.Props)for(a=di(n.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(l,a[s])?r:i).push([a[s],n.Props[a[s]]]);if(n.Custprops)for(a=di(n.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(n.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(l,a[s])?r:i).push([a[s],n.Custprops[a[s]]]);var u=[];for(s=0;s<i.length;++s)$V.indexOf(i[s][0])>-1||BV.indexOf(i[s][0])>-1||i[s][1]!=null&&u.push(i[s]);r.length&&Cn.utils.cfb_add(e,"/SummaryInformation",KL(r,RS.SI,l,UL)),(t.length||u.length)&&Cn.utils.cfb_add(e,"/DocumentSummaryInformation",KL(t,RS.DSI,o,BL,u.length?u:null,RS.UDI))}function Ixe(n,e){var t=e||{},r=Cn.utils.cfb_new({root:"R"}),i="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":i="/Workbook",t.biff=8;break;case"biff5":i="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return Cn.utils.cfb_add(r,i,Ej(n,t)),t.biff==8&&(n.Props||n.Custprops)&&Txe(n,r),t.biff==8&&n.vbaraw&&zpe(r,Cn.read(n.vbaraw,{type:typeof n.vbaraw=="string"?"binary":"buffer"})),r}var Axe={0:{f:P1e},1:{f:F1e},2:{f:rye},3:{f:W1e},4:{f:B1e},5:{f:J1e},6:{f:lye},7:{f:X1e},8:{f:mye},9:{f:gye},10:{f:fye},11:{f:dye},12:{f:j1e},13:{f:sye},14:{f:K1e},15:{f:z1e},16:{f:tye},17:{f:uye},18:{f:Z1e},19:{f:bC},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:exe},40:{},42:{},43:{f:lpe},44:{f:ape},45:{f:hpe},46:{f:dpe},47:{f:fpe},48:{},49:{f:jge},50:{},51:{f:Ppe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Gme},62:{f:oye},63:{f:Ope},64:{f:Mye},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:jo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Rye},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:O1e},148:{f:k1e,p:16},151:{f:Eye},152:{},153:{f:Qye},154:{},155:{},156:{f:qye},157:{},158:{},159:{T:1,f:qme},160:{T:-1},161:{T:1,f:af},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:pye},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Rpe},336:{T:-1},337:{f:kpe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:EI},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Lme},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:wye},427:{f:Sye},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Iye},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:L1e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:xye},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:EI},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Gpe},633:{T:1},634:{T:-1},635:{T:1,f:Vpe},636:{T:-1},637:{f:zge},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:$ye},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:kye},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Ze(n,e,t,r){var i=e;if(!isNaN(i)){var s=r||(t||[]).length||0,a=n.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&RC(t)&&n.push(t)}}function Rxe(n,e,t,r){var i=(t||[]).length||0;if(i<=8224)return Ze(n,e,t,i);var s=e;if(!isNaN(s)){for(var a=t.parts||[],o=0,l=0,u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;var f=n.next(4);for(f.write_shift(2,s),f.write_shift(2,u),n.push(t.slice(l,l+u)),l+=u;l<i;){for(f=n.next(4),f.write_shift(2,60),u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;f.write_shift(2,u),n.push(t.slice(l,l+u)),l+=u}}}function x_(n,e,t){return n||(n=Re(7)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,0),n.write_shift(1,0),n}function Cxe(n,e,t,r){var i=Re(9);return x_(i,n,e),HV(t,r||"b",i),i}function Pxe(n,e,t){var r=Re(8+2*t.length);return x_(r,n,e),r.write_shift(1,t.length),r.write_shift(t.length,t,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function bxe(n,e,t,r){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?fs($i(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?Ze(n,2,$me(t,r,i)):Ze(n,3,zme(t,r,i));return;case"b":case"e":Ze(n,5,Cxe(t,r,e.v,e.t));return;case"s":case"str":Ze(n,4,Pxe(t,r,(e.v||"").slice(0,255)));return}Ze(n,1,x_(null,t,r))}function Mxe(n,e,t,r){var i=Array.isArray(e),s=Gn(e["!ref"]||"A1"),a,o="",l=[];if(s.e.c>255||s.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),a=wr(s)}for(var u=s.s.r;u<=s.e.r;++u){o=fi(u);for(var f=s.s.c;f<=s.e.c;++f){u===s.s.r&&(l[f]=Pi(f)),a=l[f]+o;var d=i?(e[u]||[])[f]:e[a];d&&bxe(n,d,u,f)}}}function kxe(n,e){for(var t=e||{},r=us(),i=0,s=0;s<n.SheetNames.length;++s)n.SheetNames[s]==t.sheet&&(i=s);if(i==0&&t.sheet&&n.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return Ze(r,t.biff==4?1033:t.biff==3?521:9,NC(n,16,t)),Mxe(r,n.Sheets[n.SheetNames[i]],i,t),Ze(r,10),r.end()}function Nxe(n,e,t){Ze(n,49,Ame({sz:12,name:"Arial"},t))}function Lxe(n,e,t){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&Ze(n,1054,Pme(i,e[i],t))})}function Oxe(n,e){var t=Re(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),Ze(n,2151,t),t=Re(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),XV(Gn(e["!ref"]||"A1"),t),t.write_shift(4,4),Ze(n,2152,t)}function Dxe(n,e){for(var t=0;t<16;++t)Ze(n,224,XL({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){Ze(n,224,XL(r,0,e))})}function Fxe(n,e){for(var t=0;t<e["!links"].length;++t){var r=e["!links"][t];Ze(n,440,Fme(r)),r[1].Tooltip&&Ze(n,2048,Vme(r))}delete e["!links"]}function Vxe(n,e){if(e){var t=0;e.forEach(function(r,i){++t<=256&&r&&Ze(n,125,Bme(kE(i,r),i))})}}function jxe(n,e,t,r,i){var s=16+yu(i.cellXfs,e,i);if(e.v==null&&!e.bf){Ze(n,513,zh(t,r,s));return}if(e.bf)Ze(n,6,c1e(e,t,r,i,s));else switch(e.t){case"d":case"n":var a=e.t=="d"?fs($i(e.v)):e.v;Ze(n,515,Nme(t,r,a,s));break;case"b":case"e":Ze(n,517,kme(t,r,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var o=VC(i.Strings,e.v,i.revStrings);Ze(n,253,Rme(t,r,o,s))}else Ze(n,516,Cme(t,r,(e.v||"").slice(0,255),s,i));break;default:Ze(n,513,zh(t,r,s))}}function Gxe(n,e,t){var r=us(),i=t.SheetNames[n],s=t.Sheets[i]||{},a=(t||{}).Workbook||{},o=(a.Sheets||[])[n]||{},l=Array.isArray(s),u=e.biff==8,f,d="",g=[],p=Gn(s["!ref"]||"A1"),v=u?65536:16384;if(p.e.c>255||p.e.r>=v){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,v-1)}Ze(r,2057,NC(t,16,e)),Ze(r,13,oa(1)),Ze(r,12,oa(100)),Ze(r,15,Di(!0)),Ze(r,17,Di(!1)),Ze(r,16,Uh(.001)),Ze(r,95,Di(!0)),Ze(r,42,Di(!1)),Ze(r,43,Di(!1)),Ze(r,130,oa(1)),Ze(r,128,Mme()),Ze(r,131,Di(!1)),Ze(r,132,Di(!1)),u&&Vxe(r,s["!cols"]),Ze(r,512,bme(p,e)),u&&(s["!links"]=[]);for(var y=p.s.r;y<=p.e.r;++y){d=fi(y);for(var E=p.s.c;E<=p.e.c;++E){y===p.s.r&&(g[E]=Pi(E)),f=g[E]+d;var T=l?(s[y]||[])[E]:s[f];T&&(jxe(r,T,y,E,e),u&&T.l&&s["!links"].push([f,T.l]))}}var R=o.CodeName||o.name||i;return u&&Ze(r,574,Ime((a.Views||[])[0])),u&&(s["!merges"]||[]).length&&Ze(r,229,Dme(s["!merges"])),u&&Fxe(r,s),Ze(r,442,YV(R)),u&&Oxe(r,s),Ze(r,10),r.end()}function Bxe(n,e,t){var r=us(),i=(n||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=t.biff==8,l=t.biff==5;if(Ze(r,2057,NC(n,5,t)),t.bookType=="xla"&&Ze(r,135),Ze(r,225,o?oa(1200):null),Ze(r,193,fme(2)),l&&Ze(r,191),l&&Ze(r,192),Ze(r,226),Ze(r,92,Eme("SheetJS",t)),Ze(r,66,oa(o?1200:1252)),o&&Ze(r,353,oa(0)),o&&Ze(r,448),Ze(r,317,Ume(n.SheetNames.length)),o&&n.vbaraw&&Ze(r,211),o&&n.vbaraw){var u=a.CodeName||"ThisWorkbook";Ze(r,442,YV(u))}Ze(r,156,oa(17)),Ze(r,25,Di(!1)),Ze(r,18,Di(!1)),Ze(r,19,oa(0)),o&&Ze(r,431,Di(!1)),o&&Ze(r,444,oa(0)),Ze(r,61,Tme()),Ze(r,64,Di(!1)),Ze(r,141,oa(0)),Ze(r,34,Di(Hye(n)=="true")),Ze(r,14,Di(!0)),o&&Ze(r,439,Di(!1)),Ze(r,218,oa(0)),Nxe(r,n,t),Lxe(r,n.SSF,t),Dxe(r,t),o&&Ze(r,352,Di(!1));var f=r.end(),d=us();o&&Ze(d,140,jme()),o&&t.Strings&&Rxe(d,252,Sme(t.Strings)),Ze(d,10);var g=d.end(),p=us(),v=0,y=0;for(y=0;y<n.SheetNames.length;++y)v+=(o?12:11)+(o?2:1)*n.SheetNames[y].length;var E=f.length+v+g.length;for(y=0;y<n.SheetNames.length;++y){var T=s[y]||{};Ze(p,133,wme({pos:E,hs:T.Hidden||0,dt:0,name:n.SheetNames[y]},t)),E+=e[y].length}var R=p.end();if(v!=R.length)throw new Error("BS8 "+v+" != "+R.length);var M=[];return f.length&&M.push(f),R.length&&M.push(R),g.length&&M.push(g),ci(M)}function Uxe(n,e){var t=e||{},r=[];n&&!n.SSF&&(n.SSF=ds(or)),n&&n.SSF&&(RE(),AE(n.SSF),t.revssf=CE(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,jC(t),t.cellXfs=[],yu(t.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={});for(var i=0;i<n.SheetNames.length;++i)r[r.length]=Gxe(i,t,n);return r.unshift(Bxe(n,r,t)),ci(r)}function Ej(n,e){for(var t=0;t<=n.SheetNames.length;++t){var r=n.Sheets[n.SheetNames[t]];if(!(!r||!r["!ref"])){var i=Ws(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+n.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return Uxe(n,e);case 4:case 3:case 2:return kxe(n,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function zxe(n,e,t,r){for(var i=n["!merges"]||[],s=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,u=0;u<i.length;++u)if(!(i[u].s.r>t||i[u].s.c>a)&&!(i[u].e.r<t||i[u].e.c<a)){if(i[u].s.r<t||i[u].s.c<a){o=-1;break}o=i[u].e.r-i[u].s.r+1,l=i[u].e.c-i[u].s.c+1;break}if(!(o<0)){var f=An({r:t,c:a}),d=r.dense?(n[t]||[])[a]:n[f],g=d&&d.v!=null&&(d.h||vge(d.w||(Ll(d),d.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),r.editable?g='<span contenteditable="true">'+g+"</span>":d&&(p["data-t"]=d&&d.t||"z",d.v!=null&&(p["data-v"]=d.v),d.z!=null&&(p["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+d.l.Target+'">'+g+"</a>")),p.id=(r.id||"sjs")+"-"+f,s.push(qe("td",g,p))}}var v="<tr>";return v+s.join("")+"</tr>"}var $xe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Wxe="</body></html>";function Hxe(n,e,t){var r=[];return r.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function wj(n,e){var t=e||{},r=t.header!=null?t.header:$xe,i=t.footer!=null?t.footer:Wxe,s=[r],a=Ws(n["!ref"]);t.dense=Array.isArray(n),s.push(Hxe(n,a,t));for(var o=a.s.r;o<=a.e.r;++o)s.push(zxe(n,a,o,t));return s.push("</table>"+i),s.join("")}function Sj(n,e,t){var r=t||{},i=0,s=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var a=typeof r.origin=="string"?Yr(r.origin):r.origin;i=a.r,s=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:i,c:s}};if(n["!ref"]){var f=Ws(n["!ref"]);u.s.r=Math.min(u.s.r,f.s.r),u.s.c=Math.min(u.s.c,f.s.c),u.e.r=Math.max(u.e.r,f.e.r),u.e.c=Math.max(u.e.c,f.e.c),i==-1&&(u.e.r=i=f.e.r+1)}var d=[],g=0,p=n["!rows"]||(n["!rows"]=[]),v=0,y=0,E=0,T=0,R=0,M=0;for(n["!cols"]||(n["!cols"]=[]);v<o.length&&y<l;++v){var k=o[v];if(nO(k)){if(r.display)continue;p[y]={hidden:!0}}var V=k.children;for(E=T=0;E<V.length;++E){var z=V[E];if(!(r.display&&nO(z))){var P=z.hasAttribute("data-v")?z.getAttribute("data-v"):z.hasAttribute("v")?z.getAttribute("v"):Tge(z.innerHTML),C=z.getAttribute("data-z")||z.getAttribute("z");for(g=0;g<d.length;++g){var b=d[g];b.s.c==T+s&&b.s.r<y+i&&y+i<=b.e.r&&(T=b.e.c+1-s,g=-1)}M=+z.getAttribute("colspan")||1,((R=+z.getAttribute("rowspan")||1)>1||M>1)&&d.push({s:{r:y+i,c:T+s},e:{r:y+i+(R||1)-1,c:T+s+(M||1)-1}});var L={t:"s",v:P},F=z.getAttribute("data-t")||z.getAttribute("t")||"";P!=null&&(P.length==0?L.t=F||"z":r.raw||P.trim().length==0||F=="s"||(P==="TRUE"?L={t:"b",v:!0}:P==="FALSE"?L={t:"b",v:!1}:isNaN(Il(P))?isNaN(Ep(P).getDate())||(L={t:"d",v:$i(P)},r.cellDates||(L={t:"n",v:fs(L.v)}),L.z=r.dateNF||or[14]):L={t:"n",v:Il(P)})),L.z===void 0&&C!=null&&(L.z=C);var U="",j=z.getElementsByTagName("A");if(j&&j.length)for(var Te=0;Te<j.length&&!(j[Te].hasAttribute("href")&&(U=j[Te].getAttribute("href"),U.charAt(0)!="#"));++Te);U&&U.charAt(0)!="#"&&(L.l={Target:U}),r.dense?(n[y+i]||(n[y+i]=[]),n[y+i][T+s]=L):n[An({c:T+s,r:y+i})]=L,u.e.c<T+s&&(u.e.c=T+s),T+=M}}++y}return d.length&&(n["!merges"]=(n["!merges"]||[]).concat(d)),u.e.r=Math.max(u.e.r,y-1+i),n["!ref"]=wr(u),y>=l&&(n["!fullref"]=wr((u.e.r=o.length-v+y-1+i,u))),n}function Tj(n,e){var t=e||{},r=t.dense?[]:{};return Sj(r,n,e)}function Kxe(n,e){return tf(Tj(n,e),e)}function nO(n){var e="",t=Yxe(n);return t&&(e=t(n).getPropertyValue("display")),e||(e=n.style&&n.style.display),e==="none"}function Yxe(n){return n.ownerDocument.defaultView&&typeof n.ownerDocument.defaultView.getComputedStyle=="function"?n.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var Xxe=(function(){var n=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Sp({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+n+"</office:document-styles>";return function(){return Tr+e}})(),rO=(function(){var n=function(s){return Tn(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,r=function(s,a,o){var l=[];l.push('      <table:table table:name="'+Tn(a.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,f=0,d=Ws(s["!ref"]||"A1"),g=s["!merges"]||[],p=0,v=Array.isArray(s);if(s["!cols"])for(f=0;f<=d.e.c;++f)l.push("        <table:table-column"+(s["!cols"][f]?' table:style-name="co'+s["!cols"][f].ods+'"':"")+`></table:table-column>
`);var y="",E=s["!rows"]||[];for(u=0;u<d.s.r;++u)y=E[u]?' table:style-name="ro'+E[u].ods+'"':"",l.push("        <table:table-row"+y+`></table:table-row>
`);for(;u<=d.e.r;++u){for(y=E[u]?' table:style-name="ro'+E[u].ods+'"':"",l.push("        <table:table-row"+y+`>
`),f=0;f<d.s.c;++f)l.push(e);for(;f<=d.e.c;++f){var T=!1,R={},M="";for(p=0;p!=g.length;++p)if(!(g[p].s.c>f)&&!(g[p].s.r>u)&&!(g[p].e.c<f)&&!(g[p].e.r<u)){(g[p].s.c!=f||g[p].s.r!=u)&&(T=!0),R["table:number-columns-spanned"]=g[p].e.c-g[p].s.c+1,R["table:number-rows-spanned"]=g[p].e.r-g[p].s.r+1;break}if(T){l.push(t);continue}var k=An({r:u,c:f}),V=v?(s[u]||[])[f]:s[k];if(V&&V.f&&(R["table:formula"]=Tn(m1e(V.f)),V.F&&V.F.slice(0,k.length)==k)){var z=Ws(V.F);R["table:number-matrix-columns-spanned"]=z.e.c-z.s.c+1,R["table:number-matrix-rows-spanned"]=z.e.r-z.s.r+1}if(!V){l.push(e);continue}switch(V.t){case"b":M=V.v?"TRUE":"FALSE",R["office:value-type"]="boolean",R["office:boolean-value"]=V.v?"true":"false";break;case"n":M=V.w||String(V.v||0),R["office:value-type"]="float",R["office:value"]=V.v||0;break;case"s":case"str":M=V.v==null?"":V.v,R["office:value-type"]="string";break;case"d":M=V.w||$i(V.v).toISOString(),R["office:value-type"]="date",R["office:date-value"]=$i(V.v).toISOString(),R["table:style-name"]="ce1";break;default:l.push(e);continue}var P=n(M);if(V.l&&V.l.Target){var C=V.l.Target;C=C.charAt(0)=="#"?"#"+p1e(C.slice(1)):C,C.charAt(0)!="#"&&!C.match(/^\w+:/)&&(C="../"+C),P=qe("text:a",P,{"xlink:href":C.replace(/&/g,"&amp;")})}l.push("          "+qe("table:table-cell",qe("text:p",P,{}),R)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(s,a){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var f=0;f<u["!cols"].length;++f)if(u["!cols"][f]){var d=u["!cols"][f];if(d.width==null&&d.wpx==null&&d.wch==null)continue;LC(d),d.ods=o;var g=u["!cols"][f].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),s.push(`  </style:style>
`),++o}}});var l=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var f=0;f<u["!rows"].length;++f)if(u["!rows"][f]){u["!rows"][f].ods=l;var d=u["!rows"][f].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(a,o){var l=[Tr],u=Sp({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),f=Sp({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+f+`>
`),l.push(jV().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),i(l,a),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var d=0;d!=a.SheetNames.length;++d)l.push(r(a.Sheets[a.SheetNames[d]],a,d));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}})();function Ij(n,e){if(e.bookType=="fods")return rO(n,e);var t=SC(),r="",i=[],s=[];return r="mimetype",Ft(t,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",Ft(t,r,rO(n,e)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),r="styles.xml",Ft(t,r,Xxe(n,e)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),r="meta.xml",Ft(t,r,Tr+jV()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),r="manifest.rdf",Ft(t,r,ome(s)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",Ft(t,r,sme(i)),t}function hv(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function qxe(n){return typeof TextEncoder<"u"?new TextEncoder().encode(n):Va(wp(n))}function Zxe(n,e){e:for(var t=0;t<=n.length-e.length;++t){for(var r=0;r<e.length;++r)if(n[t+r]!=e[r])continue e;return!0}return!1}function uu(n){var e=n.reduce(function(i,s){return i+s.length},0),t=new Uint8Array(e),r=0;return n.forEach(function(i){t.set(i,r),r+=i.length}),t}function Qxe(n,e,t){var r=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,i=t/Math.pow(10,r-6176);n[e+15]|=r>>7,n[e+14]|=(r&127)<<1;for(var s=0;i>=1;++s,i/=256)n[e+s]=i&255;n[e+15]|=t>=0?0:128}function Tp(n,e){var t=e?e[0]:0,r=n[t]&127;e:if(n[t++]>=128&&(r|=(n[t]&127)<<7,n[t++]<128||(r|=(n[t]&127)<<14,n[t++]<128)||(r|=(n[t]&127)<<21,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,28),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,35),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,42),++t,n[t++]<128)))break e;return e&&(e[0]=t),r}function vn(n){var e=new Uint8Array(7);e[0]=n&127;var t=1;e:if(n>127){if(e[t-1]|=128,e[t]=n>>7&127,++t,n<=16383||(e[t-1]|=128,e[t]=n>>14&127,++t,n<=2097151)||(e[t-1]|=128,e[t]=n>>21&127,++t,n<=268435455)||(e[t-1]|=128,e[t]=n/256>>>21&127,++t,n<=34359738367)||(e[t-1]|=128,e[t]=n/65536>>>21&127,++t,n<=4398046511103))break e;e[t-1]|=128,e[t]=n/16777216>>>21&127,++t}return e.slice(0,t)}function Ud(n){var e=0,t=n[e]&127;e:if(n[e++]>=128){if(t|=(n[e]&127)<<7,n[e++]<128||(t|=(n[e]&127)<<14,n[e++]<128)||(t|=(n[e]&127)<<21,n[e++]<128))break e;t|=(n[e]&127)<<28}return t}function br(n){for(var e=[],t=[0];t[0]<n.length;){var r=t[0],i=Tp(n,t),s=i&7;i=Math.floor(i/8);var a=0,o;if(i==0)break;switch(s){case 0:{for(var l=t[0];n[t[0]++]>=128;);o=n.slice(l,t[0])}break;case 5:a=4,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 1:a=8,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 2:a=Tp(n,t),o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var u={data:o,type:s};e[i]==null?e[i]=[u]:e[i].push(u)}return e}function ri(n){var e=[];return n.forEach(function(t,r){t.forEach(function(i){i.data&&(e.push(vn(r*8+i.type)),i.type==2&&e.push(vn(i.data.length)),e.push(i.data))})}),uu(e)}function ba(n){for(var e,t=[],r=[0];r[0]<n.length;){var i=Tp(n,r),s=br(n.slice(r[0],r[0]+i));r[0]+=i;var a={id:Ud(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=br(o.data),u=Ud(l[3][0].data);a.messages.push({meta:l,data:n.slice(r[0],r[0]+u)}),r[0]+=u}),(e=s[3])!=null&&e[0]&&(a.merge=Ud(s[3][0].data)>>>0>0),t.push(a)}return t}function Qf(n){var e=[];return n.forEach(function(t){var r=[];r[1]=[{data:vn(t.id),type:0}],r[2]=[],t.merge!=null&&(r[3]=[{data:vn(+!!t.merge),type:0}]);var i=[];t.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:vn(a.data.length)}],r[2].push({data:ri(a.meta),type:2})});var s=ri(r);e.push(vn(s.length)),e.push(s),i.forEach(function(a){return e.push(a)})}),uu(e)}function Jxe(n,e){if(n!=0)throw new Error("Unexpected Snappy chunk type ".concat(n));for(var t=[0],r=Tp(e,t),i=[];t[0]<e.length;){var s=e[t[0]]&3;if(s==0){var a=e[t[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[t[0]],o>1&&(a|=e[t[0]+1]<<8),o>2&&(a|=e[t[0]+2]<<16),o>3&&(a|=e[t[0]+3]<<24),a>>>=0,a++,t[0]+=o}i.push(e.slice(t[0],t[0]+a)),t[0]+=a;continue}else{var l=0,u=0;if(s==1?(u=(e[t[0]]>>2&7)+4,l=(e[t[0]++]&224)<<3,l|=e[t[0]++]):(u=(e[t[0]++]>>2)+1,s==2?(l=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(l=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),i=[uu(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(i.push(i[0].slice(-l)),u-=l;u>=i[i.length-1].length;)i.push(i[i.length-1]),u-=i[i.length-1].length;i.push(i[0].slice(-l,-l+u))}}var f=uu(i);if(f.length!=r)throw new Error("Unexpected length: ".concat(f.length," != ").concat(r));return f}function Ma(n){for(var e=[],t=0;t<n.length;){var r=n[t++],i=n[t]|n[t+1]<<8|n[t+2]<<16;t+=3,e.push(Jxe(r,n.slice(t,t+i))),t+=i}if(t!==n.length)throw new Error("data is not a valid framed stream!");return uu(e)}function Jf(n){for(var e=[],t=0;t<n.length;){var r=Math.min(n.length-t,268435455),i=new Uint8Array(4);e.push(i);var s=vn(r),a=s.length;e.push(s),r<=60?(a++,e.push(new Uint8Array([r-1<<2]))):r<=256?(a+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(a+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(a+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(a+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(n.slice(t,t+r)),a+=r,i[0]=0,i[1]=a&255,i[2]=a>>8&255,i[3]=a>>16&255,t+=r}return uu(e)}function CS(n,e){var t=new Uint8Array(32),r=hv(t),i=12,s=0;switch(t[0]=5,n.t){case"n":t[1]=2,Qxe(t,i,n.v),s|=1,i+=16;break;case"b":t[1]=6,r.setFloat64(i,n.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[1]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(8,s,!0),t.slice(0,i)}function PS(n,e){var t=new Uint8Array(32),r=hv(t),i=12,s=0;switch(t[0]=3,n.t){case"n":t[2]=2,r.setFloat64(i,n.v,!0),s|=32,i+=8;break;case"b":t[2]=6,r.setFloat64(i,n.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[2]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(4,s,!0),t.slice(0,i)}function yc(n){var e=br(n);return Tp(e[1][0].data)}function eve(n,e,t){var r,i,s,a;if(!((r=n[6])!=null&&r[0])||!((i=n[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(s=n[8])==null?void 0:s[0])==null?void 0:a.data)&&Ud(n[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=hv(n[7][0].data),f=0,d=[],g=hv(n[4][0].data),p=0,v=[],y=0;y<e.length;++y){if(e[y]==null){u.setUint16(y*2,65535,!0),g.setUint16(y*2,65535);continue}u.setUint16(y*2,f,!0),g.setUint16(y*2,p,!0);var E,T;switch(typeof e[y]){case"string":E=CS({t:"s",v:e[y]},t),T=PS({t:"s",v:e[y]},t);break;case"number":E=CS({t:"n",v:e[y]},t),T=PS({t:"n",v:e[y]},t);break;case"boolean":E=CS({t:"b",v:e[y]},t),T=PS({t:"b",v:e[y]},t);break;default:throw new Error("Unsupported value "+e[y])}d.push(E),f+=E.length,v.push(T),p+=T.length,++l}for(n[2][0].data=vn(l);y<n[7][0].data.length/2;++y)u.setUint16(y*2,65535,!0),g.setUint16(y*2,65535,!0);return n[6][0].data=uu(d),n[3][0].data=uu(v),l}function tve(n,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=n.Sheets[n.SheetNames[0]];n.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=Ws(t["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(wr(r)));var s=fv(t,{range:r,header:1}),a=["~Sh33tJ5~"];s.forEach(function(te){return te.forEach(function(ne){typeof ne=="string"&&a.push(ne)})});var o={},l=[],u=Cn.read(e.numbers,{type:"base64"});u.FileIndex.map(function(te,ne){return[te,u.FullPaths[ne]]}).forEach(function(te){var ne=te[0],ee=te[1];if(ne.type==2&&ne.name.match(/\.iwa/)){var me=ne.content,Se=Ma(me),Ne=ba(Se);Ne.forEach(function(se){l.push(se.id),o[se.id]={deps:[],location:ee,type:Ud(se.messages[0].meta[1][0].data)}})}}),l.sort(function(te,ne){return te-ne});var f=l.filter(function(te){return te>1}).map(function(te){return[te,vn(te)]});u.FileIndex.map(function(te,ne){return[te,u.FullPaths[ne]]}).forEach(function(te){var ne=te[0];if(te[1],!!ne.name.match(/\.iwa/)){var ee=ba(Ma(ne.content));ee.forEach(function(me){me.messages.forEach(function(Se){f.forEach(function(Ne){me.messages.some(function(se){return Ud(se.meta[1][0].data)!=11006&&Zxe(se.data,Ne[1])})&&o[Ne[0]].deps.push(me.id)})})})}});for(var d=Cn.find(u,o[1].location),g=ba(Ma(d.content)),p,v=0;v<g.length;++v){var y=g[v];y.id==1&&(p=y)}var E=yc(br(p.messages[0].data)[1][0].data);for(d=Cn.find(u,o[E].location),g=ba(Ma(d.content)),v=0;v<g.length;++v)y=g[v],y.id==E&&(p=y);for(E=yc(br(p.messages[0].data)[2][0].data),d=Cn.find(u,o[E].location),g=ba(Ma(d.content)),v=0;v<g.length;++v)y=g[v],y.id==E&&(p=y);for(E=yc(br(p.messages[0].data)[2][0].data),d=Cn.find(u,o[E].location),g=ba(Ma(d.content)),v=0;v<g.length;++v)y=g[v],y.id==E&&(p=y);var T=br(p.messages[0].data);{T[6][0].data=vn(r.e.r+1),T[7][0].data=vn(r.e.c+1);var R=yc(T[46][0].data),M=Cn.find(u,o[R].location),k=ba(Ma(M.content));{for(var V=0;V<k.length&&k[V].id!=R;++V);if(k[V].id!=R)throw"Bad ColumnRowUIDMapArchive";var z=br(k[V].messages[0].data);z[1]=[],z[2]=[],z[3]=[];for(var P=0;P<=r.e.c;++P){var C=[];C[1]=C[2]=[{type:0,data:vn(P+420690)}],z[1].push({type:2,data:ri(C)}),z[2].push({type:0,data:vn(P)}),z[3].push({type:0,data:vn(P)})}z[4]=[],z[5]=[],z[6]=[];for(var b=0;b<=r.e.r;++b)C=[],C[1]=C[2]=[{type:0,data:vn(b+726270)}],z[4].push({type:2,data:ri(C)}),z[5].push({type:0,data:vn(b)}),z[6].push({type:0,data:vn(b)});k[V].messages[0].data=ri(z)}M.content=Jf(Qf(k)),M.size=M.content.length,delete T[46];var L=br(T[4][0].data);{L[7][0].data=vn(r.e.r+1);var F=br(L[1][0].data),U=yc(F[2][0].data);M=Cn.find(u,o[U].location),k=ba(Ma(M.content));{if(k[0].id!=U)throw"Bad HeaderStorageBucket";var j=br(k[0].messages[0].data);for(b=0;b<s.length;++b){var Te=br(j[2][0].data);Te[1][0].data=vn(b),Te[4][0].data=vn(s[b].length),j[2][b]={type:j[2][0].type,data:ri(Te)}}k[0].messages[0].data=ri(j)}M.content=Jf(Qf(k)),M.size=M.content.length;var Me=yc(L[2][0].data);M=Cn.find(u,o[Me].location),k=ba(Ma(M.content));{if(k[0].id!=Me)throw"Bad HeaderStorageBucket";for(j=br(k[0].messages[0].data),P=0;P<=r.e.c;++P)Te=br(j[2][0].data),Te[1][0].data=vn(P),Te[4][0].data=vn(r.e.r+1),j[2][P]={type:j[2][0].type,data:ri(Te)};k[0].messages[0].data=ri(j)}M.content=Jf(Qf(k)),M.size=M.content.length;var Ue=yc(L[4][0].data);(function(){for(var te=Cn.find(u,o[Ue].location),ne=ba(Ma(te.content)),ee,me=0;me<ne.length;++me){var Se=ne[me];Se.id==Ue&&(ee=Se)}var Ne=br(ee.messages[0].data);{Ne[3]=[];var se=[];a.forEach(function(Ye,he){se[1]=[{type:0,data:vn(he)}],se[2]=[{type:0,data:vn(1)}],se[3]=[{type:2,data:qxe(Ye)}],Ne[3].push({type:2,data:ri(se)})})}ee.messages[0].data=ri(Ne);var re=Qf(ne),D=Jf(re);te.content=D,te.size=te.content.length})();var ke=br(L[3][0].data);{var le=ke[1][0];delete ke[2];var Ae=br(le.data);{var Ie=yc(Ae[2][0].data);(function(){for(var te=Cn.find(u,o[Ie].location),ne=ba(Ma(te.content)),ee,me=0;me<ne.length;++me){var Se=ne[me];Se.id==Ie&&(ee=Se)}var Ne=br(ee.messages[0].data);{delete Ne[6],delete ke[7];var se=new Uint8Array(Ne[5][0].data);Ne[5]=[];for(var re=0,D=0;D<=r.e.r;++D){var Ye=br(se);re+=eve(Ye,s[D],a),Ye[1][0].data=vn(D),Ne[5].push({data:ri(Ye),type:2})}Ne[1]=[{type:0,data:vn(r.e.c+1)}],Ne[2]=[{type:0,data:vn(r.e.r+1)}],Ne[3]=[{type:0,data:vn(re)}],Ne[4]=[{type:0,data:vn(r.e.r+1)}]}ee.messages[0].data=ri(Ne);var he=Qf(ne),He=Jf(he);te.content=He,te.size=te.content.length})()}le.data=ri(Ae)}L[3][0].data=ri(ke)}T[4][0].data=ri(L)}p.messages[0].data=ri(T);var Y=Qf(g),O=Jf(Y);return d.content=O,d.size=d.content.length,u}function nve(n){return function(t){for(var r=0;r!=n.length;++r){var i=n[r];t[i[0]]===void 0&&(t[i[0]]=i[1]),i[2]==="n"&&(t[i[0]]=Number(t[i[0]]))}}}function jC(n){nve([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(n)}function rve(n,e){return e.bookType=="ods"?Ij(n,e):e.bookType=="numbers"?tve(n,e):e.bookType=="xlsb"?ive(n,e):sve(n,e)}function ive(n,e){Id=1024,n&&!n.SSF&&(n.SSF=ds(or)),n&&n.SSF&&(RE(),AE(n.SSF),e.revssf=CE(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Mm?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t=e.bookType=="xlsb"?"bin":"xml",r=oj.indexOf(e.bookType)>-1,i=DV();jC(e=e||{});var s=SC(),a="",o=0;if(e.cellXfs=[],yu(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",Ft(s,a,GV(n.Props,e)),i.coreprops.push(a),En(e.rels,2,a,en.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var l=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(n.SheetNames[u]);n.Props.SheetNames=l}for(n.Props.Worksheets=n.Props.SheetNames.length,Ft(s,a,UV(n.Props)),i.extprops.push(a),En(e.rels,3,a,en.EXT_PROPS),n.Custprops!==n.Props&&di(n.Custprops||{}).length>0&&(a="docProps/custom.xml",Ft(s,a,zV(n.Custprops)),i.custprops.push(a),En(e.rels,4,a,en.CUST_PROPS)),o=1;o<=n.SheetNames.length;++o){var f={"!id":{}},d=n.Sheets[n.SheetNames[o-1]],g=(d||{})["!type"]||"sheet";switch(g){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,Ft(s,a,oxe(o-1,a,e,n,f)),i.sheets.push(a),En(e.wbrels,-1,"worksheets/sheet"+o+"."+t,en.WS[0])}if(d){var p=d["!comments"],v=!1,y="";p&&p.length>0&&(y="xl/comments"+o+"."+t,Ft(s,y,uxe(p,y)),i.comments.push(y),En(f,-1,"../comments"+o+"."+t,en.CMNT),v=!0),d["!legacy"]&&v&&Ft(s,"xl/drawings/vmlDrawing"+o+".vml",sj(o,d["!comments"])),delete d["!comments"],delete d["!legacy"]}f["!id"].rId1&&Ft(s,VV(a),Gd(f))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,Ft(s,a,cxe(e.Strings,a,e)),i.strs.push(a),En(e.wbrels,-1,"sharedStrings."+t,en.SST)),a="xl/workbook."+t,Ft(s,a,axe(n,a)),i.workbooks.push(a),En(e.rels,1,a,en.WB),a="xl/theme/theme1.xml",Ft(s,a,rj(n.Themes,e)),i.themes.push(a),En(e.wbrels,-1,"theme/theme1.xml",en.THEME),a="xl/styles."+t,Ft(s,a,lxe(n,a,e)),i.styles.push(a),En(e.wbrels,-1,"styles."+t,en.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",Ft(s,a,n.vbaraw),i.vba.push(a),En(e.wbrels,-1,"vbaProject.bin",en.VBA)),a="xl/metadata."+t,Ft(s,a,hxe(a)),i.metadata.push(a),En(e.wbrels,-1,"metadata."+t,en.XLMETA),Ft(s,"[Content_Types].xml",FV(i,e)),Ft(s,"_rels/.rels",Gd(e.rels)),Ft(s,"xl/_rels/workbook."+t+".rels",Gd(e.wbrels)),delete e.revssf,delete e.ssf,s}function sve(n,e){Id=1024,n&&!n.SSF&&(n.SSF=ds(or)),n&&n.SSF&&(RE(),AE(n.SSF),e.revssf=CE(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Mm?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",r=oj.indexOf(e.bookType)>-1,i=DV();jC(e=e||{});var s=SC(),a="",o=0;if(e.cellXfs=[],yu(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",Ft(s,a,GV(n.Props,e)),i.coreprops.push(a),En(e.rels,2,a,en.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var l=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(n.SheetNames[u]);n.Props.SheetNames=l}n.Props.Worksheets=n.Props.SheetNames.length,Ft(s,a,UV(n.Props)),i.extprops.push(a),En(e.rels,3,a,en.EXT_PROPS),n.Custprops!==n.Props&&di(n.Custprops||{}).length>0&&(a="docProps/custom.xml",Ft(s,a,zV(n.Custprops)),i.custprops.push(a),En(e.rels,4,a,en.CUST_PROPS));var f=["SheetJ5"];for(e.tcid=0,o=1;o<=n.SheetNames.length;++o){var d={"!id":{}},g=n.Sheets[n.SheetNames[o-1]],p=(g||{})["!type"]||"sheet";switch(p){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,Ft(s,a,pj(o-1,e,n,d)),i.sheets.push(a),En(e.wbrels,-1,"worksheets/sheet"+o+"."+t,en.WS[0])}if(g){var v=g["!comments"],y=!1,E="";if(v&&v.length>0){var T=!1;v.forEach(function(R){R[1].forEach(function(M){M.T==!0&&(T=!0)})}),T&&(E="xl/threadedComments/threadedComment"+o+"."+t,Ft(s,E,Dpe(v,f,e)),i.threadedcomments.push(E),En(d,-1,"../threadedComments/threadedComment"+o+"."+t,en.TCMNT)),E="xl/comments"+o+"."+t,Ft(s,E,aj(v)),i.comments.push(E),En(d,-1,"../comments"+o+"."+t,en.CMNT),y=!0}g["!legacy"]&&y&&Ft(s,"xl/drawings/vmlDrawing"+o+".vml",sj(o,g["!comments"])),delete g["!comments"],delete g["!legacy"]}d["!id"].rId1&&Ft(s,VV(a),Gd(d))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,Ft(s,a,ZV(e.Strings,e)),i.strs.push(a),En(e.wbrels,-1,"sharedStrings."+t,en.SST)),a="xl/workbook."+t,Ft(s,a,xj(n)),i.workbooks.push(a),En(e.rels,1,a,en.WB),a="xl/theme/theme1.xml",Ft(s,a,rj(n.Themes,e)),i.themes.push(a),En(e.wbrels,-1,"theme/theme1.xml",en.THEME),a="xl/styles."+t,Ft(s,a,tj(n,e)),i.styles.push(a),En(e.wbrels,-1,"styles."+t,en.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",Ft(s,a,n.vbaraw),i.vba.push(a),En(e.wbrels,-1,"vbaProject.bin",en.VBA)),a="xl/metadata."+t,Ft(s,a,ij()),i.metadata.push(a),En(e.wbrels,-1,"metadata."+t,en.XLMETA),f.length>1&&(a="xl/persons/person.xml",Ft(s,a,Fpe(f)),i.people.push(a),En(e.wbrels,-1,"persons/person.xml",en.PEOPLE)),Ft(s,"[Content_Types].xml",FV(i,e)),Ft(s,"_rels/.rels",Gd(e.rels)),Ft(s,"xl/_rels/workbook."+t+".rels",Gd(e.wbrels)),delete e.revssf,delete e.ssf,s}function ave(n,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];case"base64":t=Nl(n.slice(0,12));break;case"binary":t=n;break;case"array":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function Aj(n,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return m_(e.file,Cn.write(n,{type:on?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Cn.write(n,e)}function ove(n,e){var t=ds(e||{}),r=rve(n,t);return lve(r,t)}function lve(n,e){var t={},r=on?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=r;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var i=n.FullPaths?Cn.write(n,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):n.generate(t);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(IE(i))}return e.password&&typeof encrypt_agile<"u"?Aj(encrypt_agile(i,e.password),e):e.type==="file"?m_(e.file,i):e.type=="string"?Rm(i):i}function cve(n,e){var t=e||{},r=Ixe(n,t);return Aj(r,t)}function po(n,e,t){t||(t="");var r=t+n;switch(e.type){case"base64":return vp(wp(r));case"binary":return wp(r);case"string":return n;case"file":return m_(e.file,r,"utf8");case"buffer":return on?Gl(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):po(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function uve(n,e){switch(e.type){case"base64":return vp(n);case"binary":return n;case"string":return n;case"file":return m_(e.file,n,"binary");case"buffer":return on?Gl(n,"binary"):n.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function ay(n,e){switch(e.type){case"string":case"base64":case"binary":for(var t="",r=0;r<n.length;++r)t+=String.fromCharCode(n[r]);return e.type=="base64"?vp(t):e.type=="string"?Rm(t):t;case"file":return m_(e.file,n);case"buffer":return n;default:throw new Error("Unrecognized type "+e.type)}}function Rj(n,e){V0e(),Xye(n);var t=ds(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var r=Rj(n,t);return t.type="array",IE(r)}var i=0;if(t.sheet&&(typeof t.sheet=="number"?i=t.sheet:i=n.SheetNames.indexOf(t.sheet),!n.SheetNames[i]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return po(Sxe(n,t),t);case"slk":case"sylk":return po(Hme.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"htm":case"html":return po(wj(n.Sheets[n.SheetNames[i]],t),t);case"txt":return uve(Cj(n.Sheets[n.SheetNames[i]],t),t);case"csv":return po(GC(n.Sheets[n.SheetNames[i]],t),t,"\uFEFF");case"dif":return po(Kme.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"dbf":return ay(Wme.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"prn":return po(Yme.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"rtf":return po(tpe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"eth":return po(qV.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"fods":return po(Ij(n,t),t);case"wk1":return ay(qL.sheet_to_wk1(n.Sheets[n.SheetNames[i]],t),t);case"wk3":return ay(qL.book_to_wk3(n,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),ay(Ej(n,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),cve(n,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return ove(n,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function hve(n){if(!n.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=n.file.slice(n.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(n.bookType=t.slice(1)),n.bookType=e[n.bookType]||n.bookType}}function fve(n,e,t){var r={};return r.type="file",r.file=e,hve(r),Rj(n,r)}function dve(n,e,t,r,i,s,a,o){var l=fi(t),u=o.defval,f=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,g=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:t,enumerable:!1})}catch{g.__rowNum__=t}else g.__rowNum__=t;if(!a||n[t])for(var p=e.s.c;p<=e.e.c;++p){var v=a?n[t][p]:n[r[p]+l];if(v===void 0||v.t===void 0){if(u===void 0)continue;s[p]!=null&&(g[s[p]]=u);continue}var y=v.v;switch(v.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(s[p]!=null){if(y==null)if(v.t=="e"&&y===null)g[s[p]]=null;else if(u!==void 0)g[s[p]]=u;else if(f&&y===null)g[s[p]]=null;else continue;else g[s[p]]=f&&(v.t!=="n"||v.t==="n"&&o.rawNumbers!==!1)?y:Ll(v,y,o);y!=null&&(d=!1)}}return{row:g,isempty:d}}function fv(n,e){if(n==null||n["!ref"]==null)return[];var t={t:"n",v:0},r=0,i=1,s=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},f=u.range!=null?u.range:n["!ref"];switch(u.header===1?r=1:u.header==="A"?r=2:Array.isArray(u.header)?r=3:u.header==null&&(r=0),typeof f){case"string":l=Gn(f);break;case"number":l=Gn(n["!ref"]),l.s.r=f;break;default:l=f}r>0&&(i=0);var d=fi(l.s.r),g=[],p=[],v=0,y=0,E=Array.isArray(n),T=l.s.r,R=0,M={};E&&!n[T]&&(n[T]=[]);var k=u.skipHidden&&n["!cols"]||[],V=u.skipHidden&&n["!rows"]||[];for(R=l.s.c;R<=l.e.c;++R)if(!(k[R]||{}).hidden)switch(g[R]=Pi(R),t=E?n[T][R]:n[g[R]+d],r){case 1:s[R]=R-l.s.c;break;case 2:s[R]=g[R];break;case 3:s[R]=u.header[R-l.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),o=a=Ll(t,null,u),y=M[a]||0,!y)M[a]=1;else{do o=a+"_"+y++;while(M[o]);M[a]=y,M[o]=1}s[R]=o}for(T=l.s.r+i;T<=l.e.r;++T)if(!(V[T]||{}).hidden){var z=dve(n,l,T,g,r,s,E,u);(z.isempty===!1||(r===1?u.blankrows!==!1:u.blankrows))&&(p[v++]=z.row)}return p.length=v,p}var iO=/"/g;function gve(n,e,t,r,i,s,a,o){for(var l=!0,u=[],f="",d=fi(t),g=e.s.c;g<=e.e.c;++g)if(r[g]){var p=o.dense?(n[t]||[])[g]:n[r[g]+d];if(p==null)f="";else if(p.v!=null){l=!1,f=""+(o.rawNumbers&&p.t=="n"?p.v:Ll(p,null,o));for(var v=0,y=0;v!==f.length;++v)if((y=f.charCodeAt(v))===i||y===s||y===34||o.forceQuotes){f='"'+f.replace(iO,'""')+'"';break}f=="ID"&&(f='"ID"')}else p.f!=null&&!p.F?(l=!1,f="="+p.f,f.indexOf(",")>=0&&(f='"'+f.replace(iO,'""')+'"')):f="";u.push(f)}return o.blankrows===!1&&l?null:u.join(a)}function GC(n,e){var t=[],r=e??{};if(n==null||n["!ref"]==null)return"";var i=Gn(n["!ref"]),s=r.FS!==void 0?r.FS:",",a=s.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,l=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),f="",d=[];r.dense=Array.isArray(n);for(var g=r.skipHidden&&n["!cols"]||[],p=r.skipHidden&&n["!rows"]||[],v=i.s.c;v<=i.e.c;++v)(g[v]||{}).hidden||(d[v]=Pi(v));for(var y=0,E=i.s.r;E<=i.e.r;++E)(p[E]||{}).hidden||(f=gve(n,i,E,d,a,l,s,r),f!=null&&(r.strip&&(f=f.replace(u,"")),(f||r.blankrows!==!1)&&t.push((y++?o:"")+f)));return delete r.dense,t.join("")}function Cj(n,e){e||(e={}),e.FS="	",e.RS=`
`;var t=GC(n,e);return t}function mve(n){var e="",t,r="";if(n==null||n["!ref"]==null)return[];var i=Gn(n["!ref"]),s="",a=[],o,l=[],u=Array.isArray(n);for(o=i.s.c;o<=i.e.c;++o)a[o]=Pi(o);for(var f=i.s.r;f<=i.e.r;++f)for(s=fi(f),o=i.s.c;o<=i.e.c;++o)if(e=a[o]+s,t=u?(n[f]||[])[o]:n[e],r="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;r=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)r=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)r=""+t.v;else if(t.t=="b")r=t.v?"TRUE":"FALSE";else if(t.w!==void 0)r="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?r="'"+t.v:r=""+t.v}}l[l.length]=e+"="+r}return l}function Pj(n,e,t){var r=t||{},i=+!r.skipHeader,s=n||{},a=0,o=0;if(s&&r.origin!=null)if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?Yr(r.origin):r.origin;a=l.r,o=l.c}var u,f={s:{c:0,r:0},e:{c:o,r:a+e.length-1+i}};if(s["!ref"]){var d=Gn(s["!ref"]);f.e.c=Math.max(f.e.c,d.e.c),f.e.r=Math.max(f.e.r,d.e.r),a==-1&&(a=d.e.r+1,f.e.r=a+e.length-1+i)}else a==-1&&(a=0,f.e.r=e.length-1+i);var g=r.header||[],p=0;e.forEach(function(y,E){di(y).forEach(function(T){(p=g.indexOf(T))==-1&&(g[p=g.length]=T);var R=y[T],M="z",k="",V=An({c:o+p,r:a+E+i});u=Ip(s,V),R&&typeof R=="object"&&!(R instanceof Date)?s[V]=R:(typeof R=="number"?M="n":typeof R=="boolean"?M="b":typeof R=="string"?M="s":R instanceof Date?(M="d",r.cellDates||(M="n",R=fs(R)),k=r.dateNF||or[14]):R===null&&r.nullError&&(M="e",R=0),u?(u.t=M,u.v=R,delete u.w,delete u.R,k&&(u.z=k)):s[V]=u={t:M,v:R},k&&(u.z=k))})}),f.e.c=Math.max(f.e.c,o+g.length-1);var v=fi(a);if(i)for(p=0;p<g.length;++p)s[Pi(p+o)+v]={t:"s",v:g[p]};return s["!ref"]=wr(f),s}function pve(n,e){return Pj(null,n,e)}function Ip(n,e,t){if(typeof e=="string"){if(Array.isArray(n)){var r=Yr(e);return n[r.r]||(n[r.r]=[]),n[r.r][r.c]||(n[r.r][r.c]={t:"z"})}return n[e]||(n[e]={t:"z"})}return typeof e!="number"?Ip(n,An(e)):Ip(n,An({r:e,c:t||0}))}function _ve(n,e){if(typeof e=="number"){if(e>=0&&n.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=n.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function yve(){return{SheetNames:[],Sheets:{}}}function xve(n,e,t,r){var i=1;if(!t)for(;i<=65535&&n.SheetNames.indexOf(t="Sheet"+i)!=-1;++i,t=void 0);if(!t||n.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&n.SheetNames.indexOf(t)>=0){var s=t.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||t;for(++i;i<=65535&&n.SheetNames.indexOf(t=a+i)!=-1;++i);}if(yj(t),n.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return n.SheetNames.push(t),n.Sheets[t]=e,t}function vve(n,e,t){n.Workbook||(n.Workbook={}),n.Workbook.Sheets||(n.Workbook.Sheets=[]);var r=_ve(n,e);switch(n.Workbook.Sheets[r]||(n.Workbook.Sheets[r]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}n.Workbook.Sheets[r].Hidden=t}function Eve(n,e){return n.z=e,n}function bj(n,e,t){return e?(n.l={Target:e},t&&(n.l.Tooltip=t)):delete n.l,n}function wve(n,e,t){return bj(n,"#"+e,t)}function Sve(n,e,t){n.c||(n.c=[]),n.c.push({t:e,a:t||"SheetJS"})}function Tve(n,e,t,r){for(var i=typeof e!="string"?e:Gn(e),s=typeof e=="string"?e:wr(e),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var l=Ip(n,a,o);l.t="n",l.F=s,delete l.v,a==i.s.r&&o==i.s.c&&(l.f=t,r&&(l.D=!0))}return n}var bS={encode_col:Pi,encode_row:fi,encode_cell:An,encode_range:wr,decode_col:PC,decode_row:CC,split_cell:Vge,decode_cell:Yr,decode_range:Ws,format_cell:Ll,sheet_add_aoa:bV,sheet_add_json:Pj,sheet_add_dom:Sj,aoa_to_sheet:L0,json_to_sheet:pve,table_to_sheet:Tj,table_to_book:Kxe,sheet_to_csv:GC,sheet_to_txt:Cj,sheet_to_json:fv,sheet_to_html:wj,sheet_to_formulae:mve,sheet_to_row_object_array:fv,sheet_get_cell:Ip,book_new:yve,book_append_sheet:xve,book_set_sheet_visibility:vve,cell_set_number_format:Eve,cell_set_hyperlink:bj,cell_set_internal_link:wve,cell_add_comment:Sve,sheet_set_array_formula:Tve,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const F0=Uo()(hE((n,e)=>({vondsten:[],addVondst:t=>n(r=>({vondsten:[...r.vondsten,{...t,id:crypto.randomUUID(),timestamp:new Date().toISOString()}]})),removeVondst:t=>n(r=>({vondsten:r.vondsten.filter(i=>i.id!==t)})),updateVondst:(t,r)=>n(i=>({vondsten:i.vondsten.map(s=>s.id===t?{...s,...r}:s)})),clearAll:()=>n({vondsten:[]}),exportAsGeoJSON:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r={type:"FeatureCollection",features:t.map(o=>({type:"Feature",geometry:{type:"Point",coordinates:[o.location.lng,o.location.lat]},properties:{id:o.id,objectType:o.objectType,material:o.material,period:o.period,depth:o.depth,notes:o.notes,timestamp:o.timestamp,photoUrl:o.photoUrl,condition:o.condition,weight:o.weight,length:o.length}}))},i=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.geojson`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},exportAsCSV:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r=`ID,Latitude,Longitude,Datum,Type,Materiaal,Periode,Diepte (cm),Conditie,Gewicht (g),Lengte (mm),Notities,Foto URL
`,i=t.map(u=>{const f=new Date(u.timestamp).toLocaleDateString("nl-NL"),d=u.notes?`"${u.notes.replace(/"/g,'""')}"`:"";return`${u.id},${u.location.lat},${u.location.lng},${f},${u.objectType},${u.material},${u.period},${u.depth||""},${u.condition||""},${u.weight||""},${u.length||""},${d},${u.photoUrl||""}`}).join(`
`),s=r+i,a=new Blob([s],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(a),l=document.createElement("a");l.href=o,l.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)},exportAsExcel:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r=t.map(o=>({ID:o.id,Latitude:o.location.lat,Longitude:o.location.lng,Datum:new Date(o.timestamp).toLocaleDateString("nl-NL"),Type:o.objectType,Materiaal:o.material,Periode:o.period,"Diepte (cm)":o.depth||"",Conditie:o.condition||"","Gewicht (g)":o.weight||"","Lengte (mm)":o.length||"",Notities:o.notes||"","Foto URL":o.photoUrl||""})),i=bS.json_to_sheet(r),s=bS.book_new();bS.book_append_sheet(s,i,"Vondsten");const a=[{wch:36},{wch:12},{wch:12},{wch:12},{wch:15},{wch:12},{wch:25},{wch:12},{wch:12},{wch:12},{wch:12},{wch:40},{wch:50}];i["!cols"]=a,fve(s,`mijn-vondsten-${new Date().toISOString().split("T")[0]}.xlsx`)},exportAsGPX:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r=t.map(l=>{const u=new Date(l.timestamp).toISOString();return`  <wpt lat="${l.location.lat}" lon="${l.location.lng}">
    <name>${l.objectType} - ${l.material}</name>
    <desc>${l.period}${l.depth?`, ${l.depth}cm diep`:""}${l.condition&&l.condition!=="Onbekend"?`, ${l.condition}`:""}${l.weight?`, ${l.weight}g`:""}${l.length?`, ${l.length}mm`:""}${l.notes?`. ${l.notes}`:""}</desc>
    <time>${u}</time>
    <sym>Pin</sym>
  </wpt>`}).join(`
`),i=`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="DetectorApp NL" xmlns="http://www.topografix.com/GPX/1/1">
  <metadata>
    <name>Mijn Vondsten</name>
    <desc>Geexporteerd uit DetectorApp NL</desc>
    <time>${new Date().toISOString()}</time>
  </metadata>
${r}
</gpx>`,s=new Blob([i],{type:"application/gpx+xml"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.gpx`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},exportAsKML:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const i=`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <name>Mijn Vondsten</name>
    <description>Geexporteerd uit DetectorApp NL</description>
${t.map(l=>{const u=new Date(l.timestamp).toLocaleDateString("nl-NL"),f=`<![CDATA[
            <b>Type:</b> ${l.objectType}<br/>
            <b>Materiaal:</b> ${l.material}<br/>
            <b>Periode:</b> ${l.period}<br/>
            ${l.depth?`<b>Diepte:</b> ${l.depth} cm<br/>`:""}
            ${l.condition&&l.condition!=="Onbekend"?`<b>Conditie:</b> ${l.condition}<br/>`:""}
            ${l.weight?`<b>Gewicht:</b> ${l.weight} gram<br/>`:""}
            ${l.length?`<b>Lengte:</b> ${l.length} mm<br/>`:""}
            <b>Datum:</b> ${u}<br/>
            ${l.notes?`<b>Notities:</b> ${l.notes}<br/>`:""}
            ${l.photoUrl?`<a href="${l.photoUrl}">Bekijk foto</a>`:""}
          ]]>`;return`    <Placemark>
      <name>${l.objectType} - ${l.material}</name>
      <description>${f}</description>
      <Point>
        <coordinates>${l.location.lng},${l.location.lat},0</coordinates>
      </Point>
    </Placemark>`}).join(`
`)}
  </Document>
</kml>`,s=new Blob([i],{type:"application/vnd.google-earth.kml+xml"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.kml`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)}}),{name:"detectorapp-local-vondsten"}));Qt.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");function Ive(n){if(!n)return n;const e={Mo:"ma",Tu:"di",We:"wo",Th:"do",Fr:"vr",Sa:"za",Su:"zo",Mon:"ma",Tue:"di",Wed:"wo",Thu:"do",Fri:"vr",Sat:"za",Sun:"zo",PH:"feestdagen",SH:"schoolvakantie"};let t=n;return Object.entries(e).forEach(([r,i])=>{t=t.replace(new RegExp(`\\b${r}\\b`,"gi"),i)}),t=t.replace(/\boff\b/gi,"gesloten").replace(/\bclosed\b/gi,"gesloten").replace(/\bopen\b/gi,"open"),t}async function Ave(n){try{const e=fn(n),t=Qt("EPSG:4326","EPSG:28992",e);if(t[0]<7e3||t[0]>3e5||t[1]<289e3||t[1]>629e3)return null;const r=1,s=`https://service.pdok.nl/rws/ahn/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=dtm_05m&QUERY_LAYERS=dtm_05m&INFO_FORMAT=application/json&CRS=EPSG:28992&BBOX=${`${t[0]-r},${t[1]-r},${t[0]+r},${t[1]+r}`}&WIDTH=1&HEIGHT=1&I=0&J=0`,o=await(await fetch(s)).json();if(o.features&&o.features.length>0){const l=o.features[0].properties,u=l?.value_list??l?.GRAY_INDEX??l?.value??l?.gray_index;if(u!=null){const f=typeof u=="number"?u:parseFloat(u);if(!isNaN(f))return f}}}catch(e){console.warn("AHN height query failed:",e)}return null}const Rve={ABG:"Alphen-Chaam",ACM:"Alkmaar",ALF:"Alfen",ALK:"Alkemade",AML:"Ameland",AMR:"Amerongen",AMS:"Amsterdam",ANL:"Anloo",APD:"Apeldoorn",ARN:"Arnhem",ASN:"Assen",AVW:"Avenhorn",BDA:"Breda",BLK:"Blokker",BRN:"Barneveld",DEL:"Delft",DHG:"Den Haag",DRD:"Dordrecht",EHV:"Eindhoven",EMN:"Emmen",EPE:"Epe",GNP:"Gennep",GRN:"Groningen",GRV:"Grave",GTB:"Giethoorn",HDK:"Harderwijk",HLM:"Haarlem",HLN:"Heiloo",HRL:"Harlingen",HTN:"Houten",LDN:"Leiden",LWR:"Leeuwarden",MST:"Maastricht",NKK:"Nijkerk",NMG:"Nijmegen",OTM:"Ootmarsum",RTD:"Rotterdam",SND:"Sneek",TBG:"Tilburg",UTR:"Utrecht",VLO:"Venlo",WGN:"Wageningen",ZWL:"Zwolle",ZTP:"Zutphen",444:"Houten",811:"Gouda",310:"Utrecht",344:"Amsterdam",363:"Rotterdam",518:"Den Haag",758:"Eindhoven",772:"Tilburg",855:"Breda",85:"Arnhem",268:"Nijmegen",14:"Groningen",80:"Leeuwarden",995:"Maastricht",106:"Enschede",153:"Zwolle",34:"Almere"},Cve={1:"Zeer lage trefkans op archeologische resten",2:"Lage trefkans op archeologische resten",3:"Middelhoge trefkans op archeologische resten",4:"Hoge trefkans op archeologische resten",5:"Lage trefkans (water)",6:"Middelhoge trefkans (water)",7:"Hoge trefkans (water)",8:"Water",9:"Niet gekarteerd"};function Pve(){const n=Hs(le=>le.map),e=F0(le=>le.removeVondst),[t,r]=ce.useState([]),[i,s]=ce.useState(0),[a,o]=ce.useState(!1),[l,u]=ce.useState(null),[f,d]=ce.useState(!1),[g,p]=ce.useState(!1),[v,y]=ce.useState(null),[E,T]=ce.useState(()=>{const le=localStorage.getItem("popupTextScale");return le?parseInt(le):100}),R=le=>{T(le),localStorage.setItem("popupTextScale",le.toString())},M=t[i]||"",k=t.length>1,V=le=>{const Ae=le.match(/<strong[^>]*>(.*?)<\/strong>/);if(Ae){const Ie=Ae[1].replace(/<[^>]+>/g,""),Y=le.replace(Ae[0],"").replace(/^(<br\s*\/?>)+/,"");return{title:Ie,contentWithoutTitle:Y}}return{title:"",contentWithoutTitle:le}},z=le=>le.replace(/class="([^"]*)"/g,(Ie,Y)=>{if(Y.includes("text-xs")){const O=Y.replace(/\btext-xs\b/g,"").trim();return O?`style="font-size:0.857em" class="${O}"`:'style="font-size:0.857em"'}if(Y.includes("text-sm")){const O=Y.replace(/\btext-sm\b/g,"").trim();return O?`class="${O}"`:""}return Ie}).replace(/class=""/g,""),{title:P,contentWithoutTitle:C}=V(M),b=z(C),L=M.includes("Landbouwperceel"),F=M.includes("data-vondst-id="),U=()=>{s(le=>(le-1+t.length)%t.length)},j=()=>{s(le=>(le+1)%t.length)},Te=async()=>{if(console.log(" HOOGTEKAART KNOP GEKLIKT"),console.log(" parcelCoordinate uit state:",l),!n||!l||g){console.log(" STOP - map:",!!n,"coord:",l,"loading:",g);return}console.log(` DOORGEVEN AAN showParcelHeightMap: [${l[0]}, ${l[1]}]`),p(!0);try{await O0e(n,l)&&d(!0)}catch(le){console.error("Failed to load height map:",le)}finally{p(!1)}},Me=()=>{n&&(yI(n),d(!1))};ce.useEffect(()=>{if(!n)return;const le=Y=>{let O='<strong class="text-purple-800">AMK Monument</strong>';if(Y.toponiem&&(O+=`<br/><span class="text-sm font-semibold">${Y.toponiem}</span>`),Y.kwaliteitswaarde&&(O+=`<br/><span class="text-sm text-purple-700">${Y.kwaliteitswaarde}</span>`),Y.omschrijving&&(O+=`<br/><span class="text-xs text-gray-600 mt-1 block">${Y.omschrijving}</span>`),Y.txt_label){const te=Y.txt_label.split(", ").slice(0,3).join(", ");O+=`<br/><span class="text-xs text-gray-500 italic">${te}${Y.txt_label.split(", ").length>3?"...":""}</span>`}return O},Ae=async(Y,O)=>{const te=[],ne=n.getLayers().getArray().filter(ee=>ee instanceof $u&&ee.getVisible()?ee.getSource()instanceof hW:!1);for(const ee of ne){const me=ee.getSource();if(!me)continue;const Se=ee.get("title")||"";if(Se==="Archeo Landschappen"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=100,he=`https://services.rce.geovoorziening.nl/landschappenkaart/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=landschappenkaart_nl&QUERY_LAYERS=landschappenkaart_nl&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-green-800">Archeologisch Landschap</strong>';(W.landschapsnaam||W.naam)&&(ae+=`<br/><span class="text-sm font-semibold">${W.landschapsnaam||W.naam}</span>`),W.omschrijving&&(ae+=`<br/><span class="text-xs text-gray-600">${W.omschrijving}</span>`),te.push(ae)}}catch(se){console.warn("Archeo Landschappen WMS query failed:",se)}continue}if(Se==="Essen"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=100,he=`https://services.rce.geovoorziening.nl/landschapsatlas/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=essen&QUERY_LAYERS=essen&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-amber-800">Es (historisch akkercomplex)</strong>';(W.naam||W.Naam||W.NAME)&&(ae+=`<br/><span class="text-sm font-semibold text-amber-700">${W.naam||W.Naam||W.NAME}</span>`),(W.type||W.Type||W.TYPE)&&(ae+=`<br/><span class="text-xs text-gray-600">${W.type||W.Type||W.TYPE}</span>`),(W.omschrijving||W.Omschrijving)&&(ae+=`<br/><span class="text-xs text-gray-500">${W.omschrijving||W.Omschrijving}</span>`),te.push(ae)}}catch(se){console.warn("Essen WMS query failed:",se)}continue}if(Se==="FAMKE Steentijd"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=100,he=`https://geoportaal.fryslan.nl/arcgis/services/Themas/cultuurhistorie/MapServer/WMSServer?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=FAMKE_Advies_steentijd-bronstijd3339&QUERY_LAYERS=FAMKE_Advies_steentijd-bronstijd3339&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-amber-800">FAMKE Steentijd-Bronstijd</strong>';(W.advies||W.Advies)&&(ae+=`<br/><span class="text-sm text-amber-700">${W.advies||W.Advies}</span>`),te.push(ae)}}catch(se){console.warn("FAMKE WMS query failed:",se)}continue}if(Se==="Archeo Onderzoeken"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=100,he=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&QUERY_LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-blue-800">Archeologisch Onderzoek</strong>';if(W.type_onderzoek&&(ae+=`<br/><span class="text-sm font-semibold">${W.type_onderzoek}</span>`),W.onderzoeksmeldingnummer&&(ae+=`<br/><span class="text-xs text-gray-500">Melding: ${W.onderzoeksmeldingnummer}</span>`),W.uitvoerder&&(ae+=`<br/><span class="text-sm text-gray-700">Uitvoerder: ${W.uitvoerder}</span>`),W.startdatum||W.einddatum){const lt=[W.startdatum,W.einddatum].filter(Boolean).join(" - ");ae+=`<br/><span class="text-xs text-gray-600">Periode: ${lt}</span>`}if(W.gemeente&&(ae+=`<br/><span class="text-xs text-gray-500">${W.gemeente}</span>`),W.type_uri){const lt=W.type_uri.replace("type_uri:","").trim();lt.startsWith("http")&&(ae+=`<br/><a href="${lt}" target="_blank" rel="noopener noreferrer" class="text-xs text-blue-600 hover:underline">Meer informatie </a>`)}for(const[lt,ot]of Object.entries(W))if(lt.toLowerCase().includes("uri")&&typeof ot=="string"&&lt!=="type_uri"){const gt=ot.replace(/^[a-z_]+:/i,"").trim();gt.startsWith("http")&&(ae+=`<br/><a href="${gt}" target="_blank" rel="noopener noreferrer" class="text-xs text-blue-600 hover:underline">${lt.replace("_uri","")} </a>`)}te.push(ae)}}catch(se){console.warn("Archeo Onderzoeken WMS query failed:",se)}continue}if(Se==="IKAW"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=500,he=`https://services.rce.geovoorziening.nl/ikaw/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&QUERY_LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties,ae=Math.round(W.PALETTE_INDEX||W.palette_index||0),lt=Cve[ae]||`Trefkans onbekend (${ae})`;let ot='<strong class="text-orange-800">IKAW (2008)</strong>';ot+=`<br/><span class="text-sm text-orange-700">${lt}</span>`,te.push(ot)}}catch(se){console.warn("IKAW WMS query failed:",se)}continue}if(Se==="Inundatiegebieden"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=100,he=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=inundaties&QUERY_LAYERS=inundaties&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-blue-800">Inundatiegebied</strong>';(W["linie-naam"]||W.linie_naam)&&(ae+=`<br/><span class="text-sm font-semibold text-blue-700">${W["linie-naam"]||W.linie_naam}</span>`),W.naam&&(ae+=`<br/><span class="text-sm text-gray-700">${W.naam}</span>`),W.periode&&(ae+=`<br/><span class="text-xs text-gray-500">${W.periode}</span>`),W.lin_period&&(ae+=`<br/><span class="text-xs text-gray-400">${W.lin_period}</span>`),te.push(ae)}}catch(se){console.warn("Inundatiegebieden WMS query failed:",se)}continue}if(Se==="Militaire Objecten"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=50,he=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=objecten&QUERY_LAYERS=objecten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-stone-800">Militair Object</strong>';W.obj_soort&&(ae+=`<br/><span class="text-sm font-semibold text-stone-700">${W.obj_soort}</span>`),W.obj_naam&&(ae+=`<br/><span class="text-sm text-gray-700">${W.obj_naam}</span>`),W.lin_period&&(ae+=`<br/><span class="text-xs text-gray-500">${W.lin_period}</span>`),te.push(ae)}}catch(se){console.warn("Militaire Objecten WMS query failed:",se)}continue}if(Se==="Verdedigingslinies"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=100,he=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=linies&QUERY_LAYERS=linies&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-amber-800">Verdedigingslinie</strong>';(W.naam||W.lin_naam)&&(ae+=`<br/><span class="text-sm font-semibold text-amber-700">${W.naam||W.lin_naam}</span>`),W.lin_period&&(ae+=`<br/><span class="text-xs text-gray-500">${W.lin_period}</span>`),W.status&&(ae+=`<br/><span class="text-xs text-gray-400">${W.status}</span>`),te.push(ae)}}catch(se){console.warn("Verdedigingslinies WMS query failed:",se)}continue}if(Se==="Rijksmonumenten"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=50,he=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=rijksmonumentpunten&QUERY_LAYERS=rijksmonumentpunten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-red-800">Rijksmonument</strong>';(W.cbsNaam||W.cbs_naam)&&(ae+=`<br/><span class="text-sm font-semibold">${W.cbsNaam||W.cbs_naam}</span>`),W.hoofdcategorie&&(ae+=`<br/><span class="text-sm text-red-700">${W.hoofdcategorie}</span>`),W.subcategorie&&(ae+=`<br/><span class="text-xs text-gray-600">${W.subcategorie}</span>`),W.rijksmonumentnummer&&(ae+=`<br/><span class="text-xs text-gray-500">Nr: ${W.rijksmonumentnummer}</span>`),(W.bouwjaar||W.oorspronkelijkebouwjaar)&&(ae+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${W.bouwjaar||W.oorspronkelijkebouwjaar}</span>`),te.push(ae)}}catch(se){console.warn("Rijksmonumenten WMS query failed:",se)}continue}if(Se==="Werelderfgoed"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=500,he=`https://service.pdok.nl/rce/ps-ch/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=PS.ProtectedSite&QUERY_LAYERS=PS.ProtectedSite&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-cyan-800">UNESCO Werelderfgoed</strong>';(W.siteName||W.naam)&&(ae+=`<br/><span class="text-sm font-semibold text-cyan-700">${W.siteName||W.naam}</span>`),W.siteDesignation&&(ae+=`<br/><span class="text-xs text-gray-600">${W.siteDesignation}</span>`),te.push(ae)}}catch(se){console.warn("Werelderfgoed WMS query failed:",se)}continue}if(Se==="Terpen"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=100,he=`https://geoportaal.fryslan.nl/arcgis/services/Themas/cultuurhistorie/MapServer/WMSServer?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=terpen3335&QUERY_LAYERS=terpen3335&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-orange-800">Terp</strong>';(W.naam||W.NAAM)&&(ae+=`<br/><span class="text-sm font-semibold text-orange-700">${W.naam||W.NAAM}</span>`),(W.plaats||W.PLAATS)&&(ae+=`<br/><span class="text-xs text-gray-600">${W.plaats||W.PLAATS}</span>`),te.push(ae)}}catch(se){console.warn("Terpen WMS query failed:",se)}continue}if(Se==="Religieus Erfgoed"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=50,he=`https://services.rce.geovoorziening.nl/landschapsatlas_view/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=religieuserfgoed&QUERY_LAYERS=religieuserfgoed&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-purple-800">Religieus Erfgoed</strong>';const lt=W.naam||W.NAAM||W.name||W.NAME;lt&&(ae+=`<br/><span class="text-sm font-semibold text-purple-700">${lt}</span>`);const ot=W.denominatie||W.DENOMINATIE||W.religie;ot&&(ae+=`<br/><span class="text-sm text-gray-700">${ot}</span>`);const gt=W.type||W.TYPE||W.functie;gt&&(ae+=`<br/><span class="text-xs text-gray-600">${gt}</span>`);const Ot=W.bouwjaar||W.BOUWJAAR||W.jaar;Ot&&(ae+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${Ot}</span>`);const Rn=W.gemeente||W.GEMEENTE||W.plaats;Rn&&(ae+=`<br/><span class="text-xs text-gray-400">${Rn}</span>`),te.push(ae)}}catch(se){console.warn("Religieus Erfgoed WMS query failed:",se)}continue}if(Se==="Gewaspercelen"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=50,Ye=`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`,he=`https://service.pdok.nl/rvo/brpgewaspercelen/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=BrpGewas&QUERY_LAYERS=BrpGewas&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${Ye}`,He=`https://service.pdok.nl/bzk/bro-bodemkaart/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=soilarea&QUERY_LAYERS=soilarea&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${Ye}`,[ue,W]=await Promise.all([fetch(he),fetch(He).catch(()=>null)]),ae=await ue.json();if(ae.features&&ae.features.length>0){const lt=ae.features[0].properties;let ot='<strong class="text-green-800">Landbouwperceel</strong>';if((lt.gewas||lt.gewasnaam)&&(ot+=`<br/><span class="text-sm font-semibold text-green-700">${lt.gewas||lt.gewasnaam}</span>`),(lt.categorie||lt.category)&&(ot+=`<br/><span class="text-xs text-gray-600">${lt.categorie||lt.category}</span>`),lt.oppervlakte&&(ot+=`<br/><span class="text-xs text-gray-500">${lt.oppervlakte} ha</span>`),W)try{const gt=await W.json();if(gt.features&&gt.features.length>0){const Ot=gt.features[0].properties,Rn=Ot.first_soilname||Ot.soilname||Ot.bodemtype;Rn&&(ot+=`<br/><span class="text-xs text-amber-700 font-medium">Grondsoort: ${Rn}</span>`);const Yt=Ot.first_soilcode||Ot.soilcode||Ot.maparea_soilcode;Yt&&(ot+=`<br/><span class="text-xs text-gray-400">Bodemcode: ${Yt}</span>`)}}catch{}te.push(ot)}}catch(se){console.warn("BRP Gewaspercelen WMS query failed:",se)}continue}if(Se==="Kadastrale Grenzen"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=20,he=`https://service.pdok.nl/kadaster/kadastralekaart/wms/v5_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=Perceel&QUERY_LAYERS=Perceel&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties,ae=W.kadastraleGemeenteWaarde||W.kadastrale_gemeente_waarde||W.kadastraleGemeente||Rve[String(W.kadastraleGemeenteCode)]||W.kadastraleGemeenteCode,lt=W.sectie||W.Sectie||"",ot=W.perceelnummer||W.perceelNummer||W.Perceelnummer||"",gt=W.kadastraleGrootteWaarde||W.kadastrale_grootte_waarde||W.kadastraleGrootte||W.oppervlakte,Ot=W.AKRKadastraleGemeenteCodeWaarde||W.akrKadastraleGemeenteCodeWaarde||"",Rn=[ae,lt,ot].filter(Boolean).join(" "),Yt=Ot&&lt&&ot?`${Ot}-${lt}-${ot}`:"";let Ln='<strong class="text-indigo-800">Kadastraal Perceel</strong>';if(Rn&&(Ln+=`<br/><span class="text-sm text-indigo-700">${Rn}</span>`),Yt&&(Ln+=`<br/><span class="text-sm font-bold text-gray-800 font-mono">${Yt}</span>`),gt){const gr=typeof gt=="number"?gt:parseFloat(gt);isNaN(gr)||(Ln+=`<br/><span class="text-xs text-gray-600">${gr.toLocaleString("nl-NL")} m</span>`)}Ln+='<br/><br/><span class="text-xs text-gray-600">Eigenaar opzoeken? Kopieer bovenstaande code en zoek op </span><a href="https://www.kadaster.nl/winkel" target="_blank" rel="noopener" class="text-xs text-blue-600 hover:underline">kadaster.nl/winkel</a><span class="text-xs text-gray-400"> (3,70)</span>',te.push(Ln)}}catch(se){console.warn("Kadastrale Grenzen WMS query failed:",se)}continue}if(Se==="Scheepswrakken"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=100,he=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-cyan-800">Scheepswrak</strong>';(W.naam||W.NAAM)&&(ae+=`<br/><span class="text-sm font-semibold text-cyan-700">${W.naam||W.NAAM}</span>`),(W.type||W.TYPE)&&(ae+=`<br/><span class="text-sm text-gray-700">${W.type||W.TYPE}</span>`),(W.datering||W.DATERING)&&(ae+=`<br/><span class="text-xs text-gray-500">Datering: ${W.datering||W.DATERING}</span>`),(W.bron||W.BRON)&&(ae+=`<br/><span class="text-xs text-gray-400">${W.bron||W.BRON}</span>`),te.push(ae)}}catch(se){console.warn("Scheepswrakken WMS query failed:",se)}continue}if(Se==="Woonheuvels ZH"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=100,he=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-orange-800">Woonheuvel</strong>';(W.naam||W.NAAM)&&(ae+=`<br/><span class="text-sm font-semibold text-orange-700">${W.naam||W.NAAM}</span>`),(W.type||W.TYPE)&&(ae+=`<br/><span class="text-sm text-gray-700">${W.type||W.TYPE}</span>`),te.push(ae)}}catch(se){console.warn("Woonheuvels WMS query failed:",se)}continue}if(Se==="Romeinse Forten"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=200,he=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-red-800">Romeins Fort</strong>';(W.naam||W.NAAM)&&(ae+=`<br/><span class="text-sm font-semibold text-red-700">${W.naam||W.NAAM}</span>`),(W.type||W.TYPE)&&(ae+=`<br/><span class="text-sm text-gray-700">${W.type||W.TYPE}</span>`),(W.periode||W.PERIODE)&&(ae+=`<br/><span class="text-xs text-gray-500">${W.periode||W.PERIODE}</span>`),te.push(ae)}}catch(se){console.warn("Romeinse Forten WMS query failed:",se)}continue}if(Se==="Windmolens"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=50,he=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&QUERY_LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-amber-800">Windmolen</strong>';(W.naam||W.NAAM)&&(ae+=`<br/><span class="text-sm font-semibold text-amber-700">${W.naam||W.NAAM}</span>`),(W.type||W.TYPE||W.functie||W.FUNCTIE)&&(ae+=`<br/><span class="text-sm text-gray-700">${W.type||W.TYPE||W.functie||W.FUNCTIE}</span>`),(W.bouwjaar||W.BOUWJAAR)&&(ae+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${W.bouwjaar||W.BOUWJAAR}</span>`),te.push(ae)}}catch(se){console.warn("Windmolens WMS query failed:",se)}continue}if(Se==="Erfgoedlijnen"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=200,he=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&QUERY_LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-purple-800">Erfgoedlijn</strong>';(W.naam||W.NAAM||W.erfgoedlijn)&&(ae+=`<br/><span class="text-sm font-semibold text-purple-700">${W.naam||W.NAAM||W.erfgoedlijn}</span>`),(W.type||W.TYPE)&&(ae+=`<br/><span class="text-sm text-gray-700">${W.type||W.TYPE}</span>`),(W.omschrijving||W.OMSCHRIJVING)&&(ae+=`<br/><span class="text-xs text-gray-500">${W.omschrijving||W.OMSCHRIJVING}</span>`),te.push(ae)}}catch(se){console.warn("Erfgoedlijnen WMS query failed:",se)}continue}if(Se==="Oude Kernen"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=200,he=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-stone-800">Historische Kern</strong>';(W.naam||W.NAAM)&&(ae+=`<br/><span class="text-sm font-semibold text-stone-700">${W.naam||W.NAAM}</span>`),(W.type||W.TYPE)&&(ae+=`<br/><span class="text-sm text-gray-700">${W.type||W.TYPE}</span>`),(W.periode||W.PERIODE)&&(ae+=`<br/><span class="text-xs text-gray-500">${W.periode||W.PERIODE}</span>`),te.push(ae)}}catch(se){console.warn("Oude Kernen WMS query failed:",se)}continue}if(Se==="Relictenkaart Punten"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=50,he=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_p&QUERY_LAYERS=ChAr_Relictenkaart_p&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties,ae={KV:"Kasteel/Vesting",K:"Kapel",KE:"Kerkhof",B:"Buitenhuis",OB:"Oud Bebouwingsrelict",OV:"Oude Verkaveling",NR:"Nijverheidsrelict",GH:"Grafheuvel",BP:"Begraafplaats",HH:"Havezate",RM:"Rosmolen",WM:"Windmolen",PM:"Poldermolen",EK:"Eendenkooi",SH:"Scholtenhoeve"},lt=W.type?.replace(/[0-9]/g,"")||"",ot=ae[lt]||W.type||"Cultuurhistorisch object";let gt='<strong class="text-emerald-800">Relict</strong>';gt+=`<br/><span class="text-sm font-semibold text-emerald-700">${ot}</span>`,W.type&&lt!==W.type&&(gt+=`<br/><span class="text-xs text-gray-500">Code: ${W.type}</span>`),W.streek&&(gt+=`<br/><span class="text-xs text-gray-400">Streek: ${W.streek}</span>`),te.push(gt)}}catch(se){console.warn("Relictenkaart Punten WMS query failed:",se)}continue}if(Se==="Relictenkaart Lijnen"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=50,he=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_l&QUERY_LAYERS=ChAr_Relictenkaart_l&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties,lt={1:"Sprengenbeek",2:"Oude waterloop",3:"Doorgaande weg",4:"Hessenweg",5:"Oude weg",6:"Historische grens",7:"Trekpad",8:"Jaagpad"}[W.klasse]||`Historisch lijnrelict (${W.klasse})`;let ot='<strong class="text-teal-800">Lijnrelict</strong>';ot+=`<br/><span class="text-sm font-semibold text-teal-700">${lt}</span>`,te.push(ot)}}catch(se){console.warn("Relictenkaart Lijnen WMS query failed:",se)}continue}if(Se==="Relictenkaart Vlakken"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=100,he=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_v&QUERY_LAYERS=ChAr_Relictenkaart_v&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties,lt={1:"Onveranderd agrarisch (voor 1850)",2:"Jonge heideontginning (1850-1950)",3:"Open essencomplex",4:"Kampenlandschap",5:"Heiderelict (1850)",6:"Bosrelict (1850)",7:"Stuifzandrelict",8:"Oud bouwland",9:"Historisch grasland",10:"Beekdal"}[W.klasse]||`Historisch landschap (${W.klasse})`;let ot='<strong class="text-lime-800">Landschapsrelict</strong>';if(ot+=`<br/><span class="text-sm font-semibold text-lime-700">${lt}</span>`,W.st_area_shape_){const gt=(W.st_area_shape_/1e4).toFixed(1);ot+=`<br/><span class="text-xs text-gray-500">${gt} ha</span>`}te.push(ot)}}catch(se){console.warn("Relictenkaart Vlakken WMS query failed:",se)}continue}if(Se==="Verdronken Dorpen"){try{const se=fn(Y),re=Qt("EPSG:4326","EPSG:28992",se),D=200,he=`https://opengeodata.zeeland.nl/geoserver/chs/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=geocmd_vrddrppnt&QUERY_LAYERS=geocmd_vrddrppnt&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${re[0]-D},${re[1]-D},${re[0]+D},${re[1]+D}`}`,ue=await(await fetch(he)).json();if(ue.features&&ue.features.length>0){const W=ue.features[0].properties;let ae='<strong class="text-blue-800">Verdronken Dorp</strong>';(W.naam||W.NAAM)&&(ae+=`<br/><span class="text-sm font-semibold text-blue-700">${W.naam||W.NAAM}</span>`),(W.verdronken||W.VERDRONKEN||W.jaar||W.JAAR)&&(ae+=`<br/><span class="text-xs text-gray-600">Verdronken: ${W.verdronken||W.VERDRONKEN||W.jaar||W.JAAR}</span>`),(W.gemeente||W.GEMEENTE)&&(ae+=`<br/><span class="text-xs text-gray-500">${W.gemeente||W.GEMEENTE}</span>`),(W.bron||W.BRON)&&(ae+=`<br/><span class="text-xs text-gray-400">${W.bron||W.BRON}</span>`),te.push(ae)}}catch(se){console.warn("Verdronken Dorpen WMS query failed:",se)}continue}const Ne=me.getFeatureInfoUrl(Y,O,"EPSG:3857",{INFO_FORMAT:"application/json"});if(Ne)try{const re=await(await fetch(Ne)).json();if(re.features&&re.features.length>0){const D=re.features[0].properties;if(Se==="AHN 0.5m"){let he='<strong class="text-blue-800">AHN Hoogtekaart</strong>';const He=D.value_list??D.GRAY_INDEX??D.value??D.gray_index??D.dtm_05m??D.DTM_05M??D.hoogte??D.HOOGTE??D.elevation??D.ELEVATION;if(He!=null&&!isNaN(Number(He))){const ue=typeof He=="number"?He.toFixed(2):Number(He).toFixed(2);he+=`<br/><span class="text-sm text-blue-700">Hoogte: ${ue} m NAP</span>`,te.push(he)}else{let ue=!1;const W=["geometry","id","fid","gml_id","bbox"];for(const[ae,lt]of Object.entries(D))!W.includes(ae.toLowerCase())&&lt!==null&&lt!==""&&(he+=`<br/><span class="text-xs text-gray-600">${ae}: ${lt}</span>`,ue=!0);ue&&te.push(he)}continue}if(Se==="Geomorfologie"){let he='<strong class="text-green-800">Geomorfologie</strong>',He=!1;const ue=D.landform_subgroup_description,W=D.relief_klasse,ae=D.relief_subklasse,lt=D.genese_description,ot=D.active_process;if(ue&&(he+=`<br/><span class="text-sm text-green-700">${ue}</span>`,He=!0),W){const gt=ae&&ae!==W?`${W} (${ae})`:W;he+=`<br/><span class="text-xs text-gray-600">Relief: ${gt}</span>`,He=!0}if(lt&&(he+=`<br/><span class="text-xs text-gray-500">Ontstaan: ${lt}</span>`,He=!0),ot&&ot!=="onbekend"&&(he+=`<br/><span class="text-xs text-gray-500">Actief proces: ${ot}</span>`,He=!0),!He){const gt=["geometry","id","fid","gml_id","bbox","fuuid","geom","collection_id"];for(const[Ot,Rn]of Object.entries(D))!gt.includes(Ot.toLowerCase())&&Rn!==null&&Rn!==""&&!Ot.includes("validfrom")&&!Ot.includes("validto")&&(he+=`<br/><span class="text-xs text-gray-600">${Ot}: ${Rn}</span>`)}te.push(he);continue}let Ye=`<strong>${Se}</strong>`;if((D.first_soilname||D.soilname)&&(Ye+=`<br/><span class="text-sm text-amber-700">${D.first_soilname||D.soilname}</span>`),(D.soilcode||D.first_soilcode)&&(Ye+=`<br/><span class="text-xs text-gray-500">Code: ${D.soilcode||D.first_soilcode}</span>`),D.soilslope&&D.soilslope!=="Niet opgenomen"&&(Ye+=`<br/><span class="text-xs text-gray-500">Helling: ${D.soilslope}</span>`),!D.first_soilname&&!D.soilname){const he=["geometry","id","fid","gml_id","GRAY_INDEX","gray_index","value"];for(const[He,ue]of Object.entries(D))!he.includes(He)&&ue&&ue!=="Niet opgenomen"&&(Ye+=`<br/><span class="text-xs text-gray-600">${He}: ${ue}</span>`)}te.push(Ye)}}catch(se){console.warn("WMS GetFeatureInfo failed:",se)}}return te},Ie=async Y=>{const O=[],te=Ave(Y.coordinate),ne=[];n.forEachFeatureAtPixel(Y.pixel,Ne=>{ne.push(Ne)});for(const Ne of ne){const se=Ne.getProperties(),{geometry:re,...D}=se;if(D.vondst){const ue=D.vondst,W=`<strong>${ue.objectType}</strong>
            <div data-vondst-id="${ue.id}"></div>
            <br/><span class="text-sm text-gray-600"><strong>Materiaal:</strong> ${ue.material}</span>
            <br/><span class="text-sm text-gray-600"><strong>Periode:</strong> ${ue.period}</span>
            ${ue.depth?`<br/><span class="text-sm text-gray-600"><strong>Diepte:</strong> ${ue.depth} cm</span>`:""}
            ${ue.condition&&ue.condition!=="Onbekend"?`<br/><span class="text-sm text-gray-600"><strong>Conditie:</strong> ${ue.condition}</span>`:""}
            ${ue.weight?`<br/><span class="text-sm text-gray-600"><strong>Gewicht:</strong> ${ue.weight} gram</span>`:""}
            ${ue.notes?`<br/><span class="text-sm text-gray-600"><strong>Notities:</strong> ${ue.notes}</span>`:""}
            ${ue.photoUrl?`<br/><a href="${ue.photoUrl}" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm"> Bekijk foto</a>`:""}
            <br/><span class="text-xs text-gray-400">${new Date(ue.timestamp).toLocaleDateString("nl-NL")}</span>`;O.push(W),y(ue.id);continue}if(D.kwaliteitswaarde&&D.kwaliteitswaarde.includes("archeologische waarde")){const ue=le(D);O.push(ue);continue}let Ye=D.name||D.naam||D.title||D.NAAM||D.NAME||D.label||D.route_name||D.road_name;Ye||(D.leisure==="playground"?Ye="Speeltuin":D.leisure==="park"?Ye="Park":D.leisure==="swimming_area"||D.sport==="swimming"?Ye="Zwemplek":D.tourism==="museum"?Ye="Museum":D.amenity==="cafe"||D.amenity==="restaurant"?Ye=D.amenity==="cafe"?"Caf":"Restaurant":D.historic==="castle"?Ye="Kasteel":Ye="Info");let he=`<strong>${Ye}</strong>`;if(D.category&&(he+=`<br/><span class="text-sm text-gray-600">Categorie: ${D.category}</span>`),D.from_to&&D.from_to!==Ye&&(he+=`<br/><span class="text-sm text-gray-600">${D.from_to}</span>`),D.route&&D.route!==Ye&&(he+=`<br/><span class="text-sm text-gray-600">${D.route}</span>`),D.TOPONIEM&&(he+=`<br/><span class="text-sm font-semibold text-gray-800">${D.TOPONIEM}</span>`,D.PLAATS&&(he+=`<br/><span class="text-xs text-gray-500">${D.PLAATS}</span>`)),(D.AARD_VINDP||D.Aard_vindp)&&(he+=`<br/><span class="text-sm text-gray-700">Aard: ${D.AARD_VINDP||D.Aard_vindp}</span>`),D.BEGIN_PER&&D.EIND_PER&&(he+=`<br/><span class="text-sm text-purple-700">Periode: ${D.BEGIN_PER} - ${D.EIND_PER}</span>`),(D.AARD_OPM||D.Aard_opmer)&&(he+=`<br/><span class="text-xs text-gray-600 italic">${D.AARD_OPM||D.Aard_opmer}</span>`),D.Gemeente&&(he+=`<br/><span class="text-sm text-gray-600">Gemeente: ${D.Gemeente}</span>`),D.Bron&&(he+=`<br/><span class="text-xs text-gray-500">Bron: ${D.Bron}</span>`),D.Bron_besch&&(he+=`<br/><span class="text-xs text-gray-500">${D.Bron_besch}</span>`),D.Dat_st_z&&D.Dat_ei_z&&(he+=`<br/><span class="text-sm text-purple-700">Datering: ${D.Dat_st_z} - ${D.Dat_ei_z}</span>`),D.Begin&&D.Einde&&(he+=`<br/><span class="text-sm text-purple-700">Periode: ${D.Begin} - ${D.Einde}</span>`),D.Uiterwaard&&(he+=`<br/><span class="text-sm font-semibold">${D.Uiterwaard}</span>`),D.rivier&&(he+=`<br/><span class="text-sm text-blue-600">Rivier: ${D.rivier}</span>`),D.Beschrijvi&&(he+=`<br/><span class="text-sm text-gray-700">${D.Beschrijvi}</span>`),D.leisure&&D.name){const ue=D.leisure==="playground"?"Speeltuin":D.leisure==="park"?"Park":D.leisure==="swimming_area"?"Zwemplek":null;ue&&(he+=`<br/><span class="text-xs text-green-600">${ue}</span>`)}if((D.tourism==="museum"||D.museum)&&D.name&&(he+='<br/><span class="text-xs text-purple-600">Museum</span>'),(D.leisure==="swimming_area"||D.sport==="swimming")&&D.name&&(he+='<br/><span class="text-xs text-cyan-600">Zwemplek</span>'),D.osm_id&&D.address!==void 0&&(he+='<br/><span class="text-xs text-lime-600">Kringloopwinkel</span>',D.address&&(he+=`<br/><span class="text-xs text-gray-500">${D.address}</span>`),D.phone&&(he+=`<br/><span class="text-xs text-gray-600">${D.phone}</span>`)),(D.historic==="castle"||D.castle_type)&&(D.name&&(he+='<br/><span class="text-xs text-purple-600">Kasteel</span>'),D.castle_type&&(he+=`<br/><span class="text-xs text-gray-500">Type: ${D.castle_type}</span>`),D.start_date&&(he+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${D.start_date}</span>`),D.heritage&&(he+='<br/><span class="text-xs text-amber-600">Rijksmonument</span>')),D.bron==="Paleobiology Database"&&(D.taxonomie&&D.taxonomie!=="Onbekend"&&(he+=`<br/><span class="text-xs text-amber-700">${D.taxonomie}</span>`),D.periode&&D.periode!=="Onbekend"&&(he+=`<br/><span class="text-sm text-purple-700">${D.periode}</span>`),D.ouderdom&&D.ouderdom!=="Onbekend"&&(he+=`<br/><span class="text-xs text-gray-600">Ouderdom: ${D.ouderdom}</span>`),D.aantal_fossielen&&(he+=`<br/><span class="text-xs text-green-700">Aantal fossielen: ${D.aantal_fossielen}</span>`),D.formatie&&(he+=`<br/><span class="text-xs text-gray-500">Formatie: ${D.formatie}</span>`),D.lid&&(he+=`<br/><span class="text-xs text-gray-500">Lid: ${D.lid}</span>`),D.gesteente&&(he+=`<br/><span class="text-xs text-gray-500">Gesteente: ${D.gesteente}</span>`),D.milieu&&(he+=`<br/><span class="text-xs text-blue-600">Milieu: ${D.milieu}</span>`),D.vindplaats&&(he+=`<br/><span class="text-xs text-gray-500 italic">${D.vindplaats}</span>`)),(D.inventarisnummer||D.locatie_naam)&&(D.locatie_naam&&(he+=`<br/><span class="text-sm font-semibold">${D.locatie_naam}</span>`),D.inventarisnummer&&(he+=`<br/><span class="text-xs text-gray-500">CAI: ${D.inventarisnummer}</span>`),D.datering_tekst&&(he+=`<br/><span class="text-sm text-purple-700">${D.datering_tekst}</span>`)),(D.veensoort||D.dikte)&&(D.veensoort&&(he+=`<br/><span class="text-sm text-amber-700">${D.veensoort}</span>`),D.dikte&&(he+=`<br/><span class="text-xs text-gray-600">Dikte: ${D.dikte}</span>`)),D.nature&&D.debut){he+=`<br/><span class="text-sm text-purple-700">${D.nature}</span>`;const ue=D.debut===D.fin?D.debut:`${D.debut} - ${D.fin}`;ue&&(he+=`<br/><span class="text-sm text-gray-700">Periode: ${ue}</span>`),D.structure&&(he+=`<br/><span class="text-xs text-gray-600">${D.structure}</span>`),D.commune&&(he+=`<br/><span class="text-xs text-gray-500">${D.commune}</span>`),D.decouvert&&(he+=`<br/><span class="text-xs text-gray-400">Ontdekt: ${D.decouvert}</span>`),D.numero&&(he+=`<br/><span class="text-xs text-gray-400">${D.numero}</span>`)}if((D.NATURE_OPE||D.CODE_OPERA)&&(D.TITRE&&(he+=`<br/><span class="text-sm font-semibold">${D.TITRE}</span>`),D.NATURE_OPE&&(he+=`<br/><span class="text-sm text-amber-700">${D.NATURE_OPE}</span>`),D.AUTEUR&&(he+=`<br/><span class="text-xs text-gray-600">Auteur: ${D.AUTEUR}</span>`),D.DATE&&(he+=`<br/><span class="text-xs text-gray-500">Datum: ${D.DATE}</span>`),D.COMMUNE&&(he+=`<br/><span class="text-xs text-gray-500">${D.COMMUNE}</span>`)),D.type_protection&&(D.n_site||D.t_site)){const ue=D.type_protection==="Classe"?"text-red-700":"text-amber-700";he+=`<br/><span class="text-sm ${ue}">${D.type_protection}</span>`,D.n_site&&(he+=`<br/><span class="text-sm font-semibold">${D.n_site}</span>`),D.t_site&&(he+=`<br/><span class="text-xs text-gray-600">${D.t_site}</span>`),D.c_site&&(he+=`<br/><span class="text-xs text-gray-500">Code: ${D.c_site}</span>`),D.d_creation&&(he+=`<br/><span class="text-xs text-gray-400">Beschermd sinds: ${D.d_creation}</span>`)}if(D.type_protection&&D.cod_diren){const ue=D.type_protection==="Classe"?"text-red-700":"text-amber-700";if(he+=`<br/><span class="text-sm ${ue}">${D.type_protection}</span>`,D.proced&&(he+=`<br/><span class="text-xs text-gray-600">${D.proced}</span>`),D.d_proced&&(he+=`<br/><span class="text-xs text-gray-500">Date: ${D.d_proced}</span>`),D.comment){const W=String(D.comment).slice(0,150);he+=`<br/><span class="text-xs text-gray-600 italic">${W}${String(D.comment).length>150?"...":""}</span>`}}if(D.type_protection&&D.nomsite){const ue=D.type_protection==="Classe"?"text-red-700":"text-amber-700";if(he+=`<br/><span class="text-sm ${ue}">${D.type_protection}</span>`,D.caractere&&(he+=`<br/><span class="text-xs text-gray-600">${D.caractere}</span>`),D.datedecis&&(he+=`<br/><span class="text-xs text-gray-500">Date: ${D.datedecis}</span>`),D.descriptio){const W=String(D.descriptio).slice(0,150);he+=`<br/><span class="text-xs text-gray-600 italic">${W}${String(D.descriptio).length>150?"...":""}</span>`}}if(D.secteur&&D.style){if(he+=`<br/><span class="text-sm text-gray-700">${D.secteur}</span>`,D["sous-secteur"]&&(he+=`<br/><span class="text-xs text-gray-600">${D["sous-secteur"]}</span>`),D.description){const ue=String(D.description).slice(0,150);he+=`<br/><span class="text-xs text-gray-600 italic">${ue}${String(D.description).length>150?"...":""}</span>`}D.url&&(he+=`<br/><a href="${D.url}" target="_blank" class="text-xs text-blue-600 hover:underline">Meer info</a>`)}if(D.nature_operation||D.synthese){D.nature_operation&&(he+=`<br/><span class="text-sm text-red-700">${D.nature_operation}</span>`),D.responsable_operation&&(he+=`<br/><span class="text-xs text-gray-600">Responsable: ${D.responsable_operation}</span>`),D.date_operation&&(he+=`<br/><span class="text-xs text-gray-500">Datum: ${D.date_operation}</span>`);const ue=[];if(D.prehistoire==="Oui"&&ue.push("Prehistorie"),D.protohistoire==="Oui"&&ue.push("Protohistorie"),D.antiquite==="Oui"&&ue.push("Romeins"),D.moyen_age==="Oui"&&ue.push("Middeleeuwen"),D.temps_modernes==="Oui"&&ue.push("Moderne tijd"),ue.length>0&&(he+=`<br/><span class="text-sm text-purple-700">${ue.join(", ")}</span>`),D.adresse&&(he+=`<br/><span class="text-xs text-gray-500">${D.adresse}</span>`),D.synthese){const W=String(D.synthese).slice(0,200);he+=`<br/><span class="text-xs text-gray-600 italic">${W}${String(D.synthese).length>200?"...":""}</span>`}}if(D.operator&&(he+=`<br/><span class="text-sm text-gray-600">${D.operator}</span>`),D.opening_hours){const ue=Ive(String(D.opening_hours));he+=`<br/><span class="text-xs text-green-600">Open: ${ue}</span>`}if(D.website&&(he+=`<br/><a href="${D.website}" target="_blank" class="text-xs text-blue-600 underline">Website</a>`),D.addr_street){const ue=[D.addr_street,D.addr_housenumber,D.addr_postcode].filter(Boolean).join(" ");he+=`<br/><span class="text-xs text-gray-500">${ue}</span>`}const He=D.description||D.omschrijving||D.descr||D.info;He&&He!==Ye&&(he+=`<br/><span class="text-sm text-gray-600">${He}</span>`),O.push(he)}const ee=n.getView().getResolution()||1,me=await Ae(Y.coordinate,ee);O.push(...me);const Se=await te;if(O.length===0&&Se!==null){const Ne=`<strong class="text-blue-800">Terrein</strong>
          <br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
            <span class="text-xs text-gray-400">Hoogte:</span>
            <span class="text-sm font-medium text-blue-600">${Se.toFixed(2)} m NAP</span>
          </div>`;O.push(Ne)}O.length>0&&Se!==null&&(O[0]+=`<br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
          <span class="text-xs text-gray-400">Hoogte:</span>
          <span class="text-sm font-medium text-blue-600">${Se.toFixed(2)} m NAP</span>
        </div>`),O.length>0&&(r(O),s(0),console.log(` KLIK OPGESLAGEN: [${Y.coordinate[0].toFixed(0)}, ${Y.coordinate[1].toFixed(0)}]`),u(Y.coordinate),d(!1),o(!0))};return n.on("click",Ie),()=>{n.un("click",Ie)}},[n]);const Ue=()=>{o(!1),n&&f&&(yI(n),d(!1))},ke=(le,Ae)=>{Ae.offset.y>100&&Ue()};return w.jsx(_a,{children:a&&w.jsxs(w.Fragment,{children:[w.jsx(rn.div,{className:"fixed inset-0 z-[1500]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:Ue}),w.jsxs(rn.div,{className:"fixed bottom-0 left-0 right-0 z-[1501] bg-white rounded-t-2xl shadow-2xl",style:{fontSize:`${14*E/100}px`},initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},drag:"y",dragConstraints:{top:0},dragElastic:.2,onDragEnd:ke,children:[w.jsx("div",{className:"flex justify-center pt-2 pb-1",children:w.jsx("div",{className:"w-10 h-1 bg-gray-300 rounded-full"})}),w.jsxs("div",{className:"flex items-center gap-2 px-3 pb-2 border-b border-gray-100",children:[k&&w.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[w.jsx("button",{onClick:U,className:"w-7 h-7 flex items-center justify-center text-blue-600 hover:bg-blue-50 rounded-full transition-colors border-0 outline-none","aria-label":"Vorige laag",children:w.jsx(mse,{size:18})}),w.jsxs("span",{className:"text-gray-500 font-medium min-w-[32px] text-center",style:{fontSize:"0.857em"},children:[i+1,"/",t.length]}),w.jsx("button",{onClick:j,className:"w-7 h-7 flex items-center justify-center text-blue-600 hover:bg-blue-50 rounded-full transition-colors border-0 outline-none","aria-label":"Volgende laag",children:w.jsx(G9,{size:18})})]}),w.jsx("span",{className:"flex-1 font-semibold text-gray-800 truncate",style:{fontSize:"1em"},children:P||"Info"}),w.jsx("button",{onClick:Ue,className:"w-7 h-7 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors flex-shrink-0","aria-label":"Sluiten",children:w.jsx(mu,{size:18})})]}),w.jsx("div",{className:"px-4 py-3 max-h-[45vh] overflow-y-auto select-text",style:{userSelect:"text",WebkitUserSelect:"text"},dangerouslySetInnerHTML:{__html:b}}),w.jsxs("div",{className:"px-4 py-2 border-t border-gray-100 flex items-center gap-2",children:[w.jsx(Sae,{size:14,className:"text-gray-400 flex-shrink-0"}),w.jsx("input",{type:"range",min:"80",max:"150",value:E,onChange:le=>R(parseInt(le.target.value)),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"}),w.jsxs("span",{className:"text-gray-400 w-8 text-right",style:{fontSize:"0.857em"},children:[E,"%"]})]}),F&&v&&w.jsx("div",{className:"px-4 pb-4",children:w.jsxs("button",{onClick:()=>{e(v),o(!1),y(null)},className:"w-full flex items-center justify-center gap-2 px-3 py-2 text-white bg-red-500 hover:bg-red-600 rounded-lg transition-colors border-0 outline-none",children:[w.jsx(QR,{size:16}),w.jsx("span",{children:"Vondst verwijderen"})]})}),L&&l&&w.jsx("div",{className:"px-4 pb-4 border-t border-gray-100",children:f?w.jsxs("button",{onClick:Me,className:"w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none",children:[w.jsx(iI,{size:16}),w.jsx("span",{children:"Hoogtekaart verbergen"})]}):w.jsx("button",{onClick:Te,disabled:g,className:`w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-white rounded-lg transition-colors border-0 outline-none ${g?"bg-blue-400 cursor-wait":"bg-blue-500 hover:bg-blue-600"}`,children:g?w.jsxs(w.Fragment,{children:[w.jsx(qR,{size:16,className:"animate-spin"}),w.jsx("span",{children:"Laden..."})]}):w.jsxs(w.Fragment,{children:[w.jsx(iI,{size:16}),w.jsx("span",{children:"Hoogtekaart tonen"})]})})})]})]})})}function bve(){const n=Hs(y=>y.map),e=ja(y=>y.openVondstForm),[t,r]=ce.useState(null),[i,s]=ce.useState(!1),[a,o]=ce.useState(!1),l=ce.useRef(null),u=ce.useRef(null);ce.useEffect(()=>{if(!n){console.log(" LongPressMenu: map not ready");return}const y=n.getViewport();if(!y){console.log(" LongPressMenu: viewport not ready");return}console.log(" LongPressMenu: attached to viewport",y);const E=600,T=15,R=b=>{if(console.log(" Touch start, touches:",b.touches.length),b.touches.length!==1)return;const L=b.touches[0];u.current={x:L.clientX,y:L.clientY},console.log(" Starting long press timer at:",u.current),l.current&&clearTimeout(l.current),l.current=window.setTimeout(()=>{if(console.log(" Timer fired! startPos:",u.current),!u.current)return;const F=window.__olMap;if(!F){console.log(" Map not available (global)");return}const U=y.getBoundingClientRect(),j=[u.current.x-U.left,u.current.y-U.top],Te=F.getCoordinateFromPixel(j);if(Te){const Me=fn(Te);b.preventDefault(),r({pixel:[u.current.x,u.current.y],coordinate:Me}),s(!0),o(!1),setTimeout(()=>o(!0),300),"vibrate"in navigator&&navigator.vibrate(50),console.log(" Long press detected at:",Me)}},E)},M=b=>{if(!l.current||!u.current)return;const L=b.touches[0],F=L.clientX-u.current.x,U=L.clientY-u.current.y,j=Math.sqrt(F*F+U*U);j>T&&(console.log(" Touch moved too much, cancelling. Distance:",j),clearTimeout(l.current),l.current=null)},k=()=>{console.log(" Touch end, timer active:",!!l.current),l.current&&(console.log(" Cancelling timer on touch end"),clearTimeout(l.current),l.current=null),u.current=null},V=b=>{i&&b.preventDefault()},z=b=>{b.button===0&&(console.log(" Mouse down"),u.current={x:b.clientX,y:b.clientY},l.current&&clearTimeout(l.current),l.current=window.setTimeout(()=>{if(console.log(" Mouse timer fired!"),!u.current)return;const L=window.__olMap;if(console.log(" __olMap:",L),console.log(" __olMap constructor:",L?.constructor?.name),console.log(" has getCoordinateAtPixel:",typeof L?.getCoordinateAtPixel),!L){console.log(" Map not available (global)");return}const F=y.getBoundingClientRect(),U=[u.current.x-F.left,u.current.y-F.top];console.log(" Pixel:",U);const j=L.getCoordinateFromPixel(U);if(console.log(" Coordinate:",j),j){const Te=fn(j);r({pixel:[u.current.x,u.current.y],coordinate:Te}),s(!0),o(!1),setTimeout(()=>o(!0),300),console.log(" Long press (mouse) detected at:",Te)}},E))},P=b=>{if(!l.current||!u.current)return;const L=b.clientX-u.current.x,F=b.clientY-u.current.y;Math.sqrt(L*L+F*F)>T&&(console.log(" Mouse moved, cancelling"),clearTimeout(l.current),l.current=null)},C=()=>{console.log(" Mouse up"),l.current&&(clearTimeout(l.current),l.current=null),u.current=null};return y.addEventListener("touchstart",R,{passive:!1}),y.addEventListener("touchmove",M,{passive:!0}),y.addEventListener("touchend",k),y.addEventListener("touchcancel",k),y.addEventListener("contextmenu",V),y.addEventListener("mousedown",z),y.addEventListener("mousemove",P),y.addEventListener("mouseup",C),y.addEventListener("mouseleave",C),()=>{y.removeEventListener("touchstart",R),y.removeEventListener("touchmove",M),y.removeEventListener("touchend",k),y.removeEventListener("touchcancel",k),y.removeEventListener("contextmenu",V),y.removeEventListener("mousedown",z),y.removeEventListener("mousemove",P),y.removeEventListener("mouseup",C),y.removeEventListener("mouseleave",C),l.current&&clearTimeout(l.current)}},[n,i]);const f=()=>{a&&(s(!1),r(null),o(!1))},d=()=>{s(!1),r(null),o(!1)},g=()=>{if(!t)return;const[y,E]=t.coordinate;e({lat:E,lng:y}),s(!1),r(null),o(!1)},p=()=>{if(!t)return;const[y,E]=t.coordinate,T=`https://www.google.com/maps?q=${E},${y}`;window.open(T,"_blank"),s(!1),r(null),o(!1)},v=y=>{const[E,T]=y;return`${T.toFixed(5)}N, ${E.toFixed(5)}E`};return w.jsx(_a,{children:i&&t&&w.jsxs(w.Fragment,{children:[w.jsx(rn.div,{className:"fixed inset-0 z-[1600]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:f}),w.jsxs(rn.div,{className:"fixed z-[1601] bg-white rounded-xl shadow-md overflow-hidden min-w-[200px] border-0 outline-none",style:{left:Math.min(t.pixel[0],window.innerWidth-220),top:Math.min(t.pixel[1],window.innerHeight-240)},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.15},children:[w.jsx("div",{className:"px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600",children:w.jsxs("div",{className:"flex items-center gap-2 text-white",children:[w.jsx(Vh,{size:16}),w.jsx("span",{className:"text-xs font-mono",children:v(t.coordinate)})]})}),w.jsxs("div",{className:"bg-white",children:[w.jsxs("button",{onClick:g,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[w.jsx(jx,{size:20,className:"text-blue-500"}),w.jsx("span",{className:"font-medium",children:"Vondst toevoegen"})]}),w.jsxs("button",{onClick:p,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[w.jsx(z9,{size:20,className:"text-blue-600"}),w.jsx("span",{className:"font-medium",children:"Open in Google Maps"})]})]}),w.jsx("div",{className:"bg-white",children:w.jsxs("button",{onClick:d,className:"w-full px-4 py-3 flex items-center justify-center gap-2 text-gray-500 hover:bg-blue-50 transition-colors bg-white border-0 outline-none",children:[w.jsx(mu,{size:18}),w.jsx("span",{children:"Annuleren"})]})})]})]})})}function Mve(){return w.jsx("div",{className:"fixed bottom-2 left-[60px] z-[800] h-6 flex items-center px-1.5 bg-white/70 backdrop-blur-sm rounded shadow-sm text-[10px] font-mono text-gray-500",children:"v2.10.9"})}const kve={Compass:wse,TreePalm:Eae,Mountain:iI,Waves:Aae,Search:H9,Target:yae,Layers:g0,Grid:Lse},Nve={Compass:"text-purple-600",Waves:"text-cyan-600",TreePalm:"text-green-600",Mountain:"text-stone-600",Search:"text-amber-600",Target:"text-red-600",Layers:"text-blue-600",Grid:"text-lime-600"},Lve={Compass:"hover:bg-purple-50",Waves:"hover:bg-cyan-50",TreePalm:"hover:bg-green-50",Mountain:"hover:bg-stone-50",Search:"hover:bg-amber-50",Target:"hover:bg-red-50",Layers:"hover:bg-blue-50",Grid:"hover:bg-lime-50"},sO=["Labels Overlay","TMK 1850","Bonnebladen 1900","Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen","Romeinse wegen (Wereld)","Kastelen","IKAW","Archeo Landschappen","Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Essen","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","World Hillshade","Veengebieden","Geomorfologie","Bodemkaart","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Parken","Speeltuinen","Musea","Strandjes","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],Ove=["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"];function Dve(){const n=Kr(E=>E.setLayerVisibility),e=Fi(E=>E.stopTracking),{presetsPanelOpen:t,togglePresetsPanel:r,toggleSettingsPanel:i,closeAllPanels:s}=ja(),{presets:a,applyPreset:o,updatePreset:l}=a8(),u=Kr(E=>E.visible),f=zs(E=>E.presetPanelFontScale),d=zs(E=>E.setPresetPanelFontScale),g=12*f/100,p=()=>{s(),sO.forEach(E=>n(E,!1)),Ove.forEach(E=>{n(E,E==="CartoDB (licht)")}),e(),console.log(" Reset: CartoDB (licht), alle lagen uit, GPS uit")},v=E=>{o(E),s()},y=(E,T)=>{E.stopPropagation();const R=Object.entries(u).filter(([M,k])=>k&&sO.includes(M)).map(([M])=>M);l(T,{layers:R}),console.log(" Lagen opgeslagen naar preset")};return w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:i,className:"fixed bottom-2 left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Instellingen",children:w.jsx(K9,{size:22,className:"text-gray-600"})}),w.jsx("button",{onClick:p,className:"fixed bottom-[60px] left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Reset - CartoDB, alle lagen uit, GPS uit",children:w.jsx(iae,{size:22,className:"text-gray-600"})}),w.jsx("button",{onClick:r,className:"fixed bottom-[112px] left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Presets",children:t?w.jsx(B9,{size:22,className:"text-blue-600"}):w.jsx(g0,{size:22,className:"text-blue-600"})}),w.jsx(_a,{children:t&&w.jsxs(w.Fragment,{children:[w.jsx(rn.div,{className:"fixed inset-0 z-[800]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r}),w.jsxs(rn.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.15},className:"fixed bottom-[112px] left-[56px] bg-white/95 rounded-xl shadow-lg overflow-hidden w-[220px] backdrop-blur-sm z-[801]",children:[w.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-1.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[w.jsx("span",{className:"text-xs font-medium",children:"Presets"}),w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsx("span",{className:"text-[9px] opacity-70",children:"T"}),w.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:f,onInput:E=>{d(parseInt(E.target.value))},onChange:E=>d(parseInt(E.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${f}%`}),w.jsx("span",{className:"text-[11px] opacity-70",children:"T"})]})]}),w.jsx("div",{className:"p-2",children:a.map(E=>{const T=kve[E.icon]||g0,R=Nve[E.icon]||"text-blue-600",M=Lve[E.icon]||"hover:bg-blue-50";return w.jsxs("button",{onClick:()=>v(E.id),className:`w-full h-8 flex items-center gap-2 px-2 ${M} rounded text-left transition-colors border-0 outline-none bg-transparent overflow-hidden`,style:{fontSize:`${g}px`},children:[w.jsx(T,{size:14,className:`${R} flex-shrink-0`}),w.jsx("span",{className:"text-gray-700 truncate",children:E.name}),w.jsx("span",{onClick:k=>y(k,E.id),className:"ml-auto p-1 hover:bg-gray-200 rounded transition-colors flex-shrink-0",title:"Huidige lagen opslaan naar deze preset",children:w.jsx(lae,{size:12,className:"text-gray-400 hover:text-blue-500"})})]},E.id)})})]})]})})]})}const Fve="https://forms.gle/R5LCk11Bzu5XrkBj8";function Vve(){const{infoPanelOpen:n,toggleInfoPanel:e}=ja(),[t,r]=ce.useState("info"),i=[{id:"info",label:"Info",icon:w.jsx($N,{size:14})},{id:"functies",label:"Functies",icon:w.jsx(XR,{size:14})},{id:"handleiding",label:"Handleiding",icon:w.jsx(ase,{size:14})}];return w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:e,className:"fixed top-2 right-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Info & Help",children:w.jsx($N,{size:22,className:"text-gray-600"})}),w.jsx(_a,{children:n&&w.jsxs(w.Fragment,{children:[w.jsx(rn.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),w.jsxs(rn.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[w.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[w.jsx("span",{className:"font-medium",children:"DetectorApp NL"}),w.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:w.jsx(mu,{size:18})})]}),w.jsx("div",{className:"flex border-b border-gray-200",children:i.map(s=>w.jsxs("button",{onClick:()=>r(s.id),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium transition-colors border-0 outline-none ${t===s.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[s.icon,s.label]},s.id))}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 text-sm",children:[t==="info"&&w.jsx(jve,{}),t==="functies"&&w.jsx(Gve,{}),t==="handleiding"&&w.jsx(Bve,{}),w.jsxs("section",{className:"pt-2 border-t border-gray-200 space-y-2",children:[w.jsxs("a",{href:Fve,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",children:[w.jsx(F9,{size:14}),w.jsx("span",{className:"text-sm",children:"Meld een bug"})]}),w.jsx("p",{className:"text-xs text-gray-400 text-center",children:"DetectorApp NL v2.10.9"})]})]})]})]})})]})}function jve(){return w.jsxs(w.Fragment,{children:[w.jsxs("section",{children:[w.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Over deze app"}),w.jsx("p",{className:"text-gray-600",children:"DetectorApp NL is d kaartapplicatie voor metaaldetectie en archeologische verkenning in Nederland. Met 60+ kaartlagen, GPS tracking met richtingspijl en vondstenbeheer."})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Databronnen & Licenties"}),w.jsxs("ul",{className:"space-y-2 text-gray-600",children:[w.jsxs("li",{children:[w.jsx("strong",{children:"RCE / Cultureelerfgoed.nl"})," (CC0/CC-BY)",w.jsx("br",{}),w.jsx("span",{className:"text-xs",children:"AMK, Rijksmonumenten, Werelderfgoed, Paleokaarten, Religieus Erfgoed, Essen"})]}),w.jsxs("li",{children:[w.jsx("strong",{children:"PDOK / Kadaster"})," (CC0/CC-BY)",w.jsx("br",{}),w.jsx("span",{className:"text-xs",children:"Luchtfoto, AHN, IKAW, Bodemkaart, Geomorfologie, Kadastrale Grenzen"})]}),w.jsxs("li",{children:[w.jsx("strong",{children:"OpenStreetMap"})," (ODbL)",w.jsx("br",{}),w.jsx("span",{className:"text-xs",children:"Hunebedden, Grafheuvels, Bunkers, Kastelen, Parken, Kringloopwinkels, Musea"})]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Itiner-E"})," (CC BY 4.0)",w.jsx("br",{}),w.jsx("span",{className:"text-xs",children:"Romeinse wegen - Brughmans, Paout, de Soto & Bjerregaard Vahlstrup"})]}),w.jsxs("li",{children:[w.jsx("strong",{children:"CARTO"})," (CC BY 3.0)",w.jsx("br",{}),w.jsx("span",{className:"text-xs",children:"CartoDB basiskaart"})]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Map5.nl / Kadaster"}),w.jsx("br",{}),w.jsx("span",{className:"text-xs",children:"Historische kaarten (TMK 1850, Bonnebladen 1900)"})]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Provinciale data"}),w.jsx("br",{}),w.jsx("span",{className:"text-xs",children:"Relictenkaart (Gelderland), Scheepswrakken (Zuid-Holland), Verdronken Dorpen (Zeeland)"})]}),w.jsxs("li",{children:[w.jsx("strong",{children:"UIKAV / Rijkswaterstaat"}),w.jsx("br",{}),w.jsx("span",{className:"text-xs",children:"Uiterwaarden archeologische data"})]})]})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Privacy"}),w.jsxs("div",{className:"text-gray-600 space-y-2",children:[w.jsxs("p",{children:[w.jsx("strong",{children:"Locatiegegevens:"})," Alleen voor navigatie, niet opgeslagen of gedeeld."]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Geen tracking:"})," Geen analytics of gebruiksstatistieken."]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Lokale opslag:"})," Alle data blijft op je apparaat."]})]})]})]})}function Gve(){return w.jsxs(w.Fragment,{children:[w.jsxs("section",{children:[w.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[w.jsx(ZR,{size:16,className:"text-blue-600"}),"Kaartlagen (60+)"]}),w.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[w.jsxs("li",{children:[w.jsx("strong",{children:"Basis:"})," CartoDB, OpenStreetMap, PDOK Luchtfoto"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Historisch:"})," TMK 1850, Bonnebladen 1900"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Hoogtekaarten:"})," AHN4 Hillshade, Multi-Hillshade, Hoogtekaart Kleur, AHN 0.5m"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Archeologie:"})," AMK Monumenten (per periode), Romeinse wegen, Kastelen, IKAW"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Prehistorie:"})," Hunebedden, Grafheuvels, Terpen, Paleokaarten (7 periodes)"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Militair:"})," WWII Bunkers, Slagvelden, Vliegvelden, Verdedigingslinies"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Terrein:"})," Veengebieden, Geomorfologie, Bodemkaart"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Percelen:"})," Gewaspercelen, Kadastrale Grenzen"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Recreatie:"})," Parken, Musea, Kringloopwinkels, Strandjes"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Provinciaal:"})," Relictenkaart, Scheepswrakken, Verdronken Dorpen"]})]})]}),w.jsxs("section",{children:[w.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[w.jsx(Vx,{size:16,className:"text-green-600"}),"GPS Tracking"]}),w.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[w.jsx("li",{children:"Live GPS tracking met nauwkeurigheidscirkel"}),w.jsx("li",{children:"Richtingspijl draait mee met je telefoon (zoals Google Maps)"}),w.jsx("li",{children:"Kaart handmatig draaien + kompasknop om terug te draaien naar noorden"}),w.jsx("li",{children:"Schaalbalk onderaan (instelbaar in Instellingen)"}),w.jsx("li",{children:'Open locatie in Google Maps (long-press  "Open in Google Maps")'})]})]}),w.jsxs("section",{children:[w.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[w.jsx(Vh,{size:16,className:"text-orange-600"}),"Vondsten"]}),w.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[w.jsx("li",{children:"Toevoegen via GPS, long-press of handmatig"}),w.jsx("li",{children:"Velden: type, materiaal, periode, diepte, conditie, gewicht, foto-link"}),w.jsx("li",{children:"Export: Excel, CSV, GeoJSON, GPX, KML"}),w.jsx("li",{children:"Dashboard met statistieken"}),w.jsx("li",{children:"Lokale opslag (geen account nodig)"})]})]}),w.jsxs("section",{children:[w.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[w.jsx(g0,{size:16,className:"text-purple-600"}),"Presets"]}),w.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[w.jsx("li",{children:"Detectie, Steentijd, Romeins, Middeleeuwen, WOII, Analyse, Fossielen"}),w.jsx("li",{children:"Alle presets zijn aanpasbaar - klik op het diskette-icoon om huidige lagen op te slaan"}),w.jsx("li",{children:"Eigen presets aanmaken via Instellingen"}),w.jsx("li",{children:"Tekstgrootte per panel instelbaar via slider in header"})]})]}),w.jsxs("section",{children:[w.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[w.jsx(Qse,{size:16,className:"text-cyan-600"}),"Perceelinformatie"]}),w.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[w.jsx("li",{children:'Zet "Kadastrale Grenzen" aan en tik op een perceel'}),w.jsx("li",{children:"Toont: kadastrale aanduiding (gemeente, sectie, nummer) + oppervlakte"}),w.jsx("li",{children:"Link naar eigenaar opzoeken (betaalde dienst)"}),w.jsx("li",{children:"Hoogtekaart per perceel (AHN4)"})]})]})]})}function Bve(){return w.jsxs(w.Fragment,{children:[w.jsxs("section",{children:[w.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Eerste stappen"}),w.jsxs("ol",{className:"text-gray-600 space-y-2 text-xs list-decimal list-inside",children:[w.jsxs("li",{children:["Tik op de ",w.jsx("strong",{children:"GPS knop"})," (rechtsonder) om je locatie te zien"]}),w.jsxs("li",{children:["Kies een ",w.jsx("strong",{children:"preset"})," (links, laagjes-icoon) of selecteer kaartlagen handmatig"]}),w.jsxs("li",{children:["Tik op de ",w.jsx("strong",{children:"Kaartlagen knop"})," voor alle beschikbare lagen"]})]})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"GPS knop"}),w.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[w.jsxs("p",{children:[w.jsx("strong",{children:"Uit (grijs icoon):"})," GPS tracking uit, geen locatie zichtbaar."]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Aan (blauw icoon):"})," GPS tracking aan, je locatie en richting worden getoond."]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Richtingspijl:"})," De blauwe pijl draait vloeiend mee met de richting van je telefoon."]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Kompasknop:"})," Verschijnt rechtsboven als de kaart gedraaid is. Tik om terug naar noorden te draaien."]})]})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Vondst toevoegen"}),w.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[w.jsxs("p",{children:[w.jsx("strong",{children:"Methode 1 - GPS:"})," Tik op de oranje + knop rechtsonder. Je huidige locatie wordt automatisch ingevuld."]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Methode 2 - Long-press:"}),' Houd je vinger lang op de kaart. Kies "Vondst toevoegen" in het menu.']}),w.jsxs("p",{children:[w.jsx("strong",{children:"Methode 3 - Handmatig:"}),' In het vondstenformulier, tik "Kies op kaart" en selecteer de exacte locatie.']})]})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Presets gebruiken"}),w.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[w.jsxs("p",{children:[w.jsx("strong",{children:"Toepassen:"})," Tik op het laagjes-icoon links en kies een preset."]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Snel opslaan:"})," Zet de gewenste lagen aan en tik op het diskette-icoon naast een preset om die te overschrijven."]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Nieuw aanmaken:"}),' Ga naar Instellingen  Presets  "Huidige lagen als preset opslaan".']}),w.jsxs("p",{children:[w.jsx("strong",{children:"Tekstgrootte:"})," Gebruik de slider in de header van het Presets/Kaartlagen panel."]})]})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Zoeken & Navigatie"}),w.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[w.jsxs("p",{children:[w.jsx("strong",{children:"Zoeken:"})," Gebruik de zoekbalk bovenaan om een adres te vinden."]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Google Maps:"}),' Long-press op een locatie en kies "Open in Google Maps" om te navigeren.']}),w.jsxs("p",{children:[w.jsx("strong",{children:"Schaalbalk:"})," Onderaan de kaart - aan/uit in Instellingen."]})]})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Tips voor in het veld"}),w.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs list-disc list-inside",children:[w.jsxs("li",{children:["Gebruik ",w.jsx("strong",{children:"AHN Hillshade"})," om relif te zien (grafheuvels, wallen)"]}),w.jsxs("li",{children:["Combineer ",w.jsx("strong",{children:"AMK"})," met ",w.jsx("strong",{children:"Gewaspercelen"})," voor detectie"]}),w.jsxs("li",{children:["Check de ",w.jsx("strong",{children:"IKAW"})," voor archeologische verwachting"]}),w.jsxs("li",{children:["Gebruik ",w.jsx("strong",{children:"historische kaarten"})," om oude structuren te vinden"]}),w.jsxs("li",{children:["Zet ",w.jsx("strong",{children:"GPS tracking"})," aan om je route te volgen"]}),w.jsx("li",{children:"Tik op objecten (bunkers, musea, etc.) voor openingstijden en info"})]})]})]})}function Uve(){const n=Hs(a=>a.map),[e,t]=ce.useState(0),[r,i]=ce.useState(!1);ce.useEffect(()=>{if(!n)return;const a=n.getView(),o=()=>{const l=a.getRotation(),u=l*180/Math.PI;t(u),i(Math.abs(l)>.087)};return o(),a.on("change:rotation",o),()=>{a.un("change:rotation",o)}},[n]);const s=()=>{n&&n.getView().animate({rotation:0,duration:300})};return w.jsx(_a,{children:r&&w.jsx(rn.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},onClick:s,className:"fixed top-[60px] right-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Klik om noorden te herstellen",children:w.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",style:{transform:`rotate(${-e}deg)`},children:[w.jsx("path",{d:"M12 2 L14.5 12 L12 10 L9.5 12 Z",fill:"#EA4335"}),w.jsx("path",{d:"M12 22 L9.5 12 L12 14 L14.5 12 Z",fill:"white",stroke:"#9CA3AF",strokeWidth:"0.5"}),w.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"#374151"})]})})})}const zve=[{name:"AHN4 Hoogtekaart Kleur",color:"blue",default:.85},{name:"AHN4 Hillshade NL",color:"blue",default:.7},{name:"AHN4 Multi-Hillshade NL",color:"blue",default:.7},{name:"AHN 0.5m",color:"blue",default:.7},{name:"World Hillshade",color:"blue",default:.7},{name:"TMK 1850",color:"amber",default:.8},{name:"Bonnebladen 1900",color:"amber",default:.8},{name:"Geomorfologie",color:"green",default:.5},{name:"Bodemkaart",color:"amber",default:.6},{name:"Veengebieden",color:"amber",default:.6},{name:"IKAW",color:"orange",default:.5},{name:"Archeo Landschappen",color:"green",default:.5},{name:"Terpen",color:"orange",default:.7},{name:"Essen",color:"amber",default:.6},{name:"Paleokaart 9000 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 5500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 2750 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 1500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 100 n.Chr.",color:"indigo",default:.7},{name:"Paleokaart 800 n.Chr.",color:"indigo",default:.7},{name:"Verdedigingslinies",color:"red",default:.7},{name:"Inundatiegebieden",color:"red",default:.5},{name:"Gewaspercelen",color:"green",default:.6},{name:"Kadastrale Grenzen",color:"purple",default:.7},{name:"Erfgoedlijnen",color:"purple",default:.7},{name:"Oude Kernen",color:"orange",default:.6},{name:"Relictenkaart Vlakken",color:"green",default:.5}],$ve={blue:"accent-blue-500",amber:"accent-amber-500",red:"accent-red-500",indigo:"accent-indigo-500",green:"accent-green-500",orange:"accent-orange-500",purple:"accent-purple-500"};function Wve(){const[n,e]=ce.useState(!1),[t,r]=ce.useState(!1),i=Kr(f=>f.visible),s=Kr(f=>f.opacity),a=Kr(f=>f.setLayerOpacity),o=zve.filter(f=>i[f.name]);if(o.length===0)return null;const l=t?o:o.slice(0,3),u=o.length>3;return w.jsxs("div",{className:"fixed bottom-[112px] right-2 z-[900]",children:[w.jsxs(rn.button,{onClick:()=>e(!n),className:"w-11 h-11 bg-white/80 rounded-xl backdrop-blur-sm shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none hover:bg-white/90 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Opacity sliders",title:n?"Sluit opacity sliders":"Open opacity sliders",children:[w.jsx(gae,{size:22,strokeWidth:2,className:"text-gray-500"}),o.length>0&&w.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 text-white text-[10px] rounded-full flex items-center justify-center",children:o.length})]}),w.jsx(_a,{children:n&&w.jsxs(w.Fragment,{children:[w.jsx(rn.div,{className:"fixed inset-0 z-[-1]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>e(!1)}),w.jsxs(rn.div,{initial:{opacity:0,x:20,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.9},transition:{duration:.2},className:"absolute bottom-0 right-14 bg-white/95 rounded-lg shadow-lg p-3 min-w-[220px] max-h-[60vh] overflow-y-auto",children:[w.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wide",children:"Transparantie"}),w.jsx("div",{className:"space-y-3",children:l.map(f=>{const d=s[f.name]??f.default;return w.jsxs("div",{children:[w.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block truncate",title:f.name,children:f.name}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("input",{type:"range",min:"0",max:"100",value:d*100,onChange:g=>a(f.name,parseInt(g.target.value)/100),className:`flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer ${$ve[f.color]}`}),w.jsxs("span",{className:"text-xs text-gray-500 w-8 text-right select-none pointer-events-none",children:[Math.round(d*100),"%"]})]})]},f.name)})}),u&&w.jsx("button",{onClick:()=>r(!t),className:"w-full mt-3 pt-2 border-t border-gray-200 flex items-center justify-center gap-1 text-xs text-gray-500 hover:text-gray-700",children:t?w.jsxs(w.Fragment,{children:[w.jsx(B9,{size:14}),"Minder tonen"]}):w.jsxs(w.Fragment,{children:[w.jsx(j9,{size:14}),o.length-3," meer..."]})})]})]})})]})}function Hve(){const n=Hs(y=>y.map),[e,t]=ce.useState(""),[r,i]=ce.useState([]),[s,a]=ce.useState(!1),[o,l]=ce.useState(!1),u=ce.useRef(null),f=ce.useRef();ce.useEffect(()=>{if(f.current&&clearTimeout(f.current),e.length<2){i([]);return}return f.current=window.setTimeout(async()=>{l(!0);try{const E=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/suggest?q=${encodeURIComponent(e)}&rows=7`)).json();E.response?.docs&&i(E.response.docs)}catch(y){console.error("Search error:",y),i([])}finally{l(!1)}},300),()=>{f.current&&clearTimeout(f.current)}},[e]);const d=async y=>{try{const T=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/lookup?id=${encodeURIComponent(y)}`)).json();if(T.response?.docs?.[0]?.centroide_ll){const M=T.response.docs[0].centroide_ll.match(/POINT\(([^ ]+) ([^)]+)\)/);if(M)return{lng:parseFloat(M[1]),lat:parseFloat(M[2])}}}catch(E){console.error("Lookup error:",E)}return null},g=async y=>{if(!n)return;const E=await d(y.id);E&&n.getView().animate({center:Kd([E.lng,E.lat]),zoom:16,duration:1e3}),t(""),i([]),a(!1)},p=async(y,E)=>{E.stopPropagation();const T=await d(y.id);if(T){const R=`https://www.google.com/maps?q=${T.lat},${T.lng}`;window.open(R,"_blank")}t(""),i([]),a(!1)},v=()=>{t(""),i([]),u.current?.focus()};return w.jsxs("div",{className:"search-box",children:[w.jsxs("div",{className:"search-input-wrapper",children:[w.jsx(H9,{size:18,className:"search-icon"}),w.jsx("input",{ref:u,type:"text",value:e,onChange:y=>{t(y.target.value),a(!0)},onFocus:()=>a(!0),placeholder:"Zoek adres of plaats...",className:"search-input"}),e&&w.jsx("button",{onClick:v,className:"search-clear",children:w.jsx(mu,{size:16})})]}),s&&r.length>0&&w.jsx("ul",{className:"search-results",children:r.map(y=>w.jsxs("li",{className:"search-result-item",children:[w.jsx("div",{className:"search-result-content",onClick:()=>g(y),children:w.jsx("span",{className:"search-result-text",children:y.weergavenaam})}),w.jsx("button",{className:"search-navigate-btn",onClick:E=>p(y,E),title:"Open in Google Maps",children:w.jsx(z9,{size:20})})]},y.id))}),s&&o&&w.jsx("div",{className:"search-loading",children:"Zoeken..."})]})}function Kve(){const n=Hs(r=>r.map),e=()=>{if(!n)return;const r=n.getView(),i=r.getZoom();i!==void 0&&r.animate({zoom:i+1,duration:200})},t=()=>{if(!n)return;const r=n.getView(),i=r.getZoom();i!==void 0&&r.animate({zoom:i-1,duration:200})};return w.jsxs("div",{className:"fixed top-2.5 left-2.5 z-[800] flex flex-col gap-1",children:[w.jsx(rn.button,{className:"w-8 h-8 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-lg shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Inzoomen",children:w.jsx(jx,{size:16,className:"text-gray-600"})}),w.jsx(rn.button,{className:"w-8 h-8 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-lg shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:t,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Uitzoomen",children:w.jsx(Xse,{size:16,className:"text-gray-600"})})]})}const Yve="detector2024",SI="detectorapp-auth";function Xve({children:n}){const[e,t]=ce.useState(!1),[r,i]=ce.useState(""),[s,a]=ce.useState(!1),[o,l]=ce.useState(""),[u,f]=ce.useState(!0);ce.useEffect(()=>{localStorage.getItem(SI)==="authenticated"&&t(!0),f(!1)},[]);const d=g=>{g.preventDefault(),l(""),r===Yve?(localStorage.setItem(SI,"authenticated"),t(!0)):(l("Onjuist wachtwoord"),i(""))};return u?w.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center",children:w.jsx("div",{className:"text-white text-lg",children:"Laden..."})}):e?w.jsx(w.Fragment,{children:n}):w.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center p-4",children:w.jsxs(rn.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-sm",children:[w.jsxs("div",{className:"text-center mb-6",children:[w.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:w.jsx(zse,{size:32,className:"text-blue-600"})}),w.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"DetectorApp"}),w.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Test versie - Toegang beveiligd"})]}),w.jsxs("form",{onSubmit:d,className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wachtwoord"}),w.jsxs("div",{className:"relative",children:[w.jsx("input",{type:s?"text":"password",value:r,onChange:g=>i(g.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none pr-12",placeholder:"Voer wachtwoord in",autoFocus:!0}),w.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s?w.jsx($9,{size:20}):w.jsx(W9,{size:20})})]})]}),o&&w.jsx(rn.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 text-sm text-center",children:o}),w.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"Inloggen"})]}),w.jsx("p",{className:"text-center text-xs text-gray-400 mt-6",children:"Alleen voor testers"})]})})}function qve(){localStorage.removeItem(SI),window.location.reload()}function Zve({isOpen:n,onClose:e}){const t=F0(l=>l.vondsten),r={total:t.length,byType:{},byMaterial:{},byPeriod:{},byCondition:{},avgDepth:0,totalWeight:0,recent:t.slice(-5).reverse()};let i=0,s=0;t.forEach(l=>{r.byType[l.objectType]=(r.byType[l.objectType]||0)+1,r.byMaterial[l.material]=(r.byMaterial[l.material]||0)+1,r.byPeriod[l.period]=(r.byPeriod[l.period]||0)+1,l.condition&&(r.byCondition[l.condition]=(r.byCondition[l.condition]||0)+1),l.depth&&(i+=l.depth,s++),l.weight&&(r.totalWeight+=l.weight)}),r.avgDepth=s>0?Math.round(i/s):0;const a=l=>Object.entries(l).sort((u,f)=>f[1]-u[1]),o=l=>Math.max(...Object.values(l),1);return w.jsx(_a,{children:n&&w.jsxs(w.Fragment,{children:[w.jsx(rn.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),w.jsxs(rn.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},children:[w.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(V9,{size:18}),w.jsx("span",{className:"font-medium",children:"Mijn Vondsten Dashboard"})]}),w.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:w.jsx(mu,{size:18})})]}),w.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",children:t.length===0?w.jsxs("div",{className:"text-center py-8 text-gray-500",children:[w.jsx(Vh,{size:48,className:"mx-auto mb-3 opacity-30"}),w.jsx("p",{className:"font-medium",children:"Nog geen vondsten"}),w.jsx("p",{className:"text-sm mt-1",children:"Voeg je eerste vondst toe via de oranje knop of long-press op de kaart"})]}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[w.jsx(MS,{icon:w.jsx(Vh,{size:20}),value:r.total,label:"Totaal",color:"bg-orange-100 text-orange-700"}),w.jsx(MS,{icon:w.jsx(aae,{size:20}),value:r.avgDepth>0?`${r.avgDepth}cm`:"-",label:"Gem. diepte",color:"bg-blue-100 text-blue-700"}),w.jsx(MS,{icon:w.jsx(uae,{size:20}),value:r.totalWeight>0?`${r.totalWeight.toFixed(1)}g`:"-",label:"Tot. gewicht",color:"bg-green-100 text-green-700"})]}),w.jsx(oy,{title:"Per Type",data:a(r.byType),max:o(r.byType),color:"bg-orange-500"}),w.jsx(oy,{title:"Per Periode",data:a(r.byPeriod),max:o(r.byPeriod),color:"bg-amber-500"}),w.jsx(oy,{title:"Per Materiaal",data:a(r.byMaterial),max:o(r.byMaterial),color:"bg-blue-500"}),Object.keys(r.byCondition).length>0&&w.jsx(oy,{title:"Per Conditie",data:a(r.byCondition),max:o(r.byCondition),color:"bg-green-500"}),w.jsxs("div",{children:[w.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[w.jsx(cse,{size:14}),"Recente Vondsten"]}),w.jsx("div",{className:"space-y-2",children:r.recent.map(l=>w.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg",children:[w.jsxs("div",{children:[w.jsx("span",{className:"font-medium text-sm text-gray-800",children:l.objectType}),w.jsx("span",{className:"text-gray-400 mx-1",children:"-"}),w.jsx("span",{className:"text-sm text-gray-600",children:l.material})]}),w.jsx("span",{className:"text-xs text-gray-400",children:new Date(l.timestamp).toLocaleDateString("nl-NL")})]},l.id))})]})]})})]})]})})}function MS({icon:n,value:e,label:t,color:r}){return w.jsxs("div",{className:`rounded-lg p-3 ${r}`,children:[w.jsx("div",{className:"flex items-center gap-2 mb-1 opacity-70",children:n}),w.jsx("div",{className:"text-xl font-bold",children:e}),w.jsx("div",{className:"text-xs opacity-70",children:t})]})}function oy({title:n,data:e,max:t,color:r}){return e.length===0?null:w.jsxs("div",{children:[w.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:n}),w.jsx("div",{className:"space-y-1.5",children:e.slice(0,6).map(([i,s])=>w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-24 text-xs text-gray-600 truncate",title:i,children:i}),w.jsx("div",{className:"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden",children:w.jsx(rn.div,{className:`h-full ${r} rounded-full`,initial:{width:0},animate:{width:`${s/t*100}%`},transition:{duration:.5,ease:"easeOut"}})}),w.jsx("div",{className:"w-6 text-xs text-gray-600 text-right font-medium",children:s})]},i))})]})}function Qve(n){const{type:e,coordinates:t}=n,r=o=>Kd(o),i=o=>o.map(r),s=o=>o.map(i),a=o=>o.map(s);switch(e){case"Point":return new Oo(r(t));case"LineString":return new Lo(i(t));case"Polygon":return new Ka(s(t));case"MultiPoint":return new x0(i(t));case"MultiLineString":return new Yc(s(t));case"MultiPolygon":return new qd(a(t));default:return console.warn(`Unsupported geometry type: ${e}`),null}}function Jve(n,e,t){const r=n.color,i=10,s=5,a=14;let o=i;if(t>50?o=s:t>10?o=Math.max(s,i-(t-10)/10):t<2&&(o=a),e==="Point"||e==="MultiPoint")return new ar({image:new Xc({radius:o,fill:new Ai({color:r}),stroke:new Fs({color:"#ffffff",width:2})})});if(e==="LineString"||e==="MultiLineString")return new ar({stroke:new Fs({color:r,width:3})});if(e==="Polygon"||e==="MultiPolygon"){const l=eEe(r,.3);return new ar({fill:new Ai({color:l}),stroke:new Fs({color:r,width:2})})}return new ar({image:new Xc({radius:o,fill:new Ai({color:r}),stroke:new Fs({color:"#ffffff",width:2})})})}function eEe(n,e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);if(t){const r=parseInt(t[1],16),i=parseInt(t[2],16),s=parseInt(t[3],16);return`rgba(${r}, ${i}, ${s}, ${e})`}return n}function tEe(){const n=Hs(r=>r.map),e=fE(r=>r.layers),t=ce.useRef(new Map);return ce.useEffect(()=>{if(!n)return;const r=new Set;e.forEach(i=>{r.add(i.id);const s=new Av;i.features.features.forEach((o,l)=>{if(!o.geometry)return;const u=Qve(o.geometry);if(!u)return;const f=new Mo({geometry:u,properties:o.properties,layerId:i.id,featureIndex:l});f.setStyle((d,g)=>Jve(i,o.geometry.type,g)),s.addFeature(f)});const a=t.current.get(i.id);if(a)a.setSource(s),a.setVisible(i.visible),a.setOpacity(i.opacity);else{const o=new Mv({source:s,zIndex:900,visible:i.visible,opacity:i.opacity,properties:{title:i.name,customLayerId:i.id}});n.addLayer(o),t.current.set(i.id,o)}}),t.current.forEach((i,s)=>{r.has(s)||(n.removeLayer(i),t.current.delete(s))})},[n,e]),ce.useEffect(()=>()=>{n&&(t.current.forEach(r=>{n.removeLayer(r)}),t.current.clear())},[n]),null}Qt.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");q7(Qt);function nEe(n){if(!n||n.length<2)return"unknown";const[e,t]=n;return e>=7e3&&e<=3e5&&t>=289e3&&t<=629e3?"RD":Math.abs(e)<=180&&Math.abs(t)<=90?"WGS84":"unknown"}function rEe(n){const[e,t]=n;return Qt("EPSG:28992","EPSG:4326",[e,t])}function Mj(n,e){return typeof n[0]=="number"?e(n):n.map(t=>Mj(t,e))}function iEe(n){const e=n.coordinates;return!e||Array.isArray(e)&&e.length===0?null:n.type==="Point"?e:n.type==="LineString"||n.type==="MultiPoint"?e[0]:n.type==="Polygon"||n.type==="MultiLineString"?e[0]?.[0]:n.type==="MultiPolygon"?e[0]?.[0]?.[0]:null}async function sEe(n){const e=[],t=[];try{const r=await n.text(),i=JSON.parse(r);if(!i.type)return e.push('Ongeldig GeoJSON: geen "type" veld gevonden'),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}};let s=[];i.type==="FeatureCollection"?s=i.features||[]:i.type==="Feature"?s=[i]:i.type==="GeometryCollection"?s=(i.geometries||[]).map((u,f)=>({type:"Feature",geometry:u,properties:{id:f}})):s=[{type:"Feature",geometry:i,properties:{}}],s.length===0&&t.push("Geen features gevonden in bestand");let a="unknown",o=!1;if(s.length>0&&s[0].geometry){const u=iEe(s[0].geometry);u&&(a=nEe(u))}a==="RD"&&(t.push("Rijksdriehoek coordinaten gedetecteerd, worden omgezet naar WGS84"),o=!0,s=s.map(u=>{if(!u.geometry)return u;const f=Mj(u.geometry.coordinates,rEe);return{...u,geometry:{...u.geometry,coordinates:f}}}),a="WGS84");const l=[...new Set(s.filter(u=>u.geometry).map(u=>u.geometry.type))];return{success:!0,features:{type:"FeatureCollection",features:s},errors:e,warnings:t,metadata:{featureCount:s.length,geometryTypes:l,coordinateSystem:a,transformed:o}}}catch(r){return e.push(`Fout bij parsen: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}async function aEe(n){const e=[],t=[];try{const r=await n.text(),s=new ade({extractStyles:!1}).readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});s.length===0&&t.push("Geen features gevonden in KML bestand");const l=new uC().writeFeaturesObject(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).features.map((f,d)=>{const g={...f.properties},p=g.name||g.Name||`Feature ${d+1}`,v=g.description||g.Description||"";return{type:"Feature",geometry:f.geometry,properties:{...g,name:p,description:v}}}),u=[...new Set(l.filter(f=>f.geometry).map(f=>f.geometry.type))];return{success:!0,features:{type:"FeatureCollection",features:l},errors:e,warnings:t,metadata:{featureCount:l.length,geometryTypes:u,coordinateSystem:"WGS84",transformed:!1}}}catch(r){return e.push(`Fout bij parsen KML: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}async function oEe(n){const e=[],t=[];try{const r=await n.text(),s=new vfe().readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});s.length===0&&t.push("Geen features gevonden in GPX bestand");const l=new uC().writeFeaturesObject(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).features.map((f,d)=>{const g={...f.properties},p=g.name||g.Name||`Waypoint ${d+1}`,v=g.desc||g.description||"",y=g.time||null,E=g.ele||null;return{type:"Feature",geometry:f.geometry,properties:{...g,name:p,description:v,time:y,elevation:E}}}),u=[...new Set(l.filter(f=>f.geometry).map(f=>f.geometry.type))];return u.includes("LineString")&&t.push("GPX track routes worden als lijnen weergegeven"),{success:!0,features:{type:"FeatureCollection",features:l},errors:e,warnings:t,metadata:{featureCount:l.length,geometryTypes:u,coordinateSystem:"WGS84",transformed:!1}}}catch(r){return e.push(`Fout bij parsen GPX: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}function BC(n){switch(n.split(".").pop()?.toLowerCase()){case"geojson":case"json":return"geojson";case"kml":case"kmz":return"kml";case"gpx":return"gpx";default:return"unsupported"}}function lEe(){return".geojson,.json,.kml,.gpx"}function UC(){return"GeoJSON, KML (Google My Maps), GPX"}async function cEe(n){switch(BC(n.name)){case"geojson":return sEe(n);case"kml":return aEe(n);case"gpx":return oEe(n);case"unsupported":default:return{success:!1,features:{type:"FeatureCollection",features:[]},errors:[`Niet-ondersteund bestandsformaat: ${n.name}. Ondersteunde formaten: ${UC()}`],warnings:[],metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}function uEe(n){return n.size>10485760?{valid:!1,error:`Bestand te groot (${(n.size/1024/1024).toFixed(1)} MB). Maximum is 10 MB.`}:BC(n.name)==="unsupported"?{valid:!1,error:`Niet-ondersteund bestandsformaat. Ondersteunde formaten: ${UC()}`}:n.name.toLowerCase().endsWith(".kmz")?{valid:!1,error:"KMZ bestanden worden nog niet ondersteund. Pak het bestand uit en importeer het .kml bestand."}:{valid:!0}}function hEe({isOpen:n,onClose:e}){const t=fE(C=>C.addLayer),r=ce.useRef(null),[i,s]=ce.useState("idle"),[a,o]=ce.useState(null),[l,u]=ce.useState(null),[f,d]=ce.useState(""),[g,p]=ce.useState(null),[v,y]=ce.useState(!1),E=ce.useCallback(()=>{s("idle"),o(null),u(null),d(""),p(null),r.current&&(r.current.value="")},[]),T=ce.useCallback(()=>{E(),e()},[E,e]),R=ce.useCallback(async C=>{const b=uEe(C);if(!b.valid){p(b.error||"Ongeldig bestand"),s("error");return}o(C),s("parsing"),p(null);const L=C.name.replace(/\.[^/.]+$/,"");d(L);try{const F=await cEe(C);if(!F.success){p(F.errors.join(`
`)),s("error");return}if(F.features.features.length===0){p("Geen features gevonden in het bestand"),s("error");return}u(F),s("preview")}catch(F){p(F instanceof Error?F.message:"Onbekende fout bij parsen"),s("error")}},[]),M=ce.useCallback(C=>{const b=C.target.files?.[0];b&&R(b)},[R]),k=ce.useCallback(C=>{C.preventDefault(),y(!0)},[]),V=ce.useCallback(C=>{C.preventDefault(),y(!1)},[]),z=ce.useCallback(C=>{C.preventDefault(),y(!1);const b=C.dataTransfer.files?.[0];b&&R(b)},[R]),P=ce.useCallback(()=>{if(!l||!f.trim())return;const C=a?BC(a.name):"geojson";t({name:f.trim(),type:C==="unsupported"?"geojson":C,features:l.features,visible:!0,opacity:1,color:"",sourceFileName:a?.name||"unknown"}),T()},[l,f,a,t,T]);return w.jsx(_a,{children:n&&w.jsxs(w.Fragment,{children:[w.jsx(rn.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:T}),w.jsxs(rn.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[80vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[w.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(Y9,{size:18}),w.jsx("span",{className:"font-medium",children:"Laag Importeren"})]}),w.jsx("button",{onClick:T,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:w.jsx(mu,{size:18})})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i==="idle"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${v?"border-purple-500 bg-purple-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:k,onDragLeave:V,onDrop:z,children:[w.jsx(XR,{size:40,className:"mx-auto text-gray-400 mb-3"}),w.jsx("p",{className:"text-gray-600 mb-2",children:"Sleep een bestand hierheen"}),w.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"of"}),w.jsx("button",{onClick:()=>r.current?.click(),className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors border-0 outline-none",children:"Bestand kiezen"}),w.jsx("input",{ref:r,type:"file",accept:lEe(),onChange:M,className:"hidden"})]}),w.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[w.jsx("p",{className:"font-medium",children:"Ondersteunde formaten:"}),w.jsx("p",{children:UC()})]})]}),i==="parsing"&&w.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[w.jsx(qR,{size:40,className:"text-purple-500 animate-spin mb-4"}),w.jsx("p",{className:"text-gray-600",children:"Bestand verwerken..."}),w.jsx("p",{className:"text-gray-400 text-sm",children:a?.name})]}),i==="error"&&w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 rounded-lg",children:[w.jsx(U9,{size:20,className:"text-red-500 flex-shrink-0 mt-0.5"}),w.jsxs("div",{children:[w.jsx("p",{className:"font-medium text-red-700",children:"Import mislukt"}),w.jsx("p",{className:"text-sm text-red-600 mt-1 whitespace-pre-wrap",children:g})]})]}),w.jsx("button",{onClick:E,className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border-0 outline-none",children:"Opnieuw proberen"})]}),i==="preview"&&l&&w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg",children:[w.jsx(vse,{size:20,className:"text-green-500 flex-shrink-0 mt-0.5"}),w.jsxs("div",{children:[w.jsx("p",{className:"font-medium text-green-700",children:"Bestand geladen"}),w.jsx("p",{className:"text-sm text-green-600",children:a?.name})]})]}),l.warnings.length>0&&w.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg",children:[w.jsx("p",{className:"font-medium text-amber-700 text-sm",children:"Let op:"}),w.jsx("ul",{className:"text-sm text-amber-600 mt-1 list-disc list-inside",children:l.warnings.map((C,b)=>w.jsx("li",{children:C},b))})]}),w.jsx("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:w.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[w.jsxs("div",{children:[w.jsx("span",{className:"text-gray-500",children:"Features:"}),w.jsx("span",{className:"ml-2 font-medium",children:l.metadata.featureCount})]}),w.jsxs("div",{children:[w.jsx("span",{className:"text-gray-500",children:"Types:"}),w.jsx("span",{className:"ml-2 font-medium",children:l.metadata.geometryTypes.join(", ")||"-"})]})]})}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Naam van de laag"}),w.jsx("input",{type:"text",value:f,onChange:C=>d(C.target.value),placeholder:"Bijv. Mijn locaties",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]})]}),i==="preview"&&w.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 flex gap-2",children:[w.jsx("button",{onClick:E,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border-0 outline-none",children:"Annuleren"}),w.jsx("button",{onClick:P,disabled:!f.trim(),className:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors border-0 outline-none disabled:opacity-50 disabled:cursor-not-allowed",children:"Importeren"})]})]})]})})}function fEe({layer:n}){const{toggleVisibility:e,removeLayer:t}=fE(),[r,i]=ce.useState(!1),s=n.features.features.length,a=[...new Set(n.features.features.map(l=>l.geometry?.type).filter(Boolean))],o=()=>{r?t(n.id):(i(!0),setTimeout(()=>i(!1),3e3))};return w.jsxs("div",{className:"flex items-center justify-between py-1.5 group",children:[w.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[w.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:n.color}}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsx("div",{className:"flex items-center gap-1",children:w.jsx("span",{className:"text-sm text-gray-700 truncate",children:n.name})}),w.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-400",children:[w.jsx(XR,{size:10}),w.jsxs("span",{children:[s," ",s===1?"feature":"features"]}),a.length>0&&w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"mx-0.5",children:""}),w.jsx("span",{children:a.join(", ")})]})]})]})]}),w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsx("button",{onClick:()=>e(n.id),className:`p-1 rounded transition-colors border-0 outline-none ${n.visible?"text-purple-500 hover:bg-purple-50":"text-gray-400 hover:bg-gray-100"}`,title:n.visible?"Verbergen":"Tonen",children:n.visible?w.jsx(W9,{size:14}):w.jsx($9,{size:14})}),w.jsx("button",{onClick:o,className:`p-1 rounded transition-colors border-0 outline-none ${r?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-500 hover:bg-red-50"}`,title:r?"Klik nogmaals om te verwijderen":"Verwijderen",children:w.jsx(QR,{size:14})})]})]})}const dEe="https://forms.gle/R5LCk11Bzu5XrkBj8";function gEe(){const{settingsPanelOpen:n,toggleSettingsPanel:e,vondstDashboardOpen:t,toggleVondstDashboard:r}=ja(),i=zs(),{presets:s,createPreset:a,deletePreset:o,updatePreset:l}=a8(),u=F0(L=>L.vondsten),f=fE(L=>L.layers),[d,g]=ce.useState(""),[p,v]=ce.useState(!1),[y,E]=ce.useState(!1),[T,R]=ce.useState(null),[M,k]=ce.useState(""),V=14*i.fontScale/100,z=()=>{d.trim()&&(a(d.trim(),"Layers"),g(""),v(!1))},P=(L,F)=>{R(L),k(F)},C=L=>{M.trim()&&(l(L,{name:M.trim()}),console.log(` Preset hernoemd naar "${M.trim()}"`)),R(null),k("")},b=()=>{R(null),k("")};return w.jsxs(w.Fragment,{children:[w.jsx(_a,{children:n&&w.jsxs(w.Fragment,{children:[w.jsx(rn.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),w.jsxs(rn.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[w.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(K9,{size:18}),w.jsx("span",{className:"font-medium",children:"Instellingen"})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),w.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:i.fontScale,onInput:L=>{i.setFontScale(parseInt(L.target.value))},onChange:L=>i.setFontScale(parseInt(L.target.value)),className:"header-slider w-20 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${i.fontScale}%`}),w.jsx("span",{className:"text-xs opacity-70",children:"T"}),w.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:w.jsx(mu,{size:18})})]})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",style:{fontSize:`${V}px`},children:[w.jsxs(ed,{title:"Kaart",icon:w.jsx(ZR,{size:16}),children:[w.jsx(mEe,{label:"Standaard achtergrond",children:w.jsxs("select",{value:i.defaultBackground,onChange:L=>i.setDefaultBackground(L.target.value),className:"px-2 py-1 bg-gray-100 rounded border-0 outline-none",style:{fontSize:"0.9em"},children:[w.jsx("option",{value:"CartoDB (licht)",children:"Licht"}),w.jsx("option",{value:"OpenStreetMap",children:"OSM"}),w.jsx("option",{value:"Luchtfoto",children:"Luchtfoto"})]})}),w.jsx(Dg,{label:"Schaalbalk tonen",checked:i.showScaleBar,onChange:i.setShowScaleBar})]}),w.jsxs(ed,{title:"GPS",icon:w.jsx(Vx,{size:16}),children:[w.jsx(Dg,{label:"GPS aan bij start",checked:i.gpsAutoStart,onChange:i.setGpsAutoStart}),w.jsx(Dg,{label:"Nauwkeurigheidscirkel",checked:i.showAccuracyCircle,onChange:i.setShowAccuracyCircle})]}),w.jsx(ed,{title:"Feedback",icon:w.jsx(pae,{size:16}),children:w.jsx(Dg,{label:"Trillen bij acties",checked:i.hapticFeedback,onChange:i.setHapticFeedback})}),w.jsxs(ed,{title:"Vondsten",icon:w.jsx(Vh,{size:16}),children:[w.jsx(Dg,{label:"Vondsten knop tonen",checked:i.showVondstButton,onChange:i.setShowVondstButton}),w.jsx("p",{className:"text-gray-500 mt-1 py-1",style:{fontSize:"0.75em"},children:"Vondsten worden altijd lokaal op dit apparaat opgeslagen."}),w.jsxs("button",{onClick:r,className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[w.jsx(V9,{size:14}),w.jsxs("span",{children:["Dashboard (",u.length," vondsten)"]})]}),w.jsx(pEe,{})]}),w.jsx(ed,{title:"Eigen Lagen",icon:w.jsx(Y9,{size:16}),children:w.jsxs("div",{className:"space-y-1",children:[f.length===0?w.jsx("p",{className:"text-gray-500 py-1",style:{fontSize:"0.75em"},children:"Nog geen eigen lagen gemporteerd."}):f.map(L=>w.jsx(fEe,{layer:L},L.id)),w.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-purple-600 hover:bg-purple-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[w.jsx(jx,{size:14}),w.jsx("span",{children:"Laag importeren"})]}),w.jsx("p",{className:"text-gray-400 mt-1",style:{fontSize:"0.7em"},children:"GeoJSON, KML (Google My Maps), GPX"})]})}),w.jsx(ed,{title:"Presets",icon:w.jsx(g0,{size:16}),children:w.jsxs("div",{className:"space-y-2",children:[s.map(L=>w.jsx("div",{className:"flex items-center justify-between py-1",children:T===L.id?w.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[w.jsx("input",{type:"text",value:M,onChange:F=>k(F.target.value),onKeyDown:F=>{F.key==="Enter"&&C(L.id),F.key==="Escape"&&b()},className:"flex-1 px-2 py-0.5 bg-blue-50 rounded border border-blue-300 outline-none",style:{fontSize:"0.9em"},autoFocus:!0}),w.jsx("button",{onClick:()=>C(L.id),className:"px-2 py-0.5 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors border-0 outline-none",style:{fontSize:"0.7em"},children:"OK"}),w.jsx("button",{onClick:b,className:"px-2 py-0.5 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors border-0 outline-none",style:{fontSize:"0.7em"},children:""})]}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsxs("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:[L.name,L.isBuiltIn&&w.jsx("span",{className:"ml-1 text-gray-400",style:{fontSize:"0.7em"},children:"(standaard)"})]}),w.jsxs("span",{className:"ml-1 text-gray-400",style:{fontSize:"0.7em"},children:["(",L.layers.length," lagen)"]})]}),!L.isBuiltIn&&w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsx("button",{onClick:()=>P(L.id,L.name),className:"p-1 text-blue-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",title:"Naam wijzigen",children:w.jsx(tae,{size:14})}),w.jsx("button",{onClick:()=>o(L.id),className:"p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors border-0 outline-none",title:"Verwijderen",children:w.jsx(QR,{size:14})})]})]})},L.id)),p?w.jsxs("div",{className:"flex gap-2 mt-2",children:[w.jsx("input",{type:"text",value:d,onChange:L=>g(L.target.value),placeholder:"Naam nieuwe preset",className:"flex-1 px-2 py-1 bg-gray-100 rounded border-0 outline-none",style:{fontSize:"0.9em"},onKeyDown:L=>L.key==="Enter"&&z(),autoFocus:!0}),w.jsx("button",{onClick:z,className:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors border-0 outline-none",style:{fontSize:"0.75em"},children:"Opslaan"}),w.jsx("button",{onClick:()=>v(!1),className:"px-2 py-1 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors border-0 outline-none",style:{fontSize:"0.75em"},children:"Annuleren"})]}):w.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[w.jsx(jx,{size:14}),w.jsx("span",{children:"Huidige lagen als preset opslaan"})]})]})})]}),w.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 space-y-2",style:{fontSize:`${V}px`},children:[w.jsxs("a",{href:dEe,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[w.jsx(F9,{size:16}),w.jsx("span",{children:"Meld een bug"})]}),w.jsxs("button",{onClick:qve,className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[w.jsx(Wse,{size:16}),w.jsx("span",{children:"Uitloggen"})]}),w.jsx("p",{className:"text-gray-400 text-center",style:{fontSize:"0.75em"},children:"Instellingen worden lokaal opgeslagen"})]})]})]})}),w.jsx(Zve,{isOpen:t,onClose:r}),w.jsx(hEe,{isOpen:y,onClose:()=>E(!1)})]})}function ed({title:n,icon:e,children:t}){return w.jsxs("section",{children:[w.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-1 border-b border-gray-100",children:[w.jsx("span",{className:"text-blue-600",children:e}),w.jsx("span",{className:"font-medium text-gray-800",style:{fontSize:"1em"},children:n})]}),w.jsx("div",{className:"space-y-2",children:t})]})}function mEe({label:n,children:e}){return w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:n}),e]})}function Dg({label:n,checked:e,onChange:t}){return w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:n}),w.jsx("button",{onClick:()=>t(!e),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${e?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gray-300"}`,children:w.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${e?"left-[22px]":"left-0.5"}`})})]})}function pEe(){const[n,e]=ce.useState(!1),{vondsten:t,exportAsGeoJSON:r,exportAsCSV:i,exportAsExcel:s,exportAsGPX:a,exportAsKML:o}=F0(),l=[{label:"Excel (.xlsx)",action:s,desc:"Spreadsheet"},{label:"CSV",action:i,desc:"Comma-separated"},{label:"GeoJSON",action:r,desc:"GIS software"},{label:"GPX",action:a,desc:"GPS apparaten"},{label:"KML",action:o,desc:"Google Earth"}],u=f=>{f(),e(!1)};return t.length===0?w.jsxs("div",{className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-gray-400 bg-gray-100 rounded w-full cursor-not-allowed",style:{fontSize:"0.9em"},children:[w.jsx(zN,{size:14}),w.jsx("span",{children:"Geen vondsten om te exporteren"})]}):w.jsxs("div",{className:"relative mt-2",children:[w.jsxs("button",{onClick:()=>e(!n),className:"flex items-center justify-between gap-2 px-2 py-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(zN,{size:14}),w.jsxs("span",{children:["Exporteer vondsten (",t.length,")"]})]}),w.jsx("span",{style:{fontSize:"0.8em"},children:""})]}),n&&w.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 overflow-hidden",children:l.map((f,d)=>w.jsxs("button",{onClick:()=>u(f.action),className:"w-full px-3 py-2 text-left hover:bg-blue-50 transition-colors border-0 outline-none flex justify-between items-center",style:{fontSize:"0.9em"},children:[w.jsx("span",{className:"text-gray-700",children:f.label}),w.jsx("span",{className:"text-gray-400",style:{fontSize:"0.8em"},children:f.desc})]},d))})]})}function kS({value:n,onChange:e,options:t,label:r}){const[i,s]=ce.useState(!1),a=ce.useRef(null);return ce.useEffect(()=>{if(!i)return;const o=l=>{a.current&&!a.current.contains(l.target)&&s(!1)};return document.addEventListener("click",o),()=>document.removeEventListener("click",o)},[i]),w.jsxs("div",{ref:a,className:"relative",children:[w.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:r}),w.jsxs("button",{type:"button",onClick:()=>s(!i),className:"w-full flex items-center justify-between px-3 py-1.5 bg-gray-50 rounded text-sm text-gray-600 hover:bg-blue-50 transition-colors text-left",style:{border:"none",outline:"none"},children:[w.jsx("span",{children:n}),w.jsx(j9,{size:14,className:`text-gray-400 transition-transform ${i?"rotate-180":""}`})]}),i&&w.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white rounded shadow-lg max-h-48 overflow-y-auto",children:t.map(o=>w.jsx("button",{type:"button",onClick:()=>{e(o),s(!1)},className:`w-full px-3 py-1.5 text-left text-sm transition-colors ${o===n?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-blue-50"}`,style:{border:"none",outline:"none"},children:o},o))})]})}function _Ee({onClose:n,initialLocation:e}){const t=qD(Y=>Y.user),r=Fi(Y=>Y.position),i=Hs(Y=>Y.map),s=vee(Y=>Y.addVondst),a=F0(Y=>Y.addVondst),o=zs(Y=>Y.vondstenLocalOnly),[l,u]=ce.useState(""),[f,d]=ce.useState("Munt"),[g,p]=ce.useState("Brons"),[v,y]=ce.useState("Romeins (12 v.Chr.-450 n.Chr.)"),[E,T]=ce.useState(!0),[R,M]=ce.useState(!1),[k,V]=ce.useState(""),[z,P]=ce.useState(void 0),[C,b]=ce.useState(void 0),[L,F]=ce.useState(e?"map-pick":r?"gps":"map-center"),[U,j]=ce.useState(e||null),[Te,Me]=ce.useState(!1),Ue=()=>{if(L==="gps"&&r)return{lat:r.lat,lng:r.lng};if(L==="map-pick"&&U)return U;if(i){const Y=i.getView().getCenter();if(Y){const[O,te]=fn(Y);return{lat:te,lng:O}}}return null},ke=Ue();ce.useEffect(()=>{if(!Te||!i)return;const Y=O=>{const[te,ne]=fn(O.coordinate);j({lat:ne,lng:te}),F("map-pick"),Me(!1)};return i.on("click",Y),()=>i.un("click",Y)},[Te,i]);const le=()=>{Me(!0)},Ae=()=>{r&&(F("gps"),j(null))},Ie=async Y=>{Y.preventDefault();const O=Ue();if(!O){alert("Geen locatie beschikbaar");return}if(!o&&!t){alert("Log in om vondsten in de cloud op te slaan");return}M(!0);try{o?(a({location:{lat:O.lat,lng:O.lng},notes:l,objectType:f,material:g,period:v,photoUrl:k||void 0,weight:z,length:C}),alert("Vondst lokaal opgeslagen! ")):(await s({userId:t.uid,location:{lat:O.lat,lng:O.lng,accuracy:L==="gps"?5:50},timestamp:new Date().toISOString(),photos:[],notes:l,objectType:f,material:g,period:v,tags:[v.toLowerCase(),f.toLowerCase()],private:E}),alert("Vondst opgeslagen in cloud! ")),n()}catch(te){alert("Fout bij opslaan: "+te.message)}finally{M(!1)}};return Te?w.jsx(rn.div,{className:"fixed bottom-0 left-0 right-0 z-[2000] p-4",initial:{y:100},animate:{y:0},exit:{y:100},children:w.jsxs("div",{className:"bg-orange-500 text-white rounded-lg shadow-xl p-4 flex items-center justify-between max-w-md mx-auto",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(UN,{size:24,className:"animate-pulse"}),w.jsxs("div",{children:[w.jsx("div",{className:"font-medium",children:"Tik op de kaart"}),w.jsx("div",{className:"text-sm opacity-90",children:"om locatie te kiezen"})]})]}),w.jsx("button",{onClick:()=>Me(!1),className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:"Annuleren"})]})}):w.jsx(rn.div,{className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black/50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:w.jsxs(rn.div,{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},children:[w.jsxs("div",{className:"sticky top-0 z-10 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-3 flex justify-between items-center",children:[w.jsx("h2",{className:"text-lg font-semibold",children:"Nieuwe Vondst"}),w.jsx("button",{onClick:n,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:""})]}),w.jsxs("form",{onSubmit:Ie,className:"p-4 space-y-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Locatie"}),ke&&w.jsxs("div",{className:`p-2 rounded text-sm flex items-center gap-2 ${L==="gps"?"bg-green-50 text-green-800":"bg-orange-50 text-orange-800"}`,children:[L==="gps"?w.jsx(Vx,{size:16,className:"text-green-600"}):w.jsx(Vh,{size:16,className:"text-orange-600"}),w.jsxs("div",{className:"flex-1",children:[w.jsxs("div",{className:"font-medium",children:[L==="gps"&&"GPS locatie",L==="map-center"&&"Kaart centrum",L==="map-pick"&&"Gekozen locatie"]}),w.jsxs("div",{className:"text-xs opacity-75",children:[ke.lat.toFixed(6),", ",ke.lng.toFixed(6)]})]})]}),w.jsxs("div",{className:"flex gap-2 mt-2",children:[r&&L!=="gps"&&w.jsxs("button",{type:"button",onClick:Ae,className:"flex-1 flex items-center justify-center gap-1 px-3 py-1.5 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200 transition-colors border-0 outline-none",children:[w.jsx(Vx,{size:14}),w.jsx("span",{children:"GPS gebruiken"})]}),w.jsxs("button",{type:"button",onClick:le,className:"flex-1 flex items-center justify-center gap-1 px-3 py-1.5 text-xs text-blue-700 rounded hover:bg-blue-100 transition-colors bg-blue-50 outline-none border-0",children:[w.jsx(UN,{size:14}),w.jsx("span",{children:"Kies op kaart"})]})]})]}),w.jsx(kS,{label:"Object type",value:f,onChange:Y=>d(Y),options:["Munt","Aardewerk","Gesp","Fibula","Ring","Speld","Sieraad","Gereedschap","Wapen","Anders"]}),w.jsx(kS,{label:"Materiaal",value:g,onChange:Y=>p(Y),options:["Brons","IJzer","Zilver","Goud","Keramiek","Steen","Glas","Onbekend"]}),w.jsx(kS,{label:"Periode",value:v,onChange:Y=>y(Y),options:["Romeins (12 v.Chr.-450 n.Chr.)","IJzertijd","Middeleeuws (450-1500)","Nieuwetijd (1500-1800)","Modern (1800+)","Onbekend"]}),w.jsxs("div",{className:"flex gap-3",children:[w.jsxs("div",{className:"flex-1",children:[w.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Gewicht (g)"}),w.jsx("input",{type:"number",value:z??"",onChange:Y=>P(Y.target.value?parseFloat(Y.target.value):void 0),className:"w-full rounded px-3 py-1.5 bg-gray-50 outline-none text-sm text-gray-600 hover:bg-blue-50 transition-colors",style:{border:"none"},min:"0",step:"0.1",placeholder:"12.5"})]}),w.jsxs("div",{className:"flex-1",children:[w.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Lengte (mm)"}),w.jsx("input",{type:"number",value:C??"",onChange:Y=>b(Y.target.value?parseFloat(Y.target.value):void 0),className:"w-full rounded px-3 py-1.5 bg-gray-50 outline-none text-sm text-gray-600 hover:bg-blue-50 transition-colors",style:{border:"none"},min:"0",step:"0.1",placeholder:"25"})]})]}),w.jsxs("div",{children:[w.jsxs("label",{className:"block text-sm text-gray-600 mb-1 flex items-center gap-1",children:[w.jsx(Vse,{size:12,className:"text-blue-500"}),"Foto link"]}),w.jsx("input",{type:"url",value:k,onChange:Y=>V(Y.target.value),className:"w-full rounded px-3 py-1.5 bg-gray-50 outline-none text-sm text-gray-600 hover:bg-blue-50 transition-colors",style:{border:"none"},placeholder:"https://photos.google.com/..."})]}),w.jsxs("div",{children:[w.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Notities"}),w.jsx("textarea",{value:l,onChange:Y=>u(Y.target.value),className:"w-full rounded px-3 py-1.5 h-16 bg-gray-50 outline-none text-sm text-gray-600 hover:bg-blue-50 transition-colors resize-none",style:{border:"none"},placeholder:"Beschrijving..."})]}),w.jsx("p",{className:"text-xs text-gray-500 bg-gray-50 rounded px-3 py-2",children:"Vondsten worden lokaal opgeslagen op dit apparaat."}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-1.5 rounded hover:bg-blue-50 transition-colors bg-gray-100 outline-none text-sm text-gray-600",style:{border:"none"},children:"Annuleren"}),w.jsx("button",{type:"submit",disabled:R||!ke||Te,className:"flex-1 px-4 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 outline-none text-sm",style:{border:"none"},children:R?"Opslaan...":"Opslaan"})]})]})]})})}function yEe(){const{user:n,setUser:e,setLoading:t}=qD();return ce.useEffect(()=>{const s=bQ(J2,a=>{e(a),t(!1)});return()=>s()},[e,t]),{user:n,loginAnonymous:async()=>{try{await TQ(J2)}catch(s){console.error("Login failed:",s)}},logout:async()=>{try{await MQ(J2)}catch(s){console.error("Logout failed:",s)}},isAuthenticated:!!n}}function xEe(){const{isAuthenticated:n,loginAnonymous:e}=yEe(),t=zs(u=>u.vondstenLocalOnly),r=zs(u=>u.showVondstButton),i=ja(u=>u.vondstFormOpen),s=ja(u=>u.vondstFormLocation),a=ja(u=>u.openVondstForm),o=ja(u=>u.closeVondstForm);if(!r)return null;const l=()=>{if(t){a();return}if(!n){confirm("Je moet ingelogd zijn om vondsten in de cloud op te slaan. Anoniem inloggen?")&&e();return}a()};return w.jsxs(w.Fragment,{children:[w.jsx(rn.button,{className:"fixed bottom-2 right-[60px] z-[1000] w-11 h-11 bg-orange-500 hover:bg-orange-600 text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:l,title:"Vondst toevoegen",children:w.jsx(Vh,{size:22,strokeWidth:2})}),w.jsx(_a,{children:i&&w.jsx(_Ee,{onClose:o,initialLocation:s||void 0})})]})}const aO={Munt:"#f59e0b",Aardewerk:"#a16207",Gesp:"#6b7280",Fibula:"#8b5cf6",Ring:"#ec4899",Speld:"#6366f1",Sieraad:"#f43f5e",Gereedschap:"#64748b",Wapen:"#ef4444",Anders:"#3b82f6"},vEe={Munt:"M",Aardewerk:"A",Gesp:"G",Fibula:"F",Ring:"R",Speld:"S",Sieraad:"Si",Gereedschap:"Gr",Wapen:"W",Anders:"?"};function EEe(){const n=Hs(i=>i.map),e=F0(i=>i.vondsten),t=Kr(i=>i.visible["Mijn Vondsten"]),r=ce.useRef(null);return ce.useEffect(()=>{if(!n)return;const i=new Av;return e.forEach(s=>{const a=new Mo({geometry:new Oo(Kd([s.location.lng,s.location.lat])),vondst:s}),o=aO[s.objectType]||aO.Anders,l=vEe[s.objectType]||"?";a.setStyle((u,f)=>{let v=12;f>50?v=6:f>10?v=Math.max(6,12-(f-10)/10):f<2&&(v=14);const y=Math.max(8,Math.min(12,v-2));return new ar({image:new Xc({radius:v,fill:new Ai({color:o}),stroke:new Fs({color:"#ffffff",width:v>8?2:1})}),text:v>=8?new v0({text:l,font:`bold ${y}px sans-serif`,fill:new Ai({color:"#ffffff"}),offsetY:1}):void 0})}),i.addFeature(a)}),r.current?r.current.setSource(i):(r.current=new Mv({source:i,zIndex:1e3,properties:{title:"Mijn Vondsten"}}),r.current.setVisible(t),n.addLayer(r.current)),()=>{r.current&&n&&(n.removeLayer(r.current),r.current=null)}},[n,e]),ce.useEffect(()=>{r.current&&r.current.setVisible(t)},[t]),null}class oO{buffer=[];size;weights;constructor(e=8){this.size=e,this.weights=Array.from({length:e},(r,i)=>Math.pow(2,i));const t=this.weights.reduce((r,i)=>r+i,0);this.weights=this.weights.map(r=>r/t)}add(e){if(this.buffer.length>0){const t=this.buffer[this.buffer.length-1];let r=e-t;r>180&&(e-=360),r<-180&&(e+=360)}this.buffer.push(e),this.buffer.length>this.size&&this.buffer.shift()}getSmoothed(){if(this.buffer.length===0)return null;if(this.buffer.length===1)return this.normalizeHeading(this.buffer[0]);let e=0,t=0;const r=this.size-this.buffer.length;for(let i=0;i<this.buffer.length;i++){const s=this.weights[r+i];e+=this.buffer[i]*s,t+=s}return this.normalizeHeading(e/t)}normalizeHeading(e){return(e%360+360)%360}clear(){this.buffer=[]}}function wEe(){const n=Fi(u=>u.tracking),e=Fi(u=>u.headingSource);Fi(u=>u.speed);const t=Fi(u=>u.setSmoothedHeading),r=ce.useRef(new oO(6)),i=ce.useRef(new oO(10)),s=ce.useRef(0),a=ce.useRef(null),o=33,l=ce.useCallback((u,f)=>{const d=performance.now();if(d-s.current<o)return;const g=f==="gps"?r.current:i.current;g.add(u);const p=g.getSmoothed();p!==null&&(s.current=d,t(p))},[t]);ce.useEffect(()=>{if(!n)return;const u=d=>{d.coords.heading!==null&&d.coords.speed!==null&&d.coords.speed>.8&&d.coords.accuracy<20&&l(d.coords.heading,"gps")},f=navigator.geolocation.watchPosition(u,()=>{},{enableHighAccuracy:!0,maximumAge:500,timeout:1e4});return()=>navigator.geolocation.clearWatch(f)},[n,l]),ce.useEffect(()=>{if(!n||e!=="compass")return;let u=0;const f=50,d=p=>{const v=performance.now();if(!(v-u<f)&&(u=v,p.alpha!==null)){const y=(360-p.alpha)%360;l(y,"compass")}},g=p=>{const v=performance.now();v-u<f||(u=v,p.webkitCompassHeading!==void 0&&l(p.webkitCompassHeading,"compass"))};return window.addEventListener("deviceorientationabsolute",d),window.addEventListener("deviceorientation",g),()=>{window.removeEventListener("deviceorientationabsolute",d),window.removeEventListener("deviceorientation",g)}},[n,e,l]),ce.useEffect(()=>{n||(r.current.clear(),i.current.clear())},[n]),ce.useEffect(()=>()=>{a.current&&cancelAnimationFrame(a.current)},[])}function SEe(){const n=Hs(i=>i.map),e=Kr(i=>i.setLayerOpacity),t=Kr(i=>i.visible),r=ce.useRef(null);ce.useEffect(()=>{if(!n)return;const i=()=>{const s=n.getView().getZoom();if(!s||r.current!==null&&Math.abs(s-r.current)<.5)return;r.current=s;const a=t["AHN 0.5m"],o=t["AHN4 Multi-Hillshade NL"];!a&&!o||(a&&(s>=18?e("AHN 0.5m",.85):s>=16?e("AHN 0.5m",.75):s>=14?e("AHN 0.5m",.65):e("AHN 0.5m",.55)),o&&(s>=18?e("AHN4 Multi-Hillshade NL",.8):s>=16?e("AHN4 Multi-Hillshade NL",.7):s>=14?e("AHN4 Multi-Hillshade NL",.6):e("AHN4 Multi-Hillshade NL",.5)))};return n.on("moveend",i),i(),()=>{n.un("moveend",i)}},[n,t,e])}function TEe(){wEe(),SEe();const e=14*zs(t=>t.fontScale)/100;return w.jsx(Xve,{children:w.jsxs("div",{style:{fontSize:`${e}px`},children:[w.jsx(Ree,{}),w.jsx(Mae,{}),w.jsx(EEe,{}),w.jsx(tEe,{}),w.jsx(Pve,{}),w.jsx(bve,{}),w.jsx(Hve,{}),w.jsx(Pae,{}),w.jsx(Kve,{}),w.jsx(Nae,{}),w.jsx(Lae,{}),w.jsx(Wve,{}),w.jsx(Mve,{}),w.jsx(Dve,{}),w.jsx(xEe,{}),w.jsx(Vve,{}),w.jsx(Uve,{}),w.jsx(gEe,{})]})})}const IEe="2.10.9";console.log(`%c DetectorApp v${IEe}`,"background: #4CAF50; color: white; padding: 4px 8px; border-radius: 4px; font-weight: bold;");KG.createRoot(document.getElementById("root")).render(w.jsx(TEe,{}));export{Ai as F,uC as G,b$ as I,Oo as P,ar as S,$u as T,Mv as V,id as X,hW as a,rW as b,Fs as c,Av as d,v0 as e,Mo as f,Kd as g,Fp as h,Qt as p,q7 as r};
//# sourceMappingURL=index-CGmVuqna.js.map
